# This file is generated by the template.

REGISTRY?=lcr.loongnix.cn
ORGANIZATION?=kubernetes
REPOSITORY?=pause
TAG?=3.4.1

IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):$(TAG)


default: image

src: clean
	git clone --depth 1 -b v1.21.0-alpha.1 https://github.com/kubernetes/kubernetes src && \
		cd src && git apply ../0001-add-loong64.patch

image: src
	cd src/build/pause && make build && make container

push: image
	docker push $(IMAGE)-linux-loong64

clean:
	rm -rf src
