# This file is generated by the template.

REGISTRY?=lcr.loongnix.cn
ORGANIZATION?=library
REPOSITORY?=haproxy
TAG?=2.8.7

IMAGE=$(REGISTRY)/$(ORGANIZATION)/$(REPOSITORY):$(TAG)

default: image

image:
	docker build 		-t $(IMAGE) 		-t $(IMAGE)-sid 		--build-arg HAPROXY_VERSION=2.8.7 --build-arg HAPROXY_URL=https://www.haproxy.org/download/2.8/src/haproxy-2.8.7.tar.gz .

image-alpine:
	docker build                 -t $(IMAGE)-alpine                 -t $(IMAGE)-alpine3.21 		-f Dockerfile-alpine                 --build-arg HAPROXY_VERSION=2.8.7 --build-arg HAPROXY_URL=https://www.haproxy.org/download/2.8/src/haproxy-2.8.7.tar.gz .
push:
	docker push $(IMAGE)
	docker push $(IMAGE)-sid
	docker push $(IMAGE)-alpine
	docker push $(IMAGE)-alpine3.21
