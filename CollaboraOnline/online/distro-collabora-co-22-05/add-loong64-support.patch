From 59b662b88756c10b8596cf815834c8ede8784437 Mon Sep 17 00:00:00 2001
From: Your Name <sdsad>
Date: Sat, 7 Jun 2025 10:21:03 +0800
Subject: [PATCH] add loong64 support

Signed-off-by: Your Name <sdsad>
---
 .../0001-add-loong64-support-online.patch     |    15 +
 .../0001-add-loong64-support.patch            | 22075 ++++++++++++++++
 docker/from-source/Debian-Loongarch64         |    45 +
 docker/from-source/build.sh                   |    45 +-
 4 files changed, 22152 insertions(+), 28 deletions(-)
 create mode 100644 docker/from-source/0001-add-loong64-support-online.patch
 create mode 100644 docker/from-source/0001-add-loong64-support.patch
 create mode 100644 docker/from-source/Debian-Loongarch64

diff --git a/docker/from-source/0001-add-loong64-support-online.patch b/docker/from-source/0001-add-loong64-support-online.patch
new file mode 100644
index 0000000..b0e92a0
--- /dev/null
+++ b/docker/from-source/0001-add-loong64-support-online.patch
@@ -0,0 +1,15 @@
+diff --git a/common/Seccomp.cpp b/common/Seccomp.cpp
+index 3b704da..e44f1d1 100644
+--- a/common/Seccomp.cpp
++++ b/common/Seccomp.cpp
+@@ -57,6 +57,10 @@
+ #  define AUDIT_ARCH_NR AUDIT_ARCH_PPC64
+ #  define SECCOMP_REG(_ctx, _reg) ((_ctx)->uc_mcontext.regs->gpr[_reg])
+ #  define SECCOMP_SYSCALL(_ctx)   SECCOMP_REG(_ctx, 0)
++#elif defined(__loongarch__)
++#  define AUDIT_ARCH_NR AUDIT_ARCH_LOONGARCH64
++#  define SECCOMP_REG(_ctx, _reg) ((_ctx)->uc_mcontext.__gregs[_reg])
++#  define SECCOMP_SYSCALL(_ctx)   SECCOMP_REG(_ctx, 4)
+ #else
+ #  error "Platform does not support seccomp filtering yet - unsafe."
+ #endif
diff --git a/docker/from-source/0001-add-loong64-support.patch b/docker/from-source/0001-add-loong64-support.patch
new file mode 100644
index 0000000..8d3e679
--- /dev/null
+++ b/docker/from-source/0001-add-loong64-support.patch
@@ -0,0 +1,22075 @@
+From 0171b388054c86613639b025adb5099c2eb16450 Mon Sep 17 00:00:00 2001
+From: Your Name <sdsad>
+Date: Sat, 7 Jun 2025 10:18:19 +0800
+Subject: [PATCH] add loong64 support
+
+Signed-off-by: Your Name <sdsad>
+Change-Id: I7f0735b89b4fc0a794b01b948941117f1730c286
+---
+ Makefile.fetch                                |    8 +-
+ bin/oss-fuzz-setup.sh                         |    2 +-
+ bridges/Library_cpp_uno.mk                    |    9 +
+ .../cpp_uno/gcc3_linux_loongarch64/call.hxx   |   33 +
+ .../cpp_uno/gcc3_linux_loongarch64/call.s     |  125 +
+ .../gcc3_linux_loongarch64/cpp2uno.cxx        |  559 ++
+ .../cpp_uno/gcc3_linux_loongarch64/except.cxx |  251 +
+ .../cpp_uno/gcc3_linux_loongarch64/share.hxx  |   85 +
+ .../gcc3_linux_loongarch64/uno2cpp.cxx        |  546 ++
+ config.guess                                  | 1274 ++--
+ config.sub                                    |  993 ++-
+ configure.ac                                  |    7 +-
+ download.lst                                  |   12 +-
+ external/config.guess                         | 1815 +++++
+ external/config.sub                           | 2354 +++++++
+ external/libcmis/0003-update-config.patch     | 5818 +++++++++++++++++
+ external/libcmis/UnpackedTarball_libcmis.mk   |    1 +
+ external/nss/ExternalProject_nss.mk           |    1 +
+ external/python3/ExternalPackage_python3.mk   |   12 +-
+ external/python3/README                       |    6 +-
+ external/python3/UnpackedTarball_python3.mk   |    8 -
+ ...zlib.patch.0 => internal-zlib.patch.0-old} |    0
+ ...atch.1 => python-3.3.0-darwin.patch.1-old} |    0
+ ...=> python-3.5.tweak.strip.soabi.patch-old} |    0
+ fontconfig-update-config.patch                | 4507 +++++++++++++
+ include/LibreOfficeKit/LibreOfficeKit.h       |   86 +-
+ include/LibreOfficeKit/LibreOfficeKit.h-old   |  545 ++
+ include/LibreOfficeKit/LibreOfficeKit.hxx     |  213 +-
+ include/LibreOfficeKit/LibreOfficeKit.hxx-old | 1196 ++++
+ include/LibreOfficeKit/LibreOfficeKitTypes.h  |    4 +
+ jvmfwk/inc/vendorbase.hxx                     |    6 +-
+ .../gbuild/platform/LINUX_LOONGARCH64_GCC.mk  |   12 +
+ 32 files changed, 19595 insertions(+), 893 deletions(-)
+ create mode 100644 bridges/source/cpp_uno/gcc3_linux_loongarch64/call.hxx
+ create mode 100644 bridges/source/cpp_uno/gcc3_linux_loongarch64/call.s
+ create mode 100644 bridges/source/cpp_uno/gcc3_linux_loongarch64/cpp2uno.cxx
+ create mode 100644 bridges/source/cpp_uno/gcc3_linux_loongarch64/except.cxx
+ create mode 100644 bridges/source/cpp_uno/gcc3_linux_loongarch64/share.hxx
+ create mode 100644 bridges/source/cpp_uno/gcc3_linux_loongarch64/uno2cpp.cxx
+ create mode 100644 external/config.guess
+ create mode 100644 external/config.sub
+ create mode 100644 external/libcmis/0003-update-config.patch
+ rename external/python3/{internal-zlib.patch.0 => internal-zlib.patch.0-old} (100%)
+ rename external/python3/{python-3.3.0-darwin.patch.1 => python-3.3.0-darwin.patch.1-old} (100%)
+ rename external/python3/{python-3.5.tweak.strip.soabi.patch => python-3.5.tweak.strip.soabi.patch-old} (100%)
+ create mode 100644 fontconfig-update-config.patch
+ create mode 100644 include/LibreOfficeKit/LibreOfficeKit.h-old
+ create mode 100644 include/LibreOfficeKit/LibreOfficeKit.hxx-old
+ create mode 100644 solenv/gbuild/platform/LINUX_LOONGARCH64_GCC.mk
+
+diff --git a/Makefile.fetch b/Makefile.fetch
+index 3dd9f4b79..b1f777e74 100644
+--- a/Makefile.fetch
++++ b/Makefile.fetch
+@@ -108,7 +108,6 @@ $(WORKDIR)/download: $(BUILDDIR)/config_$(gb_Side).mk $(SRCDIR)/download.lst $(S
+ 		$(call fetch_Optional,BREAKPAD,BREAKPAD_TARBALL) \
+ 		$(call fetch_Optional,BSH,BSH_TARBALL) \
+ 		$(call fetch_Optional,BZIP2,BZIP2_TARBALL) \
+-		$(call fetch_Optional,CAIRO,CAIRO_TARBALL) \
+ 		$(call fetch_Optional,CAIRO,PIXMAN_TARBALL) \
+ 		$(call fetch_Optional,CDR,CDR_TARBALL) \
+ 		$(call fetch_Optional,CLUCENE,CLUCENE_TARBALL) \
+@@ -124,7 +123,6 @@ $(WORKDIR)/download: $(BUILDDIR)/config_$(gb_Side).mk $(SRCDIR)/download.lst $(S
+ 		$(call fetch_Optional,ETONYEK,ETONYEK_TARBALL) \
+ 		$(call fetch_Optional,EXPAT,EXPAT_TARBALL) \
+ 		$(call fetch_Optional,FIREBIRD,FIREBIRD_TARBALL) \
+-		$(call fetch_Optional,FONTCONFIG,FONTCONFIG_TARBALL) \
+ 		$(call fetch_Optional,FREEHAND,FREEHAND_TARBALL) \
+ 		$(call fetch_Optional,FREETYPE,FREETYPE_TARBALL) \
+ 		$(call fetch_Optional,EPOXY,EPOXY_TARBALL) \
+@@ -209,7 +207,6 @@ $(WORKDIR)/download: $(BUILDDIR)/config_$(gb_Side).mk $(SRCDIR)/download.lst $(S
+ 		$(call fetch_Optional,POPPLER,POPPLER_TARBALL) \
+ 		$(call fetch_Optional,POPPLER,POPPLER_DATA_TARBALL) \
+ 		$(call fetch_Optional,POSTGRESQL,POSTGRESQL_TARBALL) \
+-		$(call fetch_Optional,PYTHON,PYTHON_TARBALL) \
+ 		$(call fetch_Optional,QXP,QXP_TARBALL) \
+ 		$(call fetch_Optional,REDLAND,RAPTOR_TARBALL) \
+ 		$(call fetch_Optional,REDLAND,RASQAL_TARBALL) \
+@@ -230,6 +227,11 @@ $(WORKDIR)/download: $(BUILDDIR)/config_$(gb_Side).mk $(SRCDIR)/download.lst $(S
+ 		$(call fetch_Optional,ZLIB,ZLIB_TARBALL) \
+ 		$(call fetch_Optional,ZMF,ZMF_TARBALL) \
+ 	,$(call fetch_Download_item,https://dev-www.libreoffice.org/src,$(item)))
++	$(foreach item, \
++        $(call fetch_Optional,FONTCONFIG,FONTCONFIG_TARBALL) \
++		$(call fetch_Optional,PYTHON,PYTHON_TARBALL) \
++        $(call fetch_Optional,CAIRO,CAIRO_TARBALL) \
++    ,$(call fetch_Download_item,https://gitee.com/zeweiy/libtool/releases/download/2.4.6,$(item)))
+ 	$(foreach item, \
+ 		$(call fetch_Optional,OPENSYMBOL,OPENSYMBOL_TTF) \
+ 		$(call fetch_Optional,ODFVALIDATOR,ODFVALIDATOR_JAR) \
+diff --git a/bin/oss-fuzz-setup.sh b/bin/oss-fuzz-setup.sh
+index b2b0be8a0..16b177945 100755
+--- a/bin/oss-fuzz-setup.sh
++++ b/bin/oss-fuzz-setup.sh
+@@ -64,7 +64,7 @@ curl --no-progress-meter -S \
+     -C - -O https://dev-www.libreoffice.org/src/$LIBXSLT_TARBALL \
+     -C - -O https://dev-www.libreoffice.org/src/$HUNSPELL_TARBALL \
+     -C - -O https://dev-www.libreoffice.org/src/$FREETYPE_TARBALL \
+-    -C - -O https://dev-www.libreoffice.org/src/$FONTCONFIG_TARBALL \
++    -C - -O https://gitee.com/zeweiy/libtool/releases/download/2.4.6/$FONTCONFIG_TARBALL \
+     -C - -O https://dev-www.libreoffice.org/src/$EPOXY_TARBALL \
+     -C - -O https://dev-www.libreoffice.org/src/$EPUBGEN_TARBALL \
+     -C - -O https://dev-www.libreoffice.org/src/$LIBNUMBERTEXT_TARBALL \
+diff --git a/bridges/Library_cpp_uno.mk b/bridges/Library_cpp_uno.mk
+index 3a31bf69f..a76d2b855 100644
+--- a/bridges/Library_cpp_uno.mk
++++ b/bridges/Library_cpp_uno.mk
+@@ -111,6 +111,15 @@ bridge_noopt_objects := cpp2uno uno2cpp
+ bridge_exception_objects := except
+ endif
+ 
++else ifeq ($(CPUNAME),LOONGARCH64)
++
++ifneq ($(filter LINUX,$(OS)),)
++bridges_SELECTED_BRIDGE := gcc3_linux_loongarch64
++bridge_asm_objects := call
++bridge_noopt_objects := cpp2uno uno2cpp
++bridge_exception_objects := except
++endif
++
+ else ifeq ($(CPUNAME),POWERPC)
+ 
+ ifneq ($(filter DRAGONFLY FREEBSD LINUX NETBSD OPENBSD,$(OS)),)
+diff --git a/bridges/source/cpp_uno/gcc3_linux_loongarch64/call.hxx b/bridges/source/cpp_uno/gcc3_linux_loongarch64/call.hxx
+new file mode 100644
+index 000000000..51b9772c0
+--- /dev/null
++++ b/bridges/source/cpp_uno/gcc3_linux_loongarch64/call.hxx
+@@ -0,0 +1,33 @@
++/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4; fill-column: 100 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ *
++ * This file incorporates work covered by the following license notice:
++ *
++ *   Licensed to the Apache Software Foundation (ASF) under one or more
++ *   contributor license agreements. See the NOTICE file distributed
++ *   with this work for additional information regarding copyright
++ *   ownership. The ASF licenses this file to you under the Apache
++ *   License, Version 2.0 (the "License"); you may not use this file
++ *   except in compliance with the License. You may obtain a copy of
++ *   the License at http://www.apache.org/licenses/LICENSE-2.0 .
++ */
++
++#pragma once
++
++#include <sal/config.h>
++
++#include <sal/types.h>
++
++namespace
++{
++extern "C" typelib_TypeClass
++cpp_vtable_call(sal_Int32 nFunctionIndex, sal_Int32 nVtableOffset, void** gpreg, void** fpreg,
++                void** ovrflw, sal_uInt64* pRegisterReturn /* space for register return */);
++}
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab cinoptions=b1,g0,N-s cinkeys+=0=break: */
+diff --git a/bridges/source/cpp_uno/gcc3_linux_loongarch64/call.s b/bridges/source/cpp_uno/gcc3_linux_loongarch64/call.s
+new file mode 100644
+index 000000000..b8388508e
+--- /dev/null
++++ b/bridges/source/cpp_uno/gcc3_linux_loongarch64/call.s
+@@ -0,0 +1,125 @@
++/* -*- tab-width: 4; indent-tabs-mode: nil; fill-column: 100 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ *
++ * This file incorporates work covered by the following license notice:
++ *
++ *   Licensed to the Apache Software Foundation (ASF) under one or more
++ *   contributor license agreements. See the NOTICE file distributed
++ *   with this work for additional information regarding copyright
++ *   ownership. The ASF licenses this file to you under the Apache
++ *   License, Version 2.0 (the "License"); you may not use this file
++ *   except in compliance with the License. You may obtain a copy of
++ *   the License at http://www.apache.org/licenses/LICENSE-2.0 .
++ */
++
++        .text
++        .globl	privateSnippetExecutor
++.LFB0 = .
++        .cfi_startproc
++        .cfi_personality 0x80,DW.ref.__gxx_personality_v0
++        .cfi_lsda 0,.LLSDA0
++        .type	privateSnippetExecutor, @function
++privateSnippetExecutor:
++        addi.d	$sp,$sp,-160
++        .cfi_def_cfa_offset 160
++        st.d	$ra,$sp,152
++        .cfi_offset 1, -8
++.LEHB0 = .
++        // Save the float point registers
++        fst.d	$f0,$sp,80
++        fst.d	$f1,$sp,88
++        fst.d	$f2,$sp,96
++        fst.d	$f3,$sp,104
++        fst.d	$f4,$sp,112
++        fst.d	$f5,$sp,120
++        fst.d	$f6,$sp,128
++        fst.d	$f7,$sp,136
++        // Save the general purpose registers
++        st.d	$a0,$sp,16
++        st.d	$a1,$sp,24
++        st.d	$a2,$sp,32
++        st.d	$a3,$sp,40
++        st.d	$a4,$sp,48
++        st.d	$a5,$sp,56
++        st.d	$a6,$sp,64
++        st.d	$a7,$sp,72
++        // Load arguments
++        // a0=index
++        move	$a0,$t6
++        // a1=offset
++        move	$a1,$t7
++        // a2=gpregptr
++        addi.d	$a2,$sp,16
++        // a3=fpregptr
++        addi.d	$a3,$sp,80
++        // a4=ovrflw
++        addi.d	$a4,$sp,160
++        // a5=retregptr
++        move	$a5,$sp
++
++        // Call cpp_vtable_call
++        jirl	$ra,$t5,0
++
++.LEHE0 = .
++        // Perform return value
++        fld.d	$f0,$sp,0
++        fld.d	$f1,$sp,8
++        ld.d	$a0,$sp,0
++        ld.d	$a1,$sp,8
++
++        ld.d	$ra,$sp,152
++        .cfi_restore 1
++        addi.d	$sp,$sp,160
++        .cfi_def_cfa_offset 0
++        jr	$ra
++        .cfi_endproc
++
++.LFE0:
++        .globl	__gxx_personality_v0
++        .section	.gcc_except_table,"aw",@progbits
++        .align	3
++.LLSDA0:
++        .byte	0xff
++        .byte	0x80
++        .uleb128 .LLSDATT0-.LLSDATTD0
++.LLSDATTD0:
++        .byte	0x1
++        .uleb128 .LLSDACSE0-.LLSDACSB0
++.LLSDACSB0:
++        .uleb128 .LEHB0-.LFB0
++        .uleb128 .LEHE0-.LEHB0
++        .uleb128 0
++        .uleb128 0
++.LLSDACSE0:
++        .byte	0x7f
++        .byte	0
++        .align	3
++        .8byte	DW.ref._ZTIi
++.LLSDATT0:
++        .byte	0x1
++        .byte	0
++        .text
++        .size	privateSnippetExecutor, .-privateSnippetExecutor
++        .hidden	DW.ref._ZTIi
++        .weak	DW.ref._ZTIi
++        .section	.data.DW.ref._ZTIi,"awG",@progbits,DW.ref._ZTIi,comdat
++        .align	3
++        .type	DW.ref._ZTIi, @object
++        .size	DW.ref._ZTIi, 8
++DW.ref._ZTIi:
++        .dword	_ZTIi
++        .hidden	DW.ref.__gxx_personality_v0
++        .weak	DW.ref.__gxx_personality_v0
++        .section	.data.DW.ref.__gxx_personality_v0,"awG",@progbits,DW.ref.__gxx_personality_v0,comdat
++        .align	3
++        .type	DW.ref.__gxx_personality_v0, @object
++        .size	DW.ref.__gxx_personality_v0, 8
++DW.ref.__gxx_personality_v0:
++        .dword	__gxx_personality_v0
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab cinoptions=b1,g0,N-s cinkeys+=0=break: */
+diff --git a/bridges/source/cpp_uno/gcc3_linux_loongarch64/cpp2uno.cxx b/bridges/source/cpp_uno/gcc3_linux_loongarch64/cpp2uno.cxx
+new file mode 100644
+index 000000000..0273b39da
+--- /dev/null
++++ b/bridges/source/cpp_uno/gcc3_linux_loongarch64/cpp2uno.cxx
+@@ -0,0 +1,559 @@
++/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4; fill-column: 100 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ *
++ * This file incorporates work covered by the following license notice:
++ *
++ *   Licensed to the Apache Software Foundation (ASF) under one or more
++ *   contributor license agreements. See the NOTICE file distributed
++ *   with this work for additional information regarding copyright
++ *   ownership. The ASF licenses this file to you under the Apache
++ *   License, Version 2.0 (the "License"); you may not use this file
++ *   except in compliance with the License. You may obtain a copy of
++ *   the License at http://www.apache.org/licenses/LICENSE-2.0 .
++ */
++
++#include <com/sun/star/uno/genfunc.hxx>
++#include <sal/log.hxx>
++#include <typelib/typedescription.hxx>
++#include <uno/data.h>
++#include <osl/endian.h>
++#include "bridge.hxx"
++#include "cppinterfaceproxy.hxx"
++#include "types.hxx"
++#include "vtablefactory.hxx"
++#include "call.hxx"
++#include "share.hxx"
++
++#include <stdio.h>
++#include <string.h>
++
++using namespace com::sun::star::uno;
++
++namespace CPPU_CURRENT_NAMESPACE
++{
++bool is_complex_struct(const typelib_TypeDescription* type)
++{
++    const typelib_CompoundTypeDescription* p
++        = reinterpret_cast<const typelib_CompoundTypeDescription*>(type);
++    for (sal_Int32 i = 0; i < p->nMembers; ++i)
++    {
++        if (p->ppTypeRefs[i]->eTypeClass == typelib_TypeClass_STRUCT
++            || p->ppTypeRefs[i]->eTypeClass == typelib_TypeClass_EXCEPTION)
++        {
++            typelib_TypeDescription* t = 0;
++            TYPELIB_DANGER_GET(&t, p->ppTypeRefs[i]);
++            bool b = is_complex_struct(t);
++            TYPELIB_DANGER_RELEASE(t);
++            if (b)
++            {
++                return true;
++            }
++        }
++        else if (!bridges::cpp_uno::shared::isSimpleType(p->ppTypeRefs[i]->eTypeClass))
++            return true;
++    }
++    if (p->pBaseTypeDescription != 0)
++        return is_complex_struct(&p->pBaseTypeDescription->aBase);
++    return false;
++}
++
++bool return_in_hidden_param(typelib_TypeDescriptionReference* pTypeRef)
++{
++    if (bridges::cpp_uno::shared::isSimpleType(pTypeRef))
++        return false;
++    else if (pTypeRef->eTypeClass == typelib_TypeClass_STRUCT
++             || pTypeRef->eTypeClass == typelib_TypeClass_EXCEPTION)
++    {
++        typelib_TypeDescription* pTypeDescr = 0;
++        TYPELIB_DANGER_GET(&pTypeDescr, pTypeRef);
++
++        //A Composite Type not larger than 16 bytes is returned in up to two GPRs
++        bool bRet = pTypeDescr->nSize > 16 || is_complex_struct(pTypeDescr);
++
++        TYPELIB_DANGER_RELEASE(pTypeDescr);
++        return bRet;
++    }
++    return true;
++}
++}
++
++namespace
++{
++static typelib_TypeClass
++cpp2uno_call(bridges::cpp_uno::shared::CppInterfaceProxy* pThis,
++             const typelib_TypeDescription* pMemberTypeDescr,
++             typelib_TypeDescriptionReference* pReturnTypeRef, // 0 indicates void return
++             sal_Int32 nParams, typelib_MethodParameter* pParams, void** gpreg, void** fpreg,
++             void** ovrflw, sal_uInt64* pRegisterReturn /* space for register return */)
++{
++    unsigned int nREG = 0;
++
++    // return
++    typelib_TypeDescription* pReturnTypeDescr = 0;
++    if (pReturnTypeRef)
++        TYPELIB_DANGER_GET(&pReturnTypeDescr, pReturnTypeRef);
++
++    void* pUnoReturn = 0;
++    void* pCppReturn = 0; // complex return ptr: if != 0 && != pUnoReturn, reconversion need
++
++    if (pReturnTypeDescr)
++    {
++        if (CPPU_CURRENT_NAMESPACE::return_in_hidden_param(pReturnTypeRef))
++        {
++            pCppReturn = gpreg[nREG]; // complex return via ptr (pCppReturn)
++            nREG++;
++
++            pUnoReturn = (bridges::cpp_uno::shared::relatesToInterfaceType(pReturnTypeDescr)
++                              ? alloca(pReturnTypeDescr->nSize)
++                              : pCppReturn); // direct way
++        }
++        else
++        {
++            pUnoReturn = pRegisterReturn; // direct way for simple types
++        }
++    }
++
++    // pop this
++    nREG++;
++
++    // stack space
++    static_assert(sizeof(void*) == sizeof(sal_Int64), "### unexpected size!");
++    // parameters
++    void** pUnoArgs = (void**)alloca(4 * sizeof(void*) * nParams);
++    void** pCppArgs = pUnoArgs + nParams;
++    // indices of values this have to be converted (interface conversion cpp<=>uno)
++    sal_Int32* pTempIndices = (sal_Int32*)(pUnoArgs + (2 * nParams));
++    // type descriptions for reconversions
++    typelib_TypeDescription** ppTempParamTypeDescr
++        = (typelib_TypeDescription**)(pUnoArgs + (3 * nParams));
++
++    sal_Int32 nTempIndices = 0;
++
++    for (sal_Int32 nPos = 0; nPos < nParams; ++nPos)
++    {
++        const typelib_MethodParameter& rParam = pParams[nPos];
++
++        typelib_TypeDescription* pParamTypeDescr = 0;
++        TYPELIB_DANGER_GET(&pParamTypeDescr, rParam.pTypeRef);
++
++        if (!rParam.bOut && bridges::cpp_uno::shared::isSimpleType(pParamTypeDescr)) // value
++        {
++            switch (pParamTypeDescr->eTypeClass)
++            {
++                case typelib_TypeClass_FLOAT:
++                case typelib_TypeClass_DOUBLE:
++                    if (nREG < MAX_FP_REGS)
++                    {
++                        pCppArgs[nPos] = &(fpreg[nREG]);
++                        pUnoArgs[nPos] = &(fpreg[nREG]);
++                    }
++                    else
++                    {
++                        pCppArgs[nPos] = &(ovrflw[nREG - MAX_FP_REGS]);
++                        pUnoArgs[nPos] = &(ovrflw[nREG - MAX_FP_REGS]);
++                    }
++                    nREG++;
++                    break;
++
++                default:
++                    if (nREG < MAX_GP_REGS)
++                    {
++                        pCppArgs[nPos] = &(gpreg[nREG]);
++                        pUnoArgs[nPos] = &(gpreg[nREG]);
++                    }
++                    else
++                    {
++                        pCppArgs[nPos] = &(ovrflw[nREG - MAX_GP_REGS]);
++                        pUnoArgs[nPos] = &(ovrflw[nREG - MAX_GP_REGS]);
++                    }
++                    nREG++;
++                    break;
++            }
++            // no longer needed
++            TYPELIB_DANGER_RELEASE(pParamTypeDescr);
++        }
++        else // ptr to complex value | ref
++        {
++            void* pCppStack;
++            if (nREG < MAX_GP_REGS)
++            {
++                pCppArgs[nPos] = pCppStack = gpreg[nREG];
++            }
++            else
++            {
++                pCppArgs[nPos] = pCppStack = ovrflw[nREG - MAX_GP_REGS];
++            }
++            nREG++;
++
++            if (!rParam.bIn) // is pure out
++            {
++                // uno out is unconstructed mem!
++                pUnoArgs[nPos] = alloca(pParamTypeDescr->nSize);
++                pTempIndices[nTempIndices] = nPos;
++                // will be released at reconversion
++                ppTempParamTypeDescr[nTempIndices++] = pParamTypeDescr;
++            }
++            // is in/inout
++            else if (bridges::cpp_uno::shared::relatesToInterfaceType(pParamTypeDescr))
++            {
++                uno_copyAndConvertData(pUnoArgs[nPos] = alloca(pParamTypeDescr->nSize), pCppStack,
++                                       pParamTypeDescr, pThis->getBridge()->getCpp2Uno());
++                pTempIndices[nTempIndices] = nPos; // has to be reconverted
++                // will be released at reconversion
++                ppTempParamTypeDescr[nTempIndices++] = pParamTypeDescr;
++            }
++            else // direct way
++            {
++                pUnoArgs[nPos] = pCppStack;
++                // no longer needed
++                TYPELIB_DANGER_RELEASE(pParamTypeDescr);
++            }
++        }
++    }
++    // ExceptionHolder
++    uno_Any aUnoExc; // Any will be constructed by callee
++    uno_Any* pUnoExc = &aUnoExc;
++
++    // invoke uno dispatch call
++    (*pThis->getUnoI()->pDispatcher)(pThis->getUnoI(), pMemberTypeDescr, pUnoReturn, pUnoArgs,
++                                     &pUnoExc);
++    // in case an exception occurred...
++    if (pUnoExc)
++    {
++        // destruct temporary in/inout params
++        for (; nTempIndices--;)
++        {
++            sal_Int32 nIndex = pTempIndices[nTempIndices];
++
++            if (pParams[nIndex].bIn) // is in/inout => was constructed
++                uno_destructData(pUnoArgs[nIndex], ppTempParamTypeDescr[nTempIndices], 0);
++            TYPELIB_DANGER_RELEASE(ppTempParamTypeDescr[nTempIndices]);
++        }
++        if (pReturnTypeDescr)
++            TYPELIB_DANGER_RELEASE(pReturnTypeDescr);
++
++        CPPU_CURRENT_NAMESPACE::raiseException(&aUnoExc, pThis->getBridge()->getUno2Cpp());
++        // has to destruct the any
++        // is here for dummy
++        return typelib_TypeClass_VOID;
++    }
++    else // else no exception occurred...
++    {
++        // temporary params
++        for (; nTempIndices--;)
++        {
++            sal_Int32 nIndex = pTempIndices[nTempIndices];
++            typelib_TypeDescription* pParamTypeDescr = ppTempParamTypeDescr[nTempIndices];
++
++            if (pParams[nIndex].bOut) // inout/out
++            {
++                // convert and assign
++                uno_destructData(pCppArgs[nIndex], pParamTypeDescr, cpp_release);
++                uno_copyAndConvertData(pCppArgs[nIndex], pUnoArgs[nIndex], pParamTypeDescr,
++                                       pThis->getBridge()->getUno2Cpp());
++            }
++            // destroy temp uno param
++            uno_destructData(pUnoArgs[nIndex], pParamTypeDescr, 0);
++
++            TYPELIB_DANGER_RELEASE(pParamTypeDescr);
++        }
++        // return
++        if (pCppReturn) // has complex return
++        {
++            if (pUnoReturn != pCppReturn) // needs reconversion
++            {
++                uno_copyAndConvertData(pCppReturn, pUnoReturn, pReturnTypeDescr,
++                                       pThis->getBridge()->getUno2Cpp());
++                // destroy temp uno return
++                uno_destructData(pUnoReturn, pReturnTypeDescr, 0);
++            }
++            // complex return ptr is set to return reg
++            *(void**)pRegisterReturn = pCppReturn;
++        }
++        if (pReturnTypeDescr)
++        {
++            typelib_TypeClass eRet = (typelib_TypeClass)pReturnTypeDescr->eTypeClass;
++            TYPELIB_DANGER_RELEASE(pReturnTypeDescr);
++            return eRet;
++        }
++        else
++            return typelib_TypeClass_VOID;
++    }
++}
++
++/**
++   * is called on incoming vtable calls
++   * (called by asm snippets)
++   */
++typelib_TypeClass cpp_vtable_call(sal_Int32 nFunctionIndex, sal_Int32 nVtableOffset, void** gpreg,
++                                  void** fpreg, void** ovrflw,
++                                  sal_uInt64* pRegisterReturn /* space for register return */)
++{
++    static_assert(sizeof(sal_Int64) == sizeof(void*), "### unexpected!");
++
++    // gpreg:  [ret *], this, [other gpr params]
++    // fpreg:  [fpr params]
++    // ovrflw: [gpr or fpr params (properly aligned)]
++    void* pThis;
++    if (nFunctionIndex & 0x80000000)
++    {
++        nFunctionIndex &= 0x7fffffff;
++        pThis = gpreg[1];
++    }
++    else
++    {
++        pThis = gpreg[0];
++    }
++    pThis = static_cast<char*>(pThis) - nVtableOffset;
++    bridges::cpp_uno::shared::CppInterfaceProxy* pCppI
++        = bridges::cpp_uno::shared::CppInterfaceProxy::castInterfaceToProxy(pThis);
++    typelib_InterfaceTypeDescription* pTypeDescr = pCppI->getTypeDescr();
++
++    if (nFunctionIndex >= pTypeDescr->nMapFunctionIndexToMemberIndex)
++    {
++        SAL_WARN("bridges", "illegal " << OUString::unacquired(&pTypeDescr->aBase.pTypeName)
++                                       << " vtable index " << nFunctionIndex << "/"
++                                       << pTypeDescr->nMapFunctionIndexToMemberIndex);
++        throw RuntimeException(("illegal " + OUString::unacquired(&pTypeDescr->aBase.pTypeName)
++                                + " vtable index " + OUString::number(nFunctionIndex) + "/"
++                                + OUString::number(pTypeDescr->nMapFunctionIndexToMemberIndex)),
++                               (XInterface*)pThis);
++    }
++
++    // determine called method
++    sal_Int32 nMemberPos = pTypeDescr->pMapFunctionIndexToMemberIndex[nFunctionIndex];
++    assert(nMemberPos < pTypeDescr->nAllMembers);
++
++    TypeDescription aMemberDescr(pTypeDescr->ppAllMembers[nMemberPos]);
++
++    typelib_TypeClass eRet;
++    switch (aMemberDescr.get()->eTypeClass)
++    {
++        case typelib_TypeClass_INTERFACE_ATTRIBUTE:
++        {
++            typelib_TypeDescriptionReference* pAttrTypeRef
++                = reinterpret_cast<typelib_InterfaceAttributeTypeDescription*>(aMemberDescr.get())
++                      ->pAttributeTypeRef;
++
++            if (pTypeDescr->pMapMemberIndexToFunctionIndex[nMemberPos] == nFunctionIndex)
++            {
++                // is GET method
++                eRet = cpp2uno_call(pCppI, aMemberDescr.get(), pAttrTypeRef, 0, 0, // no params
++                                    gpreg, fpreg, ovrflw, pRegisterReturn);
++            }
++            else
++            {
++                // is SET method
++                typelib_MethodParameter aParam;
++                aParam.pTypeRef = pAttrTypeRef;
++                aParam.bIn = sal_True;
++                aParam.bOut = sal_False;
++
++                eRet = cpp2uno_call(pCppI, aMemberDescr.get(),
++                                    0, // indicates void return
++                                    1, &aParam, gpreg, fpreg, ovrflw, pRegisterReturn);
++            }
++            break;
++        }
++        case typelib_TypeClass_INTERFACE_METHOD:
++        {
++            // is METHOD
++            switch (nFunctionIndex)
++            {
++                case 1: // acquire()
++                    pCppI->acquireProxy(); // non virtual call!
++                    eRet = typelib_TypeClass_VOID;
++                    break;
++                case 2: // release()
++                    pCppI->releaseProxy(); // non virtual call!
++                    eRet = typelib_TypeClass_VOID;
++                    break;
++                case 0: // queryInterface() opt
++                {
++                    typelib_TypeDescription* pTD = 0;
++                    TYPELIB_DANGER_GET(&pTD, reinterpret_cast<Type*>(gpreg[2])->getTypeLibType());
++                    if (pTD)
++                    {
++                        XInterface* pInterface = 0;
++                        (*pCppI->getBridge()->getCppEnv()->getRegisteredInterface)(
++                            pCppI->getBridge()->getCppEnv(), (void**)&pInterface,
++                            pCppI->getOid().pData,
++                            reinterpret_cast<typelib_InterfaceTypeDescription*>(pTD));
++
++                        if (pInterface)
++                        {
++                            ::uno_any_construct(reinterpret_cast<uno_Any*>(gpreg[0]), &pInterface,
++                                                pTD, cpp_acquire);
++
++                            pInterface->release();
++                            TYPELIB_DANGER_RELEASE(pTD);
++
++                            reinterpret_cast<void**>(pRegisterReturn)[0] = gpreg[0];
++                            eRet = typelib_TypeClass_ANY;
++                            break;
++                        }
++                        TYPELIB_DANGER_RELEASE(pTD);
++                    }
++                } // else perform queryInterface()
++                default:
++                    typelib_InterfaceMethodTypeDescription* pMethodTD
++                        = reinterpret_cast<typelib_InterfaceMethodTypeDescription*>(
++                            aMemberDescr.get());
++
++                    eRet = cpp2uno_call(pCppI, aMemberDescr.get(), pMethodTD->pReturnTypeRef,
++                                        pMethodTD->nParams, pMethodTD->pParams, gpreg, fpreg,
++                                        ovrflw, pRegisterReturn);
++            }
++            break;
++        }
++        default:
++        {
++            throw RuntimeException("no member description found!", (XInterface*)pThis);
++        }
++    }
++
++    return eRet;
++}
++
++extern "C" void privateSnippetExecutor(...);
++
++int const codeSnippetSize = 0x34;
++
++unsigned char* codeSnippet(unsigned char* code, sal_Int32 functionIndex, sal_Int32 vtableOffset,
++                           bool bHasHiddenParam)
++{
++    if (bHasHiddenParam)
++        functionIndex |= 0x80000000;
++
++    unsigned int* p = (unsigned int*)code;
++
++    assert((((unsigned long)code) & 0x3) == 0); //aligned to 4 otherwise a mistake
++
++    /* generate this code */
++    /*
++       # index
++        0:   14000012        lu12i.w $t6,0x0
++        4:   34420000        ori     $t6,$t6,0x0
++       # privateSnippetExecutor
++        8:   14000014        lu12i.w $t8,0x0
++        c:   03800294        ori     $t8,$t8,0x0
++       10:   16000014        lu32i.d $t8,0x0
++       14:   03000294        lu52i.d $t8,$t8,0x0
++       # cpp_vtable_call
++       18:   14000011        lu12i.w $t5,0x0
++       1c:   03800231        ori     $t5,$t5,0x0
++       20:   16000011        lu32i.d $t5,0x0
++       24:   03000231        lu52i.d $t5,$t5,0x0
++       # offset
++       28:   14000013        lu12i.w $t7,0x0
++       2c:   03800273        ori     $t7,$t7,0x0
++       30:   4c000280        jr      $t8
++     */
++
++    *p++ = 0x14000012 | (((functionIndex >> 12) & 0x000fffff) << 5);
++    *p++ = 0x03800252 | ((functionIndex & 0x00000fff) << 10);
++    *p++ = 0x14000014 | (((((unsigned long)privateSnippetExecutor) >> 12) & 0x000fffff) << 5);
++    *p++ = 0x03800294 | ((((unsigned long)privateSnippetExecutor) & 0x00000fff) << 10);
++    *p++ = 0x16000014 | (((((unsigned long)privateSnippetExecutor) >> 32) & 0x000fffff) << 5);
++    *p++ = 0x03000294 | (((((unsigned long)privateSnippetExecutor) >> 52) & 0x00000fff) << 10);
++    *p++ = 0x14000011 | (((((unsigned long)cpp_vtable_call) >> 12) & 0x000fffff) << 5);
++    *p++ = 0x03800231 | ((((unsigned long)cpp_vtable_call) & 0x00000fff) << 10);
++    *p++ = 0x16000011 | (((((unsigned long)cpp_vtable_call) >> 32) & 0x000fffff) << 5);
++    *p++ = 0x03000231 | (((((unsigned long)cpp_vtable_call) >> 52) & 0x00000fff) << 10);
++    *p++ = 0x14000013 | (((vtableOffset >> 12) & 0x000fffff) << 5);
++    *p++ = 0x03800273 | ((vtableOffset & 0x00000fff) << 10);
++    *p++ = 0x4c000280;
++    return (code + codeSnippetSize);
++}
++}
++
++void bridges::cpp_uno::shared::VtableFactory::flushCode(unsigned char const* bptr,
++                                                        unsigned char const* eptr)
++{
++    asm volatile("ibar 0" :::);
++}
++
++struct bridges::cpp_uno::shared::VtableFactory::Slot
++{
++    void* fn;
++};
++
++bridges::cpp_uno::shared::VtableFactory::Slot*
++bridges::cpp_uno::shared::VtableFactory::mapBlockToVtable(void* block)
++{
++    return static_cast<Slot*>(block) + 2;
++}
++
++std::size_t bridges::cpp_uno::shared::VtableFactory::getBlockSize(sal_Int32 slotCount)
++{
++    return (slotCount + 2) * sizeof(Slot) + slotCount * codeSnippetSize;
++}
++
++bridges::cpp_uno::shared::VtableFactory::Slot*
++bridges::cpp_uno::shared::VtableFactory::initializeBlock(void* block, sal_Int32 slotCount,
++                                                         sal_Int32,
++                                                         typelib_InterfaceTypeDescription*)
++{
++    Slot* slots = mapBlockToVtable(block);
++    slots[-2].fn = 0; //null
++    slots[-1].fn = 0; //destructor
++    return slots + slotCount;
++}
++
++unsigned char* bridges::cpp_uno::shared::VtableFactory::addLocalFunctions(
++    Slot** slots, unsigned char* code, sal_PtrDiff writetoexecdiff,
++    typelib_InterfaceTypeDescription const* type, sal_Int32 functionOffset, sal_Int32 functionCount,
++    sal_Int32 vtableOffset)
++{
++    (*slots) -= functionCount;
++    Slot* s = *slots;
++
++    for (sal_Int32 i = 0; i < type->nMembers; ++i)
++    {
++        typelib_TypeDescription* member = 0;
++        TYPELIB_DANGER_GET(&member, type->ppMembers[i]);
++        assert(member != 0);
++        switch (member->eTypeClass)
++        {
++            case typelib_TypeClass_INTERFACE_ATTRIBUTE:
++                // Getter:
++                (s++)->fn = code + writetoexecdiff;
++                code = codeSnippet(
++                    code, functionOffset++, vtableOffset,
++                    CPPU_CURRENT_NAMESPACE::return_in_hidden_param(
++                        reinterpret_cast<typelib_InterfaceAttributeTypeDescription*>(member)
++                            ->pAttributeTypeRef));
++
++                // Setter:
++                if (!reinterpret_cast<typelib_InterfaceAttributeTypeDescription*>(member)
++                         ->bReadOnly)
++                {
++                    (s++)->fn = code + writetoexecdiff;
++                    code = codeSnippet(code, functionOffset++, vtableOffset, false);
++                }
++                break;
++
++            case typelib_TypeClass_INTERFACE_METHOD:
++                (s++)->fn = code + writetoexecdiff;
++                code = codeSnippet(
++                    code, functionOffset++, vtableOffset,
++                    CPPU_CURRENT_NAMESPACE::return_in_hidden_param(
++                        reinterpret_cast<typelib_InterfaceMethodTypeDescription*>(member)
++                            ->pReturnTypeRef));
++                break;
++
++            default:
++                assert(false);
++                break;
++        }
++        TYPELIB_DANGER_RELEASE(member);
++    }
++    return code;
++}
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab cinoptions=b1,g0,N-s cinkeys+=0=break: */
+diff --git a/bridges/source/cpp_uno/gcc3_linux_loongarch64/except.cxx b/bridges/source/cpp_uno/gcc3_linux_loongarch64/except.cxx
+new file mode 100644
+index 000000000..b69c52b1f
+--- /dev/null
++++ b/bridges/source/cpp_uno/gcc3_linux_loongarch64/except.cxx
+@@ -0,0 +1,251 @@
++/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4; fill-column: 100 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ *
++ * This file incorporates work covered by the following license notice:
++ *
++ *   Licensed to the Apache Software Foundation (ASF) under one or more
++ *   contributor license agreements. See the NOTICE file distributed
++ *   with this work for additional information regarding copyright
++ *   ownership. The ASF licenses this file to you under the Apache
++ *   License, Version 2.0 (the "License"); you may not use this file
++ *   except in compliance with the License. You may obtain a copy of
++ *   the License at http://www.apache.org/licenses/LICENSE-2.0 .
++ */
++#include <stdio.h>
++#include <string.h>
++#include <dlfcn.h>
++#include <cxxabi.h>
++#include <rtl/strbuf.hxx>
++#include <rtl/ustrbuf.hxx>
++#include <sal/log.hxx>
++#include <osl/mutex.hxx>
++
++#include <com/sun/star/uno/genfunc.hxx>
++#include <typelib/typedescription.hxx>
++#include <uno/any2.h>
++
++#include <unordered_map>
++#include "share.hxx"
++
++using namespace ::std;
++using namespace ::osl;
++using namespace ::com::sun::star::uno;
++using namespace ::__cxxabiv1;
++
++namespace CPPU_CURRENT_NAMESPACE
++{
++void dummy_can_throw_anything(char const*) {}
++
++static OUString toUNOname(char const* p)
++{
++    // example: N3com3sun4star4lang24IllegalArgumentExceptionE
++
++    OUStringBuffer buf(64);
++    assert('N' == *p);
++    ++p; // skip N
++
++    while ('E' != *p)
++    {
++        // read chars count
++        long n = (*p++ - '0');
++        while ('0' <= *p && '9' >= *p)
++        {
++            n *= 10;
++            n += (*p++ - '0');
++        }
++        buf.appendAscii(p, n);
++        p += n;
++        if ('E' != *p)
++            buf.append('.');
++    }
++
++    return buf.makeStringAndClear();
++}
++
++class RTTI
++{
++    typedef std::unordered_map<OUString, type_info*> t_rtti_map;
++
++    Mutex m_mutex;
++    t_rtti_map m_rttis;
++    t_rtti_map m_generatedRttis;
++
++    void* m_hApp;
++
++public:
++    RTTI();
++    ~RTTI();
++
++    type_info* getRTTI(typelib_CompoundTypeDescription*);
++};
++
++RTTI::RTTI()
++    : m_hApp(dlopen(0, RTLD_LAZY))
++{
++}
++
++RTTI::~RTTI() { dlclose(m_hApp); }
++
++type_info* RTTI::getRTTI(typelib_CompoundTypeDescription* pTypeDescr)
++{
++    type_info* rtti;
++
++    OUString const& unoName = *(OUString const*)&pTypeDescr->aBase.pTypeName;
++
++    MutexGuard guard(m_mutex);
++    t_rtti_map::const_iterator iRttiFind(m_rttis.find(unoName));
++    if (iRttiFind == m_rttis.end())
++    {
++        // RTTI symbol
++        OStringBuffer buf(64);
++        buf.append("_ZTIN");
++        sal_Int32 index = 0;
++        do
++        {
++            OUString token(unoName.getToken(0, '.', index));
++            buf.append(token.getLength());
++            OString c_token(OUStringToOString(token, RTL_TEXTENCODING_ASCII_US));
++            buf.append(c_token);
++        } while (index >= 0);
++        buf.append('E');
++
++        OString symName(buf.makeStringAndClear());
++        rtti = (type_info*)dlsym(m_hApp, symName.getStr());
++
++        if (rtti)
++        {
++            pair<t_rtti_map::iterator, bool> insertion(
++                m_rttis.insert(t_rtti_map::value_type(unoName, rtti)));
++            assert(insertion.second && "### inserting new rtti failed?!");
++        }
++        else
++        {
++            // try to lookup the symbol in the generated rtti map
++            t_rtti_map::const_iterator iFind(m_generatedRttis.find(unoName));
++            if (iFind == m_generatedRttis.end())
++            {
++                // we must generate it !
++                // symbol and rtti-name is nearly identical,
++                // the symbol is prefixed with _ZTI
++                char const* rttiName = symName.getStr() + 4;
++                if (pTypeDescr->pBaseTypeDescription)
++                {
++                    // ensure availability of base
++                    type_info* base_rtti = getRTTI(
++                        (typelib_CompoundTypeDescription*)pTypeDescr->pBaseTypeDescription);
++                    rtti
++                        = new __si_class_type_info(strdup(rttiName), (__class_type_info*)base_rtti);
++                }
++                else
++                {
++                    // this class has no base class
++                    rtti = new __class_type_info(strdup(rttiName));
++                }
++
++                pair<t_rtti_map::iterator, bool> insertion(
++                    m_generatedRttis.insert(t_rtti_map::value_type(unoName, rtti)));
++                assert(insertion.second && "### inserting new generated rtti failed?!");
++            }
++            else // taking already generated rtti
++            {
++                rtti = iFind->second;
++            }
++        }
++    }
++    else
++    {
++        rtti = iRttiFind->second;
++    }
++
++    return rtti;
++}
++
++static void deleteException(void* pExc)
++{
++    __cxa_exception const* header = ((__cxa_exception const*)pExc - 1);
++    typelib_TypeDescription* pTD = 0;
++    OUString unoName(toUNOname(header->exceptionType->name()));
++    ::typelib_typedescription_getByName(&pTD, unoName.pData);
++    assert(pTD && "### unknown exception type! leaving out destruction => leaking!!!");
++    if (pTD)
++    {
++        ::uno_destructData(pExc, pTD, cpp_release);
++        ::typelib_typedescription_release(pTD);
++    }
++}
++
++void raiseException(uno_Any* pUnoExc, uno_Mapping* pUno2Cpp)
++{
++    void* pCppExc;
++    type_info* rtti;
++
++    {
++        // construct cpp exception object
++        typelib_TypeDescription* pTypeDescr = 0;
++        TYPELIB_DANGER_GET(&pTypeDescr, pUnoExc->pType);
++        assert(pTypeDescr);
++        if (!pTypeDescr)
++        {
++            throw RuntimeException(OUString("cannot get typedescription for type ")
++                                   + OUString::unacquired(&pUnoExc->pType->pTypeName));
++        }
++
++        pCppExc = __cxa_allocate_exception(pTypeDescr->nSize);
++        ::uno_copyAndConvertData(pCppExc, pUnoExc->pData, pTypeDescr, pUno2Cpp);
++
++        // destruct uno exception
++        ::uno_any_destruct(pUnoExc, 0);
++        // avoiding locked counts
++        static RTTI rtti_data;
++        rtti = (type_info*)rtti_data.getRTTI((typelib_CompoundTypeDescription*)pTypeDescr);
++        TYPELIB_DANGER_RELEASE(pTypeDescr);
++        assert(rtti && "### no rtti for throwing exception!");
++        if (!rtti)
++        {
++            throw RuntimeException(OUString("no rtti for type ")
++                                   + OUString::unacquired(&pUnoExc->pType->pTypeName));
++        }
++    }
++
++    __cxa_throw(pCppExc, rtti, deleteException);
++}
++
++void fillUnoException(uno_Any* pUnoExc, uno_Mapping* pCpp2Uno)
++{
++    __cxa_exception* header = __cxa_get_globals()->caughtExceptions;
++    if (!header)
++    {
++        RuntimeException aRE("no exception header!");
++        Type const& rType = cppu::UnoType<decltype(aRE)>::get();
++        uno_type_any_constructAndConvert(pUnoExc, &aRE, rType.getTypeLibType(), pCpp2Uno);
++        SAL_WARN("bridges", aRE.Message);
++        return;
++    }
++
++    std::type_info* exceptionType = __cxa_current_exception_type();
++
++    typelib_TypeDescription* pExcTypeDescr = 0;
++    OUString unoName(toUNOname(exceptionType->name()));
++    typelib_typedescription_getByName(&pExcTypeDescr, unoName.pData);
++    if (0 == pExcTypeDescr)
++    {
++        RuntimeException aRE(OUString("exception type not found: ") + unoName);
++        Type const& rType = cppu::UnoType<decltype(aRE)>::get();
++        uno_type_any_constructAndConvert(pUnoExc, &aRE, rType.getTypeLibType(), pCpp2Uno);
++        SAL_WARN("bridges", aRE.Message);
++    }
++    else
++    {
++        // construct uno exception any
++        uno_any_constructAndConvert(pUnoExc, header->adjustedPtr, pExcTypeDescr, pCpp2Uno);
++        typelib_typedescription_release(pExcTypeDescr);
++    }
++}
++}
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab cinoptions=b1,g0,N-s cinkeys+=0=break: */
+diff --git a/bridges/source/cpp_uno/gcc3_linux_loongarch64/share.hxx b/bridges/source/cpp_uno/gcc3_linux_loongarch64/share.hxx
+new file mode 100644
+index 000000000..331ed789e
+--- /dev/null
++++ b/bridges/source/cpp_uno/gcc3_linux_loongarch64/share.hxx
+@@ -0,0 +1,85 @@
++/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4; fill-column: 100 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ *
++ * This file incorporates work covered by the following license notice:
++ *
++ *   Licensed to the Apache Software Foundation (ASF) under one or more
++ *   contributor license agreements. See the NOTICE file distributed
++ *   with this work for additional information regarding copyright
++ *   ownership. The ASF licenses this file to you under the Apache
++ *   License, Version 2.0 (the "License"); you may not use this file
++ *   except in compliance with the License. You may obtain a copy of
++ *   the License at http://www.apache.org/licenses/LICENSE-2.0 .
++ */
++#pragma once
++
++#include "uno/mapping.h"
++
++#include <typeinfo>
++#include <exception>
++#include <cstddef>
++
++#define MAX_GP_REGS (8)
++#define MAX_FP_REGS (8)
++
++namespace CPPU_CURRENT_NAMESPACE
++{
++void dummy_can_throw_anything(char const*);
++
++// ----- following decl from libstdc++-v3/libsupc++/unwind-cxx.h and unwind.h
++
++struct _Unwind_Exception
++{
++    unsigned exception_class __attribute__((__mode__(__DI__)));
++    void* exception_cleanup;
++    unsigned private_1 __attribute__((__mode__(__word__)));
++    unsigned private_2 __attribute__((__mode__(__word__)));
++} __attribute__((__aligned__));
++
++struct __cxa_exception
++{
++    std::type_info* exceptionType;
++    void (*exceptionDestructor)(void*);
++
++    void (*unexpectedHandler)(); // std::unexpected_handler dropped from C++17
++    std::terminate_handler terminateHandler;
++
++    __cxa_exception* nextException;
++
++    int handlerCount;
++
++    int handlerSwitchValue;
++    const unsigned char* actionRecord;
++    const unsigned char* languageSpecificData;
++    void* catchTemp;
++    void* adjustedPtr;
++
++    _Unwind_Exception unwindHeader;
++};
++
++extern "C" void* __cxa_allocate_exception(std::size_t thrown_size) throw();
++extern "C" void __cxa_throw(void* thrown_exception, std::type_info* tinfo, void (*dest)(void*))
++    __attribute__((noreturn));
++
++struct __cxa_eh_globals
++{
++    __cxa_exception* caughtExceptions;
++    unsigned int uncaughtExceptions;
++};
++
++extern "C" __cxa_eh_globals* __cxa_get_globals() throw();
++extern "C" std::type_info* __cxa_current_exception_type() throw();
++
++void raiseException(uno_Any* pUnoExc, uno_Mapping* pUno2Cpp);
++
++void fillUnoException(uno_Any*, uno_Mapping* pCpp2Uno);
++
++bool return_in_hidden_param(typelib_TypeDescriptionReference* pTypeRef);
++}
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab cinoptions=b1,g0,N-s cinkeys+=0=break: */
+diff --git a/bridges/source/cpp_uno/gcc3_linux_loongarch64/uno2cpp.cxx b/bridges/source/cpp_uno/gcc3_linux_loongarch64/uno2cpp.cxx
+new file mode 100644
+index 000000000..0004794ce
+--- /dev/null
++++ b/bridges/source/cpp_uno/gcc3_linux_loongarch64/uno2cpp.cxx
+@@ -0,0 +1,546 @@
++/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4; fill-column: 100 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ *
++ * This file incorporates work covered by the following license notice:
++ *
++ *   Licensed to the Apache Software Foundation (ASF) under one or more
++ *   contributor license agreements. See the NOTICE file distributed
++ *   with this work for additional information regarding copyright
++ *   ownership. The ASF licenses this file to you under the Apache
++ *   License, Version 2.0 (the "License"); you may not use this file
++ *   except in compliance with the License. You may obtain a copy of
++ *   the License at http://www.apache.org/licenses/LICENSE-2.0 .
++ */
++
++#include <sal/config.h>
++
++#include <exception>
++#include <malloc.h>
++#include <cstring>
++#include <typeinfo>
++
++#include <com/sun/star/uno/Exception.hpp>
++#include <com/sun/star/uno/RuntimeException.hpp>
++#include <com/sun/star/uno/genfunc.hxx>
++#include <o3tl/runtimetooustring.hxx>
++#include <uno/data.h>
++
++#include "bridge.hxx"
++#include "types.hxx"
++#include "unointerfaceproxy.hxx"
++#include "vtables.hxx"
++
++#include "share.hxx"
++
++#define INSERT_FLOAT_DOUBLE(pSV, nr, pFPR, pDS)                                                    \
++    if (nr < MAX_FP_REGS)                                                                          \
++        pFPR[nr++] = *reinterpret_cast<double*>(pSV);                                              \
++    else                                                                                           \
++        *pDS++ = *reinterpret_cast<sal_uInt64*>(pSV); // verbatim!
++
++#define INSERT_INT64(pSV, nr, pGPR, pDS)                                                           \
++    if (nr < MAX_GP_REGS)                                                                          \
++        pGPR[nr++] = *reinterpret_cast<sal_Int64*>(pSV);                                           \
++    else                                                                                           \
++        *pDS++ = *reinterpret_cast<sal_Int64*>(pSV);
++
++#define INSERT_INT32(pSV, nr, pGPR, pDS)                                                           \
++    if (nr < MAX_GP_REGS)                                                                          \
++        pGPR[nr++] = *reinterpret_cast<sal_Int32*>(pSV);                                           \
++    else                                                                                           \
++        *pDS++ = *reinterpret_cast<sal_Int32*>(pSV);
++
++#define INSERT_INT16(pSV, nr, pGPR, pDS)                                                           \
++    if (nr < MAX_GP_REGS)                                                                          \
++        pGPR[nr++] = *reinterpret_cast<sal_Int16*>(pSV);                                           \
++    else                                                                                           \
++        *pDS++ = *reinterpret_cast<sal_Int16*>(pSV);
++
++#define INSERT_UINT16(pSV, nr, pGPR, pDS)                                                          \
++    if (nr < MAX_GP_REGS)                                                                          \
++        pGPR[nr++] = *reinterpret_cast<sal_uInt16*>(pSV);                                          \
++    else                                                                                           \
++        *pDS++ = *reinterpret_cast<sal_uInt16*>(pSV);
++
++#define INSERT_INT8(pSV, nr, pGPR, pDS)                                                            \
++    if (nr < MAX_GP_REGS)                                                                          \
++        pGPR[nr++] = *reinterpret_cast<sal_Int8*>(pSV);                                            \
++    else                                                                                           \
++        *pDS++ = *reinterpret_cast<sal_Int8*>(pSV);
++
++using namespace ::com::sun::star::uno;
++
++namespace
++{
++bool isReturnInFPR(const typelib_TypeDescription* pTypeDescr, sal_uInt32& nSize)
++{
++    const typelib_CompoundTypeDescription* p
++        = reinterpret_cast<const typelib_CompoundTypeDescription*>(pTypeDescr);
++
++    for (sal_Int32 i = 0; i < p->nMembers; ++i)
++    {
++        typelib_TypeDescriptionReference* pTypeInStruct = p->ppTypeRefs[i];
++
++        switch (pTypeInStruct->eTypeClass)
++        {
++            case typelib_TypeClass_STRUCT:
++            case typelib_TypeClass_EXCEPTION:
++            {
++                typelib_TypeDescription* t = 0;
++                TYPELIB_DANGER_GET(&t, pTypeInStruct);
++                bool isFPR = isReturnInFPR(t, nSize);
++                TYPELIB_DANGER_RELEASE(t);
++                if (!isFPR)
++                    return false;
++            }
++            break;
++            case typelib_TypeClass_FLOAT:
++            case typelib_TypeClass_DOUBLE:
++                if (nSize >= 16)
++                    return false;
++                nSize += 8;
++                break;
++            default:
++                return false;
++        }
++    }
++    return true;
++}
++
++void fillReturn(const typelib_TypeDescription* pTypeDescr, sal_Int64* gret, double* fret,
++                void* pRegisterReturn)
++{
++    sal_uInt32 nSize = 0;
++    if (isReturnInFPR(pTypeDescr, nSize))
++    {
++        reinterpret_cast<double*>(pRegisterReturn)[0] = fret[0];
++        reinterpret_cast<double*>(pRegisterReturn)[1] = fret[1];
++    }
++    else
++    {
++        reinterpret_cast<sal_Int64*>(pRegisterReturn)[0] = gret[0];
++        reinterpret_cast<sal_Int64*>(pRegisterReturn)[1] = gret[1];
++    }
++}
++
++static void callVirtualMethod(void* pAdjustedThisPtr, sal_Int32 nVtableIndex, void* pRegisterReturn,
++                              typelib_TypeDescriptionReference* pReturnTypeRef, bool bSimpleReturn,
++                              sal_uInt64* pStack, sal_uInt32 nStack, sal_uInt64* pGPR, double* pFPR,
++                              sal_uInt32 nREG)
++{
++    // Should not happen, but...
++    static_assert(MAX_GP_REGS == MAX_FP_REGS, "must be the same size");
++    if (nREG > MAX_GP_REGS)
++        nREG = MAX_GP_REGS;
++
++    // Get pointer to method
++    sal_uInt64 pMethod = *((sal_uInt64*)pAdjustedThisPtr);
++    pMethod += 8 * nVtableIndex;
++    void* mfunc = (void*)*((sal_uInt64*)pMethod);
++    // Load parameters to stack, if necessary
++    sal_uInt64* pCallStack = NULL;
++    if (nStack)
++    {
++        // 16-bytes aligned
++        sal_uInt32 nStackBytes = ((nStack + 1) >> 1) * 16;
++        pCallStack = (sal_uInt64*)__builtin_alloca(nStackBytes);
++        std::memcpy(pCallStack, pStack, nStackBytes);
++    }
++
++    sal_Int64 gret[2];
++    double fret[2];
++    asm volatile(
++        // Fill the general purpose registers
++        "ld.d $r4,%[gpr],0 \n\t"
++        "ld.d $r5,%[gpr],8 \n\t"
++        "ld.d $r6,%[gpr],16 \n\t"
++        "ld.d $r7,%[gpr],24 \n\t"
++        "ld.d $r8,%[gpr],32 \n\t"
++        "ld.d $r9,%[gpr],40 \n\t"
++        "ld.d $r10,%[gpr],48 \n\t"
++        "ld.d $r11,%[gpr],56 \n\t"
++        // Fill the floating pointer registers
++        "fld.d $f0,%[fpr],0 \n\t"
++        "fld.d $f1,%[fpr],8 \n\t"
++        "fld.d $f2,%[fpr],16 \n\t"
++        "fld.d $f3,%[fpr],24 \n\t"
++        "fld.d $f4,%[fpr],32 \n\t"
++        "fld.d $f5,%[fpr],40 \n\t"
++        "fld.d $f6,%[fpr],48 \n\t"
++        "fld.d $f7,%[fpr],56 \n\t"
++        // Perform the call
++        "jirl $ra,%[mfunc],0 \n\t"
++        // Fill the return values
++        "move %[gret1], $a0 \n\t"
++        "move %[gret2], $a1 \n\t"
++        "fmov.d %[fret1], $f0 \n\t"
++        "fmov.d %[fret2], $f1 \n\t"
++        : [gret1] "=r"(gret[0]), [gret2] "=r"(gret[1]), [fret1] "=f"(fret[0]), [fret2] "=f"(fret[1])
++        : [gpr] "r"(pGPR), [fpr] "r"(pFPR), [mfunc] "r"(mfunc),
++          [stack] "m"(
++              pCallStack) // dummy input to prevent the compiler from optimizing the alloca out
++        : "$r4", "$r5", "$r6", "$r7", "$r8", "$r9", "$r10", "$r11", "$r1", "$f0", "$f1", "$f2",
++          "$f3", "$f4", "$f5", "$f6", "$f7", "memory");
++
++    switch (pReturnTypeRef->eTypeClass)
++    {
++        case typelib_TypeClass_HYPER:
++        case typelib_TypeClass_UNSIGNED_HYPER:
++        case typelib_TypeClass_LONG:
++        case typelib_TypeClass_UNSIGNED_LONG:
++        case typelib_TypeClass_ENUM:
++        case typelib_TypeClass_CHAR:
++        case typelib_TypeClass_SHORT:
++        case typelib_TypeClass_UNSIGNED_SHORT:
++        case typelib_TypeClass_BOOLEAN:
++        case typelib_TypeClass_BYTE:
++            *reinterpret_cast<sal_Int64*>(pRegisterReturn) = gret[0];
++            break;
++        case typelib_TypeClass_FLOAT:
++        case typelib_TypeClass_DOUBLE:
++            *reinterpret_cast<double*>(pRegisterReturn) = fret[0];
++            break;
++        case typelib_TypeClass_STRUCT:
++        case typelib_TypeClass_EXCEPTION:
++        {
++            sal_Int32 const nRetSize = pReturnTypeRef->pType->nSize;
++            if (bSimpleReturn && nRetSize <= 16 && nRetSize > 0)
++            {
++                typelib_TypeDescription* pTypeDescr = 0;
++                TYPELIB_DANGER_GET(&pTypeDescr, pReturnTypeRef);
++                fillReturn(pTypeDescr, gret, fret, pRegisterReturn);
++                TYPELIB_DANGER_RELEASE(pTypeDescr);
++            }
++            break;
++        }
++        default:
++            break;
++    }
++}
++
++static void cpp_call(bridges::cpp_uno::shared::UnoInterfaceProxy* pThis,
++                     bridges::cpp_uno::shared::VtableSlot aVtableSlot,
++                     typelib_TypeDescriptionReference* pReturnTypeRef, sal_Int32 nParams,
++                     typelib_MethodParameter* pParams, void* pUnoReturn, void* pUnoArgs[],
++                     uno_Any** ppUnoExc)
++{
++    // max space for: [complex ret ptr], values|ptr ...
++    sal_uInt64* pStack = (sal_uInt64*)__builtin_alloca(((nParams + 3) * sizeof(sal_Int64)));
++    sal_uInt64* pStackStart = pStack;
++
++    sal_uInt64 pGPR[MAX_GP_REGS];
++    double pFPR[MAX_FP_REGS];
++    sal_uInt32 nREG = 0;
++
++    // return
++    typelib_TypeDescription* pReturnTypeDescr = 0;
++    TYPELIB_DANGER_GET(&pReturnTypeDescr, pReturnTypeRef);
++    assert(pReturnTypeDescr);
++
++    void* pCppReturn = 0; // if != 0 && != pUnoReturn, needs reconversion
++
++    bool bSimpleReturn = true;
++    if (pReturnTypeDescr)
++    {
++        if (CPPU_CURRENT_NAMESPACE::return_in_hidden_param(pReturnTypeRef))
++        {
++            bSimpleReturn = false;
++            // complex return via ptr
++            pCppReturn = bridges::cpp_uno::shared::relatesToInterfaceType(pReturnTypeDescr)
++                             ? __builtin_alloca(pReturnTypeDescr->nSize)
++                             : pUnoReturn;
++            INSERT_INT64(&pCppReturn, nREG, pGPR, pStack);
++        }
++        else
++        {
++            pCppReturn = pUnoReturn; // direct way for simple types
++        }
++    }
++
++    // push this
++    void* pAdjustedThisPtr = reinterpret_cast<void**>(pThis->getCppI()) + aVtableSlot.offset;
++    INSERT_INT64(&pAdjustedThisPtr, nREG, pGPR, pStack);
++
++    // args
++    void** pCppArgs = (void**)alloca(3 * sizeof(void*) * nParams);
++    // indices of values this have to be converted (interface conversion cpp<=>uno)
++    sal_Int32* pTempIndices = (sal_Int32*)(pCppArgs + nParams);
++    // type descriptions for reconversions
++    typelib_TypeDescription** ppTempParamTypeDescr
++        = (typelib_TypeDescription**)(pCppArgs + (2 * nParams));
++
++    sal_Int32 nTempIndices = 0;
++
++    for (sal_Int32 nPos = 0; nPos < nParams; ++nPos)
++    {
++        const typelib_MethodParameter& rParam = pParams[nPos];
++        typelib_TypeDescription* pParamTypeDescr = 0;
++        TYPELIB_DANGER_GET(&pParamTypeDescr, rParam.pTypeRef);
++
++        if (!rParam.bOut && bridges::cpp_uno::shared::isSimpleType(pParamTypeDescr))
++        {
++            uno_copyAndConvertData(pCppArgs[nPos] = alloca(8), pUnoArgs[nPos], pParamTypeDescr,
++                                   pThis->getBridge()->getUno2Cpp());
++
++            switch (pParamTypeDescr->eTypeClass)
++            {
++                case typelib_TypeClass_LONG:
++                case typelib_TypeClass_UNSIGNED_LONG:
++                    INSERT_INT64(pCppArgs[nPos], nREG, pGPR, pStack);
++                    break;
++                case typelib_TypeClass_ENUM:
++                    INSERT_INT32(pCppArgs[nPos], nREG, pGPR, pStack);
++                    break;
++                case typelib_TypeClass_CHAR:
++                case typelib_TypeClass_SHORT:
++                    INSERT_INT16(pCppArgs[nPos], nREG, pGPR, pStack);
++                    break;
++                case typelib_TypeClass_UNSIGNED_SHORT:
++                    INSERT_UINT16(pCppArgs[nPos], nREG, pGPR, pStack);
++                    break;
++                case typelib_TypeClass_BOOLEAN:
++                case typelib_TypeClass_BYTE:
++                    INSERT_INT8(pCppArgs[nPos], nREG, pGPR, pStack);
++                    break;
++                case typelib_TypeClass_FLOAT:
++                case typelib_TypeClass_DOUBLE:
++                    INSERT_FLOAT_DOUBLE(pCppArgs[nPos], nREG, pFPR, pStack);
++                    break;
++                case typelib_TypeClass_HYPER:
++                case typelib_TypeClass_UNSIGNED_HYPER:
++                    INSERT_INT64(pCppArgs[nPos], nREG, pGPR, pStack);
++                    break;
++                default:
++                    break;
++            }
++
++            // no longer needed
++            TYPELIB_DANGER_RELEASE(pParamTypeDescr);
++        }
++        else // ptr to complex value | ref
++        {
++            if (!rParam.bIn) // is pure out
++            {
++                // cpp out is constructed mem, uno out is not!
++                uno_constructData(pCppArgs[nPos] = alloca(pParamTypeDescr->nSize), pParamTypeDescr);
++                pTempIndices[nTempIndices] = nPos; // default constructed for cpp call
++                // will be released at reconversion
++                ppTempParamTypeDescr[nTempIndices++] = pParamTypeDescr;
++            }
++            // is in/inout
++            else if (bridges::cpp_uno::shared::relatesToInterfaceType(pParamTypeDescr))
++            {
++                uno_copyAndConvertData(pCppArgs[nPos] = alloca(pParamTypeDescr->nSize),
++                                       pUnoArgs[nPos], pParamTypeDescr,
++                                       pThis->getBridge()->getUno2Cpp());
++
++                pTempIndices[nTempIndices] = nPos; // has to be reconverted
++                // will be released at reconversion
++                ppTempParamTypeDescr[nTempIndices++] = pParamTypeDescr;
++            }
++            else // direct way
++            {
++                pCppArgs[nPos] = pUnoArgs[nPos];
++                // no longer needed
++                TYPELIB_DANGER_RELEASE(pParamTypeDescr);
++            }
++            INSERT_INT64(&(pCppArgs[nPos]), nREG, pGPR, pStack);
++        }
++    }
++
++    try
++    {
++        try
++        {
++            callVirtualMethod(pAdjustedThisPtr, aVtableSlot.index, pCppReturn, pReturnTypeRef,
++                              bSimpleReturn, pStackStart, (pStack - pStackStart), pGPR, pFPR, nREG);
++        }
++        catch (css::uno::Exception&)
++        {
++            throw;
++        }
++        catch (std::exception& e)
++        {
++            throw css::uno::RuntimeException("C++ code threw "
++                                             + o3tl::runtimeToOUString(typeid(e).name()) + ": "
++                                             + o3tl::runtimeToOUString(e.what()));
++        }
++        catch (...)
++        {
++            throw css::uno::RuntimeException("C++ code threw unknown exception");
++        }
++        // NO exception occurred...
++        *ppUnoExc = 0;
++
++        // reconvert temporary params
++        for (; nTempIndices--;)
++        {
++            sal_Int32 nIndex = pTempIndices[nTempIndices];
++            typelib_TypeDescription* pParamTypeDescr = ppTempParamTypeDescr[nTempIndices];
++
++            if (pParams[nIndex].bIn)
++            {
++                if (pParams[nIndex].bOut) // inout
++                {
++                    uno_destructData(pUnoArgs[nIndex], pParamTypeDescr, 0); // destroy uno value
++                    uno_copyAndConvertData(pUnoArgs[nIndex], pCppArgs[nIndex], pParamTypeDescr,
++                                           pThis->getBridge()->getCpp2Uno());
++                }
++            }
++            else // pure out
++            {
++                uno_copyAndConvertData(pUnoArgs[nIndex], pCppArgs[nIndex], pParamTypeDescr,
++                                       pThis->getBridge()->getCpp2Uno());
++            }
++            // destroy temp cpp param => cpp: every param was constructed
++            uno_destructData(pCppArgs[nIndex], pParamTypeDescr, cpp_release);
++
++            TYPELIB_DANGER_RELEASE(pParamTypeDescr);
++        }
++        // return value
++        if (pCppReturn && pUnoReturn != pCppReturn)
++        {
++            uno_copyAndConvertData(pUnoReturn, pCppReturn, pReturnTypeDescr,
++                                   pThis->getBridge()->getCpp2Uno());
++            uno_destructData(pCppReturn, pReturnTypeDescr, cpp_release);
++        }
++    }
++    catch (...)
++    {
++        // fill uno exception
++        CPPU_CURRENT_NAMESPACE::fillUnoException(*ppUnoExc, pThis->getBridge()->getCpp2Uno());
++
++        // temporary params
++        for (; nTempIndices--;)
++        {
++            sal_Int32 nIndex = pTempIndices[nTempIndices];
++            // destroy temp cpp param => cpp: every param was constructed
++            uno_destructData(pCppArgs[nIndex], ppTempParamTypeDescr[nTempIndices], cpp_release);
++            TYPELIB_DANGER_RELEASE(ppTempParamTypeDescr[nTempIndices]);
++        }
++        // return type
++        if (pReturnTypeDescr)
++            TYPELIB_DANGER_RELEASE(pReturnTypeDescr);
++    }
++}
++}
++
++namespace bridges::cpp_uno::shared
++{
++void unoInterfaceProxyDispatch(uno_Interface* pUnoI, const typelib_TypeDescription* pMemberDescr,
++                               void* pReturn, void* pArgs[], uno_Any** ppException)
++{
++    // is my surrogate
++    bridges::cpp_uno::shared::UnoInterfaceProxy* pThis
++        = static_cast<bridges::cpp_uno::shared::UnoInterfaceProxy*>(pUnoI);
++    //typelib_InterfaceTypeDescription * pTypeDescr = pThis->pTypeDescr;
++
++    switch (pMemberDescr->eTypeClass)
++    {
++        case typelib_TypeClass_INTERFACE_ATTRIBUTE:
++        {
++            VtableSlot aVtableSlot(getVtableSlot(
++                reinterpret_cast<typelib_InterfaceAttributeTypeDescription const*>(pMemberDescr)));
++
++            if (pReturn)
++            {
++                // dependent dispatch
++                cpp_call(
++                    pThis, aVtableSlot,
++                    ((typelib_InterfaceAttributeTypeDescription*)pMemberDescr)->pAttributeTypeRef,
++                    0, 0, // no params
++                    pReturn, pArgs, ppException);
++            }
++            else
++            {
++                // is SET
++                typelib_MethodParameter aParam;
++                aParam.pTypeRef
++                    = ((typelib_InterfaceAttributeTypeDescription*)pMemberDescr)->pAttributeTypeRef;
++                aParam.bIn = sal_True;
++                aParam.bOut = sal_False;
++
++                typelib_TypeDescriptionReference* pReturnTypeRef = 0;
++                OUString aVoidName("void");
++                typelib_typedescriptionreference_new(&pReturnTypeRef, typelib_TypeClass_VOID,
++                                                     aVoidName.pData);
++
++                // dependent dispatch
++                aVtableSlot.index += 1; //get then set method
++                cpp_call(pThis, aVtableSlot, pReturnTypeRef, 1, &aParam, pReturn, pArgs,
++                         ppException);
++
++                typelib_typedescriptionreference_release(pReturnTypeRef);
++            }
++
++            break;
++        }
++        case typelib_TypeClass_INTERFACE_METHOD:
++        {
++            VtableSlot aVtableSlot(getVtableSlot(
++                reinterpret_cast<typelib_InterfaceMethodTypeDescription const*>(pMemberDescr)));
++            switch (aVtableSlot.index)
++            {
++                // standard calls
++                case 1: // acquire uno interface
++                    (*pUnoI->acquire)(pUnoI);
++                    *ppException = 0;
++                    break;
++                case 2: // release uno interface
++                    (*pUnoI->release)(pUnoI);
++                    *ppException = 0;
++                    break;
++                case 0: // queryInterface() opt
++                {
++                    typelib_TypeDescription* pTD = 0;
++                    TYPELIB_DANGER_GET(&pTD, reinterpret_cast<Type*>(pArgs[0])->getTypeLibType());
++                    if (pTD)
++                    {
++                        uno_Interface* pInterface = 0;
++                        (*pThis->pBridge->getUnoEnv()->getRegisteredInterface)(
++                            pThis->pBridge->getUnoEnv(), (void**)&pInterface, pThis->oid.pData,
++                            (typelib_InterfaceTypeDescription*)pTD);
++
++                        if (pInterface)
++                        {
++                            ::uno_any_construct(reinterpret_cast<uno_Any*>(pReturn), &pInterface,
++                                                pTD, 0);
++                            (*pInterface->release)(pInterface);
++                            TYPELIB_DANGER_RELEASE(pTD);
++                            *ppException = 0;
++                            break;
++                        }
++                        TYPELIB_DANGER_RELEASE(pTD);
++                    }
++                } // else perform queryInterface()
++                default:
++                    // dependent dispatch
++                    cpp_call(
++                        pThis, aVtableSlot,
++                        ((typelib_InterfaceMethodTypeDescription*)pMemberDescr)->pReturnTypeRef,
++                        ((typelib_InterfaceMethodTypeDescription*)pMemberDescr)->nParams,
++                        ((typelib_InterfaceMethodTypeDescription*)pMemberDescr)->pParams, pReturn,
++                        pArgs, ppException);
++            }
++            break;
++        }
++        default:
++        {
++            ::com::sun::star::uno::RuntimeException aExc(
++                "illegal member type description!",
++                ::com::sun::star::uno::Reference<::com::sun::star::uno::XInterface>());
++
++            Type const& rExcType = cppu::UnoType<decltype(aExc)>::get();
++            // binary identical null reference
++            ::uno_type_any_construct(*ppException, &aExc, rExcType.getTypeLibType(), 0);
++        }
++    }
++}
++}
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab cinoptions=b1,g0,N-s cinkeys+=0=break: */
+diff --git a/config.guess b/config.guess
+index 76b022d3d..48a684601 100644
+--- a/config.guess
++++ b/config.guess
+@@ -1,12 +1,14 @@
+ #! /bin/sh
+ # Attempt to guess a canonical system name.
+-#   Copyright 1992-2020 Free Software Foundation, Inc.
++#   Copyright 1992-2024 Free Software Foundation, Inc.
+ 
+-timestamp='2020-08-06'
++# shellcheck disable=SC2006,SC2268 # see below for rationale
++
++timestamp='2024-07-27'
+ 
+ # This file is free software; you can redistribute it and/or modify it
+ # under the terms of the GNU General Public License as published by
+-# the Free Software Foundation; either version 3 of the License, or
++# the Free Software Foundation, either version 3 of the License, or
+ # (at your option) any later version.
+ #
+ # This program is distributed in the hope that it will be useful, but
+@@ -27,17 +29,25 @@ timestamp='2020-08-06'
+ # Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
+ #
+ # You can get the latest version of this script from:
+-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
++# https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
+ #
+ # Please send patches to <config-patches@gnu.org>.
+ 
+ 
++# The "shellcheck disable" line above the timestamp inhibits complaints
++# about features and limitations of the classic Bourne shell that were
++# superseded or lifted in POSIX.  However, this script identifies a wide
++# variety of pre-POSIX systems that do not have POSIX shells at all, and
++# even some reasonably current systems (Solaris 10 as case-in-point) still
++# have a pre-POSIX /bin/sh.
++
++
+ me=`echo "$0" | sed -e 's,.*/,,'`
+ 
+ usage="\
+ Usage: $0 [OPTION]
+ 
+-Output the configuration name of the system \`$me' is run on.
++Output the configuration name of the system '$me' is run on.
+ 
+ Options:
+   -h, --help         print this help, then exit
+@@ -50,13 +60,13 @@ version="\
+ GNU config.guess ($timestamp)
+ 
+ Originally written by Per Bothner.
+-Copyright 1992-2020 Free Software Foundation, Inc.
++Copyright 1992-2024 Free Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+ 
+ help="
+-Try \`$me --help' for more information."
++Try '$me --help' for more information."
+ 
+ # Parse command line
+ while test $# -gt 0 ; do
+@@ -84,13 +94,16 @@ if test $# != 0; then
+   exit 1
+ fi
+ 
++# Just in case it came from the environment.
++GUESS=
++
+ # CC_FOR_BUILD -- compiler used by this script. Note that the use of a
+ # compiler to aid in system detection is discouraged as it requires
+ # temporary files to be created and, as you can see below, it is a
+ # headache to deal with in a portable fashion.
+ 
+-# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
+-# use `HOST_CC' if defined, but it is deprecated.
++# Historically, 'CC_FOR_BUILD' used to be named 'HOST_CC'. We still
++# use 'HOST_CC' if defined, but it is deprecated.
+ 
+ # Portable tmp directory creation inspired by the Autoconf team.
+ 
+@@ -102,7 +115,7 @@ set_cc_for_build() {
+     # prevent multiple calls if $tmp is already set
+     test "$tmp" && return 0
+     : "${TMPDIR=/tmp}"
+-    # shellcheck disable=SC2039
++    # shellcheck disable=SC2039,SC3028
+     { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+ 	{ test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir "$tmp" 2>/dev/null) ; } ||
+ 	{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir "$tmp" 2>/dev/null) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+@@ -110,9 +123,9 @@ set_cc_for_build() {
+     dummy=$tmp/dummy
+     case ${CC_FOR_BUILD-},${HOST_CC-},${CC-} in
+ 	,,)    echo "int x;" > "$dummy.c"
+-	       for driver in cc gcc c89 c99 ; do
++	       for driver in cc gcc c17 c99 c89 ; do
+ 		   if ($driver -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
+-		       CC_FOR_BUILD="$driver"
++		       CC_FOR_BUILD=$driver
+ 		       break
+ 		   fi
+ 	       done
+@@ -133,40 +146,57 @@ fi
+ 
+ UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
+ UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
+-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
++UNAME_SYSTEM=`(uname -s) 2>/dev/null` || UNAME_SYSTEM=unknown
+ UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
+ 
+-case "$UNAME_SYSTEM" in
++case $UNAME_SYSTEM in
+ Linux|GNU|GNU/*)
+-	# If the system lacks a compiler, then just pick glibc.
+-	# We could probably try harder.
+-	LIBC=gnu
++	LIBC=unknown
+ 
+ 	set_cc_for_build
+ 	cat <<-EOF > "$dummy.c"
++	#if defined(__ANDROID__)
++	LIBC=android
++	#else
+ 	#include <features.h>
+ 	#if defined(__UCLIBC__)
+ 	LIBC=uclibc
+ 	#elif defined(__dietlibc__)
+ 	LIBC=dietlibc
+-	#else
++	#elif defined(__GLIBC__)
+ 	LIBC=gnu
++	#elif defined(__LLVM_LIBC__)
++	LIBC=llvm
++	#else
++	#include <stdarg.h>
++	/* First heuristic to detect musl libc.  */
++	#ifdef __DEFINED_va_list
++	LIBC=musl
++	#endif
++	#endif
+ 	#endif
+ 	EOF
+-	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`"
++	cc_set_libc=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
++	eval "$cc_set_libc"
+ 
+-	# If ldd exists, use it to detect musl libc.
+-	if command -v ldd >/dev/null && \
+-		ldd --version 2>&1 | grep -q ^musl
+-	then
+-	    LIBC=musl
++	# Second heuristic to detect musl libc.
++	if [ "$LIBC" = unknown ] &&
++	   command -v ldd >/dev/null &&
++	   ldd --version 2>&1 | grep -q ^musl; then
++		LIBC=musl
++	fi
++
++	# If the system lacks a compiler, then just pick glibc.
++	# We could probably try harder.
++	if [ "$LIBC" = unknown ]; then
++		LIBC=gnu
+ 	fi
+ 	;;
+ esac
+ 
+ # Note: order is significant - the case branches are not exclusive.
+ 
+-case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++case $UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION in
+     *:NetBSD:*:*)
+ 	# NetBSD (nbsd) targets should (where applicable) match one or
+ 	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
+@@ -178,12 +208,12 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+ 	#
+ 	# Note: NetBSD doesn't particularly care about the vendor
+ 	# portion of the name.  We always set it to "unknown".
+-	sysctl="sysctl -n hw.machine_arch"
+ 	UNAME_MACHINE_ARCH=`(uname -p 2>/dev/null || \
+-	    "/sbin/$sysctl" 2>/dev/null || \
+-	    "/usr/sbin/$sysctl" 2>/dev/null || \
++	    /sbin/sysctl -n hw.machine_arch 2>/dev/null || \
++	    /usr/sbin/sysctl -n hw.machine_arch 2>/dev/null || \
+ 	    echo unknown)`
+-	case "$UNAME_MACHINE_ARCH" in
++	case $UNAME_MACHINE_ARCH in
++	    aarch64eb) machine=aarch64_be-unknown ;;
+ 	    armeb) machine=armeb-unknown ;;
+ 	    arm*) machine=arm-unknown ;;
+ 	    sh3el) machine=shl-unknown ;;
+@@ -192,13 +222,13 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+ 	    earmv*)
+ 		arch=`echo "$UNAME_MACHINE_ARCH" | sed -e 's,^e\(armv[0-9]\).*$,\1,'`
+ 		endian=`echo "$UNAME_MACHINE_ARCH" | sed -ne 's,^.*\(eb\)$,\1,p'`
+-		machine="${arch}${endian}"-unknown
++		machine=${arch}${endian}-unknown
+ 		;;
+-	    *) machine="$UNAME_MACHINE_ARCH"-unknown ;;
++	    *) machine=$UNAME_MACHINE_ARCH-unknown ;;
+ 	esac
+ 	# The Operating System including object format, if it has switched
+ 	# to ELF recently (or will in the future) and ABI.
+-	case "$UNAME_MACHINE_ARCH" in
++	case $UNAME_MACHINE_ARCH in
+ 	    earm*)
+ 		os=netbsdelf
+ 		;;
+@@ -219,7 +249,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+ 		;;
+ 	esac
+ 	# Determine ABI tags.
+-	case "$UNAME_MACHINE_ARCH" in
++	case $UNAME_MACHINE_ARCH in
+ 	    earm*)
+ 		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
+ 		abi=`echo "$UNAME_MACHINE_ARCH" | sed -e "$expr"`
+@@ -230,7 +260,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+ 	# thus, need a distinct triplet. However, they do not need
+ 	# kernel version information, so it can be replaced with a
+ 	# suitable tag, in the style of linux-gnu.
+-	case "$UNAME_VERSION" in
++	case $UNAME_VERSION in
+ 	    Debian*)
+ 		release='-gnu'
+ 		;;
+@@ -241,51 +271,57 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+ 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
+ 	# contains redundant information, the shorter form:
+ 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
+-	echo "$machine-${os}${release}${abi-}"
+-	exit ;;
++	GUESS=$machine-${os}${release}${abi-}
++	;;
+     *:Bitrig:*:*)
+ 	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
+-	echo "$UNAME_MACHINE_ARCH"-unknown-bitrig"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE_ARCH-unknown-bitrig$UNAME_RELEASE
++	;;
+     *:OpenBSD:*:*)
+ 	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
+-	echo "$UNAME_MACHINE_ARCH"-unknown-openbsd"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE_ARCH-unknown-openbsd$UNAME_RELEASE
++	;;
++    *:SecBSD:*:*)
++	UNAME_MACHINE_ARCH=`arch | sed 's/SecBSD.//'`
++	GUESS=$UNAME_MACHINE_ARCH-unknown-secbsd$UNAME_RELEASE
++	;;
+     *:LibertyBSD:*:*)
+ 	UNAME_MACHINE_ARCH=`arch | sed 's/^.*BSD\.//'`
+-	echo "$UNAME_MACHINE_ARCH"-unknown-libertybsd"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE_ARCH-unknown-libertybsd$UNAME_RELEASE
++	;;
+     *:MidnightBSD:*:*)
+-	echo "$UNAME_MACHINE"-unknown-midnightbsd"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-midnightbsd$UNAME_RELEASE
++	;;
+     *:ekkoBSD:*:*)
+-	echo "$UNAME_MACHINE"-unknown-ekkobsd"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-ekkobsd$UNAME_RELEASE
++	;;
+     *:SolidBSD:*:*)
+-	echo "$UNAME_MACHINE"-unknown-solidbsd"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-solidbsd$UNAME_RELEASE
++	;;
+     *:OS108:*:*)
+-	echo "$UNAME_MACHINE"-unknown-os108_"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-os108_$UNAME_RELEASE
++	;;
+     macppc:MirBSD:*:*)
+-	echo powerpc-unknown-mirbsd"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=powerpc-unknown-mirbsd$UNAME_RELEASE
++	;;
+     *:MirBSD:*:*)
+-	echo "$UNAME_MACHINE"-unknown-mirbsd"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-mirbsd$UNAME_RELEASE
++	;;
+     *:Sortix:*:*)
+-	echo "$UNAME_MACHINE"-unknown-sortix
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-sortix
++	;;
+     *:Twizzler:*:*)
+-	echo "$UNAME_MACHINE"-unknown-twizzler
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-twizzler
++	;;
+     *:Redox:*:*)
+-	echo "$UNAME_MACHINE"-unknown-redox
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-redox
++	;;
+     mips:OSF1:*.*)
+-	echo mips-dec-osf1
+-	exit ;;
++	GUESS=mips-dec-osf1
++	;;
+     alpha:OSF1:*:*)
++	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
++	trap '' 0
+ 	case $UNAME_RELEASE in
+ 	*4.0)
+ 		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
+@@ -299,7 +335,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+ 	# covers most systems running today.  This code pipes the CPU
+ 	# types through head -n 1, so we only detect the type of CPU 0.
+ 	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
+-	case "$ALPHA_CPU_TYPE" in
++	case $ALPHA_CPU_TYPE in
+ 	    "EV4 (21064)")
+ 		UNAME_MACHINE=alpha ;;
+ 	    "EV4.5 (21064)")
+@@ -336,117 +372,121 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+ 	# A Tn.n version is a released field test version.
+ 	# A Xn.n version is an unreleased experimental baselevel.
+ 	# 1.2 uses "1.2" for uname -r.
+-	echo "$UNAME_MACHINE"-dec-osf"`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`"
+-	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
+-	exitcode=$?
+-	trap '' 0
+-	exit $exitcode ;;
++	OSF_REL=`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
++	GUESS=$UNAME_MACHINE-dec-osf$OSF_REL
++	;;
+     Amiga*:UNIX_System_V:4.0:*)
+-	echo m68k-unknown-sysv4
+-	exit ;;
++	GUESS=m68k-unknown-sysv4
++	;;
+     *:[Aa]miga[Oo][Ss]:*:*)
+-	echo "$UNAME_MACHINE"-unknown-amigaos
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-amigaos
++	;;
+     *:[Mm]orph[Oo][Ss]:*:*)
+-	echo "$UNAME_MACHINE"-unknown-morphos
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-morphos
++	;;
+     *:OS/390:*:*)
+-	echo i370-ibm-openedition
+-	exit ;;
++	GUESS=i370-ibm-openedition
++	;;
+     *:z/VM:*:*)
+-	echo s390-ibm-zvmoe
+-	exit ;;
++	GUESS=s390-ibm-zvmoe
++	;;
+     *:OS400:*:*)
+-	echo powerpc-ibm-os400
+-	exit ;;
++	GUESS=powerpc-ibm-os400
++	;;
+     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
+-	echo arm-acorn-riscix"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=arm-acorn-riscix$UNAME_RELEASE
++	;;
+     arm*:riscos:*:*|arm*:RISCOS:*:*)
+-	echo arm-unknown-riscos
+-	exit ;;
++	GUESS=arm-unknown-riscos
++	;;
+     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
+-	echo hppa1.1-hitachi-hiuxmpp
+-	exit ;;
++	GUESS=hppa1.1-hitachi-hiuxmpp
++	;;
+     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
+ 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
+-	if test "`(/bin/universe) 2>/dev/null`" = att ; then
+-		echo pyramid-pyramid-sysv3
+-	else
+-		echo pyramid-pyramid-bsd
+-	fi
+-	exit ;;
++	case `(/bin/universe) 2>/dev/null` in
++	    att) GUESS=pyramid-pyramid-sysv3 ;;
++	    *)   GUESS=pyramid-pyramid-bsd   ;;
++	esac
++	;;
+     NILE*:*:*:dcosx)
+-	echo pyramid-pyramid-svr4
+-	exit ;;
++	GUESS=pyramid-pyramid-svr4
++	;;
+     DRS?6000:unix:4.0:6*)
+-	echo sparc-icl-nx6
+-	exit ;;
++	GUESS=sparc-icl-nx6
++	;;
+     DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
+ 	case `/usr/bin/uname -p` in
+-	    sparc) echo sparc-icl-nx7; exit ;;
+-	esac ;;
++	    sparc) GUESS=sparc-icl-nx7 ;;
++	esac
++	;;
+     s390x:SunOS:*:*)
+-	echo "$UNAME_MACHINE"-ibm-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
+-	exit ;;
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=$UNAME_MACHINE-ibm-solaris2$SUN_REL
++	;;
+     sun4H:SunOS:5.*:*)
+-	echo sparc-hal-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
+-	exit ;;
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=sparc-hal-solaris2$SUN_REL
++	;;
+     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
+-	echo sparc-sun-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
+-	exit ;;
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=sparc-sun-solaris2$SUN_REL
++	;;
+     i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
+-	echo i386-pc-auroraux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=i386-pc-auroraux$UNAME_RELEASE
++	;;
+     i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
+ 	set_cc_for_build
+ 	SUN_ARCH=i386
+ 	# If there is a compiler, see if it is configured for 64-bit objects.
+ 	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
+ 	# This test works for both compilers.
+-	if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+ 	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
+-		(CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++		(CCOPTS="" $CC_FOR_BUILD -m64 -E - 2>/dev/null) | \
+ 		grep IS_64BIT_ARCH >/dev/null
+ 	    then
+ 		SUN_ARCH=x86_64
+ 	    fi
+ 	fi
+-	echo "$SUN_ARCH"-pc-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
+-	exit ;;
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=$SUN_ARCH-pc-solaris2$SUN_REL
++	;;
+     sun4*:SunOS:6*:*)
+ 	# According to config.sub, this is the proper way to canonicalize
+ 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
+ 	# it's likely to be more like Solaris than SunOS4.
+-	echo sparc-sun-solaris3"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
+-	exit ;;
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=sparc-sun-solaris3$SUN_REL
++	;;
+     sun4*:SunOS:*:*)
+-	case "`/usr/bin/arch -k`" in
++	case `/usr/bin/arch -k` in
+ 	    Series*|S4*)
+ 		UNAME_RELEASE=`uname -v`
+ 		;;
+ 	esac
+-	# Japanese Language versions have a version number like `4.1.3-JL'.
+-	echo sparc-sun-sunos"`echo "$UNAME_RELEASE"|sed -e 's/-/_/'`"
+-	exit ;;
++	# Japanese Language versions have a version number like '4.1.3-JL'.
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/'`
++	GUESS=sparc-sun-sunos$SUN_REL
++	;;
+     sun3*:SunOS:*:*)
+-	echo m68k-sun-sunos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-sun-sunos$UNAME_RELEASE
++	;;
+     sun*:*:4.2BSD:*)
+ 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
+ 	test "x$UNAME_RELEASE" = x && UNAME_RELEASE=3
+-	case "`/bin/arch`" in
++	case `/bin/arch` in
+ 	    sun3)
+-		echo m68k-sun-sunos"$UNAME_RELEASE"
++		GUESS=m68k-sun-sunos$UNAME_RELEASE
+ 		;;
+ 	    sun4)
+-		echo sparc-sun-sunos"$UNAME_RELEASE"
++		GUESS=sparc-sun-sunos$UNAME_RELEASE
+ 		;;
+ 	esac
+-	exit ;;
++	;;
+     aushp:SunOS:*:*)
+-	echo sparc-auspex-sunos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sparc-auspex-sunos$UNAME_RELEASE
++	;;
+     # The situation for MiNT is a little confusing.  The machine name
+     # can be virtually everything (everything which is not
+     # "atarist" or "atariste" at least should have a processor
+@@ -456,41 +496,41 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+     # MiNT.  But MiNT is downward compatible to TOS, so this should
+     # be no problem.
+     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
+-	echo m68k-atari-mint"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-atari-mint$UNAME_RELEASE
++	;;
+     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
+-	echo m68k-atari-mint"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-atari-mint$UNAME_RELEASE
++	;;
+     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
+-	echo m68k-atari-mint"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-atari-mint$UNAME_RELEASE
++	;;
+     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
+-	echo m68k-milan-mint"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-milan-mint$UNAME_RELEASE
++	;;
+     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
+-	echo m68k-hades-mint"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-hades-mint$UNAME_RELEASE
++	;;
+     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
+-	echo m68k-unknown-mint"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-unknown-mint$UNAME_RELEASE
++	;;
+     m68k:machten:*:*)
+-	echo m68k-apple-machten"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-apple-machten$UNAME_RELEASE
++	;;
+     powerpc:machten:*:*)
+-	echo powerpc-apple-machten"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=powerpc-apple-machten$UNAME_RELEASE
++	;;
+     RISC*:Mach:*:*)
+-	echo mips-dec-mach_bsd4.3
+-	exit ;;
++	GUESS=mips-dec-mach_bsd4.3
++	;;
+     RISC*:ULTRIX:*:*)
+-	echo mips-dec-ultrix"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=mips-dec-ultrix$UNAME_RELEASE
++	;;
+     VAX*:ULTRIX*:*:*)
+-	echo vax-dec-ultrix"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=vax-dec-ultrix$UNAME_RELEASE
++	;;
+     2020:CLIX:*:* | 2430:CLIX:*:*)
+-	echo clipper-intergraph-clix"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=clipper-intergraph-clix$UNAME_RELEASE
++	;;
+     mips:*:*:UMIPS | mips:*:*:RISCos)
+ 	set_cc_for_build
+ 	sed 's/^	//' << EOF > "$dummy.c"
+@@ -518,82 +558,84 @@ EOF
+ 	  dummyarg=`echo "$UNAME_RELEASE" | sed -n 's/\([0-9]*\).*/\1/p'` &&
+ 	  SYSTEM_NAME=`"$dummy" "$dummyarg"` &&
+ 	    { echo "$SYSTEM_NAME"; exit; }
+-	echo mips-mips-riscos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=mips-mips-riscos$UNAME_RELEASE
++	;;
+     Motorola:PowerMAX_OS:*:*)
+-	echo powerpc-motorola-powermax
+-	exit ;;
++	GUESS=powerpc-motorola-powermax
++	;;
+     Motorola:*:4.3:PL8-*)
+-	echo powerpc-harris-powermax
+-	exit ;;
++	GUESS=powerpc-harris-powermax
++	;;
+     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
+-	echo powerpc-harris-powermax
+-	exit ;;
++	GUESS=powerpc-harris-powermax
++	;;
+     Night_Hawk:Power_UNIX:*:*)
+-	echo powerpc-harris-powerunix
+-	exit ;;
++	GUESS=powerpc-harris-powerunix
++	;;
+     m88k:CX/UX:7*:*)
+-	echo m88k-harris-cxux7
+-	exit ;;
++	GUESS=m88k-harris-cxux7
++	;;
+     m88k:*:4*:R4*)
+-	echo m88k-motorola-sysv4
+-	exit ;;
++	GUESS=m88k-motorola-sysv4
++	;;
+     m88k:*:3*:R3*)
+-	echo m88k-motorola-sysv3
+-	exit ;;
++	GUESS=m88k-motorola-sysv3
++	;;
+     AViiON:dgux:*:*)
+ 	# DG/UX returns AViiON for all architectures
+ 	UNAME_PROCESSOR=`/usr/bin/uname -p`
+-	if [ "$UNAME_PROCESSOR" = mc88100 ] || [ "$UNAME_PROCESSOR" = mc88110 ]
++	if test "$UNAME_PROCESSOR" = mc88100 || test "$UNAME_PROCESSOR" = mc88110
+ 	then
+-	    if [ "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx ] || \
+-	       [ "$TARGET_BINARY_INTERFACE"x = x ]
++	    if test "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx || \
++	       test "$TARGET_BINARY_INTERFACE"x = x
+ 	    then
+-		echo m88k-dg-dgux"$UNAME_RELEASE"
++		GUESS=m88k-dg-dgux$UNAME_RELEASE
+ 	    else
+-		echo m88k-dg-dguxbcs"$UNAME_RELEASE"
++		GUESS=m88k-dg-dguxbcs$UNAME_RELEASE
+ 	    fi
+ 	else
+-	    echo i586-dg-dgux"$UNAME_RELEASE"
++	    GUESS=i586-dg-dgux$UNAME_RELEASE
+ 	fi
+-	exit ;;
++	;;
+     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
+-	echo m88k-dolphin-sysv3
+-	exit ;;
++	GUESS=m88k-dolphin-sysv3
++	;;
+     M88*:*:R3*:*)
+ 	# Delta 88k system running SVR3
+-	echo m88k-motorola-sysv3
+-	exit ;;
++	GUESS=m88k-motorola-sysv3
++	;;
+     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
+-	echo m88k-tektronix-sysv3
+-	exit ;;
++	GUESS=m88k-tektronix-sysv3
++	;;
+     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
+-	echo m68k-tektronix-bsd
+-	exit ;;
++	GUESS=m68k-tektronix-bsd
++	;;
+     *:IRIX*:*:*)
+-	echo mips-sgi-irix"`echo "$UNAME_RELEASE"|sed -e 's/-/_/g'`"
+-	exit ;;
++	IRIX_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/g'`
++	GUESS=mips-sgi-irix$IRIX_REL
++	;;
+     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
+-	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
+-	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
++	GUESS=romp-ibm-aix    # uname -m gives an 8 hex-code CPU id
++	;;                    # Note that: echo "'`uname -s`'" gives 'AIX '
+     i*86:AIX:*:*)
+-	echo i386-ibm-aix
+-	exit ;;
++	GUESS=i386-ibm-aix
++	;;
+     ia64:AIX:*:*)
+-	if [ -x /usr/bin/oslevel ] ; then
++	if test -x /usr/bin/oslevel ; then
+ 		IBM_REV=`/usr/bin/oslevel`
+ 	else
+-		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
+ 	fi
+-	echo "$UNAME_MACHINE"-ibm-aix"$IBM_REV"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-ibm-aix$IBM_REV
++	;;
+     *:AIX:2:3)
+ 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
+ 		set_cc_for_build
+ 		sed 's/^		//' << EOF > "$dummy.c"
+ 		#include <sys/systemcfg.h>
+ 
+-		main()
++		int
++		main ()
+ 			{
+ 			if (!__power_pc())
+ 				exit(1);
+@@ -603,16 +645,16 @@ EOF
+ EOF
+ 		if $CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"`
+ 		then
+-			echo "$SYSTEM_NAME"
++			GUESS=$SYSTEM_NAME
+ 		else
+-			echo rs6000-ibm-aix3.2.5
++			GUESS=rs6000-ibm-aix3.2.5
+ 		fi
+ 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
+-		echo rs6000-ibm-aix3.2.4
++		GUESS=rs6000-ibm-aix3.2.4
+ 	else
+-		echo rs6000-ibm-aix3.2
++		GUESS=rs6000-ibm-aix3.2
+ 	fi
+-	exit ;;
++	;;
+     *:AIX:*:[4567])
+ 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
+ 	if /usr/sbin/lsattr -El "$IBM_CPU_ID" | grep ' POWER' >/dev/null 2>&1; then
+@@ -620,56 +662,56 @@ EOF
+ 	else
+ 		IBM_ARCH=powerpc
+ 	fi
+-	if [ -x /usr/bin/lslpp ] ; then
+-		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc |
++	if test -x /usr/bin/lslpp ; then
++		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc | \
+ 			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`
+ 	else
+-		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
+ 	fi
+-	echo "$IBM_ARCH"-ibm-aix"$IBM_REV"
+-	exit ;;
++	GUESS=$IBM_ARCH-ibm-aix$IBM_REV
++	;;
+     *:AIX:*:*)
+-	echo rs6000-ibm-aix
+-	exit ;;
++	GUESS=rs6000-ibm-aix
++	;;
+     ibmrt:4.4BSD:*|romp-ibm:4.4BSD:*)
+-	echo romp-ibm-bsd4.4
+-	exit ;;
++	GUESS=romp-ibm-bsd4.4
++	;;
+     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
+-	echo romp-ibm-bsd"$UNAME_RELEASE"   # 4.3 with uname added to
+-	exit ;;                             # report: romp-ibm BSD 4.3
++	GUESS=romp-ibm-bsd$UNAME_RELEASE    # 4.3 with uname added to
++	;;                                  # report: romp-ibm BSD 4.3
+     *:BOSX:*:*)
+-	echo rs6000-bull-bosx
+-	exit ;;
++	GUESS=rs6000-bull-bosx
++	;;
+     DPX/2?00:B.O.S.:*:*)
+-	echo m68k-bull-sysv3
+-	exit ;;
++	GUESS=m68k-bull-sysv3
++	;;
+     9000/[34]??:4.3bsd:1.*:*)
+-	echo m68k-hp-bsd
+-	exit ;;
++	GUESS=m68k-hp-bsd
++	;;
+     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
+-	echo m68k-hp-bsd4.4
+-	exit ;;
++	GUESS=m68k-hp-bsd4.4
++	;;
+     9000/[34678]??:HP-UX:*:*)
+-	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
+-	case "$UNAME_MACHINE" in
++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
++	case $UNAME_MACHINE in
+ 	    9000/31?)            HP_ARCH=m68000 ;;
+ 	    9000/[34]??)         HP_ARCH=m68k ;;
+ 	    9000/[678][0-9][0-9])
+-		if [ -x /usr/bin/getconf ]; then
++		if test -x /usr/bin/getconf; then
+ 		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
+ 		    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
+-		    case "$sc_cpu_version" in
++		    case $sc_cpu_version in
+ 		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0
+ 		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1
+ 		      532)                      # CPU_PA_RISC2_0
+-			case "$sc_kernel_bits" in
++			case $sc_kernel_bits in
+ 			  32) HP_ARCH=hppa2.0n ;;
+ 			  64) HP_ARCH=hppa2.0w ;;
+ 			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20
+ 			esac ;;
+ 		    esac
+ 		fi
+-		if [ "$HP_ARCH" = "" ]; then
++		if test "$HP_ARCH" = ""; then
+ 		    set_cc_for_build
+ 		    sed 's/^		//' << EOF > "$dummy.c"
+ 
+@@ -677,7 +719,8 @@ EOF
+ 		#include <stdlib.h>
+ 		#include <unistd.h>
+ 
+-		int main ()
++		int
++		main ()
+ 		{
+ 		#if defined(_SC_KERNEL_BITS)
+ 		    long bits = sysconf(_SC_KERNEL_BITS);
+@@ -708,7 +751,7 @@ EOF
+ 		    test -z "$HP_ARCH" && HP_ARCH=hppa
+ 		fi ;;
+ 	esac
+-	if [ "$HP_ARCH" = hppa2.0w ]
++	if test "$HP_ARCH" = hppa2.0w
+ 	then
+ 	    set_cc_for_build
+ 
+@@ -729,12 +772,12 @@ EOF
+ 		HP_ARCH=hppa64
+ 	    fi
+ 	fi
+-	echo "$HP_ARCH"-hp-hpux"$HPUX_REV"
+-	exit ;;
++	GUESS=$HP_ARCH-hp-hpux$HPUX_REV
++	;;
+     ia64:HP-UX:*:*)
+-	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
+-	echo ia64-hp-hpux"$HPUX_REV"
+-	exit ;;
++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
++	GUESS=ia64-hp-hpux$HPUX_REV
++	;;
+     3050*:HI-UX:*:*)
+ 	set_cc_for_build
+ 	sed 's/^	//' << EOF > "$dummy.c"
+@@ -764,36 +807,36 @@ EOF
+ EOF
+ 	$CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"` &&
+ 		{ echo "$SYSTEM_NAME"; exit; }
+-	echo unknown-hitachi-hiuxwe2
+-	exit ;;
++	GUESS=unknown-hitachi-hiuxwe2
++	;;
+     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:*)
+-	echo hppa1.1-hp-bsd
+-	exit ;;
++	GUESS=hppa1.1-hp-bsd
++	;;
+     9000/8??:4.3bsd:*:*)
+-	echo hppa1.0-hp-bsd
+-	exit ;;
++	GUESS=hppa1.0-hp-bsd
++	;;
+     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
+-	echo hppa1.0-hp-mpeix
+-	exit ;;
++	GUESS=hppa1.0-hp-mpeix
++	;;
+     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:*)
+-	echo hppa1.1-hp-osf
+-	exit ;;
++	GUESS=hppa1.1-hp-osf
++	;;
+     hp8??:OSF1:*:*)
+-	echo hppa1.0-hp-osf
+-	exit ;;
++	GUESS=hppa1.0-hp-osf
++	;;
+     i*86:OSF1:*:*)
+-	if [ -x /usr/sbin/sysversion ] ; then
+-	    echo "$UNAME_MACHINE"-unknown-osf1mk
++	if test -x /usr/sbin/sysversion ; then
++	    GUESS=$UNAME_MACHINE-unknown-osf1mk
+ 	else
+-	    echo "$UNAME_MACHINE"-unknown-osf1
++	    GUESS=$UNAME_MACHINE-unknown-osf1
+ 	fi
+-	exit ;;
++	;;
+     parisc*:Lites*:*:*)
+-	echo hppa1.1-hp-lites
+-	exit ;;
++	GUESS=hppa1.1-hp-lites
++	;;
+     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
+-	echo c1-convex-bsd
+-	exit ;;
++	GUESS=c1-convex-bsd
++	;;
+     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
+ 	if getsysinfo -f scalar_acc
+ 	then echo c32-convex-bsd
+@@ -801,17 +844,18 @@ EOF
+ 	fi
+ 	exit ;;
+     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
+-	echo c34-convex-bsd
+-	exit ;;
++	GUESS=c34-convex-bsd
++	;;
+     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
+-	echo c38-convex-bsd
+-	exit ;;
++	GUESS=c38-convex-bsd
++	;;
+     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
+-	echo c4-convex-bsd
+-	exit ;;
++	GUESS=c4-convex-bsd
++	;;
+     CRAY*Y-MP:*:*:*)
+-	echo ymp-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+-	exit ;;
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=ymp-cray-unicos$CRAY_REL
++	;;
+     CRAY*[A-Z]90:*:*:*)
+ 	echo "$UNAME_MACHINE"-cray-unicos"$UNAME_RELEASE" \
+ 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
+@@ -819,112 +863,153 @@ EOF
+ 	      -e 's/\.[^.]*$/.X/'
+ 	exit ;;
+     CRAY*TS:*:*:*)
+-	echo t90-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+-	exit ;;
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=t90-cray-unicos$CRAY_REL
++	;;
+     CRAY*T3E:*:*:*)
+-	echo alphaev5-cray-unicosmk"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+-	exit ;;
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=alphaev5-cray-unicosmk$CRAY_REL
++	;;
+     CRAY*SV1:*:*:*)
+-	echo sv1-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+-	exit ;;
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=sv1-cray-unicos$CRAY_REL
++	;;
+     *:UNICOS/mp:*:*)
+-	echo craynv-cray-unicosmp"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
+-	exit ;;
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=craynv-cray-unicosmp$CRAY_REL
++	;;
+     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
+ 	FUJITSU_PROC=`uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
+ 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
+ 	FUJITSU_REL=`echo "$UNAME_RELEASE" | sed -e 's/ /_/'`
+-	echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+-	exit ;;
++	GUESS=${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
++	;;
+     5000:UNIX_System_V:4.*:*)
+ 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
+ 	FUJITSU_REL=`echo "$UNAME_RELEASE" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`
+-	echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
+-	exit ;;
++	GUESS=sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
++	;;
+     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
+-	echo "$UNAME_MACHINE"-pc-bsdi"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-bsdi$UNAME_RELEASE
++	;;
+     sparc*:BSD/OS:*:*)
+-	echo sparc-unknown-bsdi"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sparc-unknown-bsdi$UNAME_RELEASE
++	;;
+     *:BSD/OS:*:*)
+-	echo "$UNAME_MACHINE"-unknown-bsdi"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-bsdi$UNAME_RELEASE
++	;;
+     arm:FreeBSD:*:*)
+ 	UNAME_PROCESSOR=`uname -p`
+ 	set_cc_for_build
+ 	if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
+ 	    | grep -q __ARM_PCS_VFP
+ 	then
+-	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`"-gnueabi
++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabi
+ 	else
+-	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`"-gnueabihf
++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabihf
+ 	fi
+-	exit ;;
++	;;
+     *:FreeBSD:*:*)
+-	UNAME_PROCESSOR=`/usr/bin/uname -p`
+-	case "$UNAME_PROCESSOR" in
++	UNAME_PROCESSOR=`uname -p`
++	case $UNAME_PROCESSOR in
+ 	    amd64)
+ 		UNAME_PROCESSOR=x86_64 ;;
+ 	    i386)
+ 		UNAME_PROCESSOR=i586 ;;
+ 	esac
+-	echo "$UNAME_PROCESSOR"-unknown-freebsd"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
+-	exit ;;
++	FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL
++	;;
+     i*:CYGWIN*:*)
+-	echo "$UNAME_MACHINE"-pc-cygwin
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-cygwin
++	;;
+     *:MINGW64*:*)
+-	echo "$UNAME_MACHINE"-pc-mingw64
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-mingw64
++	;;
+     *:MINGW*:*)
+-	echo "$UNAME_MACHINE"-pc-mingw32
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-mingw32
++	;;
+     *:MSYS*:*)
+-	echo "$UNAME_MACHINE"-pc-msys
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-msys
++	;;
+     i*:PW*:*)
+-	echo "$UNAME_MACHINE"-pc-pw32
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-pw32
++	;;
++    *:SerenityOS:*:*)
++        GUESS=$UNAME_MACHINE-pc-serenity
++        ;;
+     *:Interix*:*)
+-	case "$UNAME_MACHINE" in
++	case $UNAME_MACHINE in
+ 	    x86)
+-		echo i586-pc-interix"$UNAME_RELEASE"
+-		exit ;;
++		GUESS=i586-pc-interix$UNAME_RELEASE
++		;;
+ 	    authenticamd | genuineintel | EM64T)
+-		echo x86_64-unknown-interix"$UNAME_RELEASE"
+-		exit ;;
++		GUESS=x86_64-unknown-interix$UNAME_RELEASE
++		;;
+ 	    IA64)
+-		echo ia64-unknown-interix"$UNAME_RELEASE"
+-		exit ;;
++		GUESS=ia64-unknown-interix$UNAME_RELEASE
++		;;
+ 	esac ;;
+     i*:UWIN*:*)
+-	echo "$UNAME_MACHINE"-pc-uwin
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-uwin
++	;;
+     amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
+-	echo x86_64-pc-cygwin
+-	exit ;;
++	GUESS=x86_64-pc-cygwin
++	;;
+     prep*:SunOS:5.*:*)
+-	echo powerpcle-unknown-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
+-	exit ;;
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=powerpcle-unknown-solaris2$SUN_REL
++	;;
+     *:GNU:*:*)
+ 	# the GNU system
+-	echo "`echo "$UNAME_MACHINE"|sed -e 's,[-/].*$,,'`-unknown-$LIBC`echo "$UNAME_RELEASE"|sed -e 's,/.*$,,'`"
+-	exit ;;
++	GNU_ARCH=`echo "$UNAME_MACHINE" | sed -e 's,[-/].*$,,'`
++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's,/.*$,,'`
++	GUESS=$GNU_ARCH-unknown-$LIBC$GNU_REL
++	;;
+     *:GNU/*:*:*)
+ 	# other systems with GNU libc and userland
+-	echo "$UNAME_MACHINE-unknown-`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"``echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`-$LIBC"
+-	exit ;;
++	GNU_SYS=`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"`
++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	GUESS=$UNAME_MACHINE-unknown-$GNU_SYS$GNU_REL-$LIBC
++	;;
++    x86_64:[Mm]anagarm:*:*|i?86:[Mm]anagarm:*:*)
++	GUESS="$UNAME_MACHINE-pc-managarm-mlibc"
++	;;
++    *:[Mm]anagarm:*:*)
++	GUESS="$UNAME_MACHINE-unknown-managarm-mlibc"
++	;;
+     *:Minix:*:*)
+-	echo "$UNAME_MACHINE"-unknown-minix
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-minix
++	;;
+     aarch64:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	set_cc_for_build
++	CPU=$UNAME_MACHINE
++	LIBCABI=$LIBC
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    ABI=64
++	    sed 's/^	    //' << EOF > "$dummy.c"
++	    #ifdef __ARM_EABI__
++	    #ifdef __ARM_PCS_VFP
++	    ABI=eabihf
++	    #else
++	    ABI=eabi
++	    #endif
++	    #endif
++EOF
++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
++	    eval "$cc_set_abi"
++	    case $ABI in
++		eabi | eabihf) CPU=armv8l; LIBCABI=$LIBC$ABI ;;
++	    esac
++	fi
++	GUESS=$CPU-unknown-linux-$LIBCABI
++	;;
+     aarch64_be:Linux:*:*)
+ 	UNAME_MACHINE=aarch64_be
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     alpha:Linux:*:*)
+ 	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' /proc/cpuinfo 2>/dev/null` in
+ 	  EV5)   UNAME_MACHINE=alphaev5 ;;
+@@ -937,60 +1022,72 @@ EOF
+ 	esac
+ 	objdump --private-headers /bin/sh | grep -q ld.so.1
+ 	if test "$?" = 0 ; then LIBC=gnulibc1 ; fi
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
+-    arc:Linux:*:* | arceb:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    arc:Linux:*:* | arceb:Linux:*:* | arc32:Linux:*:* | arc64:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     arm*:Linux:*:*)
+ 	set_cc_for_build
+ 	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
+ 	    | grep -q __ARM_EABI__
+ 	then
+-	    echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++	    GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+ 	else
+ 	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
+ 		| grep -q __ARM_PCS_VFP
+ 	    then
+-		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabi
++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabi
+ 	    else
+-		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabihf
++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabihf
+ 	    fi
+ 	fi
+-	exit ;;
++	;;
+     avr32*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     cris:Linux:*:*)
+-	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
++	;;
+     crisv32:Linux:*:*)
+-	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
++	;;
+     e2k:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     frv:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     hexagon:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     i*86:Linux:*:*)
+-	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-linux-$LIBC
++	;;
+     ia64:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     k1om:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    kvx:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    kvx:cos:*:*)
++	GUESS=$UNAME_MACHINE-unknown-cos
++	;;
++    kvx:mbr:*:*)
++	GUESS=$UNAME_MACHINE-unknown-mbr
++	;;
++    loongarch32:Linux:*:* | loongarch64:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     m32r*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     m68*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     mips:Linux:*:* | mips64:Linux:*:*)
+ 	set_cc_for_build
+ 	IS_GLIBC=0
+@@ -1035,123 +1132,135 @@ EOF
+ 	#endif
+ 	#endif
+ EOF
+-	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI'`"
++	cc_set_vars=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI'`
++	eval "$cc_set_vars"
+ 	test "x$CPU" != x && { echo "$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI"; exit; }
+ 	;;
+     mips64el:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     openrisc*:Linux:*:*)
+-	echo or1k-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=or1k-unknown-linux-$LIBC
++	;;
+     or32:Linux:*:* | or1k*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     padre:Linux:*:*)
+-	echo sparc-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=sparc-unknown-linux-$LIBC
++	;;
+     parisc64:Linux:*:* | hppa64:Linux:*:*)
+-	echo hppa64-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=hppa64-unknown-linux-$LIBC
++	;;
+     parisc:Linux:*:* | hppa:Linux:*:*)
+ 	# Look for CPU level
+ 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
+-	  PA7*) echo hppa1.1-unknown-linux-"$LIBC" ;;
+-	  PA8*) echo hppa2.0-unknown-linux-"$LIBC" ;;
+-	  *)    echo hppa-unknown-linux-"$LIBC" ;;
++	  PA7*) GUESS=hppa1.1-unknown-linux-$LIBC ;;
++	  PA8*) GUESS=hppa2.0-unknown-linux-$LIBC ;;
++	  *)    GUESS=hppa-unknown-linux-$LIBC ;;
+ 	esac
+-	exit ;;
++	;;
+     ppc64:Linux:*:*)
+-	echo powerpc64-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=powerpc64-unknown-linux-$LIBC
++	;;
+     ppc:Linux:*:*)
+-	echo powerpc-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=powerpc-unknown-linux-$LIBC
++	;;
+     ppc64le:Linux:*:*)
+-	echo powerpc64le-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=powerpc64le-unknown-linux-$LIBC
++	;;
+     ppcle:Linux:*:*)
+-	echo powerpcle-unknown-linux-"$LIBC"
+-	exit ;;
+-    riscv32:Linux:*:* | riscv64:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=powerpcle-unknown-linux-$LIBC
++	;;
++    riscv32:Linux:*:* | riscv32be:Linux:*:* | riscv64:Linux:*:* | riscv64be:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     s390:Linux:*:* | s390x:Linux:*:*)
+-	echo "$UNAME_MACHINE"-ibm-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-ibm-linux-$LIBC
++	;;
+     sh64*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     sh*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     sparc:Linux:*:* | sparc64:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     tile*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     vax:Linux:*:*)
+-	echo "$UNAME_MACHINE"-dec-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-dec-linux-$LIBC
++	;;
+     x86_64:Linux:*:*)
+ 	set_cc_for_build
++	CPU=$UNAME_MACHINE
+ 	LIBCABI=$LIBC
+-	if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
+-	    if (echo '#ifdef __ILP32__'; echo IS_X32; echo '#endif') | \
+-		(CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+-		grep IS_X32 >/dev/null
+-	    then
+-		LIBCABI="$LIBC"x32
+-	    fi
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    ABI=64
++	    sed 's/^	    //' << EOF > "$dummy.c"
++	    #ifdef __i386__
++	    ABI=x86
++	    #else
++	    #ifdef __ILP32__
++	    ABI=x32
++	    #endif
++	    #endif
++EOF
++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
++	    eval "$cc_set_abi"
++	    case $ABI in
++		x86) CPU=i686 ;;
++		x32) LIBCABI=${LIBC}x32 ;;
++	    esac
+ 	fi
+-	echo "$UNAME_MACHINE"-pc-linux-"$LIBCABI"
+-	exit ;;
++	GUESS=$CPU-pc-linux-$LIBCABI
++	;;
+     xtensa*:Linux:*:*)
+-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
+     i*86:DYNIX/ptx:4*:*)
+ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
+ 	# earlier versions are messed up and put the nodename in both
+ 	# sysname and nodename.
+-	echo i386-sequent-sysv4
+-	exit ;;
++	GUESS=i386-sequent-sysv4
++	;;
+     i*86:UNIX_SV:4.2MP:2.*)
+ 	# Unixware is an offshoot of SVR4, but it has its own version
+ 	# number series starting with 2...
+ 	# I am not positive that other SVR4 systems won't match this,
+ 	# I just have to hope.  -- rms.
+ 	# Use sysv4.2uw... so that sysv4* matches it.
+-	echo "$UNAME_MACHINE"-pc-sysv4.2uw"$UNAME_VERSION"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-sysv4.2uw$UNAME_VERSION
++	;;
+     i*86:OS/2:*:*)
+-	# If we were able to find `uname', then EMX Unix compatibility
++	# If we were able to find 'uname', then EMX Unix compatibility
+ 	# is probably installed.
+-	echo "$UNAME_MACHINE"-pc-os2-emx
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-os2-emx
++	;;
+     i*86:XTS-300:*:STOP)
+-	echo "$UNAME_MACHINE"-unknown-stop
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-stop
++	;;
+     i*86:atheos:*:*)
+-	echo "$UNAME_MACHINE"-unknown-atheos
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-atheos
++	;;
+     i*86:syllable:*:*)
+-	echo "$UNAME_MACHINE"-pc-syllable
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-syllable
++	;;
+     i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
+-	echo i386-unknown-lynxos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=i386-unknown-lynxos$UNAME_RELEASE
++	;;
+     i*86:*DOS:*:*)
+-	echo "$UNAME_MACHINE"-pc-msdosdjgpp
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-msdosdjgpp
++	;;
+     i*86:*:4.*:*)
+ 	UNAME_REL=`echo "$UNAME_RELEASE" | sed 's/\/MP$//'`
+ 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
+-		echo "$UNAME_MACHINE"-univel-sysv"$UNAME_REL"
++		GUESS=$UNAME_MACHINE-univel-sysv$UNAME_REL
+ 	else
+-		echo "$UNAME_MACHINE"-pc-sysv"$UNAME_REL"
++		GUESS=$UNAME_MACHINE-pc-sysv$UNAME_REL
+ 	fi
+-	exit ;;
++	;;
+     i*86:*:5:[678]*)
+ 	# UnixWare 7.x, OpenUNIX and OpenServer 6.
+ 	case `/bin/uname -X | grep "^Machine"` in
+@@ -1159,12 +1268,12 @@ EOF
+ 	    *Pentium)	     UNAME_MACHINE=i586 ;;
+ 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
+ 	esac
+-	echo "$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
++	;;
+     i*86:*:3.2:*)
+ 	if test -f /usr/options/cb.name; then
+ 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
+-		echo "$UNAME_MACHINE"-pc-isc"$UNAME_REL"
++		GUESS=$UNAME_MACHINE-pc-isc$UNAME_REL
+ 	elif /bin/uname -X 2>/dev/null >/dev/null ; then
+ 		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
+ 		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
+@@ -1174,11 +1283,11 @@ EOF
+ 			&& UNAME_MACHINE=i686
+ 		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
+ 			&& UNAME_MACHINE=i686
+-		echo "$UNAME_MACHINE"-pc-sco"$UNAME_REL"
++		GUESS=$UNAME_MACHINE-pc-sco$UNAME_REL
+ 	else
+-		echo "$UNAME_MACHINE"-pc-sysv32
++		GUESS=$UNAME_MACHINE-pc-sysv32
+ 	fi
+-	exit ;;
++	;;
+     pc:*:*:*)
+ 	# Left here for compatibility:
+ 	# uname -m prints for DJGPP always 'pc', but it prints nothing about
+@@ -1186,31 +1295,31 @@ EOF
+ 	# Note: whatever this is, it MUST be the same as what config.sub
+ 	# prints for the "djgpp" host, or else GDB configure will decide that
+ 	# this is a cross-build.
+-	echo i586-pc-msdosdjgpp
+-	exit ;;
++	GUESS=i586-pc-msdosdjgpp
++	;;
+     Intel:Mach:3*:*)
+-	echo i386-pc-mach3
+-	exit ;;
++	GUESS=i386-pc-mach3
++	;;
+     paragon:*:*:*)
+-	echo i860-intel-osf1
+-	exit ;;
++	GUESS=i860-intel-osf1
++	;;
+     i860:*:4.*:*) # i860-SVR4
+ 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
+-	  echo i860-stardent-sysv"$UNAME_RELEASE" # Stardent Vistra i860-SVR4
++	  GUESS=i860-stardent-sysv$UNAME_RELEASE    # Stardent Vistra i860-SVR4
+ 	else # Add other i860-SVR4 vendors below as they are discovered.
+-	  echo i860-unknown-sysv"$UNAME_RELEASE"  # Unknown i860-SVR4
++	  GUESS=i860-unknown-sysv$UNAME_RELEASE     # Unknown i860-SVR4
+ 	fi
+-	exit ;;
++	;;
+     mini*:CTIX:SYS*5:*)
+ 	# "miniframe"
+-	echo m68010-convergent-sysv
+-	exit ;;
++	GUESS=m68010-convergent-sysv
++	;;
+     mc68k:UNIX:SYSTEM5:3.51m)
+-	echo m68k-convergent-sysv
+-	exit ;;
++	GUESS=m68k-convergent-sysv
++	;;
+     M680?0:D-NIX:5.3:*)
+-	echo m68k-diab-dnix
+-	exit ;;
++	GUESS=m68k-diab-dnix
++	;;
+     M68*:*:R3V[5678]*:*)
+ 	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
+     3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
+@@ -1235,116 +1344,119 @@ EOF
+ 	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
+ 	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
+     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
+-	echo m68k-unknown-lynxos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-unknown-lynxos$UNAME_RELEASE
++	;;
+     mc68030:UNIX_System_V:4.*:*)
+-	echo m68k-atari-sysv4
+-	exit ;;
++	GUESS=m68k-atari-sysv4
++	;;
+     TSUNAMI:LynxOS:2.*:*)
+-	echo sparc-unknown-lynxos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sparc-unknown-lynxos$UNAME_RELEASE
++	;;
+     rs6000:LynxOS:2.*:*)
+-	echo rs6000-unknown-lynxos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=rs6000-unknown-lynxos$UNAME_RELEASE
++	;;
+     PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
+-	echo powerpc-unknown-lynxos"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=powerpc-unknown-lynxos$UNAME_RELEASE
++	;;
+     SM[BE]S:UNIX_SV:*:*)
+-	echo mips-dde-sysv"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=mips-dde-sysv$UNAME_RELEASE
++	;;
+     RM*:ReliantUNIX-*:*:*)
+-	echo mips-sni-sysv4
+-	exit ;;
++	GUESS=mips-sni-sysv4
++	;;
+     RM*:SINIX-*:*:*)
+-	echo mips-sni-sysv4
+-	exit ;;
++	GUESS=mips-sni-sysv4
++	;;
+     *:SINIX-*:*:*)
+ 	if uname -p 2>/dev/null >/dev/null ; then
+ 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
+-		echo "$UNAME_MACHINE"-sni-sysv4
++		GUESS=$UNAME_MACHINE-sni-sysv4
+ 	else
+-		echo ns32k-sni-sysv
++		GUESS=ns32k-sni-sysv
+ 	fi
+-	exit ;;
+-    PENTIUM:*:4.0*:*)	# Unisys `ClearPath HMP IX 4000' SVR4/MP effort
++	;;
++    PENTIUM:*:4.0*:*)	# Unisys 'ClearPath HMP IX 4000' SVR4/MP effort
+ 			# says <Richard.M.Bartel@ccMail.Census.GOV>
+-	echo i586-unisys-sysv4
+-	exit ;;
++	GUESS=i586-unisys-sysv4
++	;;
+     *:UNIX_System_V:4*:FTX*)
+ 	# From Gerald Hewes <hewes@openmarket.com>.
+ 	# How about differentiating between stratus architectures? -djm
+-	echo hppa1.1-stratus-sysv4
+-	exit ;;
++	GUESS=hppa1.1-stratus-sysv4
++	;;
+     *:*:*:FTX*)
+ 	# From seanf@swdc.stratus.com.
+-	echo i860-stratus-sysv4
+-	exit ;;
++	GUESS=i860-stratus-sysv4
++	;;
+     i*86:VOS:*:*)
+ 	# From Paul.Green@stratus.com.
+-	echo "$UNAME_MACHINE"-stratus-vos
+-	exit ;;
++	GUESS=$UNAME_MACHINE-stratus-vos
++	;;
+     *:VOS:*:*)
+ 	# From Paul.Green@stratus.com.
+-	echo hppa1.1-stratus-vos
+-	exit ;;
++	GUESS=hppa1.1-stratus-vos
++	;;
+     mc68*:A/UX:*:*)
+-	echo m68k-apple-aux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=m68k-apple-aux$UNAME_RELEASE
++	;;
+     news*:NEWS-OS:6*:*)
+-	echo mips-sony-newsos6
+-	exit ;;
++	GUESS=mips-sony-newsos6
++	;;
+     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
+-	if [ -d /usr/nec ]; then
+-		echo mips-nec-sysv"$UNAME_RELEASE"
++	if test -d /usr/nec; then
++		GUESS=mips-nec-sysv$UNAME_RELEASE
+ 	else
+-		echo mips-unknown-sysv"$UNAME_RELEASE"
++		GUESS=mips-unknown-sysv$UNAME_RELEASE
+ 	fi
+-	exit ;;
++	;;
+     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
+-	echo powerpc-be-beos
+-	exit ;;
++	GUESS=powerpc-be-beos
++	;;
+     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
+-	echo powerpc-apple-beos
+-	exit ;;
++	GUESS=powerpc-apple-beos
++	;;
+     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
+-	echo i586-pc-beos
+-	exit ;;
++	GUESS=i586-pc-beos
++	;;
+     BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
+-	echo i586-pc-haiku
+-	exit ;;
+-    x86_64:Haiku:*:*)
+-	echo x86_64-unknown-haiku
+-	exit ;;
++	GUESS=i586-pc-haiku
++	;;
++    ppc:Haiku:*:*)	# Haiku running on Apple PowerPC
++	GUESS=powerpc-apple-haiku
++	;;
++    *:Haiku:*:*)	# Haiku modern gcc (not bound by BeOS compat)
++	GUESS=$UNAME_MACHINE-unknown-haiku
++	;;
+     SX-4:SUPER-UX:*:*)
+-	echo sx4-nec-superux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sx4-nec-superux$UNAME_RELEASE
++	;;
+     SX-5:SUPER-UX:*:*)
+-	echo sx5-nec-superux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sx5-nec-superux$UNAME_RELEASE
++	;;
+     SX-6:SUPER-UX:*:*)
+-	echo sx6-nec-superux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sx6-nec-superux$UNAME_RELEASE
++	;;
+     SX-7:SUPER-UX:*:*)
+-	echo sx7-nec-superux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sx7-nec-superux$UNAME_RELEASE
++	;;
+     SX-8:SUPER-UX:*:*)
+-	echo sx8-nec-superux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sx8-nec-superux$UNAME_RELEASE
++	;;
+     SX-8R:SUPER-UX:*:*)
+-	echo sx8r-nec-superux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sx8r-nec-superux$UNAME_RELEASE
++	;;
+     SX-ACE:SUPER-UX:*:*)
+-	echo sxace-nec-superux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=sxace-nec-superux$UNAME_RELEASE
++	;;
+     Power*:Rhapsody:*:*)
+-	echo powerpc-apple-rhapsody"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=powerpc-apple-rhapsody$UNAME_RELEASE
++	;;
+     *:Rhapsody:*:*)
+-	echo "$UNAME_MACHINE"-apple-rhapsody"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-apple-rhapsody$UNAME_RELEASE
++	;;
+     arm64:Darwin:*:*)
+-	echo aarch64-apple-darwin"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=aarch64-apple-darwin$UNAME_RELEASE
++	;;
+     *:Darwin:*:*)
+ 	UNAME_PROCESSOR=`uname -p`
+ 	case $UNAME_PROCESSOR in
+@@ -1359,7 +1471,7 @@ EOF
+ 	else
+ 	    set_cc_for_build
+ 	fi
+-	if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+ 	    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+ 		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+ 		   grep IS_64BIT_ARCH >/dev/null
+@@ -1380,109 +1492,122 @@ EOF
+ 	    # uname -m returns i386 or x86_64
+ 	    UNAME_PROCESSOR=$UNAME_MACHINE
+ 	fi
+-	echo "$UNAME_PROCESSOR"-apple-darwin"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_PROCESSOR-apple-darwin$UNAME_RELEASE
++	;;
+     *:procnto*:*:* | *:QNX:[0123456789]*:*)
+ 	UNAME_PROCESSOR=`uname -p`
+ 	if test "$UNAME_PROCESSOR" = x86; then
+ 		UNAME_PROCESSOR=i386
+ 		UNAME_MACHINE=pc
+ 	fi
+-	echo "$UNAME_PROCESSOR"-"$UNAME_MACHINE"-nto-qnx"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_PROCESSOR-$UNAME_MACHINE-nto-qnx$UNAME_RELEASE
++	;;
+     *:QNX:*:4*)
+-	echo i386-pc-qnx
+-	exit ;;
++	GUESS=i386-pc-qnx
++	;;
+     NEO-*:NONSTOP_KERNEL:*:*)
+-	echo neo-tandem-nsk"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=neo-tandem-nsk$UNAME_RELEASE
++	;;
+     NSE-*:NONSTOP_KERNEL:*:*)
+-	echo nse-tandem-nsk"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=nse-tandem-nsk$UNAME_RELEASE
++	;;
+     NSR-*:NONSTOP_KERNEL:*:*)
+-	echo nsr-tandem-nsk"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=nsr-tandem-nsk$UNAME_RELEASE
++	;;
+     NSV-*:NONSTOP_KERNEL:*:*)
+-	echo nsv-tandem-nsk"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=nsv-tandem-nsk$UNAME_RELEASE
++	;;
+     NSX-*:NONSTOP_KERNEL:*:*)
+-	echo nsx-tandem-nsk"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=nsx-tandem-nsk$UNAME_RELEASE
++	;;
+     *:NonStop-UX:*:*)
+-	echo mips-compaq-nonstopux
+-	exit ;;
++	GUESS=mips-compaq-nonstopux
++	;;
+     BS2000:POSIX*:*:*)
+-	echo bs2000-siemens-sysv
+-	exit ;;
++	GUESS=bs2000-siemens-sysv
++	;;
+     DS/*:UNIX_System_V:*:*)
+-	echo "$UNAME_MACHINE"-"$UNAME_SYSTEM"-"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-$UNAME_SYSTEM-$UNAME_RELEASE
++	;;
+     *:Plan9:*:*)
+ 	# "uname -m" is not consistent, so use $cputype instead. 386
+ 	# is converted to i386 for consistency with other x86
+ 	# operating systems.
+-	# shellcheck disable=SC2154
+-	if test "$cputype" = 386; then
++	if test "${cputype-}" = 386; then
+ 	    UNAME_MACHINE=i386
+-	else
+-	    UNAME_MACHINE="$cputype"
++	elif test "x${cputype-}" != x; then
++	    UNAME_MACHINE=$cputype
+ 	fi
+-	echo "$UNAME_MACHINE"-unknown-plan9
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-plan9
++	;;
+     *:TOPS-10:*:*)
+-	echo pdp10-unknown-tops10
+-	exit ;;
++	GUESS=pdp10-unknown-tops10
++	;;
+     *:TENEX:*:*)
+-	echo pdp10-unknown-tenex
+-	exit ;;
++	GUESS=pdp10-unknown-tenex
++	;;
+     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
+-	echo pdp10-dec-tops20
+-	exit ;;
++	GUESS=pdp10-dec-tops20
++	;;
+     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
+-	echo pdp10-xkl-tops20
+-	exit ;;
++	GUESS=pdp10-xkl-tops20
++	;;
+     *:TOPS-20:*:*)
+-	echo pdp10-unknown-tops20
+-	exit ;;
++	GUESS=pdp10-unknown-tops20
++	;;
+     *:ITS:*:*)
+-	echo pdp10-unknown-its
+-	exit ;;
++	GUESS=pdp10-unknown-its
++	;;
+     SEI:*:*:SEIUX)
+-	echo mips-sei-seiux"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=mips-sei-seiux$UNAME_RELEASE
++	;;
+     *:DragonFly:*:*)
+-	echo "$UNAME_MACHINE"-unknown-dragonfly"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
+-	exit ;;
++	DRAGONFLY_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	GUESS=$UNAME_MACHINE-unknown-dragonfly$DRAGONFLY_REL
++	;;
+     *:*VMS:*:*)
+ 	UNAME_MACHINE=`(uname -p) 2>/dev/null`
+-	case "$UNAME_MACHINE" in
+-	    A*) echo alpha-dec-vms ; exit ;;
+-	    I*) echo ia64-dec-vms ; exit ;;
+-	    V*) echo vax-dec-vms ; exit ;;
++	case $UNAME_MACHINE in
++	    A*) GUESS=alpha-dec-vms ;;
++	    I*) GUESS=ia64-dec-vms ;;
++	    V*) GUESS=vax-dec-vms ;;
+ 	esac ;;
+     *:XENIX:*:SysV)
+-	echo i386-pc-xenix
+-	exit ;;
++	GUESS=i386-pc-xenix
++	;;
+     i*86:skyos:*:*)
+-	echo "$UNAME_MACHINE"-pc-skyos"`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`"
+-	exit ;;
++	SKYOS_REL=`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`
++	GUESS=$UNAME_MACHINE-pc-skyos$SKYOS_REL
++	;;
+     i*86:rdos:*:*)
+-	echo "$UNAME_MACHINE"-pc-rdos
+-	exit ;;
+-    i*86:AROS:*:*)
+-	echo "$UNAME_MACHINE"-pc-aros
+-	exit ;;
++	GUESS=$UNAME_MACHINE-pc-rdos
++	;;
++    i*86:Fiwix:*:*)
++	GUESS=$UNAME_MACHINE-pc-fiwix
++	;;
++    *:AROS:*:*)
++	GUESS=$UNAME_MACHINE-unknown-aros
++	;;
+     x86_64:VMkernel:*:*)
+-	echo "$UNAME_MACHINE"-unknown-esx
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-esx
++	;;
+     amd64:Isilon\ OneFS:*:*)
+-	echo x86_64-unknown-onefs
+-	exit ;;
++	GUESS=x86_64-unknown-onefs
++	;;
+     *:Unleashed:*:*)
+-	echo "$UNAME_MACHINE"-unknown-unleashed"$UNAME_RELEASE"
+-	exit ;;
++	GUESS=$UNAME_MACHINE-unknown-unleashed$UNAME_RELEASE
++	;;
++    *:Ironclad:*:*)
++	GUESS=$UNAME_MACHINE-unknown-ironclad
++	;;
+ esac
+ 
++# Do we have a guess based on uname results?
++if test "x$GUESS" != x; then
++    echo "$GUESS"
++    exit
++fi
++
+ # No uname command or uname output not recognized.
+ set_cc_for_build
+ cat > "$dummy.c" <<EOF
+@@ -1498,6 +1623,7 @@ cat > "$dummy.c" <<EOF
+ #endif
+ #endif
+ #endif
++int
+ main ()
+ {
+ #if defined (sony)
+@@ -1614,7 +1740,7 @@ main ()
+ }
+ EOF
+ 
+-$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=`$dummy` &&
++$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=`"$dummy"` &&
+ 	{ echo "$SYSTEM_NAME"; exit; }
+ 
+ # Apollos put the system type in the environment.
+@@ -1622,7 +1748,7 @@ test -d /usr/apollo && { echo "$ISP-apollo-$SYSTYPE"; exit; }
+ 
+ echo "$0: unable to guess system type" >&2
+ 
+-case "$UNAME_MACHINE:$UNAME_SYSTEM" in
++case $UNAME_MACHINE:$UNAME_SYSTEM in
+     mips:Linux | mips64:Linux)
+ 	# If we got here on MIPS GNU/Linux, output extra information.
+ 	cat >&2 <<EOF
+@@ -1639,14 +1765,16 @@ This script (version $timestamp), has failed to recognize the
+ operating system you are using. If your script is old, overwrite *all*
+ copies of config.guess and config.sub with the latest versions from:
+ 
+-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
++  https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
+ and
+-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
++  https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
+ EOF
+ 
+-year=`echo $timestamp | sed 's,-.*,,'`
++our_year=`echo $timestamp | sed 's,-.*,,'`
++thisyear=`date +%Y`
+ # shellcheck disable=SC2003
+-if test "`expr "\`date +%Y\`" - "$year"`" -lt 3 ; then
++script_age=`expr "$thisyear" - "$our_year"`
++if test "$script_age" -lt 3 ; then
+    cat >&2 <<EOF
+ 
+ If $0 has already been updated, send the following data and any
+diff --git a/config.sub b/config.sub
+index acbba51cc..4aaae46f6 100644
+--- a/config.sub
++++ b/config.sub
+@@ -1,12 +1,14 @@
+ #! /bin/sh
+ # Configuration validation subroutine script.
+-#   Copyright 1992-2020 Free Software Foundation, Inc.
++#   Copyright 1992-2024 Free Software Foundation, Inc.
+ 
+-timestamp='2020-08-06'
++# shellcheck disable=SC2006,SC2268,SC2162 # see below for rationale
++
++timestamp='2024-05-27'
+ 
+ # This file is free software; you can redistribute it and/or modify it
+ # under the terms of the GNU General Public License as published by
+-# the Free Software Foundation; either version 3 of the License, or
++# the Free Software Foundation, either version 3 of the License, or
+ # (at your option) any later version.
+ #
+ # This program is distributed in the hope that it will be useful, but
+@@ -33,7 +35,7 @@ timestamp='2020-08-06'
+ # Otherwise, we print the canonical config type on stdout and succeed.
+ 
+ # You can get the latest version of this script from:
+-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
++# https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
+ 
+ # This file is supposed to be the same for all GNU packages
+ # and recognize all the CPU types, system types and aliases
+@@ -50,6 +52,13 @@ timestamp='2020-08-06'
+ #	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
+ # It is wrong to echo any other type of specification.
+ 
++# The "shellcheck disable" line above the timestamp inhibits complaints
++# about features and limitations of the classic Bourne shell that were
++# superseded or lifted in POSIX.  However, this script identifies a wide
++# variety of pre-POSIX systems that do not have POSIX shells at all, and
++# even some reasonably current systems (Solaris 10 as case-in-point) still
++# have a pre-POSIX /bin/sh.
++
+ me=`echo "$0" | sed -e 's,.*/,,'`
+ 
+ usage="\
+@@ -67,13 +76,13 @@ Report bugs and patches to <config-patches@gnu.org>."
+ version="\
+ GNU config.sub ($timestamp)
+ 
+-Copyright 1992-2020 Free Software Foundation, Inc.
++Copyright 1992-2024 Free Software Foundation, Inc.
+ 
+ This is free software; see the source for copying conditions.  There is NO
+ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
+ 
+ help="
+-Try \`$me --help' for more information."
++Try '$me --help' for more information."
+ 
+ # Parse command line
+ while test $# -gt 0 ; do
+@@ -111,15 +120,16 @@ case $# in
+ esac
+ 
+ # Split fields of configuration type
+-# shellcheck disable=SC2162
++saved_IFS=$IFS
+ IFS="-" read field1 field2 field3 field4 <<EOF
+ $1
+ EOF
++IFS=$saved_IFS
+ 
+ # Separate into logical components for further validation
+ case $1 in
+ 	*-*-*-*-*)
+-		echo Invalid configuration \`"$1"\': more than four components >&2
++		echo "Invalid configuration '$1': more than four components" >&2
+ 		exit 1
+ 		;;
+ 	*-*-*-*)
+@@ -131,10 +141,21 @@ case $1 in
+ 		# parts
+ 		maybe_os=$field2-$field3
+ 		case $maybe_os in
+-			nto-qnx* | linux-* | uclinux-uclibc* \
+-			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
+-			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
+-			| storm-chaos* | os2-emx* | rtmk-nova*)
++			  cloudabi*-eabi* \
++			| kfreebsd*-gnu* \
++			| knetbsd*-gnu* \
++			| kopensolaris*-gnu* \
++			| linux-* \
++			| managarm-* \
++			| netbsd*-eabi* \
++			| netbsd*-gnu* \
++			| nto-qnx* \
++			| os2-emx* \
++			| rtmk-nova* \
++			| storm-chaos* \
++			| uclinux-gnu* \
++			| uclinux-uclibc* \
++			| windows-* )
+ 				basic_machine=$field1
+ 				basic_os=$maybe_os
+ 				;;
+@@ -149,8 +170,12 @@ case $1 in
+ 		esac
+ 		;;
+ 	*-*)
+-		# A lone config we happen to match not fitting any pattern
+ 		case $field1-$field2 in
++			# Shorthands that happen to contain a single dash
++			convex-c[12] | convex-c3[248])
++				basic_machine=$field2-convex
++				basic_os=
++				;;
+ 			decstation-3100)
+ 				basic_machine=mips-dec
+ 				basic_os=
+@@ -158,24 +183,88 @@ case $1 in
+ 			*-*)
+ 				# Second component is usually, but not always the OS
+ 				case $field2 in
+-					# Prevent following clause from handling this valid os
++					# Do not treat sunos as a manufacturer
+ 					sun*os*)
+ 						basic_machine=$field1
+ 						basic_os=$field2
+ 						;;
+ 					# Manufacturers
+-					dec* | mips* | sequent* | encore* | pc533* | sgi* | sony* \
+-					| att* | 7300* | 3300* | delta* | motorola* | sun[234]* \
+-					| unicom* | ibm* | next | hp | isi* | apollo | altos* \
+-					| convergent* | ncr* | news | 32* | 3600* | 3100* \
+-					| hitachi* | c[123]* | convex* | sun | crds | omron* | dg \
+-					| ultra | tti* | harris | dolphin | highlevel | gould \
+-					| cbm | ns | masscomp | apple | axis | knuth | cray \
+-					| microblaze* | sim | cisco \
+-					| oki | wec | wrs | winbond)
++					  3100* \
++					| 32* \
++					| 3300* \
++					| 3600* \
++					| 7300* \
++					| acorn \
++					| altos* \
++					| apollo \
++					| apple \
++					| atari \
++					| att* \
++					| axis \
++					| be \
++					| bull \
++					| cbm \
++					| ccur \
++					| cisco \
++					| commodore \
++					| convergent* \
++					| convex* \
++					| cray \
++					| crds \
++					| dec* \
++					| delta* \
++					| dg \
++					| digital \
++					| dolphin \
++					| encore* \
++					| gould \
++					| harris \
++					| highlevel \
++					| hitachi* \
++					| hp \
++					| ibm* \
++					| intergraph \
++					| isi* \
++					| knuth \
++					| masscomp \
++					| microblaze* \
++					| mips* \
++					| motorola* \
++					| ncr* \
++					| news \
++					| next \
++					| ns \
++					| oki \
++					| omron* \
++					| pc533* \
++					| rebel \
++					| rom68k \
++					| rombug \
++					| semi \
++					| sequent* \
++					| siemens \
++					| sgi* \
++					| siemens \
++					| sim \
++					| sni \
++					| sony* \
++					| stratus \
++					| sun \
++					| sun[234]* \
++					| tektronix \
++					| tti* \
++					| ultra \
++					| unicom* \
++					| wec \
++					| winbond \
++					| wrs)
+ 						basic_machine=$field1-$field2
+ 						basic_os=
+ 						;;
++					zephyr*)
++						basic_machine=$field1-unknown
++						basic_os=$field2
++						;;
+ 					*)
+ 						basic_machine=$field1
+ 						basic_os=$field2
+@@ -256,26 +345,6 @@ case $1 in
+ 				basic_machine=arm-unknown
+ 				basic_os=cegcc
+ 				;;
+-			convex-c1)
+-				basic_machine=c1-convex
+-				basic_os=bsd
+-				;;
+-			convex-c2)
+-				basic_machine=c2-convex
+-				basic_os=bsd
+-				;;
+-			convex-c32)
+-				basic_machine=c32-convex
+-				basic_os=bsd
+-				;;
+-			convex-c34)
+-				basic_machine=c34-convex
+-				basic_os=bsd
+-				;;
+-			convex-c38)
+-				basic_machine=c38-convex
+-				basic_os=bsd
+-				;;
+ 			cray)
+ 				basic_machine=j90-cray
+ 				basic_os=unicos
+@@ -698,15 +767,26 @@ case $basic_machine in
+ 		vendor=dec
+ 		basic_os=tops20
+ 		;;
+-	delta | 3300 | motorola-3300 | motorola-delta \
+-	      | 3300-motorola | delta-motorola)
++	delta | 3300 | delta-motorola | 3300-motorola | motorola-delta | motorola-3300)
+ 		cpu=m68k
+ 		vendor=motorola
+ 		;;
+-	dpx2*)
++	# This used to be dpx2*, but that gets the RS6000-based
++	# DPX/20 and the x86-based DPX/2-100 wrong.  See
++	# https://oldskool.silicium.org/stations/bull_dpx20.htm
++	# https://www.feb-patrimoine.com/english/bull_dpx2.htm
++	# https://www.feb-patrimoine.com/english/unix_and_bull.htm
++	dpx2 | dpx2[23]00 | dpx2[23]xx)
+ 		cpu=m68k
+ 		vendor=bull
+-		basic_os=sysv3
++		;;
++	dpx2100 | dpx21xx)
++		cpu=i386
++		vendor=bull
++		;;
++	dpx20)
++		cpu=rs6000
++		vendor=bull
+ 		;;
+ 	encore | umax | mmax)
+ 		cpu=ns32k
+@@ -821,18 +901,6 @@ case $basic_machine in
+ 	next | m*-next)
+ 		cpu=m68k
+ 		vendor=next
+-		case $basic_os in
+-		    openstep*)
+-		        ;;
+-		    nextstep*)
+-			;;
+-		    ns2*)
+-		      basic_os=nextstep2
+-			;;
+-		    *)
+-		      basic_os=nextstep3
+-			;;
+-		esac
+ 		;;
+ 	np1)
+ 		cpu=np1
+@@ -921,12 +989,13 @@ case $basic_machine in
+ 		;;
+ 
+ 	*-*)
+-		# shellcheck disable=SC2162
++		saved_IFS=$IFS
+ 		IFS="-" read cpu vendor <<EOF
+ $basic_machine
+ EOF
++		IFS=$saved_IFS
+ 		;;
+-	# We use `pc' rather than `unknown'
++	# We use 'pc' rather than 'unknown'
+ 	# because (1) that's what they normally are, and
+ 	# (2) the word "unknown" tends to confuse beginning users.
+ 	i*86 | x86_64)
+@@ -954,15 +1023,19 @@ unset -v basic_machine
+ 
+ # Decode basic machines in the full and proper CPU-Company form.
+ case $cpu-$vendor in
+-	# Here we handle the default manufacturer of certain CPU types in canonical form. It is in
+-	# some cases the only manufacturer, in others, it is the most popular.
++	# Here we handle the default manufacturer of certain CPU types in canonical form.
++	# It is in some cases the only manufacturer, in others, it is the most popular.
++	c[12]-convex | c[12]-unknown | c3[248]-convex | c3[248]-unknown)
++		vendor=convex
++		basic_os=${basic_os:-bsd}
++		;;
+ 	craynv-unknown)
+ 		vendor=cray
+ 		basic_os=${basic_os:-unicosmp}
+ 		;;
+ 	c90-unknown | c90-cray)
+ 		vendor=cray
+-		basic_os=${Basic_os:-unicos}
++		basic_os=${basic_os:-unicos}
+ 		;;
+ 	fx80-unknown)
+ 		vendor=alliant
+@@ -1003,11 +1076,34 @@ case $cpu-$vendor in
+ 		;;
+ 
+ 	# Here we normalize CPU types with a missing or matching vendor
+-	dpx20-unknown | dpx20-bull)
+-		cpu=rs6000
+-		vendor=bull
++	armh-unknown | armh-alt)
++		cpu=armv7l
++		vendor=alt
++		basic_os=${basic_os:-linux-gnueabihf}
++		;;
++
++	# Normalized CPU+vendor pairs that imply an OS, if not otherwise specified
++	m68k-isi)
++		basic_os=${basic_os:-sysv}
++		;;
++	m68k-sony)
++		basic_os=${basic_os:-newsos}
++		;;
++	m68k-tektronix)
++		basic_os=${basic_os:-bsd}
++		;;
++	m88k-harris)
++		basic_os=${basic_os:-sysv3}
++		;;
++	i386-bull | m68k-bull)
++		basic_os=${basic_os:-sysv3}
++		;;
++	rs6000-bull)
+ 		basic_os=${basic_os:-bosx}
+ 		;;
++	mips-sni)
++		basic_os=${basic_os:-sysv4}
++		;;
+ 
+ 	# Here we normalize CPU types irrespective of the vendor
+ 	amd64-*)
+@@ -1015,7 +1111,7 @@ case $cpu-$vendor in
+ 		;;
+ 	blackfin-*)
+ 		cpu=bfin
+-		basic_os=linux
++		basic_os=${basic_os:-linux}
+ 		;;
+ 	c54x-*)
+ 		cpu=tic54x
+@@ -1038,7 +1134,7 @@ case $cpu-$vendor in
+ 		;;
+ 	m68knommu-*)
+ 		cpu=m68k
+-		basic_os=linux
++		basic_os=${basic_os:-linux}
+ 		;;
+ 	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
+ 		cpu=s12z
+@@ -1048,12 +1144,12 @@ case $cpu-$vendor in
+ 		;;
+ 	parisc-*)
+ 		cpu=hppa
+-		basic_os=linux
++		basic_os=${basic_os:-linux}
+ 		;;
+ 	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
+ 		cpu=i586
+ 		;;
+-	pentiumpro-* | p6-* | 6x86-* | athlon-* | athalon_*-*)
++	pentiumpro-* | p6-* | 6x86-* | athlon-* | athlon_*-*)
+ 		cpu=i686
+ 		;;
+ 	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
+@@ -1062,9 +1158,6 @@ case $cpu-$vendor in
+ 	pentium4-*)
+ 		cpu=i786
+ 		;;
+-	pc98-*)
+-		cpu=i386
+-		;;
+ 	ppc-* | ppcbe-*)
+ 		cpu=powerpc
+ 		;;
+@@ -1098,13 +1191,10 @@ case $cpu-$vendor in
+ 	tx39el-*)
+ 		cpu=mipstx39el
+ 		;;
+-	x64-*)
+-		cpu=x86_64
+-		;;
+ 	xscale-* | xscalee[bl]-*)
+ 		cpu=`echo "$cpu" | sed 's/^xscale/arm/'`
+ 		;;
+-	arm64-*)
++	arm64-* | aarch64le-*)
+ 		cpu=aarch64
+ 		;;
+ 
+@@ -1156,108 +1246,231 @@ case $cpu-$vendor in
+ 		# Recognize the canonical CPU types that are allowed with any
+ 		# company name.
+ 		case $cpu in
+-			1750a | 580 \
++			  1750a \
++			| 580 \
++			| [cjt]90 \
+ 			| a29k \
+-			| aarch64 | aarch64_be \
++			| aarch64 \
++			| aarch64_be \
++			| aarch64c \
+ 			| abacus \
+-			| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] \
+-			| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] \
+-			| alphapca5[67] | alpha64pca5[67] \
++			| alpha \
++			| alpha64 \
++			| alpha64ev56 \
++			| alpha64ev6[78] \
++			| alpha64ev[4-8] \
++			| alpha64pca5[67] \
++			| alphaev56 \
++			| alphaev6[78] \
++			| alphaev[4-8] \
++			| alphapca5[67] \
+ 			| am33_2.0 \
+ 			| amdgcn \
+-			| arc | arceb \
+-			| arm | arm[lb]e | arme[lb] | armv* \
+-			| avr | avr32 \
++			| arc \
++			| arc32 \
++			| arc64 \
++			| arceb \
++			| arm \
++			| arm64e \
++			| arm64ec \
++			| arm[lb]e \
++			| arme[lb] \
++			| armv* \
+ 			| asmjs \
++			| avr \
++			| avr32 \
+ 			| ba \
+-			| be32 | be64 \
+-			| bfin | bpf | bs2000 \
+-			| c[123]* | c30 | [cjt]90 | c4x \
+-			| c8051 | clipper | craynv | csky | cydra \
+-			| d10v | d30v | dlx | dsp16xx \
+-			| e2k | elxsi | epiphany \
+-			| f30[01] | f700 | fido | fr30 | frv | ft32 | fx80 \
+-			| h8300 | h8500 \
+-			| hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
++			| be32 \
++			| be64 \
++			| bfin \
++			| bpf \
++			| bs2000 \
++			| c30 \
++			| c4x \
++			| c8051 \
++			| c[123]* \
++			| clipper \
++			| craynv \
++			| csky \
++			| cydra \
++			| d10v \
++			| d30v \
++			| dlx \
++			| dsp16xx \
++			| e2k \
++			| elxsi \
++			| epiphany \
++			| f30[01] \
++			| f700 \
++			| fido \
++			| fr30 \
++			| frv \
++			| ft32 \
++			| fx80 \
++			| h8300 \
++			| h8500 \
+ 			| hexagon \
+-			| i370 | i*86 | i860 | i960 | ia16 | ia64 \
+-			| ip2k | iq2000 \
++			| hppa \
++			| hppa1.[01] \
++			| hppa2.0 \
++			| hppa2.0[nw] \
++			| hppa64 \
++			| i*86 \
++			| i370 \
++			| i860 \
++			| i960 \
++			| ia16 \
++			| ia64 \
++			| ip2k \
++			| iq2000 \
++			| javascript \
+ 			| k1om \
+-			| le32 | le64 \
++			| kvx \
++			| le32 \
++			| le64 \
+ 			| lm32 \
+-			| m32c | m32r | m32rle \
+-			| m5200 | m68000 | m680[012346]0 | m68360 | m683?2 | m68k \
+-			| m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x \
+-			| m88110 | m88k | maxq | mb | mcore | mep | metag \
+-			| microblaze | microblazeel \
+-			| mips | mipsbe | mipseb | mipsel | mipsle \
+-			| mips16 \
+-			| mips64 | mips64eb | mips64el \
+-			| mips64octeon | mips64octeonel \
+-			| mips64orion | mips64orionel \
+-			| mips64r5900 | mips64r5900el \
+-			| mips64vr | mips64vrel \
+-			| mips64vr4100 | mips64vr4100el \
+-			| mips64vr4300 | mips64vr4300el \
+-			| mips64vr5000 | mips64vr5000el \
+-			| mips64vr5900 | mips64vr5900el \
+-			| mipsisa32 | mipsisa32el \
+-			| mipsisa32r2 | mipsisa32r2el \
+-			| mipsisa32r6 | mipsisa32r6el \
+-			| mipsisa64 | mipsisa64el \
+-			| mipsisa64r2 | mipsisa64r2el \
+-			| mipsisa64r6 | mipsisa64r6el \
+-			| mipsisa64sb1 | mipsisa64sb1el \
+-			| mipsisa64sr71k | mipsisa64sr71kel \
+-			| mipsr5900 | mipsr5900el \
+-			| mipstx39 | mipstx39el \
++			| loongarch32 \
++			| loongarch64 \
++			| m32c \
++			| m32r \
++			| m32rle \
++			| m5200 \
++			| m68000 \
++			| m680[012346]0 \
++			| m6811 \
++			| m6812 \
++			| m68360 \
++			| m683?2 \
++			| m68hc11 \
++			| m68hc12 \
++			| m68hcs12x \
++			| m68k \
++			| m88110 \
++			| m88k \
++			| maxq \
++			| mb \
++			| mcore \
++			| mep \
++			| metag \
++			| microblaze \
++			| microblazeel \
++			| mips* \
+ 			| mmix \
+-			| mn10200 | mn10300 \
++			| mn10200 \
++			| mn10300 \
+ 			| moxie \
+-			| mt \
+ 			| msp430 \
+-			| nds32 | nds32le | nds32be \
++			| mt \
++			| nanomips* \
++			| nds32 \
++			| nds32be \
++			| nds32le \
+ 			| nfp \
+-			| nios | nios2 | nios2eb | nios2el \
+-			| none | np1 | ns16k | ns32k | nvptx \
++			| nios \
++			| nios2 \
++			| nios2eb \
++			| nios2el \
++			| none \
++			| np1 \
++			| ns16k \
++			| ns32k \
++			| nvptx \
+ 			| open8 \
+ 			| or1k* \
+ 			| or32 \
+ 			| orion \
++			| pdp10 \
++			| pdp11 \
+ 			| picochip \
+-			| pdp10 | pdp11 | pj | pjl | pn | power \
+-			| powerpc | powerpc64 | powerpc64le | powerpcle | powerpcspe \
++			| pj \
++			| pjl \
++			| pn \
++			| power \
++			| powerpc \
++			| powerpc64 \
++			| powerpc64le \
++			| powerpcle \
++			| powerpcspe \
+ 			| pru \
+ 			| pyramid \
+-			| riscv | riscv32 | riscv64 \
+-			| rl78 | romp | rs6000 | rx \
+-			| s390 | s390x \
++			| riscv \
++			| riscv32 \
++			| riscv32be \
++			| riscv64 \
++			| riscv64be \
++			| rl78 \
++			| romp \
++			| rs6000 \
++			| rx \
++			| s390 \
++			| s390x \
+ 			| score \
+-			| sh | shl \
+-			| sh[1234] | sh[24]a | sh[24]ae[lb] | sh[23]e | she[lb] | sh[lb]e \
+-			| sh[1234]e[lb] |  sh[12345][lb]e | sh[23]ele | sh64 | sh64le \
+-			| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet \
++			| sh \
++			| sh64 \
++			| sh64le \
++			| sh[12345][lb]e \
++			| sh[1234] \
++			| sh[1234]e[lb] \
++			| sh[23]e \
++			| sh[23]ele \
++			| sh[24]a \
++			| sh[24]ae[lb] \
++			| sh[lb]e \
++			| she[lb] \
++			| shl \
++			| sparc \
++			| sparc64 \
++			| sparc64b \
++			| sparc64v \
++			| sparc86x \
++			| sparclet \
+ 			| sparclite \
+-			| sparcv8 | sparcv9 | sparcv9b | sparcv9v | sv1 | sx* \
++			| sparcv8 \
++			| sparcv9 \
++			| sparcv9b \
++			| sparcv9v \
+ 			| spu \
++			| sv1 \
++			| sx* \
+ 			| tahoe \
+-			| tic30 | tic4x | tic54x | tic55x | tic6x | tic80 \
++			| thumbv7* \
++			| tic30 \
++			| tic4x \
++			| tic54x \
++			| tic55x \
++			| tic6x \
++			| tic80 \
+ 			| tron \
+ 			| ubicom32 \
+-			| v70 | v850 | v850e | v850e1 | v850es | v850e2 | v850e2v3 \
++			| v70 \
++			| v810 \
++			| v850 \
++			| v850e \
++			| v850e1 \
++			| v850e2 \
++			| v850e2v3 \
++			| v850es \
+ 			| vax \
++			| vc4 \
+ 			| visium \
+ 			| w65 \
+-			| wasm32 | wasm64 \
++			| wasm32 \
++			| wasm64 \
+ 			| we32k \
+-			| x86 | x86_64 | xc16x | xgate | xps100 \
+-			| xstormy16 | xtensa* \
++			| x86 \
++			| x86_64 \
++			| xc16x \
++			| xgate \
++			| xps100 \
++			| xstormy16 \
++			| xtensa* \
+ 			| ymp \
+-			| z8k | z80)
++			| z80 \
++			| z8k)
+ 				;;
+ 
+ 			*)
+-				echo Invalid configuration \`"$1"\': machine \`"$cpu-$vendor"\' not recognized 1>&2
++				echo "Invalid configuration '$1': machine '$cpu-$vendor' not recognized" 1>&2
+ 				exit 1
+ 				;;
+ 		esac
+@@ -1278,34 +1491,44 @@ esac
+ 
+ # Decode manufacturer-specific aliases for certain operating systems.
+ 
+-if [ x$basic_os != x ]
++if test x"$basic_os" != x
+ then
+ 
+-# First recognize some ad-hoc case, or perhaps split kernel-os, or else just
++# First recognize some ad-hoc cases, or perhaps split kernel-os, or else just
+ # set os.
++obj=
+ case $basic_os in
+ 	gnu/linux*)
+ 		kernel=linux
+-		os=`echo $basic_os | sed -e 's|gnu/linux|gnu|'`
++		os=`echo "$basic_os" | sed -e 's|gnu/linux|gnu|'`
++		;;
++	os2-emx)
++		kernel=os2
++		os=`echo "$basic_os" | sed -e 's|os2-emx|emx|'`
+ 		;;
+ 	nto-qnx*)
+ 		kernel=nto
+-		os=`echo $basic_os | sed -e 's|nto-qnx|qnx|'`
++		os=`echo "$basic_os" | sed -e 's|nto-qnx|qnx|'`
+ 		;;
+ 	*-*)
+-		# shellcheck disable=SC2162
++		saved_IFS=$IFS
+ 		IFS="-" read kernel os <<EOF
+ $basic_os
+ EOF
++		IFS=$saved_IFS
+ 		;;
+ 	# Default OS when just kernel was specified
+ 	nto*)
+ 		kernel=nto
+-		os=`echo $basic_os | sed -e 's|nto|qnx|'`
++		os=`echo "$basic_os" | sed -e 's|nto|qnx|'`
+ 		;;
+ 	linux*)
+ 		kernel=linux
+-		os=`echo $basic_os | sed -e 's|linux|gnu|'`
++		os=`echo "$basic_os" | sed -e 's|linux|gnu|'`
++		;;
++	managarm*)
++		kernel=managarm
++		os=`echo "$basic_os" | sed -e 's|managarm|mlibc|'`
+ 		;;
+ 	*)
+ 		kernel=
+@@ -1326,7 +1549,7 @@ case $os in
+ 		os=cnk
+ 		;;
+ 	solaris1 | solaris1.*)
+-		os=`echo $os | sed -e 's|solaris1|sunos4|'`
++		os=`echo "$os" | sed -e 's|solaris1|sunos4|'`
+ 		;;
+ 	solaris)
+ 		os=solaris2
+@@ -1334,6 +1557,23 @@ case $os in
+ 	unixware*)
+ 		os=sysv4.2uw
+ 		;;
++	# The marketing names for NeXT's operating systems were
++	# NeXTSTEP, NeXTSTEP 2, OpenSTEP 3, OpenSTEP 4.  'openstep' is
++	# mapped to 'openstep3', but 'openstep1' and 'openstep2' are
++	# mapped to 'nextstep' and 'nextstep2', consistent with the
++	# treatment of SunOS/Solaris.
++	ns | ns1 | nextstep | nextstep1 | openstep1)
++		os=nextstep
++		;;
++	ns2 | nextstep2 | openstep2)
++		os=nextstep2
++		;;
++	ns3 | nextstep3 | openstep | openstep3)
++		os=openstep3
++		;;
++	ns4 | nextstep4 | openstep4)
++		os=openstep4
++		;;
+ 	# es1800 is here to avoid being matched by es* (a different OS)
+ 	es1800*)
+ 		os=ose
+@@ -1355,7 +1595,7 @@ case $os in
+ 		os=sco3.2v4
+ 		;;
+ 	sco3.2.[4-9]*)
+-		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
++		os=`echo "$os" | sed -e 's/sco3.2./sco3.2v/'`
+ 		;;
+ 	sco*v* | scout)
+ 		# Don't match below
+@@ -1367,13 +1607,7 @@ case $os in
+ 		os=psos
+ 		;;
+ 	qnx*)
+-		case $cpu in
+-		    x86 | i*86)
+-			;;
+-		    *)
+-			os=nto-$os
+-			;;
+-		esac
++		os=qnx
+ 		;;
+ 	hiux*)
+ 		os=hiuxwe2
+@@ -1410,6 +1644,7 @@ case $os in
+ 		;;
+ 	utek*)
+ 		os=bsd
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|tektronix|'`
+ 		;;
+ 	dynix*)
+ 		os=bsd
+@@ -1426,21 +1661,25 @@ case $os in
+ 	386bsd)
+ 		os=bsd
+ 		;;
+-	ctix* | uts*)
++	ctix*)
+ 		os=sysv
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|convergent|'`
+ 		;;
+-	nova*)
+-		os=rtmk-nova
++	uts*)
++		os=sysv
+ 		;;
+-	ns2)
+-		os=nextstep2
++	nova*)
++		kernel=rtmk
++		os=nova
+ 		;;
+ 	# Preserve the version number of sinix5.
+ 	sinix5.*)
+-		os=`echo $os | sed -e 's|sinix|sysv|'`
++		os=`echo "$os" | sed -e 's|sinix|sysv|'`
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
+ 		;;
+ 	sinix*)
+ 		os=sysv4
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
+ 		;;
+ 	tpf*)
+ 		os=tpf
+@@ -1478,10 +1717,16 @@ case $os in
+ 			os=eabi
+ 			;;
+ 		    *)
+-			os=elf
++			os=
++			obj=elf
+ 			;;
+ 		esac
+ 		;;
++	aout* | coff* | elf* | pe*)
++		# These are machine code file formats, not OSes
++		obj=$os
++		os=
++		;;
+ 	*)
+ 		# No normalization, but not necessarily accepted, that comes below.
+ 		;;
+@@ -1500,12 +1745,15 @@ else
+ # system, and we'll never get to this point.
+ 
+ kernel=
++obj=
+ case $cpu-$vendor in
+ 	score-*)
+-		os=elf
++		os=
++		obj=elf
+ 		;;
+ 	spu-*)
+-		os=elf
++		os=
++		obj=elf
+ 		;;
+ 	*-acorn)
+ 		os=riscix1.2
+@@ -1515,28 +1763,35 @@ case $cpu-$vendor in
+ 		os=gnu
+ 		;;
+ 	arm*-semi)
+-		os=aout
++		os=
++		obj=aout
+ 		;;
+ 	c4x-* | tic4x-*)
+-		os=coff
++		os=
++		obj=coff
+ 		;;
+ 	c8051-*)
+-		os=elf
++		os=
++		obj=elf
+ 		;;
+ 	clipper-intergraph)
+ 		os=clix
+ 		;;
+ 	hexagon-*)
+-		os=elf
++		os=
++		obj=elf
+ 		;;
+ 	tic54x-*)
+-		os=coff
++		os=
++		obj=coff
+ 		;;
+ 	tic55x-*)
+-		os=coff
++		os=
++		obj=coff
+ 		;;
+ 	tic6x-*)
+-		os=coff
++		os=
++		obj=coff
+ 		;;
+ 	# This must come before the *-dec entry.
+ 	pdp10-*)
+@@ -1558,28 +1813,43 @@ case $cpu-$vendor in
+ 		os=sunos3
+ 		;;
+ 	m68*-cisco)
+-		os=aout
++		os=
++		obj=aout
+ 		;;
+ 	mep-*)
+-		os=elf
++		os=
++		obj=elf
++		;;
++	# The -sgi and -siemens entries must be before the mips- entry
++	# or we get the wrong os.
++	*-sgi)
++		os=irix
++		;;
++	*-siemens)
++		os=sysv4
+ 		;;
+ 	mips*-cisco)
+-		os=elf
++		os=
++		obj=elf
+ 		;;
+-	mips*-*)
+-		os=elf
++	mips*-*|nanomips*-*)
++		os=
++		obj=elf
+ 		;;
+ 	or32-*)
+-		os=coff
++		os=
++		obj=coff
+ 		;;
+-	*-tti)	# must be before sparc entry or we get the wrong os.
++	# This must be before the sparc-* entry or we get the wrong os.
++	*-tti)
+ 		os=sysv3
+ 		;;
+ 	sparc-* | *-sun)
+ 		os=sunos4.1.1
+ 		;;
+ 	pru-*)
+-		os=elf
++		os=
++		obj=elf
+ 		;;
+ 	*-be)
+ 		os=beos
+@@ -1603,7 +1873,7 @@ case $cpu-$vendor in
+ 		os=hpux
+ 		;;
+ 	*-hitachi)
+-		os=hiux
++		os=hiuxwe2
+ 		;;
+ 	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
+ 		os=sysv
+@@ -1647,12 +1917,6 @@ case $cpu-$vendor in
+ 	*-encore)
+ 		os=bsd
+ 		;;
+-	*-sgi)
+-		os=irix
+-		;;
+-	*-siemens)
+-		os=sysv4
+-		;;
+ 	*-masscomp)
+ 		os=rtu
+ 		;;
+@@ -1660,10 +1924,12 @@ case $cpu-$vendor in
+ 		os=uxpv
+ 		;;
+ 	*-rom68k)
+-		os=coff
++		os=
++		obj=coff
+ 		;;
+ 	*-*bug)
+-		os=coff
++		os=
++		obj=coff
+ 		;;
+ 	*-apple)
+ 		os=macos
+@@ -1681,83 +1947,320 @@ esac
+ 
+ fi
+ 
+-# Now, validate our (potentially fixed-up) OS.
++# Now, validate our (potentially fixed-up) individual pieces (OS, OBJ).
++
+ case $os in
+-	# Sometimes we do "kernel-abi", so those need to count as OSes.
+-	musl* | newlib* | uclibc*)
++	# Sometimes we do "kernel-libc", so those need to count as OSes.
++	llvm* | musl* | newlib* | relibc* | uclibc*)
++		;;
++	# Likewise for "kernel-abi"
++	eabi* | gnueabi*)
++		;;
++	# VxWorks passes extra cpu info in the 4th filed.
++	simlinux | simwindows | spe)
+ 		;;
+-	# Likewise for "kernel-libc"
+-	eabi | eabihf | gnueabi | gnueabihf)
++	# See `case $cpu-$os` validation below
++	ghcjs)
+ 		;;
+ 	# Now accept the basic system types.
+-	# The portable systems comes first.
+ 	# Each alternative MUST end in a * to match a version number.
+-	gnu* | android* | bsd* | mach* | minix* | genix* | ultrix* | irix* \
+-	     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]* \
+-	     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \
+-	     | sym* |  plan9* | psp* | sim* | xray* | os68k* | v88r* \
+-	     | hiux* | abug | nacl* | netware* | windows* \
+-	     | os9* | macos* | osx* | ios* \
+-	     | mpw* | magic* | mmixware* | mon960* | lnews* \
+-	     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \
+-	     | aos* | aros* | cloudabi* | sortix* | twizzler* \
+-	     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \
+-	     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \
+-	     | mirbsd* | netbsd* | dicos* | openedition* | ose* \
+-	     | bitrig* | openbsd* | solidbsd* | libertybsd* | os108* \
+-	     | ekkobsd* | freebsd* | riscix* | lynxos* | os400* \
+-	     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \
+-	     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \
+-	     | udi* | lites* | ieee* | go32* | aux* | hcos* \
+-	     | chorusrdb* | cegcc* | glidix* \
+-	     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \
+-	     | midipix* | mingw32* | mingw64* | mint* \
+-	     | uxpv* | beos* | mpeix* | udk* | moxiebox* \
+-	     | interix* | uwin* | mks* | rhapsody* | darwin* \
+-	     | openstep* | oskit* | conix* | pw32* | nonstopux* \
+-	     | storm-chaos* | tops10* | tenex* | tops20* | its* \
+-	     | os2* | vos* | palmos* | uclinux* | nucleus* | morphos* \
+-	     | scout* | superux* | sysv* | rtmk* | tpf* | windiss* \
+-	     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \
+-	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
+-	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
+-	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
+-	     | nsk* | powerunix* | genode* | zvmoe* )
++	  abug \
++	| aix* \
++	| amdhsa* \
++	| amigados* \
++	| amigaos* \
++	| android* \
++	| aof* \
++	| aos* \
++	| aros* \
++	| atheos* \
++	| auroraux* \
++	| aux* \
++	| beos* \
++	| bitrig* \
++	| bme* \
++	| bosx* \
++	| bsd* \
++	| cegcc* \
++	| chorusos* \
++	| chorusrdb* \
++	| clix* \
++	| cloudabi* \
++	| cnk* \
++	| conix* \
++	| cos* \
++	| cxux* \
++	| cygwin* \
++	| darwin* \
++	| dgux* \
++	| dicos* \
++	| dnix* \
++	| domain* \
++	| dragonfly* \
++	| drops* \
++	| ebmon* \
++	| ecoff* \
++	| ekkobsd* \
++	| emscripten* \
++	| emx* \
++	| es* \
++	| fiwix* \
++	| freebsd* \
++	| fuchsia* \
++	| genix* \
++	| genode* \
++	| glidix* \
++	| gnu* \
++	| go32* \
++	| haiku* \
++	| hcos* \
++	| hiux* \
++	| hms* \
++	| hpux* \
++	| ieee* \
++	| interix* \
++	| ios* \
++	| iris* \
++	| irix* \
++	| ironclad* \
++	| isc* \
++	| its* \
++	| l4re* \
++	| libertybsd* \
++	| lites* \
++	| lnews* \
++	| luna* \
++	| lynxos* \
++	| mach* \
++	| macos* \
++	| magic* \
++	| mbr* \
++	| midipix* \
++	| midnightbsd* \
++	| mingw32* \
++	| mingw64* \
++	| minix* \
++	| mint* \
++	| mirbsd* \
++	| mks* \
++	| mlibc* \
++	| mmixware* \
++	| mon960* \
++	| morphos* \
++	| moss* \
++	| moxiebox* \
++	| mpeix* \
++	| mpw* \
++	| msdos* \
++	| msys* \
++	| mvs* \
++	| nacl* \
++	| netbsd* \
++	| netware* \
++	| newsos* \
++	| nextstep* \
++	| nindy* \
++	| nonstopux* \
++	| nova* \
++	| nsk* \
++	| nucleus* \
++	| nx6 \
++	| nx7 \
++	| oabi* \
++	| ohos* \
++	| onefs* \
++	| openbsd* \
++	| openedition* \
++	| openstep* \
++	| os108* \
++	| os2* \
++	| os400* \
++	| os68k* \
++	| os9* \
++	| ose* \
++	| osf* \
++	| oskit* \
++	| osx* \
++	| palmos* \
++	| phoenix* \
++	| plan9* \
++	| powermax* \
++	| powerunix* \
++	| proelf* \
++	| psos* \
++	| psp* \
++	| ptx* \
++	| pw32* \
++	| qnx* \
++	| rdos* \
++	| redox* \
++	| rhapsody* \
++	| riscix* \
++	| riscos* \
++	| rtems* \
++	| rtmk* \
++	| rtu* \
++	| scout* \
++	| secbsd* \
++	| sei* \
++	| serenity* \
++	| sim* \
++	| skyos* \
++	| solaris* \
++	| solidbsd* \
++	| sortix* \
++	| storm-chaos* \
++	| sunos \
++	| sunos[34]* \
++	| superux* \
++	| syllable* \
++	| sym* \
++	| sysv* \
++	| tenex* \
++	| tirtos* \
++	| toppers* \
++	| tops10* \
++	| tops20* \
++	| tpf* \
++	| tvos* \
++	| twizzler* \
++	| uclinux* \
++	| udi* \
++	| udk* \
++	| ultrix* \
++	| unicos* \
++	| uniplus* \
++	| unleashed* \
++	| unos* \
++	| uwin* \
++	| uxpv* \
++	| v88r* \
++	|*vms* \
++	| vos* \
++	| vsta* \
++	| vxsim* \
++	| vxworks* \
++	| wasi* \
++	| watchos* \
++	| wince* \
++	| windiss* \
++	| windows* \
++	| winnt* \
++	| xenix* \
++	| xray* \
++	| zephyr* \
++	| zvmoe* )
+ 		;;
+ 	# This one is extra strict with allowed versions
+ 	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
+ 		# Don't forget version if it is 3.2v4 or newer.
+ 		;;
++	# This refers to builds using the UEFI calling convention
++	# (which depends on the architecture) and PE file format.
++	# Note that this is both a different calling convention and
++	# different file format than that of GNU-EFI
++	# (x86_64-w64-mingw32).
++	uefi)
++		;;
+ 	none)
+ 		;;
++	kernel* | msvc* )
++		# Restricted further below
++		;;
++	'')
++		if test x"$obj" = x
++		then
++			echo "Invalid configuration '$1': Blank OS only allowed with explicit machine code file format" 1>&2
++		fi
++		;;
+ 	*)
+-		echo Invalid configuration \`"$1"\': OS \`"$os"\' not recognized 1>&2
++		echo "Invalid configuration '$1': OS '$os' not recognized" 1>&2
++		exit 1
++		;;
++esac
++
++case $obj in
++	aout* | coff* | elf* | pe*)
++		;;
++	'')
++		# empty is fine
++		;;
++	*)
++		echo "Invalid configuration '$1': Machine code format '$obj' not recognized" 1>&2
++		exit 1
++		;;
++esac
++
++# Here we handle the constraint that a (synthetic) cpu and os are
++# valid only in combination with each other and nowhere else.
++case $cpu-$os in
++	# The "javascript-unknown-ghcjs" triple is used by GHC; we
++	# accept it here in order to tolerate that, but reject any
++	# variations.
++	javascript-ghcjs)
++		;;
++	javascript-* | *-ghcjs)
++		echo "Invalid configuration '$1': cpu '$cpu' is not valid with os '$os$obj'" 1>&2
+ 		exit 1
+ 		;;
+ esac
+ 
+ # As a final step for OS-related things, validate the OS-kernel combination
+ # (given a valid OS), if there is a kernel.
+-case $kernel-$os in
+-	linux-gnu* | linux-dietlibc* | linux-android* | linux-newlib* | linux-musl* | linux-uclibc* )
++case $kernel-$os-$obj in
++	linux-gnu*- | linux-android*- | linux-dietlibc*- | linux-llvm*- \
++		    | linux-mlibc*- | linux-musl*- | linux-newlib*- \
++		    | linux-relibc*- | linux-uclibc*- | linux-ohos*- )
++		;;
++	uclinux-uclibc*- | uclinux-gnu*- )
++		;;
++	managarm-mlibc*- | managarm-kernel*- )
++		;;
++	windows*-msvc*-)
+ 		;;
+-	-dietlibc* | -newlib* | -musl* | -uclibc* )
++	-dietlibc*- | -llvm*- | -mlibc*- | -musl*- | -newlib*- | -relibc*- \
++		    | -uclibc*- )
+ 		# These are just libc implementations, not actual OSes, and thus
+ 		# require a kernel.
+-		echo "Invalid configuration \`$1': libc \`$os' needs explicit kernel." 1>&2
++		echo "Invalid configuration '$1': libc '$os' needs explicit kernel." 1>&2
+ 		exit 1
+ 		;;
+-	kfreebsd*-gnu* | kopensolaris*-gnu*)
++	-kernel*- )
++		echo "Invalid configuration '$1': '$os' needs explicit kernel." 1>&2
++		exit 1
+ 		;;
+-	nto-qnx*)
++	*-kernel*- )
++		echo "Invalid configuration '$1': '$kernel' does not support '$os'." 1>&2
++		exit 1
++		;;
++	*-msvc*- )
++		echo "Invalid configuration '$1': '$os' needs 'windows'." 1>&2
++		exit 1
++		;;
++	kfreebsd*-gnu*- | knetbsd*-gnu*- | netbsd*-gnu*- | kopensolaris*-gnu*-)
++		;;
++	vxworks-simlinux- | vxworks-simwindows- | vxworks-spe-)
+ 		;;
+-	*-eabi* | *-gnueabi*)
++	nto-qnx*-)
+ 		;;
+-	-*)
++	os2-emx-)
++		;;
++	rtmk-nova-)
++		;;
++	*-eabi*- | *-gnueabi*-)
++		;;
++	none--*)
++		# None (no kernel, i.e. freestanding / bare metal),
++		# can be paired with an machine code file format
++		;;
++	-*-)
+ 		# Blank kernel with real OS is always fine.
+ 		;;
+-	*-*)
+-		echo "Invalid configuration \`$1': Kernel \`$kernel' not known to work with OS \`$os'." 1>&2
++	--*)
++		# Blank kernel and OS with real machine code file format is always fine.
++		;;
++	*-*-*)
++		echo "Invalid configuration '$1': Kernel '$kernel' not known to work with OS '$os'." 1>&2
+ 		exit 1
+ 		;;
+ esac
+@@ -1770,7 +2273,7 @@ case $vendor in
+ 			*-riscix*)
+ 				vendor=acorn
+ 				;;
+-			*-sunos*)
++			*-sunos* | *-solaris*)
+ 				vendor=sun
+ 				;;
+ 			*-cnk* | *-aix*)
+@@ -1840,7 +2343,7 @@ case $vendor in
+ 		;;
+ esac
+ 
+-echo "$cpu-$vendor-${kernel:+$kernel-}$os"
++echo "$cpu-$vendor${kernel:+-$kernel}${os:+-$os}${obj:+-$obj}"
+ exit
+ 
+ # Local variables:
+diff --git a/configure.ac b/configure.ac
+index dbd38eaa5..e84af5167 100644
+--- a/configure.ac
++++ b/configure.ac
+@@ -5060,6 +5060,11 @@ linux-gnu*|linux-musl*)
+         RTL_ARCH=X86_64
+         PLATFORMID=linux_x86_64
+         ;;
++    loongarch64)
++	CPUNAME=LOONGARCH64
++	RTL_ARCH=LOONGARCH64
++	PLATFORMID=linux_loongarch64
++	;;
+     *)
+         AC_MSG_ERROR([Unsupported host_cpu $host_cpu for host_os $host_os])
+         ;;
+@@ -12793,7 +12798,7 @@ AC_SUBST(RHINO_JAR)
+ # platforms there.
+ supports_multilib=
+ case "$host_cpu" in
+-x86_64 | powerpc64 | powerpc64le | s390x | aarch64 | mips64 | mips64el)
++x86_64 | powerpc64 | powerpc64le | s390x | aarch64 | mips64 | mips64el | loongarch64)
+     if test "$SAL_TYPES_SIZEOFLONG" = "8"; then
+         supports_multilib="yes"
+     fi
+diff --git a/download.lst b/download.lst
+index bf5ce1596..45e29b668 100644
+--- a/download.lst
++++ b/download.lst
+@@ -20,7 +20,7 @@ export BSH_SHA256SUM := 9e93c73e23aff644b17dfff656444474c14150e7f3b38b19635e6222
+ export BSH_TARBALL := beeca87be45ec87d241ddd0e1bad80c1-bsh-2.0b6-src.zip
+ export BZIP2_SHA256SUM := ab5a03176ee106d3f0fa90e381da478ddae405918153cca248e682cd0c4a2269
+ export BZIP2_TARBALL := bzip2-1.0.8.tar.gz
+-export CAIRO_SHA256SUM := 74b24c1ed436bbe87499179a3b27c43f4143b8676d8ad237a6fa787401959705
++export CAIRO_SHA256SUM := c0730c3e67e7293ec3ce9c1b6c3dcc753aca1b416244f8331923ce10119cb847
+ export CAIRO_VERSION_MICRO := 4
+ export CAIRO_TARBALL := cairo-1.17.$(CAIRO_VERSION_MICRO).tar.xz
+ export CDR_SHA256SUM := 5666249d613466b9aa1e987ea4109c04365866e9277d80f6cd9663e86b8ecdd4
+@@ -54,7 +54,7 @@ export EXPAT_SHA256SUM := ee14b4c5d8908b1bec37ad937607eab183d4d9806a08adee472c3c
+ export EXPAT_TARBALL := expat-2.6.2.tar.xz
+ export FIREBIRD_SHA256SUM := acb85cedafa10ce106b1823fb236b1b3e5d942a5741e8f8435cc8ccfec0afe76
+ export FIREBIRD_TARBALL := Firebird-3.0.7.33374-0.tar.bz2
+-export FONTCONFIG_SHA256SUM := a5f052cb73fd479ffb7b697980510903b563bbb55b8f7a2b001fcfb94026003c
++export FONTCONFIG_SHA256SUM := 363e206f0eca0d8db3b21d08b70b78a0dcf78ef9d169a8afa937a7d36163a1ca
+ export FONTCONFIG_TARBALL := fontconfig-2.13.94.tar.xz
+ export FONT_CALADEA_SHA256SUM := c48d1c2fd613c9c06c959c34da7b8388059e2408d2bb19845dc3ed35f76e4d09
+ export FONT_CALADEA_TARBALL := 368f114c078f94214a308a74c7e991bc-crosextrafonts-20130214.tar.gz
+@@ -178,9 +178,9 @@ export LIBEOT_SHA256SUM := cf5091fa8e7dcdbe667335eb90a2cfdd0a3fe8f8c7c8d1ece44d9
+ export LIBEOT_TARBALL := libeot-0.01.tar.bz2
+ export LIBEXTTEXTCAT_SHA256SUM := 6d77eace20e9ea106c1330e268ede70c9a4a89744ddc25715682754eca3368df
+ export LIBEXTTEXTCAT_TARBALL := libexttextcat-3.4.6.tar.xz
+-export LIBFFI_SHA256SUM := 72fba7922703ddfa7a028d513ac15a85c8d54c8d67f55fa5a4802885dc652056
+-export LIBFFI_TARBALL := libffi-3.3.tar.gz
+-export LIBGPGERROR_SHA256SUM := a9ab83ca7acc442a5bd846a75b920285ff79bdb4e3d34aa382be88ed2c3aebaf
++export LIBFFI_SHA256SUM := 4416dd92b6ae8fcb5b10421e711c4d3cb31203d77521a77d85d0102311e6c3b8
++LIBFFI_SHA256SUM := bc9842a18898bfacb0ed1252c4febcc7e78fa139fd27fdc7a3e30d9d9356119b
++LIBFFI_TARBALL := libffi-3.4.8.tar.gz
+ export LIBGPGERROR_TARBALL := libgpg-error-1.43.tar.bz2
+ export LIBLANGTAG_SHA256SUM := 1f12a20a02ec3a8d22e54dedb8b683a43c9c160bda1ba337bf1060607ae733bd
+ export LIBLANGTAG_TARBALL := liblangtag-0.6.3.tar.bz2
+@@ -248,7 +248,7 @@ export POPPLER_DATA_SHA256SUM := 2cec05cd1bb03af98a8b06a1e22f6e6e1a65b1e2f3816cb
+ export POPPLER_DATA_TARBALL := poppler-data-0.4.11.tar.gz
+ export POSTGRESQL_SHA256SUM := 73876fdd3a517087340458dca4ce15b8d2a4dbceb334c0441424551ae6c4cded
+ export POSTGRESQL_TARBALL := postgresql-13.8.tar.bz2
+-export PYTHON_SHA256SUM := d2807ac69f69b84fd46a0b93bbd02a4fa48d3e70f4b2835ff0f72a2885040076
++export PYTHON_SHA256SUM := c957a29b73fa8bc5cd5a7bd7c7fbff82c4b8e84c327ffa8765f2a5a2df6edd68
+ export PYTHON_TARBALL := Python-3.8.19.tar.xz
+ export QXP_SHA256SUM := e137b6b110120a52c98edd02ebdc4095ee08d0d5295a94316a981750095a945c
+ export QXP_TARBALL := libqxp-0.0.2.tar.xz
+diff --git a/external/config.guess b/external/config.guess
+new file mode 100644
+index 000000000..48a684601
+--- /dev/null
++++ b/external/config.guess
+@@ -0,0 +1,1815 @@
++#! /bin/sh
++# Attempt to guess a canonical system name.
++#   Copyright 1992-2024 Free Software Foundation, Inc.
++
++# shellcheck disable=SC2006,SC2268 # see below for rationale
++
++timestamp='2024-07-27'
++
++# This file is free software; you can redistribute it and/or modify it
++# under the terms of the GNU General Public License as published by
++# the Free Software Foundation, either version 3 of the License, or
++# (at your option) any later version.
++#
++# This program is distributed in the hope that it will be useful, but
++# WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
++# General Public License for more details.
++#
++# You should have received a copy of the GNU General Public License
++# along with this program; if not, see <https://www.gnu.org/licenses/>.
++#
++# As a special exception to the GNU General Public License, if you
++# distribute this file as part of a program that contains a
++# configuration script generated by Autoconf, you may include it under
++# the same distribution terms that you use for the rest of that
++# program.  This Exception is an additional permission under section 7
++# of the GNU General Public License, version 3 ("GPLv3").
++#
++# Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
++#
++# You can get the latest version of this script from:
++# https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
++#
++# Please send patches to <config-patches@gnu.org>.
++
++
++# The "shellcheck disable" line above the timestamp inhibits complaints
++# about features and limitations of the classic Bourne shell that were
++# superseded or lifted in POSIX.  However, this script identifies a wide
++# variety of pre-POSIX systems that do not have POSIX shells at all, and
++# even some reasonably current systems (Solaris 10 as case-in-point) still
++# have a pre-POSIX /bin/sh.
++
++
++me=`echo "$0" | sed -e 's,.*/,,'`
++
++usage="\
++Usage: $0 [OPTION]
++
++Output the configuration name of the system '$me' is run on.
++
++Options:
++  -h, --help         print this help, then exit
++  -t, --time-stamp   print date of last modification, then exit
++  -v, --version      print version number, then exit
++
++Report bugs and patches to <config-patches@gnu.org>."
++
++version="\
++GNU config.guess ($timestamp)
++
++Originally written by Per Bothner.
++Copyright 1992-2024 Free Software Foundation, Inc.
++
++This is free software; see the source for copying conditions.  There is NO
++warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++
++help="
++Try '$me --help' for more information."
++
++# Parse command line
++while test $# -gt 0 ; do
++  case $1 in
++    --time-stamp | --time* | -t )
++       echo "$timestamp" ; exit ;;
++    --version | -v )
++       echo "$version" ; exit ;;
++    --help | --h* | -h )
++       echo "$usage"; exit ;;
++    -- )     # Stop option processing
++       shift; break ;;
++    - )	# Use stdin as input.
++       break ;;
++    -* )
++       echo "$me: invalid option $1$help" >&2
++       exit 1 ;;
++    * )
++       break ;;
++  esac
++done
++
++if test $# != 0; then
++  echo "$me: too many arguments$help" >&2
++  exit 1
++fi
++
++# Just in case it came from the environment.
++GUESS=
++
++# CC_FOR_BUILD -- compiler used by this script. Note that the use of a
++# compiler to aid in system detection is discouraged as it requires
++# temporary files to be created and, as you can see below, it is a
++# headache to deal with in a portable fashion.
++
++# Historically, 'CC_FOR_BUILD' used to be named 'HOST_CC'. We still
++# use 'HOST_CC' if defined, but it is deprecated.
++
++# Portable tmp directory creation inspired by the Autoconf team.
++
++tmp=
++# shellcheck disable=SC2172
++trap 'test -z "$tmp" || rm -fr "$tmp"' 0 1 2 13 15
++
++set_cc_for_build() {
++    # prevent multiple calls if $tmp is already set
++    test "$tmp" && return 0
++    : "${TMPDIR=/tmp}"
++    # shellcheck disable=SC2039,SC3028
++    { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
++	{ test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir "$tmp" 2>/dev/null) ; } ||
++	{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir "$tmp" 2>/dev/null) && echo "Warning: creating insecure temp directory" >&2 ; } ||
++	{ echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; }
++    dummy=$tmp/dummy
++    case ${CC_FOR_BUILD-},${HOST_CC-},${CC-} in
++	,,)    echo "int x;" > "$dummy.c"
++	       for driver in cc gcc c17 c99 c89 ; do
++		   if ($driver -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
++		       CC_FOR_BUILD=$driver
++		       break
++		   fi
++	       done
++	       if test x"$CC_FOR_BUILD" = x ; then
++		   CC_FOR_BUILD=no_compiler_found
++	       fi
++	       ;;
++	,,*)   CC_FOR_BUILD=$CC ;;
++	,*,*)  CC_FOR_BUILD=$HOST_CC ;;
++    esac
++}
++
++# This is needed to find uname on a Pyramid OSx when run in the BSD universe.
++# (ghazi@noc.rutgers.edu 1994-08-24)
++if test -f /.attbin/uname ; then
++	PATH=$PATH:/.attbin ; export PATH
++fi
++
++UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
++UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
++UNAME_SYSTEM=`(uname -s) 2>/dev/null` || UNAME_SYSTEM=unknown
++UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
++
++case $UNAME_SYSTEM in
++Linux|GNU|GNU/*)
++	LIBC=unknown
++
++	set_cc_for_build
++	cat <<-EOF > "$dummy.c"
++	#if defined(__ANDROID__)
++	LIBC=android
++	#else
++	#include <features.h>
++	#if defined(__UCLIBC__)
++	LIBC=uclibc
++	#elif defined(__dietlibc__)
++	LIBC=dietlibc
++	#elif defined(__GLIBC__)
++	LIBC=gnu
++	#elif defined(__LLVM_LIBC__)
++	LIBC=llvm
++	#else
++	#include <stdarg.h>
++	/* First heuristic to detect musl libc.  */
++	#ifdef __DEFINED_va_list
++	LIBC=musl
++	#endif
++	#endif
++	#endif
++	EOF
++	cc_set_libc=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
++	eval "$cc_set_libc"
++
++	# Second heuristic to detect musl libc.
++	if [ "$LIBC" = unknown ] &&
++	   command -v ldd >/dev/null &&
++	   ldd --version 2>&1 | grep -q ^musl; then
++		LIBC=musl
++	fi
++
++	# If the system lacks a compiler, then just pick glibc.
++	# We could probably try harder.
++	if [ "$LIBC" = unknown ]; then
++		LIBC=gnu
++	fi
++	;;
++esac
++
++# Note: order is significant - the case branches are not exclusive.
++
++case $UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION in
++    *:NetBSD:*:*)
++	# NetBSD (nbsd) targets should (where applicable) match one or
++	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
++	# *-*-netbsdecoff* and *-*-netbsd*.  For targets that recently
++	# switched to ELF, *-*-netbsd* would select the old
++	# object file format.  This provides both forward
++	# compatibility and a consistent mechanism for selecting the
++	# object file format.
++	#
++	# Note: NetBSD doesn't particularly care about the vendor
++	# portion of the name.  We always set it to "unknown".
++	UNAME_MACHINE_ARCH=`(uname -p 2>/dev/null || \
++	    /sbin/sysctl -n hw.machine_arch 2>/dev/null || \
++	    /usr/sbin/sysctl -n hw.machine_arch 2>/dev/null || \
++	    echo unknown)`
++	case $UNAME_MACHINE_ARCH in
++	    aarch64eb) machine=aarch64_be-unknown ;;
++	    armeb) machine=armeb-unknown ;;
++	    arm*) machine=arm-unknown ;;
++	    sh3el) machine=shl-unknown ;;
++	    sh3eb) machine=sh-unknown ;;
++	    sh5el) machine=sh5le-unknown ;;
++	    earmv*)
++		arch=`echo "$UNAME_MACHINE_ARCH" | sed -e 's,^e\(armv[0-9]\).*$,\1,'`
++		endian=`echo "$UNAME_MACHINE_ARCH" | sed -ne 's,^.*\(eb\)$,\1,p'`
++		machine=${arch}${endian}-unknown
++		;;
++	    *) machine=$UNAME_MACHINE_ARCH-unknown ;;
++	esac
++	# The Operating System including object format, if it has switched
++	# to ELF recently (or will in the future) and ABI.
++	case $UNAME_MACHINE_ARCH in
++	    earm*)
++		os=netbsdelf
++		;;
++	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
++		set_cc_for_build
++		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
++			| grep -q __ELF__
++		then
++		    # Once all utilities can be ECOFF (netbsdecoff) or a.out (netbsdaout).
++		    # Return netbsd for either.  FIX?
++		    os=netbsd
++		else
++		    os=netbsdelf
++		fi
++		;;
++	    *)
++		os=netbsd
++		;;
++	esac
++	# Determine ABI tags.
++	case $UNAME_MACHINE_ARCH in
++	    earm*)
++		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
++		abi=`echo "$UNAME_MACHINE_ARCH" | sed -e "$expr"`
++		;;
++	esac
++	# The OS release
++	# Debian GNU/NetBSD machines have a different userland, and
++	# thus, need a distinct triplet. However, they do not need
++	# kernel version information, so it can be replaced with a
++	# suitable tag, in the style of linux-gnu.
++	case $UNAME_VERSION in
++	    Debian*)
++		release='-gnu'
++		;;
++	    *)
++		release=`echo "$UNAME_RELEASE" | sed -e 's/[-_].*//' | cut -d. -f1,2`
++		;;
++	esac
++	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
++	# contains redundant information, the shorter form:
++	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
++	GUESS=$machine-${os}${release}${abi-}
++	;;
++    *:Bitrig:*:*)
++	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
++	GUESS=$UNAME_MACHINE_ARCH-unknown-bitrig$UNAME_RELEASE
++	;;
++    *:OpenBSD:*:*)
++	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
++	GUESS=$UNAME_MACHINE_ARCH-unknown-openbsd$UNAME_RELEASE
++	;;
++    *:SecBSD:*:*)
++	UNAME_MACHINE_ARCH=`arch | sed 's/SecBSD.//'`
++	GUESS=$UNAME_MACHINE_ARCH-unknown-secbsd$UNAME_RELEASE
++	;;
++    *:LibertyBSD:*:*)
++	UNAME_MACHINE_ARCH=`arch | sed 's/^.*BSD\.//'`
++	GUESS=$UNAME_MACHINE_ARCH-unknown-libertybsd$UNAME_RELEASE
++	;;
++    *:MidnightBSD:*:*)
++	GUESS=$UNAME_MACHINE-unknown-midnightbsd$UNAME_RELEASE
++	;;
++    *:ekkoBSD:*:*)
++	GUESS=$UNAME_MACHINE-unknown-ekkobsd$UNAME_RELEASE
++	;;
++    *:SolidBSD:*:*)
++	GUESS=$UNAME_MACHINE-unknown-solidbsd$UNAME_RELEASE
++	;;
++    *:OS108:*:*)
++	GUESS=$UNAME_MACHINE-unknown-os108_$UNAME_RELEASE
++	;;
++    macppc:MirBSD:*:*)
++	GUESS=powerpc-unknown-mirbsd$UNAME_RELEASE
++	;;
++    *:MirBSD:*:*)
++	GUESS=$UNAME_MACHINE-unknown-mirbsd$UNAME_RELEASE
++	;;
++    *:Sortix:*:*)
++	GUESS=$UNAME_MACHINE-unknown-sortix
++	;;
++    *:Twizzler:*:*)
++	GUESS=$UNAME_MACHINE-unknown-twizzler
++	;;
++    *:Redox:*:*)
++	GUESS=$UNAME_MACHINE-unknown-redox
++	;;
++    mips:OSF1:*.*)
++	GUESS=mips-dec-osf1
++	;;
++    alpha:OSF1:*:*)
++	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
++	trap '' 0
++	case $UNAME_RELEASE in
++	*4.0)
++		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
++		;;
++	*5.*)
++		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $4}'`
++		;;
++	esac
++	# According to Compaq, /usr/sbin/psrinfo has been available on
++	# OSF/1 and Tru64 systems produced since 1995.  I hope that
++	# covers most systems running today.  This code pipes the CPU
++	# types through head -n 1, so we only detect the type of CPU 0.
++	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
++	case $ALPHA_CPU_TYPE in
++	    "EV4 (21064)")
++		UNAME_MACHINE=alpha ;;
++	    "EV4.5 (21064)")
++		UNAME_MACHINE=alpha ;;
++	    "LCA4 (21066/21068)")
++		UNAME_MACHINE=alpha ;;
++	    "EV5 (21164)")
++		UNAME_MACHINE=alphaev5 ;;
++	    "EV5.6 (21164A)")
++		UNAME_MACHINE=alphaev56 ;;
++	    "EV5.6 (21164PC)")
++		UNAME_MACHINE=alphapca56 ;;
++	    "EV5.7 (21164PC)")
++		UNAME_MACHINE=alphapca57 ;;
++	    "EV6 (21264)")
++		UNAME_MACHINE=alphaev6 ;;
++	    "EV6.7 (21264A)")
++		UNAME_MACHINE=alphaev67 ;;
++	    "EV6.8CB (21264C)")
++		UNAME_MACHINE=alphaev68 ;;
++	    "EV6.8AL (21264B)")
++		UNAME_MACHINE=alphaev68 ;;
++	    "EV6.8CX (21264D)")
++		UNAME_MACHINE=alphaev68 ;;
++	    "EV6.9A (21264/EV69A)")
++		UNAME_MACHINE=alphaev69 ;;
++	    "EV7 (21364)")
++		UNAME_MACHINE=alphaev7 ;;
++	    "EV7.9 (21364A)")
++		UNAME_MACHINE=alphaev79 ;;
++	esac
++	# A Pn.n version is a patched version.
++	# A Vn.n version is a released version.
++	# A Tn.n version is a released field test version.
++	# A Xn.n version is an unreleased experimental baselevel.
++	# 1.2 uses "1.2" for uname -r.
++	OSF_REL=`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
++	GUESS=$UNAME_MACHINE-dec-osf$OSF_REL
++	;;
++    Amiga*:UNIX_System_V:4.0:*)
++	GUESS=m68k-unknown-sysv4
++	;;
++    *:[Aa]miga[Oo][Ss]:*:*)
++	GUESS=$UNAME_MACHINE-unknown-amigaos
++	;;
++    *:[Mm]orph[Oo][Ss]:*:*)
++	GUESS=$UNAME_MACHINE-unknown-morphos
++	;;
++    *:OS/390:*:*)
++	GUESS=i370-ibm-openedition
++	;;
++    *:z/VM:*:*)
++	GUESS=s390-ibm-zvmoe
++	;;
++    *:OS400:*:*)
++	GUESS=powerpc-ibm-os400
++	;;
++    arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
++	GUESS=arm-acorn-riscix$UNAME_RELEASE
++	;;
++    arm*:riscos:*:*|arm*:RISCOS:*:*)
++	GUESS=arm-unknown-riscos
++	;;
++    SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
++	GUESS=hppa1.1-hitachi-hiuxmpp
++	;;
++    Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
++	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
++	case `(/bin/universe) 2>/dev/null` in
++	    att) GUESS=pyramid-pyramid-sysv3 ;;
++	    *)   GUESS=pyramid-pyramid-bsd   ;;
++	esac
++	;;
++    NILE*:*:*:dcosx)
++	GUESS=pyramid-pyramid-svr4
++	;;
++    DRS?6000:unix:4.0:6*)
++	GUESS=sparc-icl-nx6
++	;;
++    DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
++	case `/usr/bin/uname -p` in
++	    sparc) GUESS=sparc-icl-nx7 ;;
++	esac
++	;;
++    s390x:SunOS:*:*)
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=$UNAME_MACHINE-ibm-solaris2$SUN_REL
++	;;
++    sun4H:SunOS:5.*:*)
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=sparc-hal-solaris2$SUN_REL
++	;;
++    sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=sparc-sun-solaris2$SUN_REL
++	;;
++    i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
++	GUESS=i386-pc-auroraux$UNAME_RELEASE
++	;;
++    i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
++	set_cc_for_build
++	SUN_ARCH=i386
++	# If there is a compiler, see if it is configured for 64-bit objects.
++	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
++	# This test works for both compilers.
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
++		(CCOPTS="" $CC_FOR_BUILD -m64 -E - 2>/dev/null) | \
++		grep IS_64BIT_ARCH >/dev/null
++	    then
++		SUN_ARCH=x86_64
++	    fi
++	fi
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=$SUN_ARCH-pc-solaris2$SUN_REL
++	;;
++    sun4*:SunOS:6*:*)
++	# According to config.sub, this is the proper way to canonicalize
++	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
++	# it's likely to be more like Solaris than SunOS4.
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=sparc-sun-solaris3$SUN_REL
++	;;
++    sun4*:SunOS:*:*)
++	case `/usr/bin/arch -k` in
++	    Series*|S4*)
++		UNAME_RELEASE=`uname -v`
++		;;
++	esac
++	# Japanese Language versions have a version number like '4.1.3-JL'.
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/'`
++	GUESS=sparc-sun-sunos$SUN_REL
++	;;
++    sun3*:SunOS:*:*)
++	GUESS=m68k-sun-sunos$UNAME_RELEASE
++	;;
++    sun*:*:4.2BSD:*)
++	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
++	test "x$UNAME_RELEASE" = x && UNAME_RELEASE=3
++	case `/bin/arch` in
++	    sun3)
++		GUESS=m68k-sun-sunos$UNAME_RELEASE
++		;;
++	    sun4)
++		GUESS=sparc-sun-sunos$UNAME_RELEASE
++		;;
++	esac
++	;;
++    aushp:SunOS:*:*)
++	GUESS=sparc-auspex-sunos$UNAME_RELEASE
++	;;
++    # The situation for MiNT is a little confusing.  The machine name
++    # can be virtually everything (everything which is not
++    # "atarist" or "atariste" at least should have a processor
++    # > m68000).  The system name ranges from "MiNT" over "FreeMiNT"
++    # to the lowercase version "mint" (or "freemint").  Finally
++    # the system name "TOS" denotes a system which is actually not
++    # MiNT.  But MiNT is downward compatible to TOS, so this should
++    # be no problem.
++    atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
++	GUESS=m68k-atari-mint$UNAME_RELEASE
++	;;
++    atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
++	GUESS=m68k-atari-mint$UNAME_RELEASE
++	;;
++    *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
++	GUESS=m68k-atari-mint$UNAME_RELEASE
++	;;
++    milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
++	GUESS=m68k-milan-mint$UNAME_RELEASE
++	;;
++    hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
++	GUESS=m68k-hades-mint$UNAME_RELEASE
++	;;
++    *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
++	GUESS=m68k-unknown-mint$UNAME_RELEASE
++	;;
++    m68k:machten:*:*)
++	GUESS=m68k-apple-machten$UNAME_RELEASE
++	;;
++    powerpc:machten:*:*)
++	GUESS=powerpc-apple-machten$UNAME_RELEASE
++	;;
++    RISC*:Mach:*:*)
++	GUESS=mips-dec-mach_bsd4.3
++	;;
++    RISC*:ULTRIX:*:*)
++	GUESS=mips-dec-ultrix$UNAME_RELEASE
++	;;
++    VAX*:ULTRIX*:*:*)
++	GUESS=vax-dec-ultrix$UNAME_RELEASE
++	;;
++    2020:CLIX:*:* | 2430:CLIX:*:*)
++	GUESS=clipper-intergraph-clix$UNAME_RELEASE
++	;;
++    mips:*:*:UMIPS | mips:*:*:RISCos)
++	set_cc_for_build
++	sed 's/^	//' << EOF > "$dummy.c"
++#ifdef __cplusplus
++#include <stdio.h>  /* for printf() prototype */
++	int main (int argc, char *argv[]) {
++#else
++	int main (argc, argv) int argc; char *argv[]; {
++#endif
++	#if defined (host_mips) && defined (MIPSEB)
++	#if defined (SYSTYPE_SYSV)
++	  printf ("mips-mips-riscos%ssysv\\n", argv[1]); exit (0);
++	#endif
++	#if defined (SYSTYPE_SVR4)
++	  printf ("mips-mips-riscos%ssvr4\\n", argv[1]); exit (0);
++	#endif
++	#if defined (SYSTYPE_BSD43) || defined(SYSTYPE_BSD)
++	  printf ("mips-mips-riscos%sbsd\\n", argv[1]); exit (0);
++	#endif
++	#endif
++	  exit (-1);
++	}
++EOF
++	$CC_FOR_BUILD -o "$dummy" "$dummy.c" &&
++	  dummyarg=`echo "$UNAME_RELEASE" | sed -n 's/\([0-9]*\).*/\1/p'` &&
++	  SYSTEM_NAME=`"$dummy" "$dummyarg"` &&
++	    { echo "$SYSTEM_NAME"; exit; }
++	GUESS=mips-mips-riscos$UNAME_RELEASE
++	;;
++    Motorola:PowerMAX_OS:*:*)
++	GUESS=powerpc-motorola-powermax
++	;;
++    Motorola:*:4.3:PL8-*)
++	GUESS=powerpc-harris-powermax
++	;;
++    Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
++	GUESS=powerpc-harris-powermax
++	;;
++    Night_Hawk:Power_UNIX:*:*)
++	GUESS=powerpc-harris-powerunix
++	;;
++    m88k:CX/UX:7*:*)
++	GUESS=m88k-harris-cxux7
++	;;
++    m88k:*:4*:R4*)
++	GUESS=m88k-motorola-sysv4
++	;;
++    m88k:*:3*:R3*)
++	GUESS=m88k-motorola-sysv3
++	;;
++    AViiON:dgux:*:*)
++	# DG/UX returns AViiON for all architectures
++	UNAME_PROCESSOR=`/usr/bin/uname -p`
++	if test "$UNAME_PROCESSOR" = mc88100 || test "$UNAME_PROCESSOR" = mc88110
++	then
++	    if test "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx || \
++	       test "$TARGET_BINARY_INTERFACE"x = x
++	    then
++		GUESS=m88k-dg-dgux$UNAME_RELEASE
++	    else
++		GUESS=m88k-dg-dguxbcs$UNAME_RELEASE
++	    fi
++	else
++	    GUESS=i586-dg-dgux$UNAME_RELEASE
++	fi
++	;;
++    M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
++	GUESS=m88k-dolphin-sysv3
++	;;
++    M88*:*:R3*:*)
++	# Delta 88k system running SVR3
++	GUESS=m88k-motorola-sysv3
++	;;
++    XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
++	GUESS=m88k-tektronix-sysv3
++	;;
++    Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
++	GUESS=m68k-tektronix-bsd
++	;;
++    *:IRIX*:*:*)
++	IRIX_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/g'`
++	GUESS=mips-sgi-irix$IRIX_REL
++	;;
++    ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
++	GUESS=romp-ibm-aix    # uname -m gives an 8 hex-code CPU id
++	;;                    # Note that: echo "'`uname -s`'" gives 'AIX '
++    i*86:AIX:*:*)
++	GUESS=i386-ibm-aix
++	;;
++    ia64:AIX:*:*)
++	if test -x /usr/bin/oslevel ; then
++		IBM_REV=`/usr/bin/oslevel`
++	else
++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
++	fi
++	GUESS=$UNAME_MACHINE-ibm-aix$IBM_REV
++	;;
++    *:AIX:2:3)
++	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
++		set_cc_for_build
++		sed 's/^		//' << EOF > "$dummy.c"
++		#include <sys/systemcfg.h>
++
++		int
++		main ()
++			{
++			if (!__power_pc())
++				exit(1);
++			puts("powerpc-ibm-aix3.2.5");
++			exit(0);
++			}
++EOF
++		if $CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"`
++		then
++			GUESS=$SYSTEM_NAME
++		else
++			GUESS=rs6000-ibm-aix3.2.5
++		fi
++	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
++		GUESS=rs6000-ibm-aix3.2.4
++	else
++		GUESS=rs6000-ibm-aix3.2
++	fi
++	;;
++    *:AIX:*:[4567])
++	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
++	if /usr/sbin/lsattr -El "$IBM_CPU_ID" | grep ' POWER' >/dev/null 2>&1; then
++		IBM_ARCH=rs6000
++	else
++		IBM_ARCH=powerpc
++	fi
++	if test -x /usr/bin/lslpp ; then
++		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc | \
++			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`
++	else
++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
++	fi
++	GUESS=$IBM_ARCH-ibm-aix$IBM_REV
++	;;
++    *:AIX:*:*)
++	GUESS=rs6000-ibm-aix
++	;;
++    ibmrt:4.4BSD:*|romp-ibm:4.4BSD:*)
++	GUESS=romp-ibm-bsd4.4
++	;;
++    ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
++	GUESS=romp-ibm-bsd$UNAME_RELEASE    # 4.3 with uname added to
++	;;                                  # report: romp-ibm BSD 4.3
++    *:BOSX:*:*)
++	GUESS=rs6000-bull-bosx
++	;;
++    DPX/2?00:B.O.S.:*:*)
++	GUESS=m68k-bull-sysv3
++	;;
++    9000/[34]??:4.3bsd:1.*:*)
++	GUESS=m68k-hp-bsd
++	;;
++    hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
++	GUESS=m68k-hp-bsd4.4
++	;;
++    9000/[34678]??:HP-UX:*:*)
++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
++	case $UNAME_MACHINE in
++	    9000/31?)            HP_ARCH=m68000 ;;
++	    9000/[34]??)         HP_ARCH=m68k ;;
++	    9000/[678][0-9][0-9])
++		if test -x /usr/bin/getconf; then
++		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
++		    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
++		    case $sc_cpu_version in
++		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0
++		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1
++		      532)                      # CPU_PA_RISC2_0
++			case $sc_kernel_bits in
++			  32) HP_ARCH=hppa2.0n ;;
++			  64) HP_ARCH=hppa2.0w ;;
++			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20
++			esac ;;
++		    esac
++		fi
++		if test "$HP_ARCH" = ""; then
++		    set_cc_for_build
++		    sed 's/^		//' << EOF > "$dummy.c"
++
++		#define _HPUX_SOURCE
++		#include <stdlib.h>
++		#include <unistd.h>
++
++		int
++		main ()
++		{
++		#if defined(_SC_KERNEL_BITS)
++		    long bits = sysconf(_SC_KERNEL_BITS);
++		#endif
++		    long cpu  = sysconf (_SC_CPU_VERSION);
++
++		    switch (cpu)
++			{
++			case CPU_PA_RISC1_0: puts ("hppa1.0"); break;
++			case CPU_PA_RISC1_1: puts ("hppa1.1"); break;
++			case CPU_PA_RISC2_0:
++		#if defined(_SC_KERNEL_BITS)
++			    switch (bits)
++				{
++				case 64: puts ("hppa2.0w"); break;
++				case 32: puts ("hppa2.0n"); break;
++				default: puts ("hppa2.0"); break;
++				} break;
++		#else  /* !defined(_SC_KERNEL_BITS) */
++			    puts ("hppa2.0"); break;
++		#endif
++			default: puts ("hppa1.0"); break;
++			}
++		    exit (0);
++		}
++EOF
++		    (CCOPTS="" $CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null) && HP_ARCH=`"$dummy"`
++		    test -z "$HP_ARCH" && HP_ARCH=hppa
++		fi ;;
++	esac
++	if test "$HP_ARCH" = hppa2.0w
++	then
++	    set_cc_for_build
++
++	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
++	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
++	    # generating 64-bit code.  GNU and HP use different nomenclature:
++	    #
++	    # $ CC_FOR_BUILD=cc ./config.guess
++	    # => hppa2.0w-hp-hpux11.23
++	    # $ CC_FOR_BUILD="cc +DA2.0w" ./config.guess
++	    # => hppa64-hp-hpux11.23
++
++	    if echo __LP64__ | (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) |
++		grep -q __LP64__
++	    then
++		HP_ARCH=hppa2.0w
++	    else
++		HP_ARCH=hppa64
++	    fi
++	fi
++	GUESS=$HP_ARCH-hp-hpux$HPUX_REV
++	;;
++    ia64:HP-UX:*:*)
++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
++	GUESS=ia64-hp-hpux$HPUX_REV
++	;;
++    3050*:HI-UX:*:*)
++	set_cc_for_build
++	sed 's/^	//' << EOF > "$dummy.c"
++	#include <unistd.h>
++	int
++	main ()
++	{
++	  long cpu = sysconf (_SC_CPU_VERSION);
++	  /* The order matters, because CPU_IS_HP_MC68K erroneously returns
++	     true for CPU_PA_RISC1_0.  CPU_IS_PA_RISC returns correct
++	     results, however.  */
++	  if (CPU_IS_PA_RISC (cpu))
++	    {
++	      switch (cpu)
++		{
++		  case CPU_PA_RISC1_0: puts ("hppa1.0-hitachi-hiuxwe2"); break;
++		  case CPU_PA_RISC1_1: puts ("hppa1.1-hitachi-hiuxwe2"); break;
++		  case CPU_PA_RISC2_0: puts ("hppa2.0-hitachi-hiuxwe2"); break;
++		  default: puts ("hppa-hitachi-hiuxwe2"); break;
++		}
++	    }
++	  else if (CPU_IS_HP_MC68K (cpu))
++	    puts ("m68k-hitachi-hiuxwe2");
++	  else puts ("unknown-hitachi-hiuxwe2");
++	  exit (0);
++	}
++EOF
++	$CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"` &&
++		{ echo "$SYSTEM_NAME"; exit; }
++	GUESS=unknown-hitachi-hiuxwe2
++	;;
++    9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:*)
++	GUESS=hppa1.1-hp-bsd
++	;;
++    9000/8??:4.3bsd:*:*)
++	GUESS=hppa1.0-hp-bsd
++	;;
++    *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
++	GUESS=hppa1.0-hp-mpeix
++	;;
++    hp7??:OSF1:*:* | hp8?[79]:OSF1:*:*)
++	GUESS=hppa1.1-hp-osf
++	;;
++    hp8??:OSF1:*:*)
++	GUESS=hppa1.0-hp-osf
++	;;
++    i*86:OSF1:*:*)
++	if test -x /usr/sbin/sysversion ; then
++	    GUESS=$UNAME_MACHINE-unknown-osf1mk
++	else
++	    GUESS=$UNAME_MACHINE-unknown-osf1
++	fi
++	;;
++    parisc*:Lites*:*:*)
++	GUESS=hppa1.1-hp-lites
++	;;
++    C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
++	GUESS=c1-convex-bsd
++	;;
++    C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
++	if getsysinfo -f scalar_acc
++	then echo c32-convex-bsd
++	else echo c2-convex-bsd
++	fi
++	exit ;;
++    C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
++	GUESS=c34-convex-bsd
++	;;
++    C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
++	GUESS=c38-convex-bsd
++	;;
++    C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
++	GUESS=c4-convex-bsd
++	;;
++    CRAY*Y-MP:*:*:*)
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=ymp-cray-unicos$CRAY_REL
++	;;
++    CRAY*[A-Z]90:*:*:*)
++	echo "$UNAME_MACHINE"-cray-unicos"$UNAME_RELEASE" \
++	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
++	      -e y/ABCDEFGHIJKLMNOPQRSTUVWXYZ/abcdefghijklmnopqrstuvwxyz/ \
++	      -e 's/\.[^.]*$/.X/'
++	exit ;;
++    CRAY*TS:*:*:*)
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=t90-cray-unicos$CRAY_REL
++	;;
++    CRAY*T3E:*:*:*)
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=alphaev5-cray-unicosmk$CRAY_REL
++	;;
++    CRAY*SV1:*:*:*)
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=sv1-cray-unicos$CRAY_REL
++	;;
++    *:UNICOS/mp:*:*)
++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
++	GUESS=craynv-cray-unicosmp$CRAY_REL
++	;;
++    F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
++	FUJITSU_PROC=`uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
++	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
++	FUJITSU_REL=`echo "$UNAME_RELEASE" | sed -e 's/ /_/'`
++	GUESS=${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
++	;;
++    5000:UNIX_System_V:4.*:*)
++	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
++	FUJITSU_REL=`echo "$UNAME_RELEASE" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`
++	GUESS=sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
++	;;
++    i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
++	GUESS=$UNAME_MACHINE-pc-bsdi$UNAME_RELEASE
++	;;
++    sparc*:BSD/OS:*:*)
++	GUESS=sparc-unknown-bsdi$UNAME_RELEASE
++	;;
++    *:BSD/OS:*:*)
++	GUESS=$UNAME_MACHINE-unknown-bsdi$UNAME_RELEASE
++	;;
++    arm:FreeBSD:*:*)
++	UNAME_PROCESSOR=`uname -p`
++	set_cc_for_build
++	if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
++	    | grep -q __ARM_PCS_VFP
++	then
++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabi
++	else
++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabihf
++	fi
++	;;
++    *:FreeBSD:*:*)
++	UNAME_PROCESSOR=`uname -p`
++	case $UNAME_PROCESSOR in
++	    amd64)
++		UNAME_PROCESSOR=x86_64 ;;
++	    i386)
++		UNAME_PROCESSOR=i586 ;;
++	esac
++	FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL
++	;;
++    i*:CYGWIN*:*)
++	GUESS=$UNAME_MACHINE-pc-cygwin
++	;;
++    *:MINGW64*:*)
++	GUESS=$UNAME_MACHINE-pc-mingw64
++	;;
++    *:MINGW*:*)
++	GUESS=$UNAME_MACHINE-pc-mingw32
++	;;
++    *:MSYS*:*)
++	GUESS=$UNAME_MACHINE-pc-msys
++	;;
++    i*:PW*:*)
++	GUESS=$UNAME_MACHINE-pc-pw32
++	;;
++    *:SerenityOS:*:*)
++        GUESS=$UNAME_MACHINE-pc-serenity
++        ;;
++    *:Interix*:*)
++	case $UNAME_MACHINE in
++	    x86)
++		GUESS=i586-pc-interix$UNAME_RELEASE
++		;;
++	    authenticamd | genuineintel | EM64T)
++		GUESS=x86_64-unknown-interix$UNAME_RELEASE
++		;;
++	    IA64)
++		GUESS=ia64-unknown-interix$UNAME_RELEASE
++		;;
++	esac ;;
++    i*:UWIN*:*)
++	GUESS=$UNAME_MACHINE-pc-uwin
++	;;
++    amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
++	GUESS=x86_64-pc-cygwin
++	;;
++    prep*:SunOS:5.*:*)
++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
++	GUESS=powerpcle-unknown-solaris2$SUN_REL
++	;;
++    *:GNU:*:*)
++	# the GNU system
++	GNU_ARCH=`echo "$UNAME_MACHINE" | sed -e 's,[-/].*$,,'`
++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's,/.*$,,'`
++	GUESS=$GNU_ARCH-unknown-$LIBC$GNU_REL
++	;;
++    *:GNU/*:*:*)
++	# other systems with GNU libc and userland
++	GNU_SYS=`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"`
++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	GUESS=$UNAME_MACHINE-unknown-$GNU_SYS$GNU_REL-$LIBC
++	;;
++    x86_64:[Mm]anagarm:*:*|i?86:[Mm]anagarm:*:*)
++	GUESS="$UNAME_MACHINE-pc-managarm-mlibc"
++	;;
++    *:[Mm]anagarm:*:*)
++	GUESS="$UNAME_MACHINE-unknown-managarm-mlibc"
++	;;
++    *:Minix:*:*)
++	GUESS=$UNAME_MACHINE-unknown-minix
++	;;
++    aarch64:Linux:*:*)
++	set_cc_for_build
++	CPU=$UNAME_MACHINE
++	LIBCABI=$LIBC
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    ABI=64
++	    sed 's/^	    //' << EOF > "$dummy.c"
++	    #ifdef __ARM_EABI__
++	    #ifdef __ARM_PCS_VFP
++	    ABI=eabihf
++	    #else
++	    ABI=eabi
++	    #endif
++	    #endif
++EOF
++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
++	    eval "$cc_set_abi"
++	    case $ABI in
++		eabi | eabihf) CPU=armv8l; LIBCABI=$LIBC$ABI ;;
++	    esac
++	fi
++	GUESS=$CPU-unknown-linux-$LIBCABI
++	;;
++    aarch64_be:Linux:*:*)
++	UNAME_MACHINE=aarch64_be
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    alpha:Linux:*:*)
++	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' /proc/cpuinfo 2>/dev/null` in
++	  EV5)   UNAME_MACHINE=alphaev5 ;;
++	  EV56)  UNAME_MACHINE=alphaev56 ;;
++	  PCA56) UNAME_MACHINE=alphapca56 ;;
++	  PCA57) UNAME_MACHINE=alphapca56 ;;
++	  EV6)   UNAME_MACHINE=alphaev6 ;;
++	  EV67)  UNAME_MACHINE=alphaev67 ;;
++	  EV68*) UNAME_MACHINE=alphaev68 ;;
++	esac
++	objdump --private-headers /bin/sh | grep -q ld.so.1
++	if test "$?" = 0 ; then LIBC=gnulibc1 ; fi
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    arc:Linux:*:* | arceb:Linux:*:* | arc32:Linux:*:* | arc64:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    arm*:Linux:*:*)
++	set_cc_for_build
++	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
++	    | grep -q __ARM_EABI__
++	then
++	    GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	else
++	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
++		| grep -q __ARM_PCS_VFP
++	    then
++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabi
++	    else
++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabihf
++	    fi
++	fi
++	;;
++    avr32*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    cris:Linux:*:*)
++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
++	;;
++    crisv32:Linux:*:*)
++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
++	;;
++    e2k:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    frv:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    hexagon:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    i*86:Linux:*:*)
++	GUESS=$UNAME_MACHINE-pc-linux-$LIBC
++	;;
++    ia64:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    k1om:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    kvx:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    kvx:cos:*:*)
++	GUESS=$UNAME_MACHINE-unknown-cos
++	;;
++    kvx:mbr:*:*)
++	GUESS=$UNAME_MACHINE-unknown-mbr
++	;;
++    loongarch32:Linux:*:* | loongarch64:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    m32r*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    m68*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    mips:Linux:*:* | mips64:Linux:*:*)
++	set_cc_for_build
++	IS_GLIBC=0
++	test x"${LIBC}" = xgnu && IS_GLIBC=1
++	sed 's/^	//' << EOF > "$dummy.c"
++	#undef CPU
++	#undef mips
++	#undef mipsel
++	#undef mips64
++	#undef mips64el
++	#if ${IS_GLIBC} && defined(_ABI64)
++	LIBCABI=gnuabi64
++	#else
++	#if ${IS_GLIBC} && defined(_ABIN32)
++	LIBCABI=gnuabin32
++	#else
++	LIBCABI=${LIBC}
++	#endif
++	#endif
++
++	#if ${IS_GLIBC} && defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
++	CPU=mipsisa64r6
++	#else
++	#if ${IS_GLIBC} && !defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
++	CPU=mipsisa32r6
++	#else
++	#if defined(__mips64)
++	CPU=mips64
++	#else
++	CPU=mips
++	#endif
++	#endif
++	#endif
++
++	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
++	MIPS_ENDIAN=el
++	#else
++	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
++	MIPS_ENDIAN=
++	#else
++	MIPS_ENDIAN=
++	#endif
++	#endif
++EOF
++	cc_set_vars=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI'`
++	eval "$cc_set_vars"
++	test "x$CPU" != x && { echo "$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI"; exit; }
++	;;
++    mips64el:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    openrisc*:Linux:*:*)
++	GUESS=or1k-unknown-linux-$LIBC
++	;;
++    or32:Linux:*:* | or1k*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    padre:Linux:*:*)
++	GUESS=sparc-unknown-linux-$LIBC
++	;;
++    parisc64:Linux:*:* | hppa64:Linux:*:*)
++	GUESS=hppa64-unknown-linux-$LIBC
++	;;
++    parisc:Linux:*:* | hppa:Linux:*:*)
++	# Look for CPU level
++	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
++	  PA7*) GUESS=hppa1.1-unknown-linux-$LIBC ;;
++	  PA8*) GUESS=hppa2.0-unknown-linux-$LIBC ;;
++	  *)    GUESS=hppa-unknown-linux-$LIBC ;;
++	esac
++	;;
++    ppc64:Linux:*:*)
++	GUESS=powerpc64-unknown-linux-$LIBC
++	;;
++    ppc:Linux:*:*)
++	GUESS=powerpc-unknown-linux-$LIBC
++	;;
++    ppc64le:Linux:*:*)
++	GUESS=powerpc64le-unknown-linux-$LIBC
++	;;
++    ppcle:Linux:*:*)
++	GUESS=powerpcle-unknown-linux-$LIBC
++	;;
++    riscv32:Linux:*:* | riscv32be:Linux:*:* | riscv64:Linux:*:* | riscv64be:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    s390:Linux:*:* | s390x:Linux:*:*)
++	GUESS=$UNAME_MACHINE-ibm-linux-$LIBC
++	;;
++    sh64*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    sh*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    sparc:Linux:*:* | sparc64:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    tile*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    vax:Linux:*:*)
++	GUESS=$UNAME_MACHINE-dec-linux-$LIBC
++	;;
++    x86_64:Linux:*:*)
++	set_cc_for_build
++	CPU=$UNAME_MACHINE
++	LIBCABI=$LIBC
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    ABI=64
++	    sed 's/^	    //' << EOF > "$dummy.c"
++	    #ifdef __i386__
++	    ABI=x86
++	    #else
++	    #ifdef __ILP32__
++	    ABI=x32
++	    #endif
++	    #endif
++EOF
++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
++	    eval "$cc_set_abi"
++	    case $ABI in
++		x86) CPU=i686 ;;
++		x32) LIBCABI=${LIBC}x32 ;;
++	    esac
++	fi
++	GUESS=$CPU-pc-linux-$LIBCABI
++	;;
++    xtensa*:Linux:*:*)
++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++	;;
++    i*86:DYNIX/ptx:4*:*)
++	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
++	# earlier versions are messed up and put the nodename in both
++	# sysname and nodename.
++	GUESS=i386-sequent-sysv4
++	;;
++    i*86:UNIX_SV:4.2MP:2.*)
++	# Unixware is an offshoot of SVR4, but it has its own version
++	# number series starting with 2...
++	# I am not positive that other SVR4 systems won't match this,
++	# I just have to hope.  -- rms.
++	# Use sysv4.2uw... so that sysv4* matches it.
++	GUESS=$UNAME_MACHINE-pc-sysv4.2uw$UNAME_VERSION
++	;;
++    i*86:OS/2:*:*)
++	# If we were able to find 'uname', then EMX Unix compatibility
++	# is probably installed.
++	GUESS=$UNAME_MACHINE-pc-os2-emx
++	;;
++    i*86:XTS-300:*:STOP)
++	GUESS=$UNAME_MACHINE-unknown-stop
++	;;
++    i*86:atheos:*:*)
++	GUESS=$UNAME_MACHINE-unknown-atheos
++	;;
++    i*86:syllable:*:*)
++	GUESS=$UNAME_MACHINE-pc-syllable
++	;;
++    i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
++	GUESS=i386-unknown-lynxos$UNAME_RELEASE
++	;;
++    i*86:*DOS:*:*)
++	GUESS=$UNAME_MACHINE-pc-msdosdjgpp
++	;;
++    i*86:*:4.*:*)
++	UNAME_REL=`echo "$UNAME_RELEASE" | sed 's/\/MP$//'`
++	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
++		GUESS=$UNAME_MACHINE-univel-sysv$UNAME_REL
++	else
++		GUESS=$UNAME_MACHINE-pc-sysv$UNAME_REL
++	fi
++	;;
++    i*86:*:5:[678]*)
++	# UnixWare 7.x, OpenUNIX and OpenServer 6.
++	case `/bin/uname -X | grep "^Machine"` in
++	    *486*)	     UNAME_MACHINE=i486 ;;
++	    *Pentium)	     UNAME_MACHINE=i586 ;;
++	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
++	esac
++	GUESS=$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
++	;;
++    i*86:*:3.2:*)
++	if test -f /usr/options/cb.name; then
++		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
++		GUESS=$UNAME_MACHINE-pc-isc$UNAME_REL
++	elif /bin/uname -X 2>/dev/null >/dev/null ; then
++		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
++		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
++		(/bin/uname -X|grep '^Machine.*Pentium' >/dev/null) \
++			&& UNAME_MACHINE=i586
++		(/bin/uname -X|grep '^Machine.*Pent *II' >/dev/null) \
++			&& UNAME_MACHINE=i686
++		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
++			&& UNAME_MACHINE=i686
++		GUESS=$UNAME_MACHINE-pc-sco$UNAME_REL
++	else
++		GUESS=$UNAME_MACHINE-pc-sysv32
++	fi
++	;;
++    pc:*:*:*)
++	# Left here for compatibility:
++	# uname -m prints for DJGPP always 'pc', but it prints nothing about
++	# the processor, so we play safe by assuming i586.
++	# Note: whatever this is, it MUST be the same as what config.sub
++	# prints for the "djgpp" host, or else GDB configure will decide that
++	# this is a cross-build.
++	GUESS=i586-pc-msdosdjgpp
++	;;
++    Intel:Mach:3*:*)
++	GUESS=i386-pc-mach3
++	;;
++    paragon:*:*:*)
++	GUESS=i860-intel-osf1
++	;;
++    i860:*:4.*:*) # i860-SVR4
++	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
++	  GUESS=i860-stardent-sysv$UNAME_RELEASE    # Stardent Vistra i860-SVR4
++	else # Add other i860-SVR4 vendors below as they are discovered.
++	  GUESS=i860-unknown-sysv$UNAME_RELEASE     # Unknown i860-SVR4
++	fi
++	;;
++    mini*:CTIX:SYS*5:*)
++	# "miniframe"
++	GUESS=m68010-convergent-sysv
++	;;
++    mc68k:UNIX:SYSTEM5:3.51m)
++	GUESS=m68k-convergent-sysv
++	;;
++    M680?0:D-NIX:5.3:*)
++	GUESS=m68k-diab-dnix
++	;;
++    M68*:*:R3V[5678]*:*)
++	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
++    3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
++	OS_REL=''
++	test -r /etc/.relid \
++	&& OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++	  && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
++	  && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
++    3[34]??:*:4.0:* | 3[34]??,*:*:4.0:*)
++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++	  && { echo i486-ncr-sysv4; exit; } ;;
++    NCR*:*:4.2:* | MPRAS*:*:4.2:*)
++	OS_REL='.3'
++	test -r /etc/.relid \
++	    && OS_REL=.`sed -n 's/[^ ]* [^ ]* \([0-9][0-9]\).*/\1/p' < /etc/.relid`
++	/bin/uname -p 2>/dev/null | grep 86 >/dev/null \
++	    && { echo i486-ncr-sysv4.3"$OS_REL"; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep entium >/dev/null \
++	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; }
++	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
++	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
++    m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
++	GUESS=m68k-unknown-lynxos$UNAME_RELEASE
++	;;
++    mc68030:UNIX_System_V:4.*:*)
++	GUESS=m68k-atari-sysv4
++	;;
++    TSUNAMI:LynxOS:2.*:*)
++	GUESS=sparc-unknown-lynxos$UNAME_RELEASE
++	;;
++    rs6000:LynxOS:2.*:*)
++	GUESS=rs6000-unknown-lynxos$UNAME_RELEASE
++	;;
++    PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
++	GUESS=powerpc-unknown-lynxos$UNAME_RELEASE
++	;;
++    SM[BE]S:UNIX_SV:*:*)
++	GUESS=mips-dde-sysv$UNAME_RELEASE
++	;;
++    RM*:ReliantUNIX-*:*:*)
++	GUESS=mips-sni-sysv4
++	;;
++    RM*:SINIX-*:*:*)
++	GUESS=mips-sni-sysv4
++	;;
++    *:SINIX-*:*:*)
++	if uname -p 2>/dev/null >/dev/null ; then
++		UNAME_MACHINE=`(uname -p) 2>/dev/null`
++		GUESS=$UNAME_MACHINE-sni-sysv4
++	else
++		GUESS=ns32k-sni-sysv
++	fi
++	;;
++    PENTIUM:*:4.0*:*)	# Unisys 'ClearPath HMP IX 4000' SVR4/MP effort
++			# says <Richard.M.Bartel@ccMail.Census.GOV>
++	GUESS=i586-unisys-sysv4
++	;;
++    *:UNIX_System_V:4*:FTX*)
++	# From Gerald Hewes <hewes@openmarket.com>.
++	# How about differentiating between stratus architectures? -djm
++	GUESS=hppa1.1-stratus-sysv4
++	;;
++    *:*:*:FTX*)
++	# From seanf@swdc.stratus.com.
++	GUESS=i860-stratus-sysv4
++	;;
++    i*86:VOS:*:*)
++	# From Paul.Green@stratus.com.
++	GUESS=$UNAME_MACHINE-stratus-vos
++	;;
++    *:VOS:*:*)
++	# From Paul.Green@stratus.com.
++	GUESS=hppa1.1-stratus-vos
++	;;
++    mc68*:A/UX:*:*)
++	GUESS=m68k-apple-aux$UNAME_RELEASE
++	;;
++    news*:NEWS-OS:6*:*)
++	GUESS=mips-sony-newsos6
++	;;
++    R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
++	if test -d /usr/nec; then
++		GUESS=mips-nec-sysv$UNAME_RELEASE
++	else
++		GUESS=mips-unknown-sysv$UNAME_RELEASE
++	fi
++	;;
++    BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
++	GUESS=powerpc-be-beos
++	;;
++    BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
++	GUESS=powerpc-apple-beos
++	;;
++    BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
++	GUESS=i586-pc-beos
++	;;
++    BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
++	GUESS=i586-pc-haiku
++	;;
++    ppc:Haiku:*:*)	# Haiku running on Apple PowerPC
++	GUESS=powerpc-apple-haiku
++	;;
++    *:Haiku:*:*)	# Haiku modern gcc (not bound by BeOS compat)
++	GUESS=$UNAME_MACHINE-unknown-haiku
++	;;
++    SX-4:SUPER-UX:*:*)
++	GUESS=sx4-nec-superux$UNAME_RELEASE
++	;;
++    SX-5:SUPER-UX:*:*)
++	GUESS=sx5-nec-superux$UNAME_RELEASE
++	;;
++    SX-6:SUPER-UX:*:*)
++	GUESS=sx6-nec-superux$UNAME_RELEASE
++	;;
++    SX-7:SUPER-UX:*:*)
++	GUESS=sx7-nec-superux$UNAME_RELEASE
++	;;
++    SX-8:SUPER-UX:*:*)
++	GUESS=sx8-nec-superux$UNAME_RELEASE
++	;;
++    SX-8R:SUPER-UX:*:*)
++	GUESS=sx8r-nec-superux$UNAME_RELEASE
++	;;
++    SX-ACE:SUPER-UX:*:*)
++	GUESS=sxace-nec-superux$UNAME_RELEASE
++	;;
++    Power*:Rhapsody:*:*)
++	GUESS=powerpc-apple-rhapsody$UNAME_RELEASE
++	;;
++    *:Rhapsody:*:*)
++	GUESS=$UNAME_MACHINE-apple-rhapsody$UNAME_RELEASE
++	;;
++    arm64:Darwin:*:*)
++	GUESS=aarch64-apple-darwin$UNAME_RELEASE
++	;;
++    *:Darwin:*:*)
++	UNAME_PROCESSOR=`uname -p`
++	case $UNAME_PROCESSOR in
++	    unknown) UNAME_PROCESSOR=powerpc ;;
++	esac
++	if command -v xcode-select > /dev/null 2> /dev/null && \
++		! xcode-select --print-path > /dev/null 2> /dev/null ; then
++	    # Avoid executing cc if there is no toolchain installed as
++	    # cc will be a stub that puts up a graphical alert
++	    # prompting the user to install developer tools.
++	    CC_FOR_BUILD=no_compiler_found
++	else
++	    set_cc_for_build
++	fi
++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++	    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++		   grep IS_64BIT_ARCH >/dev/null
++	    then
++		case $UNAME_PROCESSOR in
++		    i386) UNAME_PROCESSOR=x86_64 ;;
++		    powerpc) UNAME_PROCESSOR=powerpc64 ;;
++		esac
++	    fi
++	    # On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
++	    if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++		   grep IS_PPC >/dev/null
++	    then
++		UNAME_PROCESSOR=powerpc
++	    fi
++	elif test "$UNAME_PROCESSOR" = i386 ; then
++	    # uname -m returns i386 or x86_64
++	    UNAME_PROCESSOR=$UNAME_MACHINE
++	fi
++	GUESS=$UNAME_PROCESSOR-apple-darwin$UNAME_RELEASE
++	;;
++    *:procnto*:*:* | *:QNX:[0123456789]*:*)
++	UNAME_PROCESSOR=`uname -p`
++	if test "$UNAME_PROCESSOR" = x86; then
++		UNAME_PROCESSOR=i386
++		UNAME_MACHINE=pc
++	fi
++	GUESS=$UNAME_PROCESSOR-$UNAME_MACHINE-nto-qnx$UNAME_RELEASE
++	;;
++    *:QNX:*:4*)
++	GUESS=i386-pc-qnx
++	;;
++    NEO-*:NONSTOP_KERNEL:*:*)
++	GUESS=neo-tandem-nsk$UNAME_RELEASE
++	;;
++    NSE-*:NONSTOP_KERNEL:*:*)
++	GUESS=nse-tandem-nsk$UNAME_RELEASE
++	;;
++    NSR-*:NONSTOP_KERNEL:*:*)
++	GUESS=nsr-tandem-nsk$UNAME_RELEASE
++	;;
++    NSV-*:NONSTOP_KERNEL:*:*)
++	GUESS=nsv-tandem-nsk$UNAME_RELEASE
++	;;
++    NSX-*:NONSTOP_KERNEL:*:*)
++	GUESS=nsx-tandem-nsk$UNAME_RELEASE
++	;;
++    *:NonStop-UX:*:*)
++	GUESS=mips-compaq-nonstopux
++	;;
++    BS2000:POSIX*:*:*)
++	GUESS=bs2000-siemens-sysv
++	;;
++    DS/*:UNIX_System_V:*:*)
++	GUESS=$UNAME_MACHINE-$UNAME_SYSTEM-$UNAME_RELEASE
++	;;
++    *:Plan9:*:*)
++	# "uname -m" is not consistent, so use $cputype instead. 386
++	# is converted to i386 for consistency with other x86
++	# operating systems.
++	if test "${cputype-}" = 386; then
++	    UNAME_MACHINE=i386
++	elif test "x${cputype-}" != x; then
++	    UNAME_MACHINE=$cputype
++	fi
++	GUESS=$UNAME_MACHINE-unknown-plan9
++	;;
++    *:TOPS-10:*:*)
++	GUESS=pdp10-unknown-tops10
++	;;
++    *:TENEX:*:*)
++	GUESS=pdp10-unknown-tenex
++	;;
++    KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
++	GUESS=pdp10-dec-tops20
++	;;
++    XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
++	GUESS=pdp10-xkl-tops20
++	;;
++    *:TOPS-20:*:*)
++	GUESS=pdp10-unknown-tops20
++	;;
++    *:ITS:*:*)
++	GUESS=pdp10-unknown-its
++	;;
++    SEI:*:*:SEIUX)
++	GUESS=mips-sei-seiux$UNAME_RELEASE
++	;;
++    *:DragonFly:*:*)
++	DRAGONFLY_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
++	GUESS=$UNAME_MACHINE-unknown-dragonfly$DRAGONFLY_REL
++	;;
++    *:*VMS:*:*)
++	UNAME_MACHINE=`(uname -p) 2>/dev/null`
++	case $UNAME_MACHINE in
++	    A*) GUESS=alpha-dec-vms ;;
++	    I*) GUESS=ia64-dec-vms ;;
++	    V*) GUESS=vax-dec-vms ;;
++	esac ;;
++    *:XENIX:*:SysV)
++	GUESS=i386-pc-xenix
++	;;
++    i*86:skyos:*:*)
++	SKYOS_REL=`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`
++	GUESS=$UNAME_MACHINE-pc-skyos$SKYOS_REL
++	;;
++    i*86:rdos:*:*)
++	GUESS=$UNAME_MACHINE-pc-rdos
++	;;
++    i*86:Fiwix:*:*)
++	GUESS=$UNAME_MACHINE-pc-fiwix
++	;;
++    *:AROS:*:*)
++	GUESS=$UNAME_MACHINE-unknown-aros
++	;;
++    x86_64:VMkernel:*:*)
++	GUESS=$UNAME_MACHINE-unknown-esx
++	;;
++    amd64:Isilon\ OneFS:*:*)
++	GUESS=x86_64-unknown-onefs
++	;;
++    *:Unleashed:*:*)
++	GUESS=$UNAME_MACHINE-unknown-unleashed$UNAME_RELEASE
++	;;
++    *:Ironclad:*:*)
++	GUESS=$UNAME_MACHINE-unknown-ironclad
++	;;
++esac
++
++# Do we have a guess based on uname results?
++if test "x$GUESS" != x; then
++    echo "$GUESS"
++    exit
++fi
++
++# No uname command or uname output not recognized.
++set_cc_for_build
++cat > "$dummy.c" <<EOF
++#ifdef _SEQUENT_
++#include <sys/types.h>
++#include <sys/utsname.h>
++#endif
++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
++#if defined (vax) || defined (__vax) || defined (__vax__) || defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
++#include <signal.h>
++#if defined(_SIZE_T_) || defined(SIGLOST)
++#include <sys/utsname.h>
++#endif
++#endif
++#endif
++int
++main ()
++{
++#if defined (sony)
++#if defined (MIPSEB)
++  /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
++     I don't know....  */
++  printf ("mips-sony-bsd\n"); exit (0);
++#else
++#include <sys/param.h>
++  printf ("m68k-sony-newsos%s\n",
++#ifdef NEWSOS4
++  "4"
++#else
++  ""
++#endif
++  ); exit (0);
++#endif
++#endif
++
++#if defined (NeXT)
++#if !defined (__ARCHITECTURE__)
++#define __ARCHITECTURE__ "m68k"
++#endif
++  int version;
++  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
++  if (version < 4)
++    printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
++  else
++    printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
++  exit (0);
++#endif
++
++#if defined (MULTIMAX) || defined (n16)
++#if defined (UMAXV)
++  printf ("ns32k-encore-sysv\n"); exit (0);
++#else
++#if defined (CMU)
++  printf ("ns32k-encore-mach\n"); exit (0);
++#else
++  printf ("ns32k-encore-bsd\n"); exit (0);
++#endif
++#endif
++#endif
++
++#if defined (__386BSD__)
++  printf ("i386-pc-bsd\n"); exit (0);
++#endif
++
++#if defined (sequent)
++#if defined (i386)
++  printf ("i386-sequent-dynix\n"); exit (0);
++#endif
++#if defined (ns32000)
++  printf ("ns32k-sequent-dynix\n"); exit (0);
++#endif
++#endif
++
++#if defined (_SEQUENT_)
++  struct utsname un;
++
++  uname(&un);
++  if (strncmp(un.version, "V2", 2) == 0) {
++    printf ("i386-sequent-ptx2\n"); exit (0);
++  }
++  if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
++    printf ("i386-sequent-ptx1\n"); exit (0);
++  }
++  printf ("i386-sequent-ptx\n"); exit (0);
++#endif
++
++#if defined (vax)
++#if !defined (ultrix)
++#include <sys/param.h>
++#if defined (BSD)
++#if BSD == 43
++  printf ("vax-dec-bsd4.3\n"); exit (0);
++#else
++#if BSD == 199006
++  printf ("vax-dec-bsd4.3reno\n"); exit (0);
++#else
++  printf ("vax-dec-bsd\n"); exit (0);
++#endif
++#endif
++#else
++  printf ("vax-dec-bsd\n"); exit (0);
++#endif
++#else
++#if defined(_SIZE_T_) || defined(SIGLOST)
++  struct utsname un;
++  uname (&un);
++  printf ("vax-dec-ultrix%s\n", un.release); exit (0);
++#else
++  printf ("vax-dec-ultrix\n"); exit (0);
++#endif
++#endif
++#endif
++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
++#if defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
++#if defined(_SIZE_T_) || defined(SIGLOST)
++  struct utsname *un;
++  uname (&un);
++  printf ("mips-dec-ultrix%s\n", un.release); exit (0);
++#else
++  printf ("mips-dec-ultrix\n"); exit (0);
++#endif
++#endif
++#endif
++
++#if defined (alliant) && defined (i860)
++  printf ("i860-alliant-bsd\n"); exit (0);
++#endif
++
++  exit (1);
++}
++EOF
++
++$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=`"$dummy"` &&
++	{ echo "$SYSTEM_NAME"; exit; }
++
++# Apollos put the system type in the environment.
++test -d /usr/apollo && { echo "$ISP-apollo-$SYSTYPE"; exit; }
++
++echo "$0: unable to guess system type" >&2
++
++case $UNAME_MACHINE:$UNAME_SYSTEM in
++    mips:Linux | mips64:Linux)
++	# If we got here on MIPS GNU/Linux, output extra information.
++	cat >&2 <<EOF
++
++NOTE: MIPS GNU/Linux systems require a C compiler to fully recognize
++the system type. Please install a C compiler and try again.
++EOF
++	;;
++esac
++
++cat >&2 <<EOF
++
++This script (version $timestamp), has failed to recognize the
++operating system you are using. If your script is old, overwrite *all*
++copies of config.guess and config.sub with the latest versions from:
++
++  https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
++and
++  https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
++EOF
++
++our_year=`echo $timestamp | sed 's,-.*,,'`
++thisyear=`date +%Y`
++# shellcheck disable=SC2003
++script_age=`expr "$thisyear" - "$our_year"`
++if test "$script_age" -lt 3 ; then
++   cat >&2 <<EOF
++
++If $0 has already been updated, send the following data and any
++information you think might be pertinent to config-patches@gnu.org to
++provide the necessary information to handle your system.
++
++config.guess timestamp = $timestamp
++
++uname -m = `(uname -m) 2>/dev/null || echo unknown`
++uname -r = `(uname -r) 2>/dev/null || echo unknown`
++uname -s = `(uname -s) 2>/dev/null || echo unknown`
++uname -v = `(uname -v) 2>/dev/null || echo unknown`
++
++/usr/bin/uname -p = `(/usr/bin/uname -p) 2>/dev/null`
++/bin/uname -X     = `(/bin/uname -X) 2>/dev/null`
++
++hostinfo               = `(hostinfo) 2>/dev/null`
++/bin/universe          = `(/bin/universe) 2>/dev/null`
++/usr/bin/arch -k       = `(/usr/bin/arch -k) 2>/dev/null`
++/bin/arch              = `(/bin/arch) 2>/dev/null`
++/usr/bin/oslevel       = `(/usr/bin/oslevel) 2>/dev/null`
++/usr/convex/getsysinfo = `(/usr/convex/getsysinfo) 2>/dev/null`
++
++UNAME_MACHINE = "$UNAME_MACHINE"
++UNAME_RELEASE = "$UNAME_RELEASE"
++UNAME_SYSTEM  = "$UNAME_SYSTEM"
++UNAME_VERSION = "$UNAME_VERSION"
++EOF
++fi
++
++exit 1
++
++# Local variables:
++# eval: (add-hook 'before-save-hook 'time-stamp)
++# time-stamp-start: "timestamp='"
++# time-stamp-format: "%:y-%02m-%02d"
++# time-stamp-end: "'"
++# End:
+diff --git a/external/config.sub b/external/config.sub
+new file mode 100644
+index 000000000..4aaae46f6
+--- /dev/null
++++ b/external/config.sub
+@@ -0,0 +1,2354 @@
++#! /bin/sh
++# Configuration validation subroutine script.
++#   Copyright 1992-2024 Free Software Foundation, Inc.
++
++# shellcheck disable=SC2006,SC2268,SC2162 # see below for rationale
++
++timestamp='2024-05-27'
++
++# This file is free software; you can redistribute it and/or modify it
++# under the terms of the GNU General Public License as published by
++# the Free Software Foundation, either version 3 of the License, or
++# (at your option) any later version.
++#
++# This program is distributed in the hope that it will be useful, but
++# WITHOUT ANY WARRANTY; without even the implied warranty of
++# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
++# General Public License for more details.
++#
++# You should have received a copy of the GNU General Public License
++# along with this program; if not, see <https://www.gnu.org/licenses/>.
++#
++# As a special exception to the GNU General Public License, if you
++# distribute this file as part of a program that contains a
++# configuration script generated by Autoconf, you may include it under
++# the same distribution terms that you use for the rest of that
++# program.  This Exception is an additional permission under section 7
++# of the GNU General Public License, version 3 ("GPLv3").
++
++
++# Please send patches to <config-patches@gnu.org>.
++#
++# Configuration subroutine to validate and canonicalize a configuration type.
++# Supply the specified configuration type as an argument.
++# If it is invalid, we print an error message on stderr and exit with code 1.
++# Otherwise, we print the canonical config type on stdout and succeed.
++
++# You can get the latest version of this script from:
++# https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
++
++# This file is supposed to be the same for all GNU packages
++# and recognize all the CPU types, system types and aliases
++# that are meaningful with *any* GNU software.
++# Each package is responsible for reporting which valid configurations
++# it does not support.  The user should be able to distinguish
++# a failure to support a valid configuration from a meaningless
++# configuration.
++
++# The goal of this file is to map all the various variations of a given
++# machine specification into a single specification in the form:
++#	CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM
++# or in some cases, the newer four-part form:
++#	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
++# It is wrong to echo any other type of specification.
++
++# The "shellcheck disable" line above the timestamp inhibits complaints
++# about features and limitations of the classic Bourne shell that were
++# superseded or lifted in POSIX.  However, this script identifies a wide
++# variety of pre-POSIX systems that do not have POSIX shells at all, and
++# even some reasonably current systems (Solaris 10 as case-in-point) still
++# have a pre-POSIX /bin/sh.
++
++me=`echo "$0" | sed -e 's,.*/,,'`
++
++usage="\
++Usage: $0 [OPTION] CPU-MFR-OPSYS or ALIAS
++
++Canonicalize a configuration name.
++
++Options:
++  -h, --help         print this help, then exit
++  -t, --time-stamp   print date of last modification, then exit
++  -v, --version      print version number, then exit
++
++Report bugs and patches to <config-patches@gnu.org>."
++
++version="\
++GNU config.sub ($timestamp)
++
++Copyright 1992-2024 Free Software Foundation, Inc.
++
++This is free software; see the source for copying conditions.  There is NO
++warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++
++help="
++Try '$me --help' for more information."
++
++# Parse command line
++while test $# -gt 0 ; do
++  case $1 in
++    --time-stamp | --time* | -t )
++       echo "$timestamp" ; exit ;;
++    --version | -v )
++       echo "$version" ; exit ;;
++    --help | --h* | -h )
++       echo "$usage"; exit ;;
++    -- )     # Stop option processing
++       shift; break ;;
++    - )	# Use stdin as input.
++       break ;;
++    -* )
++       echo "$me: invalid option $1$help" >&2
++       exit 1 ;;
++
++    *local*)
++       # First pass through any local machine types.
++       echo "$1"
++       exit ;;
++
++    * )
++       break ;;
++  esac
++done
++
++case $# in
++ 0) echo "$me: missing argument$help" >&2
++    exit 1;;
++ 1) ;;
++ *) echo "$me: too many arguments$help" >&2
++    exit 1;;
++esac
++
++# Split fields of configuration type
++saved_IFS=$IFS
++IFS="-" read field1 field2 field3 field4 <<EOF
++$1
++EOF
++IFS=$saved_IFS
++
++# Separate into logical components for further validation
++case $1 in
++	*-*-*-*-*)
++		echo "Invalid configuration '$1': more than four components" >&2
++		exit 1
++		;;
++	*-*-*-*)
++		basic_machine=$field1-$field2
++		basic_os=$field3-$field4
++		;;
++	*-*-*)
++		# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two
++		# parts
++		maybe_os=$field2-$field3
++		case $maybe_os in
++			  cloudabi*-eabi* \
++			| kfreebsd*-gnu* \
++			| knetbsd*-gnu* \
++			| kopensolaris*-gnu* \
++			| linux-* \
++			| managarm-* \
++			| netbsd*-eabi* \
++			| netbsd*-gnu* \
++			| nto-qnx* \
++			| os2-emx* \
++			| rtmk-nova* \
++			| storm-chaos* \
++			| uclinux-gnu* \
++			| uclinux-uclibc* \
++			| windows-* )
++				basic_machine=$field1
++				basic_os=$maybe_os
++				;;
++			android-linux)
++				basic_machine=$field1-unknown
++				basic_os=linux-android
++				;;
++			*)
++				basic_machine=$field1-$field2
++				basic_os=$field3
++				;;
++		esac
++		;;
++	*-*)
++		case $field1-$field2 in
++			# Shorthands that happen to contain a single dash
++			convex-c[12] | convex-c3[248])
++				basic_machine=$field2-convex
++				basic_os=
++				;;
++			decstation-3100)
++				basic_machine=mips-dec
++				basic_os=
++				;;
++			*-*)
++				# Second component is usually, but not always the OS
++				case $field2 in
++					# Do not treat sunos as a manufacturer
++					sun*os*)
++						basic_machine=$field1
++						basic_os=$field2
++						;;
++					# Manufacturers
++					  3100* \
++					| 32* \
++					| 3300* \
++					| 3600* \
++					| 7300* \
++					| acorn \
++					| altos* \
++					| apollo \
++					| apple \
++					| atari \
++					| att* \
++					| axis \
++					| be \
++					| bull \
++					| cbm \
++					| ccur \
++					| cisco \
++					| commodore \
++					| convergent* \
++					| convex* \
++					| cray \
++					| crds \
++					| dec* \
++					| delta* \
++					| dg \
++					| digital \
++					| dolphin \
++					| encore* \
++					| gould \
++					| harris \
++					| highlevel \
++					| hitachi* \
++					| hp \
++					| ibm* \
++					| intergraph \
++					| isi* \
++					| knuth \
++					| masscomp \
++					| microblaze* \
++					| mips* \
++					| motorola* \
++					| ncr* \
++					| news \
++					| next \
++					| ns \
++					| oki \
++					| omron* \
++					| pc533* \
++					| rebel \
++					| rom68k \
++					| rombug \
++					| semi \
++					| sequent* \
++					| siemens \
++					| sgi* \
++					| siemens \
++					| sim \
++					| sni \
++					| sony* \
++					| stratus \
++					| sun \
++					| sun[234]* \
++					| tektronix \
++					| tti* \
++					| ultra \
++					| unicom* \
++					| wec \
++					| winbond \
++					| wrs)
++						basic_machine=$field1-$field2
++						basic_os=
++						;;
++					zephyr*)
++						basic_machine=$field1-unknown
++						basic_os=$field2
++						;;
++					*)
++						basic_machine=$field1
++						basic_os=$field2
++						;;
++				esac
++			;;
++		esac
++		;;
++	*)
++		# Convert single-component short-hands not valid as part of
++		# multi-component configurations.
++		case $field1 in
++			386bsd)
++				basic_machine=i386-pc
++				basic_os=bsd
++				;;
++			a29khif)
++				basic_machine=a29k-amd
++				basic_os=udi
++				;;
++			adobe68k)
++				basic_machine=m68010-adobe
++				basic_os=scout
++				;;
++			alliant)
++				basic_machine=fx80-alliant
++				basic_os=
++				;;
++			altos | altos3068)
++				basic_machine=m68k-altos
++				basic_os=
++				;;
++			am29k)
++				basic_machine=a29k-none
++				basic_os=bsd
++				;;
++			amdahl)
++				basic_machine=580-amdahl
++				basic_os=sysv
++				;;
++			amiga)
++				basic_machine=m68k-unknown
++				basic_os=
++				;;
++			amigaos | amigados)
++				basic_machine=m68k-unknown
++				basic_os=amigaos
++				;;
++			amigaunix | amix)
++				basic_machine=m68k-unknown
++				basic_os=sysv4
++				;;
++			apollo68)
++				basic_machine=m68k-apollo
++				basic_os=sysv
++				;;
++			apollo68bsd)
++				basic_machine=m68k-apollo
++				basic_os=bsd
++				;;
++			aros)
++				basic_machine=i386-pc
++				basic_os=aros
++				;;
++			aux)
++				basic_machine=m68k-apple
++				basic_os=aux
++				;;
++			balance)
++				basic_machine=ns32k-sequent
++				basic_os=dynix
++				;;
++			blackfin)
++				basic_machine=bfin-unknown
++				basic_os=linux
++				;;
++			cegcc)
++				basic_machine=arm-unknown
++				basic_os=cegcc
++				;;
++			cray)
++				basic_machine=j90-cray
++				basic_os=unicos
++				;;
++			crds | unos)
++				basic_machine=m68k-crds
++				basic_os=
++				;;
++			da30)
++				basic_machine=m68k-da30
++				basic_os=
++				;;
++			decstation | pmax | pmin | dec3100 | decstatn)
++				basic_machine=mips-dec
++				basic_os=
++				;;
++			delta88)
++				basic_machine=m88k-motorola
++				basic_os=sysv3
++				;;
++			dicos)
++				basic_machine=i686-pc
++				basic_os=dicos
++				;;
++			djgpp)
++				basic_machine=i586-pc
++				basic_os=msdosdjgpp
++				;;
++			ebmon29k)
++				basic_machine=a29k-amd
++				basic_os=ebmon
++				;;
++			es1800 | OSE68k | ose68k | ose | OSE)
++				basic_machine=m68k-ericsson
++				basic_os=ose
++				;;
++			gmicro)
++				basic_machine=tron-gmicro
++				basic_os=sysv
++				;;
++			go32)
++				basic_machine=i386-pc
++				basic_os=go32
++				;;
++			h8300hms)
++				basic_machine=h8300-hitachi
++				basic_os=hms
++				;;
++			h8300xray)
++				basic_machine=h8300-hitachi
++				basic_os=xray
++				;;
++			h8500hms)
++				basic_machine=h8500-hitachi
++				basic_os=hms
++				;;
++			harris)
++				basic_machine=m88k-harris
++				basic_os=sysv3
++				;;
++			hp300 | hp300hpux)
++				basic_machine=m68k-hp
++				basic_os=hpux
++				;;
++			hp300bsd)
++				basic_machine=m68k-hp
++				basic_os=bsd
++				;;
++			hppaosf)
++				basic_machine=hppa1.1-hp
++				basic_os=osf
++				;;
++			hppro)
++				basic_machine=hppa1.1-hp
++				basic_os=proelf
++				;;
++			i386mach)
++				basic_machine=i386-mach
++				basic_os=mach
++				;;
++			isi68 | isi)
++				basic_machine=m68k-isi
++				basic_os=sysv
++				;;
++			m68knommu)
++				basic_machine=m68k-unknown
++				basic_os=linux
++				;;
++			magnum | m3230)
++				basic_machine=mips-mips
++				basic_os=sysv
++				;;
++			merlin)
++				basic_machine=ns32k-utek
++				basic_os=sysv
++				;;
++			mingw64)
++				basic_machine=x86_64-pc
++				basic_os=mingw64
++				;;
++			mingw32)
++				basic_machine=i686-pc
++				basic_os=mingw32
++				;;
++			mingw32ce)
++				basic_machine=arm-unknown
++				basic_os=mingw32ce
++				;;
++			monitor)
++				basic_machine=m68k-rom68k
++				basic_os=coff
++				;;
++			morphos)
++				basic_machine=powerpc-unknown
++				basic_os=morphos
++				;;
++			moxiebox)
++				basic_machine=moxie-unknown
++				basic_os=moxiebox
++				;;
++			msdos)
++				basic_machine=i386-pc
++				basic_os=msdos
++				;;
++			msys)
++				basic_machine=i686-pc
++				basic_os=msys
++				;;
++			mvs)
++				basic_machine=i370-ibm
++				basic_os=mvs
++				;;
++			nacl)
++				basic_machine=le32-unknown
++				basic_os=nacl
++				;;
++			ncr3000)
++				basic_machine=i486-ncr
++				basic_os=sysv4
++				;;
++			netbsd386)
++				basic_machine=i386-pc
++				basic_os=netbsd
++				;;
++			netwinder)
++				basic_machine=armv4l-rebel
++				basic_os=linux
++				;;
++			news | news700 | news800 | news900)
++				basic_machine=m68k-sony
++				basic_os=newsos
++				;;
++			news1000)
++				basic_machine=m68030-sony
++				basic_os=newsos
++				;;
++			necv70)
++				basic_machine=v70-nec
++				basic_os=sysv
++				;;
++			nh3000)
++				basic_machine=m68k-harris
++				basic_os=cxux
++				;;
++			nh[45]000)
++				basic_machine=m88k-harris
++				basic_os=cxux
++				;;
++			nindy960)
++				basic_machine=i960-intel
++				basic_os=nindy
++				;;
++			mon960)
++				basic_machine=i960-intel
++				basic_os=mon960
++				;;
++			nonstopux)
++				basic_machine=mips-compaq
++				basic_os=nonstopux
++				;;
++			os400)
++				basic_machine=powerpc-ibm
++				basic_os=os400
++				;;
++			OSE68000 | ose68000)
++				basic_machine=m68000-ericsson
++				basic_os=ose
++				;;
++			os68k)
++				basic_machine=m68k-none
++				basic_os=os68k
++				;;
++			paragon)
++				basic_machine=i860-intel
++				basic_os=osf
++				;;
++			parisc)
++				basic_machine=hppa-unknown
++				basic_os=linux
++				;;
++			psp)
++				basic_machine=mipsallegrexel-sony
++				basic_os=psp
++				;;
++			pw32)
++				basic_machine=i586-unknown
++				basic_os=pw32
++				;;
++			rdos | rdos64)
++				basic_machine=x86_64-pc
++				basic_os=rdos
++				;;
++			rdos32)
++				basic_machine=i386-pc
++				basic_os=rdos
++				;;
++			rom68k)
++				basic_machine=m68k-rom68k
++				basic_os=coff
++				;;
++			sa29200)
++				basic_machine=a29k-amd
++				basic_os=udi
++				;;
++			sei)
++				basic_machine=mips-sei
++				basic_os=seiux
++				;;
++			sequent)
++				basic_machine=i386-sequent
++				basic_os=
++				;;
++			sps7)
++				basic_machine=m68k-bull
++				basic_os=sysv2
++				;;
++			st2000)
++				basic_machine=m68k-tandem
++				basic_os=
++				;;
++			stratus)
++				basic_machine=i860-stratus
++				basic_os=sysv4
++				;;
++			sun2)
++				basic_machine=m68000-sun
++				basic_os=
++				;;
++			sun2os3)
++				basic_machine=m68000-sun
++				basic_os=sunos3
++				;;
++			sun2os4)
++				basic_machine=m68000-sun
++				basic_os=sunos4
++				;;
++			sun3)
++				basic_machine=m68k-sun
++				basic_os=
++				;;
++			sun3os3)
++				basic_machine=m68k-sun
++				basic_os=sunos3
++				;;
++			sun3os4)
++				basic_machine=m68k-sun
++				basic_os=sunos4
++				;;
++			sun4)
++				basic_machine=sparc-sun
++				basic_os=
++				;;
++			sun4os3)
++				basic_machine=sparc-sun
++				basic_os=sunos3
++				;;
++			sun4os4)
++				basic_machine=sparc-sun
++				basic_os=sunos4
++				;;
++			sun4sol2)
++				basic_machine=sparc-sun
++				basic_os=solaris2
++				;;
++			sun386 | sun386i | roadrunner)
++				basic_machine=i386-sun
++				basic_os=
++				;;
++			sv1)
++				basic_machine=sv1-cray
++				basic_os=unicos
++				;;
++			symmetry)
++				basic_machine=i386-sequent
++				basic_os=dynix
++				;;
++			t3e)
++				basic_machine=alphaev5-cray
++				basic_os=unicos
++				;;
++			t90)
++				basic_machine=t90-cray
++				basic_os=unicos
++				;;
++			toad1)
++				basic_machine=pdp10-xkl
++				basic_os=tops20
++				;;
++			tpf)
++				basic_machine=s390x-ibm
++				basic_os=tpf
++				;;
++			udi29k)
++				basic_machine=a29k-amd
++				basic_os=udi
++				;;
++			ultra3)
++				basic_machine=a29k-nyu
++				basic_os=sym1
++				;;
++			v810 | necv810)
++				basic_machine=v810-nec
++				basic_os=none
++				;;
++			vaxv)
++				basic_machine=vax-dec
++				basic_os=sysv
++				;;
++			vms)
++				basic_machine=vax-dec
++				basic_os=vms
++				;;
++			vsta)
++				basic_machine=i386-pc
++				basic_os=vsta
++				;;
++			vxworks960)
++				basic_machine=i960-wrs
++				basic_os=vxworks
++				;;
++			vxworks68)
++				basic_machine=m68k-wrs
++				basic_os=vxworks
++				;;
++			vxworks29k)
++				basic_machine=a29k-wrs
++				basic_os=vxworks
++				;;
++			xbox)
++				basic_machine=i686-pc
++				basic_os=mingw32
++				;;
++			ymp)
++				basic_machine=ymp-cray
++				basic_os=unicos
++				;;
++			*)
++				basic_machine=$1
++				basic_os=
++				;;
++		esac
++		;;
++esac
++
++# Decode 1-component or ad-hoc basic machines
++case $basic_machine in
++	# Here we handle the default manufacturer of certain CPU types.  It is in
++	# some cases the only manufacturer, in others, it is the most popular.
++	w89k)
++		cpu=hppa1.1
++		vendor=winbond
++		;;
++	op50n)
++		cpu=hppa1.1
++		vendor=oki
++		;;
++	op60c)
++		cpu=hppa1.1
++		vendor=oki
++		;;
++	ibm*)
++		cpu=i370
++		vendor=ibm
++		;;
++	orion105)
++		cpu=clipper
++		vendor=highlevel
++		;;
++	mac | mpw | mac-mpw)
++		cpu=m68k
++		vendor=apple
++		;;
++	pmac | pmac-mpw)
++		cpu=powerpc
++		vendor=apple
++		;;
++
++	# Recognize the various machine names and aliases which stand
++	# for a CPU type and a company and sometimes even an OS.
++	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
++		cpu=m68000
++		vendor=att
++		;;
++	3b*)
++		cpu=we32k
++		vendor=att
++		;;
++	bluegene*)
++		cpu=powerpc
++		vendor=ibm
++		basic_os=cnk
++		;;
++	decsystem10* | dec10*)
++		cpu=pdp10
++		vendor=dec
++		basic_os=tops10
++		;;
++	decsystem20* | dec20*)
++		cpu=pdp10
++		vendor=dec
++		basic_os=tops20
++		;;
++	delta | 3300 | delta-motorola | 3300-motorola | motorola-delta | motorola-3300)
++		cpu=m68k
++		vendor=motorola
++		;;
++	# This used to be dpx2*, but that gets the RS6000-based
++	# DPX/20 and the x86-based DPX/2-100 wrong.  See
++	# https://oldskool.silicium.org/stations/bull_dpx20.htm
++	# https://www.feb-patrimoine.com/english/bull_dpx2.htm
++	# https://www.feb-patrimoine.com/english/unix_and_bull.htm
++	dpx2 | dpx2[23]00 | dpx2[23]xx)
++		cpu=m68k
++		vendor=bull
++		;;
++	dpx2100 | dpx21xx)
++		cpu=i386
++		vendor=bull
++		;;
++	dpx20)
++		cpu=rs6000
++		vendor=bull
++		;;
++	encore | umax | mmax)
++		cpu=ns32k
++		vendor=encore
++		;;
++	elxsi)
++		cpu=elxsi
++		vendor=elxsi
++		basic_os=${basic_os:-bsd}
++		;;
++	fx2800)
++		cpu=i860
++		vendor=alliant
++		;;
++	genix)
++		cpu=ns32k
++		vendor=ns
++		;;
++	h3050r* | hiux*)
++		cpu=hppa1.1
++		vendor=hitachi
++		basic_os=hiuxwe2
++		;;
++	hp3k9[0-9][0-9] | hp9[0-9][0-9])
++		cpu=hppa1.0
++		vendor=hp
++		;;
++	hp9k2[0-9][0-9] | hp9k31[0-9])
++		cpu=m68000
++		vendor=hp
++		;;
++	hp9k3[2-9][0-9])
++		cpu=m68k
++		vendor=hp
++		;;
++	hp9k6[0-9][0-9] | hp6[0-9][0-9])
++		cpu=hppa1.0
++		vendor=hp
++		;;
++	hp9k7[0-79][0-9] | hp7[0-79][0-9])
++		cpu=hppa1.1
++		vendor=hp
++		;;
++	hp9k78[0-9] | hp78[0-9])
++		# FIXME: really hppa2.0-hp
++		cpu=hppa1.1
++		vendor=hp
++		;;
++	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
++		# FIXME: really hppa2.0-hp
++		cpu=hppa1.1
++		vendor=hp
++		;;
++	hp9k8[0-9][13679] | hp8[0-9][13679])
++		cpu=hppa1.1
++		vendor=hp
++		;;
++	hp9k8[0-9][0-9] | hp8[0-9][0-9])
++		cpu=hppa1.0
++		vendor=hp
++		;;
++	i*86v32)
++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++		vendor=pc
++		basic_os=sysv32
++		;;
++	i*86v4*)
++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++		vendor=pc
++		basic_os=sysv4
++		;;
++	i*86v)
++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++		vendor=pc
++		basic_os=sysv
++		;;
++	i*86sol2)
++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++		vendor=pc
++		basic_os=solaris2
++		;;
++	j90 | j90-cray)
++		cpu=j90
++		vendor=cray
++		basic_os=${basic_os:-unicos}
++		;;
++	iris | iris4d)
++		cpu=mips
++		vendor=sgi
++		case $basic_os in
++		    irix*)
++			;;
++		    *)
++			basic_os=irix4
++			;;
++		esac
++		;;
++	miniframe)
++		cpu=m68000
++		vendor=convergent
++		;;
++	*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)
++		cpu=m68k
++		vendor=atari
++		basic_os=mint
++		;;
++	news-3600 | risc-news)
++		cpu=mips
++		vendor=sony
++		basic_os=newsos
++		;;
++	next | m*-next)
++		cpu=m68k
++		vendor=next
++		;;
++	np1)
++		cpu=np1
++		vendor=gould
++		;;
++	op50n-* | op60c-*)
++		cpu=hppa1.1
++		vendor=oki
++		basic_os=proelf
++		;;
++	pa-hitachi)
++		cpu=hppa1.1
++		vendor=hitachi
++		basic_os=hiuxwe2
++		;;
++	pbd)
++		cpu=sparc
++		vendor=tti
++		;;
++	pbb)
++		cpu=m68k
++		vendor=tti
++		;;
++	pc532)
++		cpu=ns32k
++		vendor=pc532
++		;;
++	pn)
++		cpu=pn
++		vendor=gould
++		;;
++	power)
++		cpu=power
++		vendor=ibm
++		;;
++	ps2)
++		cpu=i386
++		vendor=ibm
++		;;
++	rm[46]00)
++		cpu=mips
++		vendor=siemens
++		;;
++	rtpc | rtpc-*)
++		cpu=romp
++		vendor=ibm
++		;;
++	sde)
++		cpu=mipsisa32
++		vendor=sde
++		basic_os=${basic_os:-elf}
++		;;
++	simso-wrs)
++		cpu=sparclite
++		vendor=wrs
++		basic_os=vxworks
++		;;
++	tower | tower-32)
++		cpu=m68k
++		vendor=ncr
++		;;
++	vpp*|vx|vx-*)
++		cpu=f301
++		vendor=fujitsu
++		;;
++	w65)
++		cpu=w65
++		vendor=wdc
++		;;
++	w89k-*)
++		cpu=hppa1.1
++		vendor=winbond
++		basic_os=proelf
++		;;
++	none)
++		cpu=none
++		vendor=none
++		;;
++	leon|leon[3-9])
++		cpu=sparc
++		vendor=$basic_machine
++		;;
++	leon-*|leon[3-9]-*)
++		cpu=sparc
++		vendor=`echo "$basic_machine" | sed 's/-.*//'`
++		;;
++
++	*-*)
++		saved_IFS=$IFS
++		IFS="-" read cpu vendor <<EOF
++$basic_machine
++EOF
++		IFS=$saved_IFS
++		;;
++	# We use 'pc' rather than 'unknown'
++	# because (1) that's what they normally are, and
++	# (2) the word "unknown" tends to confuse beginning users.
++	i*86 | x86_64)
++		cpu=$basic_machine
++		vendor=pc
++		;;
++	# These rules are duplicated from below for sake of the special case above;
++	# i.e. things that normalized to x86 arches should also default to "pc"
++	pc98)
++		cpu=i386
++		vendor=pc
++		;;
++	x64 | amd64)
++		cpu=x86_64
++		vendor=pc
++		;;
++	# Recognize the basic CPU types without company name.
++	*)
++		cpu=$basic_machine
++		vendor=unknown
++		;;
++esac
++
++unset -v basic_machine
++
++# Decode basic machines in the full and proper CPU-Company form.
++case $cpu-$vendor in
++	# Here we handle the default manufacturer of certain CPU types in canonical form.
++	# It is in some cases the only manufacturer, in others, it is the most popular.
++	c[12]-convex | c[12]-unknown | c3[248]-convex | c3[248]-unknown)
++		vendor=convex
++		basic_os=${basic_os:-bsd}
++		;;
++	craynv-unknown)
++		vendor=cray
++		basic_os=${basic_os:-unicosmp}
++		;;
++	c90-unknown | c90-cray)
++		vendor=cray
++		basic_os=${basic_os:-unicos}
++		;;
++	fx80-unknown)
++		vendor=alliant
++		;;
++	romp-unknown)
++		vendor=ibm
++		;;
++	mmix-unknown)
++		vendor=knuth
++		;;
++	microblaze-unknown | microblazeel-unknown)
++		vendor=xilinx
++		;;
++	rs6000-unknown)
++		vendor=ibm
++		;;
++	vax-unknown)
++		vendor=dec
++		;;
++	pdp11-unknown)
++		vendor=dec
++		;;
++	we32k-unknown)
++		vendor=att
++		;;
++	cydra-unknown)
++		vendor=cydrome
++		;;
++	i370-ibm*)
++		vendor=ibm
++		;;
++	orion-unknown)
++		vendor=highlevel
++		;;
++	xps-unknown | xps100-unknown)
++		cpu=xps100
++		vendor=honeywell
++		;;
++
++	# Here we normalize CPU types with a missing or matching vendor
++	armh-unknown | armh-alt)
++		cpu=armv7l
++		vendor=alt
++		basic_os=${basic_os:-linux-gnueabihf}
++		;;
++
++	# Normalized CPU+vendor pairs that imply an OS, if not otherwise specified
++	m68k-isi)
++		basic_os=${basic_os:-sysv}
++		;;
++	m68k-sony)
++		basic_os=${basic_os:-newsos}
++		;;
++	m68k-tektronix)
++		basic_os=${basic_os:-bsd}
++		;;
++	m88k-harris)
++		basic_os=${basic_os:-sysv3}
++		;;
++	i386-bull | m68k-bull)
++		basic_os=${basic_os:-sysv3}
++		;;
++	rs6000-bull)
++		basic_os=${basic_os:-bosx}
++		;;
++	mips-sni)
++		basic_os=${basic_os:-sysv4}
++		;;
++
++	# Here we normalize CPU types irrespective of the vendor
++	amd64-*)
++		cpu=x86_64
++		;;
++	blackfin-*)
++		cpu=bfin
++		basic_os=${basic_os:-linux}
++		;;
++	c54x-*)
++		cpu=tic54x
++		;;
++	c55x-*)
++		cpu=tic55x
++		;;
++	c6x-*)
++		cpu=tic6x
++		;;
++	e500v[12]-*)
++		cpu=powerpc
++		basic_os=${basic_os}"spe"
++		;;
++	mips3*-*)
++		cpu=mips64
++		;;
++	ms1-*)
++		cpu=mt
++		;;
++	m68knommu-*)
++		cpu=m68k
++		basic_os=${basic_os:-linux}
++		;;
++	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
++		cpu=s12z
++		;;
++	openrisc-*)
++		cpu=or32
++		;;
++	parisc-*)
++		cpu=hppa
++		basic_os=${basic_os:-linux}
++		;;
++	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
++		cpu=i586
++		;;
++	pentiumpro-* | p6-* | 6x86-* | athlon-* | athlon_*-*)
++		cpu=i686
++		;;
++	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
++		cpu=i686
++		;;
++	pentium4-*)
++		cpu=i786
++		;;
++	ppc-* | ppcbe-*)
++		cpu=powerpc
++		;;
++	ppcle-* | powerpclittle-*)
++		cpu=powerpcle
++		;;
++	ppc64-*)
++		cpu=powerpc64
++		;;
++	ppc64le-* | powerpc64little-*)
++		cpu=powerpc64le
++		;;
++	sb1-*)
++		cpu=mipsisa64sb1
++		;;
++	sb1el-*)
++		cpu=mipsisa64sb1el
++		;;
++	sh5e[lb]-*)
++		cpu=`echo "$cpu" | sed 's/^\(sh.\)e\(.\)$/\1\2e/'`
++		;;
++	spur-*)
++		cpu=spur
++		;;
++	strongarm-* | thumb-*)
++		cpu=arm
++		;;
++	tx39-*)
++		cpu=mipstx39
++		;;
++	tx39el-*)
++		cpu=mipstx39el
++		;;
++	xscale-* | xscalee[bl]-*)
++		cpu=`echo "$cpu" | sed 's/^xscale/arm/'`
++		;;
++	arm64-* | aarch64le-*)
++		cpu=aarch64
++		;;
++
++	# Recognize the canonical CPU Types that limit and/or modify the
++	# company names they are paired with.
++	cr16-*)
++		basic_os=${basic_os:-elf}
++		;;
++	crisv32-* | etraxfs*-*)
++		cpu=crisv32
++		vendor=axis
++		;;
++	cris-* | etrax*-*)
++		cpu=cris
++		vendor=axis
++		;;
++	crx-*)
++		basic_os=${basic_os:-elf}
++		;;
++	neo-tandem)
++		cpu=neo
++		vendor=tandem
++		;;
++	nse-tandem)
++		cpu=nse
++		vendor=tandem
++		;;
++	nsr-tandem)
++		cpu=nsr
++		vendor=tandem
++		;;
++	nsv-tandem)
++		cpu=nsv
++		vendor=tandem
++		;;
++	nsx-tandem)
++		cpu=nsx
++		vendor=tandem
++		;;
++	mipsallegrexel-sony)
++		cpu=mipsallegrexel
++		vendor=sony
++		;;
++	tile*-*)
++		basic_os=${basic_os:-linux-gnu}
++		;;
++
++	*)
++		# Recognize the canonical CPU types that are allowed with any
++		# company name.
++		case $cpu in
++			  1750a \
++			| 580 \
++			| [cjt]90 \
++			| a29k \
++			| aarch64 \
++			| aarch64_be \
++			| aarch64c \
++			| abacus \
++			| alpha \
++			| alpha64 \
++			| alpha64ev56 \
++			| alpha64ev6[78] \
++			| alpha64ev[4-8] \
++			| alpha64pca5[67] \
++			| alphaev56 \
++			| alphaev6[78] \
++			| alphaev[4-8] \
++			| alphapca5[67] \
++			| am33_2.0 \
++			| amdgcn \
++			| arc \
++			| arc32 \
++			| arc64 \
++			| arceb \
++			| arm \
++			| arm64e \
++			| arm64ec \
++			| arm[lb]e \
++			| arme[lb] \
++			| armv* \
++			| asmjs \
++			| avr \
++			| avr32 \
++			| ba \
++			| be32 \
++			| be64 \
++			| bfin \
++			| bpf \
++			| bs2000 \
++			| c30 \
++			| c4x \
++			| c8051 \
++			| c[123]* \
++			| clipper \
++			| craynv \
++			| csky \
++			| cydra \
++			| d10v \
++			| d30v \
++			| dlx \
++			| dsp16xx \
++			| e2k \
++			| elxsi \
++			| epiphany \
++			| f30[01] \
++			| f700 \
++			| fido \
++			| fr30 \
++			| frv \
++			| ft32 \
++			| fx80 \
++			| h8300 \
++			| h8500 \
++			| hexagon \
++			| hppa \
++			| hppa1.[01] \
++			| hppa2.0 \
++			| hppa2.0[nw] \
++			| hppa64 \
++			| i*86 \
++			| i370 \
++			| i860 \
++			| i960 \
++			| ia16 \
++			| ia64 \
++			| ip2k \
++			| iq2000 \
++			| javascript \
++			| k1om \
++			| kvx \
++			| le32 \
++			| le64 \
++			| lm32 \
++			| loongarch32 \
++			| loongarch64 \
++			| m32c \
++			| m32r \
++			| m32rle \
++			| m5200 \
++			| m68000 \
++			| m680[012346]0 \
++			| m6811 \
++			| m6812 \
++			| m68360 \
++			| m683?2 \
++			| m68hc11 \
++			| m68hc12 \
++			| m68hcs12x \
++			| m68k \
++			| m88110 \
++			| m88k \
++			| maxq \
++			| mb \
++			| mcore \
++			| mep \
++			| metag \
++			| microblaze \
++			| microblazeel \
++			| mips* \
++			| mmix \
++			| mn10200 \
++			| mn10300 \
++			| moxie \
++			| msp430 \
++			| mt \
++			| nanomips* \
++			| nds32 \
++			| nds32be \
++			| nds32le \
++			| nfp \
++			| nios \
++			| nios2 \
++			| nios2eb \
++			| nios2el \
++			| none \
++			| np1 \
++			| ns16k \
++			| ns32k \
++			| nvptx \
++			| open8 \
++			| or1k* \
++			| or32 \
++			| orion \
++			| pdp10 \
++			| pdp11 \
++			| picochip \
++			| pj \
++			| pjl \
++			| pn \
++			| power \
++			| powerpc \
++			| powerpc64 \
++			| powerpc64le \
++			| powerpcle \
++			| powerpcspe \
++			| pru \
++			| pyramid \
++			| riscv \
++			| riscv32 \
++			| riscv32be \
++			| riscv64 \
++			| riscv64be \
++			| rl78 \
++			| romp \
++			| rs6000 \
++			| rx \
++			| s390 \
++			| s390x \
++			| score \
++			| sh \
++			| sh64 \
++			| sh64le \
++			| sh[12345][lb]e \
++			| sh[1234] \
++			| sh[1234]e[lb] \
++			| sh[23]e \
++			| sh[23]ele \
++			| sh[24]a \
++			| sh[24]ae[lb] \
++			| sh[lb]e \
++			| she[lb] \
++			| shl \
++			| sparc \
++			| sparc64 \
++			| sparc64b \
++			| sparc64v \
++			| sparc86x \
++			| sparclet \
++			| sparclite \
++			| sparcv8 \
++			| sparcv9 \
++			| sparcv9b \
++			| sparcv9v \
++			| spu \
++			| sv1 \
++			| sx* \
++			| tahoe \
++			| thumbv7* \
++			| tic30 \
++			| tic4x \
++			| tic54x \
++			| tic55x \
++			| tic6x \
++			| tic80 \
++			| tron \
++			| ubicom32 \
++			| v70 \
++			| v810 \
++			| v850 \
++			| v850e \
++			| v850e1 \
++			| v850e2 \
++			| v850e2v3 \
++			| v850es \
++			| vax \
++			| vc4 \
++			| visium \
++			| w65 \
++			| wasm32 \
++			| wasm64 \
++			| we32k \
++			| x86 \
++			| x86_64 \
++			| xc16x \
++			| xgate \
++			| xps100 \
++			| xstormy16 \
++			| xtensa* \
++			| ymp \
++			| z80 \
++			| z8k)
++				;;
++
++			*)
++				echo "Invalid configuration '$1': machine '$cpu-$vendor' not recognized" 1>&2
++				exit 1
++				;;
++		esac
++		;;
++esac
++
++# Here we canonicalize certain aliases for manufacturers.
++case $vendor in
++	digital*)
++		vendor=dec
++		;;
++	commodore*)
++		vendor=cbm
++		;;
++	*)
++		;;
++esac
++
++# Decode manufacturer-specific aliases for certain operating systems.
++
++if test x"$basic_os" != x
++then
++
++# First recognize some ad-hoc cases, or perhaps split kernel-os, or else just
++# set os.
++obj=
++case $basic_os in
++	gnu/linux*)
++		kernel=linux
++		os=`echo "$basic_os" | sed -e 's|gnu/linux|gnu|'`
++		;;
++	os2-emx)
++		kernel=os2
++		os=`echo "$basic_os" | sed -e 's|os2-emx|emx|'`
++		;;
++	nto-qnx*)
++		kernel=nto
++		os=`echo "$basic_os" | sed -e 's|nto-qnx|qnx|'`
++		;;
++	*-*)
++		saved_IFS=$IFS
++		IFS="-" read kernel os <<EOF
++$basic_os
++EOF
++		IFS=$saved_IFS
++		;;
++	# Default OS when just kernel was specified
++	nto*)
++		kernel=nto
++		os=`echo "$basic_os" | sed -e 's|nto|qnx|'`
++		;;
++	linux*)
++		kernel=linux
++		os=`echo "$basic_os" | sed -e 's|linux|gnu|'`
++		;;
++	managarm*)
++		kernel=managarm
++		os=`echo "$basic_os" | sed -e 's|managarm|mlibc|'`
++		;;
++	*)
++		kernel=
++		os=$basic_os
++		;;
++esac
++
++# Now, normalize the OS (knowing we just have one component, it's not a kernel,
++# etc.)
++case $os in
++	# First match some system type aliases that might get confused
++	# with valid system types.
++	# solaris* is a basic system type, with this one exception.
++	auroraux)
++		os=auroraux
++		;;
++	bluegene*)
++		os=cnk
++		;;
++	solaris1 | solaris1.*)
++		os=`echo "$os" | sed -e 's|solaris1|sunos4|'`
++		;;
++	solaris)
++		os=solaris2
++		;;
++	unixware*)
++		os=sysv4.2uw
++		;;
++	# The marketing names for NeXT's operating systems were
++	# NeXTSTEP, NeXTSTEP 2, OpenSTEP 3, OpenSTEP 4.  'openstep' is
++	# mapped to 'openstep3', but 'openstep1' and 'openstep2' are
++	# mapped to 'nextstep' and 'nextstep2', consistent with the
++	# treatment of SunOS/Solaris.
++	ns | ns1 | nextstep | nextstep1 | openstep1)
++		os=nextstep
++		;;
++	ns2 | nextstep2 | openstep2)
++		os=nextstep2
++		;;
++	ns3 | nextstep3 | openstep | openstep3)
++		os=openstep3
++		;;
++	ns4 | nextstep4 | openstep4)
++		os=openstep4
++		;;
++	# es1800 is here to avoid being matched by es* (a different OS)
++	es1800*)
++		os=ose
++		;;
++	# Some version numbers need modification
++	chorusos*)
++		os=chorusos
++		;;
++	isc)
++		os=isc2.2
++		;;
++	sco6)
++		os=sco5v6
++		;;
++	sco5)
++		os=sco3.2v5
++		;;
++	sco4)
++		os=sco3.2v4
++		;;
++	sco3.2.[4-9]*)
++		os=`echo "$os" | sed -e 's/sco3.2./sco3.2v/'`
++		;;
++	sco*v* | scout)
++		# Don't match below
++		;;
++	sco*)
++		os=sco3.2v2
++		;;
++	psos*)
++		os=psos
++		;;
++	qnx*)
++		os=qnx
++		;;
++	hiux*)
++		os=hiuxwe2
++		;;
++	lynx*178)
++		os=lynxos178
++		;;
++	lynx*5)
++		os=lynxos5
++		;;
++	lynxos*)
++		# don't get caught up in next wildcard
++		;;
++	lynx*)
++		os=lynxos
++		;;
++	mac[0-9]*)
++		os=`echo "$os" | sed -e 's|mac|macos|'`
++		;;
++	opened*)
++		os=openedition
++		;;
++	os400*)
++		os=os400
++		;;
++	sunos5*)
++		os=`echo "$os" | sed -e 's|sunos5|solaris2|'`
++		;;
++	sunos6*)
++		os=`echo "$os" | sed -e 's|sunos6|solaris3|'`
++		;;
++	wince*)
++		os=wince
++		;;
++	utek*)
++		os=bsd
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|tektronix|'`
++		;;
++	dynix*)
++		os=bsd
++		;;
++	acis*)
++		os=aos
++		;;
++	atheos*)
++		os=atheos
++		;;
++	syllable*)
++		os=syllable
++		;;
++	386bsd)
++		os=bsd
++		;;
++	ctix*)
++		os=sysv
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|convergent|'`
++		;;
++	uts*)
++		os=sysv
++		;;
++	nova*)
++		kernel=rtmk
++		os=nova
++		;;
++	# Preserve the version number of sinix5.
++	sinix5.*)
++		os=`echo "$os" | sed -e 's|sinix|sysv|'`
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
++		;;
++	sinix*)
++		os=sysv4
++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
++		;;
++	tpf*)
++		os=tpf
++		;;
++	triton*)
++		os=sysv3
++		;;
++	oss*)
++		os=sysv3
++		;;
++	svr4*)
++		os=sysv4
++		;;
++	svr3)
++		os=sysv3
++		;;
++	sysvr4)
++		os=sysv4
++		;;
++	ose*)
++		os=ose
++		;;
++	*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
++		os=mint
++		;;
++	dicos*)
++		os=dicos
++		;;
++	pikeos*)
++		# Until real need of OS specific support for
++		# particular features comes up, bare metal
++		# configurations are quite functional.
++		case $cpu in
++		    arm*)
++			os=eabi
++			;;
++		    *)
++			os=
++			obj=elf
++			;;
++		esac
++		;;
++	aout* | coff* | elf* | pe*)
++		# These are machine code file formats, not OSes
++		obj=$os
++		os=
++		;;
++	*)
++		# No normalization, but not necessarily accepted, that comes below.
++		;;
++esac
++
++else
++
++# Here we handle the default operating systems that come with various machines.
++# The value should be what the vendor currently ships out the door with their
++# machine or put another way, the most popular os provided with the machine.
++
++# Note that if you're going to try to match "-MANUFACTURER" here (say,
++# "-sun"), then you have to tell the case statement up towards the top
++# that MANUFACTURER isn't an operating system.  Otherwise, code above
++# will signal an error saying that MANUFACTURER isn't an operating
++# system, and we'll never get to this point.
++
++kernel=
++obj=
++case $cpu-$vendor in
++	score-*)
++		os=
++		obj=elf
++		;;
++	spu-*)
++		os=
++		obj=elf
++		;;
++	*-acorn)
++		os=riscix1.2
++		;;
++	arm*-rebel)
++		kernel=linux
++		os=gnu
++		;;
++	arm*-semi)
++		os=
++		obj=aout
++		;;
++	c4x-* | tic4x-*)
++		os=
++		obj=coff
++		;;
++	c8051-*)
++		os=
++		obj=elf
++		;;
++	clipper-intergraph)
++		os=clix
++		;;
++	hexagon-*)
++		os=
++		obj=elf
++		;;
++	tic54x-*)
++		os=
++		obj=coff
++		;;
++	tic55x-*)
++		os=
++		obj=coff
++		;;
++	tic6x-*)
++		os=
++		obj=coff
++		;;
++	# This must come before the *-dec entry.
++	pdp10-*)
++		os=tops20
++		;;
++	pdp11-*)
++		os=none
++		;;
++	*-dec | vax-*)
++		os=ultrix4.2
++		;;
++	m68*-apollo)
++		os=domain
++		;;
++	i386-sun)
++		os=sunos4.0.2
++		;;
++	m68000-sun)
++		os=sunos3
++		;;
++	m68*-cisco)
++		os=
++		obj=aout
++		;;
++	mep-*)
++		os=
++		obj=elf
++		;;
++	# The -sgi and -siemens entries must be before the mips- entry
++	# or we get the wrong os.
++	*-sgi)
++		os=irix
++		;;
++	*-siemens)
++		os=sysv4
++		;;
++	mips*-cisco)
++		os=
++		obj=elf
++		;;
++	mips*-*|nanomips*-*)
++		os=
++		obj=elf
++		;;
++	or32-*)
++		os=
++		obj=coff
++		;;
++	# This must be before the sparc-* entry or we get the wrong os.
++	*-tti)
++		os=sysv3
++		;;
++	sparc-* | *-sun)
++		os=sunos4.1.1
++		;;
++	pru-*)
++		os=
++		obj=elf
++		;;
++	*-be)
++		os=beos
++		;;
++	*-ibm)
++		os=aix
++		;;
++	*-knuth)
++		os=mmixware
++		;;
++	*-wec)
++		os=proelf
++		;;
++	*-winbond)
++		os=proelf
++		;;
++	*-oki)
++		os=proelf
++		;;
++	*-hp)
++		os=hpux
++		;;
++	*-hitachi)
++		os=hiuxwe2
++		;;
++	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
++		os=sysv
++		;;
++	*-cbm)
++		os=amigaos
++		;;
++	*-dg)
++		os=dgux
++		;;
++	*-dolphin)
++		os=sysv3
++		;;
++	m68k-ccur)
++		os=rtu
++		;;
++	m88k-omron*)
++		os=luna
++		;;
++	*-next)
++		os=nextstep
++		;;
++	*-sequent)
++		os=ptx
++		;;
++	*-crds)
++		os=unos
++		;;
++	*-ns)
++		os=genix
++		;;
++	i370-*)
++		os=mvs
++		;;
++	*-gould)
++		os=sysv
++		;;
++	*-highlevel)
++		os=bsd
++		;;
++	*-encore)
++		os=bsd
++		;;
++	*-masscomp)
++		os=rtu
++		;;
++	f30[01]-fujitsu | f700-fujitsu)
++		os=uxpv
++		;;
++	*-rom68k)
++		os=
++		obj=coff
++		;;
++	*-*bug)
++		os=
++		obj=coff
++		;;
++	*-apple)
++		os=macos
++		;;
++	*-atari*)
++		os=mint
++		;;
++	*-wrs)
++		os=vxworks
++		;;
++	*)
++		os=none
++		;;
++esac
++
++fi
++
++# Now, validate our (potentially fixed-up) individual pieces (OS, OBJ).
++
++case $os in
++	# Sometimes we do "kernel-libc", so those need to count as OSes.
++	llvm* | musl* | newlib* | relibc* | uclibc*)
++		;;
++	# Likewise for "kernel-abi"
++	eabi* | gnueabi*)
++		;;
++	# VxWorks passes extra cpu info in the 4th filed.
++	simlinux | simwindows | spe)
++		;;
++	# See `case $cpu-$os` validation below
++	ghcjs)
++		;;
++	# Now accept the basic system types.
++	# Each alternative MUST end in a * to match a version number.
++	  abug \
++	| aix* \
++	| amdhsa* \
++	| amigados* \
++	| amigaos* \
++	| android* \
++	| aof* \
++	| aos* \
++	| aros* \
++	| atheos* \
++	| auroraux* \
++	| aux* \
++	| beos* \
++	| bitrig* \
++	| bme* \
++	| bosx* \
++	| bsd* \
++	| cegcc* \
++	| chorusos* \
++	| chorusrdb* \
++	| clix* \
++	| cloudabi* \
++	| cnk* \
++	| conix* \
++	| cos* \
++	| cxux* \
++	| cygwin* \
++	| darwin* \
++	| dgux* \
++	| dicos* \
++	| dnix* \
++	| domain* \
++	| dragonfly* \
++	| drops* \
++	| ebmon* \
++	| ecoff* \
++	| ekkobsd* \
++	| emscripten* \
++	| emx* \
++	| es* \
++	| fiwix* \
++	| freebsd* \
++	| fuchsia* \
++	| genix* \
++	| genode* \
++	| glidix* \
++	| gnu* \
++	| go32* \
++	| haiku* \
++	| hcos* \
++	| hiux* \
++	| hms* \
++	| hpux* \
++	| ieee* \
++	| interix* \
++	| ios* \
++	| iris* \
++	| irix* \
++	| ironclad* \
++	| isc* \
++	| its* \
++	| l4re* \
++	| libertybsd* \
++	| lites* \
++	| lnews* \
++	| luna* \
++	| lynxos* \
++	| mach* \
++	| macos* \
++	| magic* \
++	| mbr* \
++	| midipix* \
++	| midnightbsd* \
++	| mingw32* \
++	| mingw64* \
++	| minix* \
++	| mint* \
++	| mirbsd* \
++	| mks* \
++	| mlibc* \
++	| mmixware* \
++	| mon960* \
++	| morphos* \
++	| moss* \
++	| moxiebox* \
++	| mpeix* \
++	| mpw* \
++	| msdos* \
++	| msys* \
++	| mvs* \
++	| nacl* \
++	| netbsd* \
++	| netware* \
++	| newsos* \
++	| nextstep* \
++	| nindy* \
++	| nonstopux* \
++	| nova* \
++	| nsk* \
++	| nucleus* \
++	| nx6 \
++	| nx7 \
++	| oabi* \
++	| ohos* \
++	| onefs* \
++	| openbsd* \
++	| openedition* \
++	| openstep* \
++	| os108* \
++	| os2* \
++	| os400* \
++	| os68k* \
++	| os9* \
++	| ose* \
++	| osf* \
++	| oskit* \
++	| osx* \
++	| palmos* \
++	| phoenix* \
++	| plan9* \
++	| powermax* \
++	| powerunix* \
++	| proelf* \
++	| psos* \
++	| psp* \
++	| ptx* \
++	| pw32* \
++	| qnx* \
++	| rdos* \
++	| redox* \
++	| rhapsody* \
++	| riscix* \
++	| riscos* \
++	| rtems* \
++	| rtmk* \
++	| rtu* \
++	| scout* \
++	| secbsd* \
++	| sei* \
++	| serenity* \
++	| sim* \
++	| skyos* \
++	| solaris* \
++	| solidbsd* \
++	| sortix* \
++	| storm-chaos* \
++	| sunos \
++	| sunos[34]* \
++	| superux* \
++	| syllable* \
++	| sym* \
++	| sysv* \
++	| tenex* \
++	| tirtos* \
++	| toppers* \
++	| tops10* \
++	| tops20* \
++	| tpf* \
++	| tvos* \
++	| twizzler* \
++	| uclinux* \
++	| udi* \
++	| udk* \
++	| ultrix* \
++	| unicos* \
++	| uniplus* \
++	| unleashed* \
++	| unos* \
++	| uwin* \
++	| uxpv* \
++	| v88r* \
++	|*vms* \
++	| vos* \
++	| vsta* \
++	| vxsim* \
++	| vxworks* \
++	| wasi* \
++	| watchos* \
++	| wince* \
++	| windiss* \
++	| windows* \
++	| winnt* \
++	| xenix* \
++	| xray* \
++	| zephyr* \
++	| zvmoe* )
++		;;
++	# This one is extra strict with allowed versions
++	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
++		# Don't forget version if it is 3.2v4 or newer.
++		;;
++	# This refers to builds using the UEFI calling convention
++	# (which depends on the architecture) and PE file format.
++	# Note that this is both a different calling convention and
++	# different file format than that of GNU-EFI
++	# (x86_64-w64-mingw32).
++	uefi)
++		;;
++	none)
++		;;
++	kernel* | msvc* )
++		# Restricted further below
++		;;
++	'')
++		if test x"$obj" = x
++		then
++			echo "Invalid configuration '$1': Blank OS only allowed with explicit machine code file format" 1>&2
++		fi
++		;;
++	*)
++		echo "Invalid configuration '$1': OS '$os' not recognized" 1>&2
++		exit 1
++		;;
++esac
++
++case $obj in
++	aout* | coff* | elf* | pe*)
++		;;
++	'')
++		# empty is fine
++		;;
++	*)
++		echo "Invalid configuration '$1': Machine code format '$obj' not recognized" 1>&2
++		exit 1
++		;;
++esac
++
++# Here we handle the constraint that a (synthetic) cpu and os are
++# valid only in combination with each other and nowhere else.
++case $cpu-$os in
++	# The "javascript-unknown-ghcjs" triple is used by GHC; we
++	# accept it here in order to tolerate that, but reject any
++	# variations.
++	javascript-ghcjs)
++		;;
++	javascript-* | *-ghcjs)
++		echo "Invalid configuration '$1': cpu '$cpu' is not valid with os '$os$obj'" 1>&2
++		exit 1
++		;;
++esac
++
++# As a final step for OS-related things, validate the OS-kernel combination
++# (given a valid OS), if there is a kernel.
++case $kernel-$os-$obj in
++	linux-gnu*- | linux-android*- | linux-dietlibc*- | linux-llvm*- \
++		    | linux-mlibc*- | linux-musl*- | linux-newlib*- \
++		    | linux-relibc*- | linux-uclibc*- | linux-ohos*- )
++		;;
++	uclinux-uclibc*- | uclinux-gnu*- )
++		;;
++	managarm-mlibc*- | managarm-kernel*- )
++		;;
++	windows*-msvc*-)
++		;;
++	-dietlibc*- | -llvm*- | -mlibc*- | -musl*- | -newlib*- | -relibc*- \
++		    | -uclibc*- )
++		# These are just libc implementations, not actual OSes, and thus
++		# require a kernel.
++		echo "Invalid configuration '$1': libc '$os' needs explicit kernel." 1>&2
++		exit 1
++		;;
++	-kernel*- )
++		echo "Invalid configuration '$1': '$os' needs explicit kernel." 1>&2
++		exit 1
++		;;
++	*-kernel*- )
++		echo "Invalid configuration '$1': '$kernel' does not support '$os'." 1>&2
++		exit 1
++		;;
++	*-msvc*- )
++		echo "Invalid configuration '$1': '$os' needs 'windows'." 1>&2
++		exit 1
++		;;
++	kfreebsd*-gnu*- | knetbsd*-gnu*- | netbsd*-gnu*- | kopensolaris*-gnu*-)
++		;;
++	vxworks-simlinux- | vxworks-simwindows- | vxworks-spe-)
++		;;
++	nto-qnx*-)
++		;;
++	os2-emx-)
++		;;
++	rtmk-nova-)
++		;;
++	*-eabi*- | *-gnueabi*-)
++		;;
++	none--*)
++		# None (no kernel, i.e. freestanding / bare metal),
++		# can be paired with an machine code file format
++		;;
++	-*-)
++		# Blank kernel with real OS is always fine.
++		;;
++	--*)
++		# Blank kernel and OS with real machine code file format is always fine.
++		;;
++	*-*-*)
++		echo "Invalid configuration '$1': Kernel '$kernel' not known to work with OS '$os'." 1>&2
++		exit 1
++		;;
++esac
++
++# Here we handle the case where we know the os, and the CPU type, but not the
++# manufacturer.  We pick the logical manufacturer.
++case $vendor in
++	unknown)
++		case $cpu-$os in
++			*-riscix*)
++				vendor=acorn
++				;;
++			*-sunos* | *-solaris*)
++				vendor=sun
++				;;
++			*-cnk* | *-aix*)
++				vendor=ibm
++				;;
++			*-beos*)
++				vendor=be
++				;;
++			*-hpux*)
++				vendor=hp
++				;;
++			*-mpeix*)
++				vendor=hp
++				;;
++			*-hiux*)
++				vendor=hitachi
++				;;
++			*-unos*)
++				vendor=crds
++				;;
++			*-dgux*)
++				vendor=dg
++				;;
++			*-luna*)
++				vendor=omron
++				;;
++			*-genix*)
++				vendor=ns
++				;;
++			*-clix*)
++				vendor=intergraph
++				;;
++			*-mvs* | *-opened*)
++				vendor=ibm
++				;;
++			*-os400*)
++				vendor=ibm
++				;;
++			s390-* | s390x-*)
++				vendor=ibm
++				;;
++			*-ptx*)
++				vendor=sequent
++				;;
++			*-tpf*)
++				vendor=ibm
++				;;
++			*-vxsim* | *-vxworks* | *-windiss*)
++				vendor=wrs
++				;;
++			*-aux*)
++				vendor=apple
++				;;
++			*-hms*)
++				vendor=hitachi
++				;;
++			*-mpw* | *-macos*)
++				vendor=apple
++				;;
++			*-*mint | *-mint[0-9]* | *-*MiNT | *-MiNT[0-9]*)
++				vendor=atari
++				;;
++			*-vos*)
++				vendor=stratus
++				;;
++		esac
++		;;
++esac
++
++echo "$cpu-$vendor${kernel:+-$kernel}${os:+-$os}${obj:+-$obj}"
++exit
++
++# Local variables:
++# eval: (add-hook 'before-save-hook 'time-stamp)
++# time-stamp-start: "timestamp='"
++# time-stamp-format: "%:y-%02m-%02d"
++# time-stamp-end: "'"
++# End:
+diff --git a/external/libcmis/0003-update-config.patch b/external/libcmis/0003-update-config.patch
+new file mode 100644
+index 000000000..d9d30972a
+--- /dev/null
++++ b/external/libcmis/0003-update-config.patch
+@@ -0,0 +1,5818 @@
++diff --git a/config.guess b/config.guess
++index 256083a..48a6846 100755
++--- a/config.guess
+++++ b/config.guess
++@@ -1,12 +1,14 @@
++ #! /bin/sh
++ # Attempt to guess a canonical system name.
++-#   Copyright 1992-2018 Free Software Foundation, Inc.
+++#   Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++-timestamp='2018-03-08'
+++# shellcheck disable=SC2006,SC2268 # see below for rationale
+++
+++timestamp='2024-07-27'
++ 
++ # This file is free software; you can redistribute it and/or modify it
++ # under the terms of the GNU General Public License as published by
++-# the Free Software Foundation; either version 3 of the License, or
+++# the Free Software Foundation, either version 3 of the License, or
++ # (at your option) any later version.
++ #
++ # This program is distributed in the hope that it will be useful, but
++@@ -27,17 +29,25 @@ timestamp='2018-03-08'
++ # Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
++ #
++ # You can get the latest version of this script from:
++-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
+++# https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
++ #
++ # Please send patches to <config-patches@gnu.org>.
++ 
++ 
+++# The "shellcheck disable" line above the timestamp inhibits complaints
+++# about features and limitations of the classic Bourne shell that were
+++# superseded or lifted in POSIX.  However, this script identifies a wide
+++# variety of pre-POSIX systems that do not have POSIX shells at all, and
+++# even some reasonably current systems (Solaris 10 as case-in-point) still
+++# have a pre-POSIX /bin/sh.
+++
+++
++ me=`echo "$0" | sed -e 's,.*/,,'`
++ 
++ usage="\
++ Usage: $0 [OPTION]
++ 
++-Output the configuration name of the system \`$me' is run on.
+++Output the configuration name of the system '$me' is run on.
++ 
++ Options:
++   -h, --help         print this help, then exit
++@@ -50,13 +60,13 @@ version="\
++ GNU config.guess ($timestamp)
++ 
++ Originally written by Per Bothner.
++-Copyright 1992-2018 Free Software Foundation, Inc.
+++Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++ 
++ help="
++-Try \`$me --help' for more information."
+++Try '$me --help' for more information."
++ 
++ # Parse command line
++ while test $# -gt 0 ; do
++@@ -84,85 +94,109 @@ if test $# != 0; then
++   exit 1
++ fi
++ 
++-trap 'exit 1' 1 2 15
+++# Just in case it came from the environment.
+++GUESS=
++ 
++ # CC_FOR_BUILD -- compiler used by this script. Note that the use of a
++ # compiler to aid in system detection is discouraged as it requires
++ # temporary files to be created and, as you can see below, it is a
++ # headache to deal with in a portable fashion.
++ 
++-# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
++-# use `HOST_CC' if defined, but it is deprecated.
+++# Historically, 'CC_FOR_BUILD' used to be named 'HOST_CC'. We still
+++# use 'HOST_CC' if defined, but it is deprecated.
++ 
++ # Portable tmp directory creation inspired by the Autoconf team.
++ 
++-set_cc_for_build='
++-trap "exitcode=\$?; (rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null) && exit \$exitcode" 0 ;
++-trap "rm -f \$tmpfiles 2>/dev/null; rmdir \$tmp 2>/dev/null; exit 1" 1 2 13 15 ;
++-: ${TMPDIR=/tmp} ;
++- { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
++- { test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir $tmp) ; } ||
++- { tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir $tmp) && echo "Warning: creating insecure temp directory" >&2 ; } ||
++- { echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; } ;
++-dummy=$tmp/dummy ;
++-tmpfiles="$dummy.c $dummy.o $dummy.rel $dummy" ;
++-case $CC_FOR_BUILD,$HOST_CC,$CC in
++- ,,)    echo "int x;" > "$dummy.c" ;
++-	for c in cc gcc c89 c99 ; do
++-	  if ($c -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
++-	     CC_FOR_BUILD="$c"; break ;
++-	  fi ;
++-	done ;
++-	if test x"$CC_FOR_BUILD" = x ; then
++-	  CC_FOR_BUILD=no_compiler_found ;
++-	fi
++-	;;
++- ,,*)   CC_FOR_BUILD=$CC ;;
++- ,*,*)  CC_FOR_BUILD=$HOST_CC ;;
++-esac ; set_cc_for_build= ;'
+++tmp=
+++# shellcheck disable=SC2172
+++trap 'test -z "$tmp" || rm -fr "$tmp"' 0 1 2 13 15
+++
+++set_cc_for_build() {
+++    # prevent multiple calls if $tmp is already set
+++    test "$tmp" && return 0
+++    : "${TMPDIR=/tmp}"
+++    # shellcheck disable=SC2039,SC3028
+++    { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
+++	{ test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir "$tmp" 2>/dev/null) ; } ||
+++	{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir "$tmp" 2>/dev/null) && echo "Warning: creating insecure temp directory" >&2 ; } ||
+++	{ echo "$me: cannot create a temporary directory in $TMPDIR" >&2 ; exit 1 ; }
+++    dummy=$tmp/dummy
+++    case ${CC_FOR_BUILD-},${HOST_CC-},${CC-} in
+++	,,)    echo "int x;" > "$dummy.c"
+++	       for driver in cc gcc c17 c99 c89 ; do
+++		   if ($driver -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
+++		       CC_FOR_BUILD=$driver
+++		       break
+++		   fi
+++	       done
+++	       if test x"$CC_FOR_BUILD" = x ; then
+++		   CC_FOR_BUILD=no_compiler_found
+++	       fi
+++	       ;;
+++	,,*)   CC_FOR_BUILD=$CC ;;
+++	,*,*)  CC_FOR_BUILD=$HOST_CC ;;
+++    esac
+++}
++ 
++ # This is needed to find uname on a Pyramid OSx when run in the BSD universe.
++ # (ghazi@noc.rutgers.edu 1994-08-24)
++-if (test -f /.attbin/uname) >/dev/null 2>&1 ; then
+++if test -f /.attbin/uname ; then
++ 	PATH=$PATH:/.attbin ; export PATH
++ fi
++ 
++ UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
++ UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
++-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
+++UNAME_SYSTEM=`(uname -s) 2>/dev/null` || UNAME_SYSTEM=unknown
++ UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
++ 
++-case "$UNAME_SYSTEM" in
+++case $UNAME_SYSTEM in
++ Linux|GNU|GNU/*)
++-	# If the system lacks a compiler, then just pick glibc.
++-	# We could probably try harder.
++-	LIBC=gnu
+++	LIBC=unknown
++ 
++-	eval "$set_cc_for_build"
+++	set_cc_for_build
++ 	cat <<-EOF > "$dummy.c"
+++	#if defined(__ANDROID__)
+++	LIBC=android
+++	#else
++ 	#include <features.h>
++ 	#if defined(__UCLIBC__)
++ 	LIBC=uclibc
++ 	#elif defined(__dietlibc__)
++ 	LIBC=dietlibc
++-	#else
+++	#elif defined(__GLIBC__)
++ 	LIBC=gnu
+++	#elif defined(__LLVM_LIBC__)
+++	LIBC=llvm
+++	#else
+++	#include <stdarg.h>
+++	/* First heuristic to detect musl libc.  */
+++	#ifdef __DEFINED_va_list
+++	LIBC=musl
+++	#endif
+++	#endif
++ 	#endif
++ 	EOF
++-	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`"
+++	cc_set_libc=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
+++	eval "$cc_set_libc"
++ 
++-	# If ldd exists, use it to detect musl libc.
++-	if command -v ldd >/dev/null && \
++-		ldd --version 2>&1 | grep -q ^musl
++-	then
++-	    LIBC=musl
+++	# Second heuristic to detect musl libc.
+++	if [ "$LIBC" = unknown ] &&
+++	   command -v ldd >/dev/null &&
+++	   ldd --version 2>&1 | grep -q ^musl; then
+++		LIBC=musl
+++	fi
+++
+++	# If the system lacks a compiler, then just pick glibc.
+++	# We could probably try harder.
+++	if [ "$LIBC" = unknown ]; then
+++		LIBC=gnu
++ 	fi
++ 	;;
++ esac
++ 
++ # Note: order is significant - the case branches are not exclusive.
++ 
++-case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+++case $UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION in
++     *:NetBSD:*:*)
++ 	# NetBSD (nbsd) targets should (where applicable) match one or
++ 	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
++@@ -174,12 +208,12 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	#
++ 	# Note: NetBSD doesn't particularly care about the vendor
++ 	# portion of the name.  We always set it to "unknown".
++-	sysctl="sysctl -n hw.machine_arch"
++ 	UNAME_MACHINE_ARCH=`(uname -p 2>/dev/null || \
++-	    "/sbin/$sysctl" 2>/dev/null || \
++-	    "/usr/sbin/$sysctl" 2>/dev/null || \
+++	    /sbin/sysctl -n hw.machine_arch 2>/dev/null || \
+++	    /usr/sbin/sysctl -n hw.machine_arch 2>/dev/null || \
++ 	    echo unknown)`
++-	case "$UNAME_MACHINE_ARCH" in
+++	case $UNAME_MACHINE_ARCH in
+++	    aarch64eb) machine=aarch64_be-unknown ;;
++ 	    armeb) machine=armeb-unknown ;;
++ 	    arm*) machine=arm-unknown ;;
++ 	    sh3el) machine=shl-unknown ;;
++@@ -188,18 +222,18 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	    earmv*)
++ 		arch=`echo "$UNAME_MACHINE_ARCH" | sed -e 's,^e\(armv[0-9]\).*$,\1,'`
++ 		endian=`echo "$UNAME_MACHINE_ARCH" | sed -ne 's,^.*\(eb\)$,\1,p'`
++-		machine="${arch}${endian}"-unknown
+++		machine=${arch}${endian}-unknown
++ 		;;
++-	    *) machine="$UNAME_MACHINE_ARCH"-unknown ;;
+++	    *) machine=$UNAME_MACHINE_ARCH-unknown ;;
++ 	esac
++ 	# The Operating System including object format, if it has switched
++ 	# to ELF recently (or will in the future) and ABI.
++-	case "$UNAME_MACHINE_ARCH" in
+++	case $UNAME_MACHINE_ARCH in
++ 	    earm*)
++ 		os=netbsdelf
++ 		;;
++ 	    arm*|i386|m68k|ns32k|sh3*|sparc|vax)
++-		eval "$set_cc_for_build"
+++		set_cc_for_build
++ 		if echo __ELF__ | $CC_FOR_BUILD -E - 2>/dev/null \
++ 			| grep -q __ELF__
++ 		then
++@@ -215,7 +249,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 		;;
++ 	esac
++ 	# Determine ABI tags.
++-	case "$UNAME_MACHINE_ARCH" in
+++	case $UNAME_MACHINE_ARCH in
++ 	    earm*)
++ 		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
++ 		abi=`echo "$UNAME_MACHINE_ARCH" | sed -e "$expr"`
++@@ -226,7 +260,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# thus, need a distinct triplet. However, they do not need
++ 	# kernel version information, so it can be replaced with a
++ 	# suitable tag, in the style of linux-gnu.
++-	case "$UNAME_VERSION" in
+++	case $UNAME_VERSION in
++ 	    Debian*)
++ 		release='-gnu'
++ 		;;
++@@ -237,45 +271,57 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
++ 	# contains redundant information, the shorter form:
++ 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
++-	echo "$machine-${os}${release}${abi}"
++-	exit ;;
+++	GUESS=$machine-${os}${release}${abi-}
+++	;;
++     *:Bitrig:*:*)
++ 	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
++-	echo "$UNAME_MACHINE_ARCH"-unknown-bitrig"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-bitrig$UNAME_RELEASE
+++	;;
++     *:OpenBSD:*:*)
++ 	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
++-	echo "$UNAME_MACHINE_ARCH"-unknown-openbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-openbsd$UNAME_RELEASE
+++	;;
+++    *:SecBSD:*:*)
+++	UNAME_MACHINE_ARCH=`arch | sed 's/SecBSD.//'`
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-secbsd$UNAME_RELEASE
+++	;;
++     *:LibertyBSD:*:*)
++ 	UNAME_MACHINE_ARCH=`arch | sed 's/^.*BSD\.//'`
++-	echo "$UNAME_MACHINE_ARCH"-unknown-libertybsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-libertybsd$UNAME_RELEASE
+++	;;
++     *:MidnightBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-midnightbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-midnightbsd$UNAME_RELEASE
+++	;;
++     *:ekkoBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-ekkobsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-ekkobsd$UNAME_RELEASE
+++	;;
++     *:SolidBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-solidbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-solidbsd$UNAME_RELEASE
+++	;;
+++    *:OS108:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-os108_$UNAME_RELEASE
+++	;;
++     macppc:MirBSD:*:*)
++-	echo powerpc-unknown-mirbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-unknown-mirbsd$UNAME_RELEASE
+++	;;
++     *:MirBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-mirbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-mirbsd$UNAME_RELEASE
+++	;;
++     *:Sortix:*:*)
++-	echo "$UNAME_MACHINE"-unknown-sortix
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-sortix
+++	;;
+++    *:Twizzler:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-twizzler
+++	;;
++     *:Redox:*:*)
++-	echo "$UNAME_MACHINE"-unknown-redox
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-redox
+++	;;
++     mips:OSF1:*.*)
++-        echo mips-dec-osf1
++-        exit ;;
+++	GUESS=mips-dec-osf1
+++	;;
++     alpha:OSF1:*:*)
+++	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
+++	trap '' 0
++ 	case $UNAME_RELEASE in
++ 	*4.0)
++ 		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
++@@ -289,7 +335,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# covers most systems running today.  This code pipes the CPU
++ 	# types through head -n 1, so we only detect the type of CPU 0.
++ 	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
++-	case "$ALPHA_CPU_TYPE" in
+++	case $ALPHA_CPU_TYPE in
++ 	    "EV4 (21064)")
++ 		UNAME_MACHINE=alpha ;;
++ 	    "EV4.5 (21064)")
++@@ -326,117 +372,121 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# A Tn.n version is a released field test version.
++ 	# A Xn.n version is an unreleased experimental baselevel.
++ 	# 1.2 uses "1.2" for uname -r.
++-	echo "$UNAME_MACHINE"-dec-osf"`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`"
++-	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
++-	exitcode=$?
++-	trap '' 0
++-	exit $exitcode ;;
+++	OSF_REL=`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
+++	GUESS=$UNAME_MACHINE-dec-osf$OSF_REL
+++	;;
++     Amiga*:UNIX_System_V:4.0:*)
++-	echo m68k-unknown-sysv4
++-	exit ;;
+++	GUESS=m68k-unknown-sysv4
+++	;;
++     *:[Aa]miga[Oo][Ss]:*:*)
++-	echo "$UNAME_MACHINE"-unknown-amigaos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-amigaos
+++	;;
++     *:[Mm]orph[Oo][Ss]:*:*)
++-	echo "$UNAME_MACHINE"-unknown-morphos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-morphos
+++	;;
++     *:OS/390:*:*)
++-	echo i370-ibm-openedition
++-	exit ;;
+++	GUESS=i370-ibm-openedition
+++	;;
++     *:z/VM:*:*)
++-	echo s390-ibm-zvmoe
++-	exit ;;
+++	GUESS=s390-ibm-zvmoe
+++	;;
++     *:OS400:*:*)
++-	echo powerpc-ibm-os400
++-	exit ;;
+++	GUESS=powerpc-ibm-os400
+++	;;
++     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
++-	echo arm-acorn-riscix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=arm-acorn-riscix$UNAME_RELEASE
+++	;;
++     arm*:riscos:*:*|arm*:RISCOS:*:*)
++-	echo arm-unknown-riscos
++-	exit ;;
+++	GUESS=arm-unknown-riscos
+++	;;
++     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
++-	echo hppa1.1-hitachi-hiuxmpp
++-	exit ;;
+++	GUESS=hppa1.1-hitachi-hiuxmpp
+++	;;
++     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
++ 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
++-	if test "`(/bin/universe) 2>/dev/null`" = att ; then
++-		echo pyramid-pyramid-sysv3
++-	else
++-		echo pyramid-pyramid-bsd
++-	fi
++-	exit ;;
+++	case `(/bin/universe) 2>/dev/null` in
+++	    att) GUESS=pyramid-pyramid-sysv3 ;;
+++	    *)   GUESS=pyramid-pyramid-bsd   ;;
+++	esac
+++	;;
++     NILE*:*:*:dcosx)
++-	echo pyramid-pyramid-svr4
++-	exit ;;
+++	GUESS=pyramid-pyramid-svr4
+++	;;
++     DRS?6000:unix:4.0:6*)
++-	echo sparc-icl-nx6
++-	exit ;;
+++	GUESS=sparc-icl-nx6
+++	;;
++     DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
++ 	case `/usr/bin/uname -p` in
++-	    sparc) echo sparc-icl-nx7; exit ;;
++-	esac ;;
+++	    sparc) GUESS=sparc-icl-nx7 ;;
+++	esac
+++	;;
++     s390x:SunOS:*:*)
++-	echo "$UNAME_MACHINE"-ibm-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=$UNAME_MACHINE-ibm-solaris2$SUN_REL
+++	;;
++     sun4H:SunOS:5.*:*)
++-	echo sparc-hal-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=sparc-hal-solaris2$SUN_REL
+++	;;
++     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
++-	echo sparc-sun-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=sparc-sun-solaris2$SUN_REL
+++	;;
++     i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
++-	echo i386-pc-auroraux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=i386-pc-auroraux$UNAME_RELEASE
+++	;;
++     i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
++-	eval "$set_cc_for_build"
+++	set_cc_for_build
++ 	SUN_ARCH=i386
++ 	# If there is a compiler, see if it is configured for 64-bit objects.
++ 	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
++ 	# This test works for both compilers.
++-	if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
++ 	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
++-		(CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		(CCOPTS="" $CC_FOR_BUILD -m64 -E - 2>/dev/null) | \
++ 		grep IS_64BIT_ARCH >/dev/null
++ 	    then
++ 		SUN_ARCH=x86_64
++ 	    fi
++ 	fi
++-	echo "$SUN_ARCH"-pc-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=$SUN_ARCH-pc-solaris2$SUN_REL
+++	;;
++     sun4*:SunOS:6*:*)
++ 	# According to config.sub, this is the proper way to canonicalize
++ 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
++ 	# it's likely to be more like Solaris than SunOS4.
++-	echo sparc-sun-solaris3"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=sparc-sun-solaris3$SUN_REL
+++	;;
++     sun4*:SunOS:*:*)
++-	case "`/usr/bin/arch -k`" in
+++	case `/usr/bin/arch -k` in
++ 	    Series*|S4*)
++ 		UNAME_RELEASE=`uname -v`
++ 		;;
++ 	esac
++-	# Japanese Language versions have a version number like `4.1.3-JL'.
++-	echo sparc-sun-sunos"`echo "$UNAME_RELEASE"|sed -e 's/-/_/'`"
++-	exit ;;
+++	# Japanese Language versions have a version number like '4.1.3-JL'.
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/'`
+++	GUESS=sparc-sun-sunos$SUN_REL
+++	;;
++     sun3*:SunOS:*:*)
++-	echo m68k-sun-sunos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-sun-sunos$UNAME_RELEASE
+++	;;
++     sun*:*:4.2BSD:*)
++ 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
++ 	test "x$UNAME_RELEASE" = x && UNAME_RELEASE=3
++-	case "`/bin/arch`" in
+++	case `/bin/arch` in
++ 	    sun3)
++-		echo m68k-sun-sunos"$UNAME_RELEASE"
+++		GUESS=m68k-sun-sunos$UNAME_RELEASE
++ 		;;
++ 	    sun4)
++-		echo sparc-sun-sunos"$UNAME_RELEASE"
+++		GUESS=sparc-sun-sunos$UNAME_RELEASE
++ 		;;
++ 	esac
++-	exit ;;
+++	;;
++     aushp:SunOS:*:*)
++-	echo sparc-auspex-sunos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sparc-auspex-sunos$UNAME_RELEASE
+++	;;
++     # The situation for MiNT is a little confusing.  The machine name
++     # can be virtually everything (everything which is not
++     # "atarist" or "atariste" at least should have a processor
++@@ -446,43 +496,43 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++     # MiNT.  But MiNT is downward compatible to TOS, so this should
++     # be no problem.
++     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
++-	echo m68k-atari-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-atari-mint$UNAME_RELEASE
+++	;;
++     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
++-	echo m68k-atari-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-atari-mint$UNAME_RELEASE
+++	;;
++     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
++-	echo m68k-atari-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-atari-mint$UNAME_RELEASE
+++	;;
++     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
++-	echo m68k-milan-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-milan-mint$UNAME_RELEASE
+++	;;
++     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
++-	echo m68k-hades-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-hades-mint$UNAME_RELEASE
+++	;;
++     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
++-	echo m68k-unknown-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-unknown-mint$UNAME_RELEASE
+++	;;
++     m68k:machten:*:*)
++-	echo m68k-apple-machten"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-apple-machten$UNAME_RELEASE
+++	;;
++     powerpc:machten:*:*)
++-	echo powerpc-apple-machten"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-apple-machten$UNAME_RELEASE
+++	;;
++     RISC*:Mach:*:*)
++-	echo mips-dec-mach_bsd4.3
++-	exit ;;
+++	GUESS=mips-dec-mach_bsd4.3
+++	;;
++     RISC*:ULTRIX:*:*)
++-	echo mips-dec-ultrix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-dec-ultrix$UNAME_RELEASE
+++	;;
++     VAX*:ULTRIX*:*:*)
++-	echo vax-dec-ultrix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=vax-dec-ultrix$UNAME_RELEASE
+++	;;
++     2020:CLIX:*:* | 2430:CLIX:*:*)
++-	echo clipper-intergraph-clix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=clipper-intergraph-clix$UNAME_RELEASE
+++	;;
++     mips:*:*:UMIPS | mips:*:*:RISCos)
++-	eval "$set_cc_for_build"
+++	set_cc_for_build
++ 	sed 's/^	//' << EOF > "$dummy.c"
++ #ifdef __cplusplus
++ #include <stdio.h>  /* for printf() prototype */
++@@ -508,82 +558,84 @@ EOF
++ 	  dummyarg=`echo "$UNAME_RELEASE" | sed -n 's/\([0-9]*\).*/\1/p'` &&
++ 	  SYSTEM_NAME=`"$dummy" "$dummyarg"` &&
++ 	    { echo "$SYSTEM_NAME"; exit; }
++-	echo mips-mips-riscos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-mips-riscos$UNAME_RELEASE
+++	;;
++     Motorola:PowerMAX_OS:*:*)
++-	echo powerpc-motorola-powermax
++-	exit ;;
+++	GUESS=powerpc-motorola-powermax
+++	;;
++     Motorola:*:4.3:PL8-*)
++-	echo powerpc-harris-powermax
++-	exit ;;
+++	GUESS=powerpc-harris-powermax
+++	;;
++     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
++-	echo powerpc-harris-powermax
++-	exit ;;
+++	GUESS=powerpc-harris-powermax
+++	;;
++     Night_Hawk:Power_UNIX:*:*)
++-	echo powerpc-harris-powerunix
++-	exit ;;
+++	GUESS=powerpc-harris-powerunix
+++	;;
++     m88k:CX/UX:7*:*)
++-	echo m88k-harris-cxux7
++-	exit ;;
+++	GUESS=m88k-harris-cxux7
+++	;;
++     m88k:*:4*:R4*)
++-	echo m88k-motorola-sysv4
++-	exit ;;
+++	GUESS=m88k-motorola-sysv4
+++	;;
++     m88k:*:3*:R3*)
++-	echo m88k-motorola-sysv3
++-	exit ;;
+++	GUESS=m88k-motorola-sysv3
+++	;;
++     AViiON:dgux:*:*)
++ 	# DG/UX returns AViiON for all architectures
++ 	UNAME_PROCESSOR=`/usr/bin/uname -p`
++-	if [ "$UNAME_PROCESSOR" = mc88100 ] || [ "$UNAME_PROCESSOR" = mc88110 ]
+++	if test "$UNAME_PROCESSOR" = mc88100 || test "$UNAME_PROCESSOR" = mc88110
++ 	then
++-	    if [ "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx ] || \
++-	       [ "$TARGET_BINARY_INTERFACE"x = x ]
+++	    if test "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx || \
+++	       test "$TARGET_BINARY_INTERFACE"x = x
++ 	    then
++-		echo m88k-dg-dgux"$UNAME_RELEASE"
+++		GUESS=m88k-dg-dgux$UNAME_RELEASE
++ 	    else
++-		echo m88k-dg-dguxbcs"$UNAME_RELEASE"
+++		GUESS=m88k-dg-dguxbcs$UNAME_RELEASE
++ 	    fi
++ 	else
++-	    echo i586-dg-dgux"$UNAME_RELEASE"
+++	    GUESS=i586-dg-dgux$UNAME_RELEASE
++ 	fi
++-	exit ;;
+++	;;
++     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
++-	echo m88k-dolphin-sysv3
++-	exit ;;
+++	GUESS=m88k-dolphin-sysv3
+++	;;
++     M88*:*:R3*:*)
++ 	# Delta 88k system running SVR3
++-	echo m88k-motorola-sysv3
++-	exit ;;
+++	GUESS=m88k-motorola-sysv3
+++	;;
++     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
++-	echo m88k-tektronix-sysv3
++-	exit ;;
+++	GUESS=m88k-tektronix-sysv3
+++	;;
++     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
++-	echo m68k-tektronix-bsd
++-	exit ;;
+++	GUESS=m68k-tektronix-bsd
+++	;;
++     *:IRIX*:*:*)
++-	echo mips-sgi-irix"`echo "$UNAME_RELEASE"|sed -e 's/-/_/g'`"
++-	exit ;;
+++	IRIX_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/g'`
+++	GUESS=mips-sgi-irix$IRIX_REL
+++	;;
++     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
++-	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
++-	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
+++	GUESS=romp-ibm-aix    # uname -m gives an 8 hex-code CPU id
+++	;;                    # Note that: echo "'`uname -s`'" gives 'AIX '
++     i*86:AIX:*:*)
++-	echo i386-ibm-aix
++-	exit ;;
+++	GUESS=i386-ibm-aix
+++	;;
++     ia64:AIX:*:*)
++-	if [ -x /usr/bin/oslevel ] ; then
+++	if test -x /usr/bin/oslevel ; then
++ 		IBM_REV=`/usr/bin/oslevel`
++ 	else
++-		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
+++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
++ 	fi
++-	echo "$UNAME_MACHINE"-ibm-aix"$IBM_REV"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-ibm-aix$IBM_REV
+++	;;
++     *:AIX:2:3)
++ 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
++-		eval "$set_cc_for_build"
+++		set_cc_for_build
++ 		sed 's/^		//' << EOF > "$dummy.c"
++ 		#include <sys/systemcfg.h>
++ 
++-		main()
+++		int
+++		main ()
++ 			{
++ 			if (!__power_pc())
++ 				exit(1);
++@@ -593,16 +645,16 @@ EOF
++ EOF
++ 		if $CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"`
++ 		then
++-			echo "$SYSTEM_NAME"
+++			GUESS=$SYSTEM_NAME
++ 		else
++-			echo rs6000-ibm-aix3.2.5
+++			GUESS=rs6000-ibm-aix3.2.5
++ 		fi
++ 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
++-		echo rs6000-ibm-aix3.2.4
+++		GUESS=rs6000-ibm-aix3.2.4
++ 	else
++-		echo rs6000-ibm-aix3.2
+++		GUESS=rs6000-ibm-aix3.2
++ 	fi
++-	exit ;;
+++	;;
++     *:AIX:*:[4567])
++ 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
++ 	if /usr/sbin/lsattr -El "$IBM_CPU_ID" | grep ' POWER' >/dev/null 2>&1; then
++@@ -610,64 +662,65 @@ EOF
++ 	else
++ 		IBM_ARCH=powerpc
++ 	fi
++-	if [ -x /usr/bin/lslpp ] ; then
++-		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc |
+++	if test -x /usr/bin/lslpp ; then
+++		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc | \
++ 			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`
++ 	else
++-		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
+++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
++ 	fi
++-	echo "$IBM_ARCH"-ibm-aix"$IBM_REV"
++-	exit ;;
+++	GUESS=$IBM_ARCH-ibm-aix$IBM_REV
+++	;;
++     *:AIX:*:*)
++-	echo rs6000-ibm-aix
++-	exit ;;
+++	GUESS=rs6000-ibm-aix
+++	;;
++     ibmrt:4.4BSD:*|romp-ibm:4.4BSD:*)
++-	echo romp-ibm-bsd4.4
++-	exit ;;
+++	GUESS=romp-ibm-bsd4.4
+++	;;
++     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
++-	echo romp-ibm-bsd"$UNAME_RELEASE"   # 4.3 with uname added to
++-	exit ;;                             # report: romp-ibm BSD 4.3
+++	GUESS=romp-ibm-bsd$UNAME_RELEASE    # 4.3 with uname added to
+++	;;                                  # report: romp-ibm BSD 4.3
++     *:BOSX:*:*)
++-	echo rs6000-bull-bosx
++-	exit ;;
+++	GUESS=rs6000-bull-bosx
+++	;;
++     DPX/2?00:B.O.S.:*:*)
++-	echo m68k-bull-sysv3
++-	exit ;;
+++	GUESS=m68k-bull-sysv3
+++	;;
++     9000/[34]??:4.3bsd:1.*:*)
++-	echo m68k-hp-bsd
++-	exit ;;
+++	GUESS=m68k-hp-bsd
+++	;;
++     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
++-	echo m68k-hp-bsd4.4
++-	exit ;;
+++	GUESS=m68k-hp-bsd4.4
+++	;;
++     9000/[34678]??:HP-UX:*:*)
++-	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
++-	case "$UNAME_MACHINE" in
+++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
+++	case $UNAME_MACHINE in
++ 	    9000/31?)            HP_ARCH=m68000 ;;
++ 	    9000/[34]??)         HP_ARCH=m68k ;;
++ 	    9000/[678][0-9][0-9])
++-		if [ -x /usr/bin/getconf ]; then
+++		if test -x /usr/bin/getconf; then
++ 		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
++ 		    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
++-		    case "$sc_cpu_version" in
+++		    case $sc_cpu_version in
++ 		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0
++ 		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1
++ 		      532)                      # CPU_PA_RISC2_0
++-			case "$sc_kernel_bits" in
+++			case $sc_kernel_bits in
++ 			  32) HP_ARCH=hppa2.0n ;;
++ 			  64) HP_ARCH=hppa2.0w ;;
++ 			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20
++ 			esac ;;
++ 		    esac
++ 		fi
++-		if [ "$HP_ARCH" = "" ]; then
++-		    eval "$set_cc_for_build"
+++		if test "$HP_ARCH" = ""; then
+++		    set_cc_for_build
++ 		    sed 's/^		//' << EOF > "$dummy.c"
++ 
++ 		#define _HPUX_SOURCE
++ 		#include <stdlib.h>
++ 		#include <unistd.h>
++ 
++-		int main ()
+++		int
+++		main ()
++ 		{
++ 		#if defined(_SC_KERNEL_BITS)
++ 		    long bits = sysconf(_SC_KERNEL_BITS);
++@@ -698,9 +751,9 @@ EOF
++ 		    test -z "$HP_ARCH" && HP_ARCH=hppa
++ 		fi ;;
++ 	esac
++-	if [ "$HP_ARCH" = hppa2.0w ]
+++	if test "$HP_ARCH" = hppa2.0w
++ 	then
++-	    eval "$set_cc_for_build"
+++	    set_cc_for_build
++ 
++ 	    # hppa2.0w-hp-hpux* has a 64-bit kernel and a compiler generating
++ 	    # 32-bit code.  hppa64-hp-hpux* has the same kernel and a compiler
++@@ -719,14 +772,14 @@ EOF
++ 		HP_ARCH=hppa64
++ 	    fi
++ 	fi
++-	echo "$HP_ARCH"-hp-hpux"$HPUX_REV"
++-	exit ;;
+++	GUESS=$HP_ARCH-hp-hpux$HPUX_REV
+++	;;
++     ia64:HP-UX:*:*)
++-	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
++-	echo ia64-hp-hpux"$HPUX_REV"
++-	exit ;;
+++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
+++	GUESS=ia64-hp-hpux$HPUX_REV
+++	;;
++     3050*:HI-UX:*:*)
++-	eval "$set_cc_for_build"
+++	set_cc_for_build
++ 	sed 's/^	//' << EOF > "$dummy.c"
++ 	#include <unistd.h>
++ 	int
++@@ -754,36 +807,36 @@ EOF
++ EOF
++ 	$CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"` &&
++ 		{ echo "$SYSTEM_NAME"; exit; }
++-	echo unknown-hitachi-hiuxwe2
++-	exit ;;
+++	GUESS=unknown-hitachi-hiuxwe2
+++	;;
++     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:*)
++-	echo hppa1.1-hp-bsd
++-	exit ;;
+++	GUESS=hppa1.1-hp-bsd
+++	;;
++     9000/8??:4.3bsd:*:*)
++-	echo hppa1.0-hp-bsd
++-	exit ;;
+++	GUESS=hppa1.0-hp-bsd
+++	;;
++     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
++-	echo hppa1.0-hp-mpeix
++-	exit ;;
+++	GUESS=hppa1.0-hp-mpeix
+++	;;
++     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:*)
++-	echo hppa1.1-hp-osf
++-	exit ;;
+++	GUESS=hppa1.1-hp-osf
+++	;;
++     hp8??:OSF1:*:*)
++-	echo hppa1.0-hp-osf
++-	exit ;;
+++	GUESS=hppa1.0-hp-osf
+++	;;
++     i*86:OSF1:*:*)
++-	if [ -x /usr/sbin/sysversion ] ; then
++-	    echo "$UNAME_MACHINE"-unknown-osf1mk
+++	if test -x /usr/sbin/sysversion ; then
+++	    GUESS=$UNAME_MACHINE-unknown-osf1mk
++ 	else
++-	    echo "$UNAME_MACHINE"-unknown-osf1
+++	    GUESS=$UNAME_MACHINE-unknown-osf1
++ 	fi
++-	exit ;;
+++	;;
++     parisc*:Lites*:*:*)
++-	echo hppa1.1-hp-lites
++-	exit ;;
+++	GUESS=hppa1.1-hp-lites
+++	;;
++     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
++-	echo c1-convex-bsd
++-	exit ;;
+++	GUESS=c1-convex-bsd
+++	;;
++     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
++ 	if getsysinfo -f scalar_acc
++ 	then echo c32-convex-bsd
++@@ -791,17 +844,18 @@ EOF
++ 	fi
++ 	exit ;;
++     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
++-	echo c34-convex-bsd
++-	exit ;;
+++	GUESS=c34-convex-bsd
+++	;;
++     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
++-	echo c38-convex-bsd
++-	exit ;;
+++	GUESS=c38-convex-bsd
+++	;;
++     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
++-	echo c4-convex-bsd
++-	exit ;;
+++	GUESS=c4-convex-bsd
+++	;;
++     CRAY*Y-MP:*:*:*)
++-	echo ymp-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=ymp-cray-unicos$CRAY_REL
+++	;;
++     CRAY*[A-Z]90:*:*:*)
++ 	echo "$UNAME_MACHINE"-cray-unicos"$UNAME_RELEASE" \
++ 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
++@@ -809,103 +863,155 @@ EOF
++ 	      -e 's/\.[^.]*$/.X/'
++ 	exit ;;
++     CRAY*TS:*:*:*)
++-	echo t90-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=t90-cray-unicos$CRAY_REL
+++	;;
++     CRAY*T3E:*:*:*)
++-	echo alphaev5-cray-unicosmk"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=alphaev5-cray-unicosmk$CRAY_REL
+++	;;
++     CRAY*SV1:*:*:*)
++-	echo sv1-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=sv1-cray-unicos$CRAY_REL
+++	;;
++     *:UNICOS/mp:*:*)
++-	echo craynv-cray-unicosmp"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=craynv-cray-unicosmp$CRAY_REL
+++	;;
++     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
++ 	FUJITSU_PROC=`uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
++ 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
++ 	FUJITSU_REL=`echo "$UNAME_RELEASE" | sed -e 's/ /_/'`
++-	echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++-	exit ;;
+++	GUESS=${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
+++	;;
++     5000:UNIX_System_V:4.*:*)
++ 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
++ 	FUJITSU_REL=`echo "$UNAME_RELEASE" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`
++-	echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++-	exit ;;
+++	GUESS=sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
+++	;;
++     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
++-	echo "$UNAME_MACHINE"-pc-bsdi"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-bsdi$UNAME_RELEASE
+++	;;
++     sparc*:BSD/OS:*:*)
++-	echo sparc-unknown-bsdi"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sparc-unknown-bsdi$UNAME_RELEASE
+++	;;
++     *:BSD/OS:*:*)
++-	echo "$UNAME_MACHINE"-unknown-bsdi"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-bsdi$UNAME_RELEASE
+++	;;
+++    arm:FreeBSD:*:*)
+++	UNAME_PROCESSOR=`uname -p`
+++	set_cc_for_build
+++	if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
+++	    | grep -q __ARM_PCS_VFP
+++	then
+++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabi
+++	else
+++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabihf
+++	fi
+++	;;
++     *:FreeBSD:*:*)
++-	UNAME_PROCESSOR=`/usr/bin/uname -p`
++-	case "$UNAME_PROCESSOR" in
+++	UNAME_PROCESSOR=`uname -p`
+++	case $UNAME_PROCESSOR in
++ 	    amd64)
++ 		UNAME_PROCESSOR=x86_64 ;;
++ 	    i386)
++ 		UNAME_PROCESSOR=i586 ;;
++ 	esac
++-	echo "$UNAME_PROCESSOR"-unknown-freebsd"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
++-	exit ;;
+++	FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL
+++	;;
++     i*:CYGWIN*:*)
++-	echo "$UNAME_MACHINE"-pc-cygwin
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-cygwin
+++	;;
++     *:MINGW64*:*)
++-	echo "$UNAME_MACHINE"-pc-mingw64
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-mingw64
+++	;;
++     *:MINGW*:*)
++-	echo "$UNAME_MACHINE"-pc-mingw32
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-mingw32
+++	;;
++     *:MSYS*:*)
++-	echo "$UNAME_MACHINE"-pc-msys
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-msys
+++	;;
++     i*:PW*:*)
++-	echo "$UNAME_MACHINE"-pc-pw32
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-pw32
+++	;;
+++    *:SerenityOS:*:*)
+++        GUESS=$UNAME_MACHINE-pc-serenity
+++        ;;
++     *:Interix*:*)
++-	case "$UNAME_MACHINE" in
+++	case $UNAME_MACHINE in
++ 	    x86)
++-		echo i586-pc-interix"$UNAME_RELEASE"
++-		exit ;;
+++		GUESS=i586-pc-interix$UNAME_RELEASE
+++		;;
++ 	    authenticamd | genuineintel | EM64T)
++-		echo x86_64-unknown-interix"$UNAME_RELEASE"
++-		exit ;;
+++		GUESS=x86_64-unknown-interix$UNAME_RELEASE
+++		;;
++ 	    IA64)
++-		echo ia64-unknown-interix"$UNAME_RELEASE"
++-		exit ;;
+++		GUESS=ia64-unknown-interix$UNAME_RELEASE
+++		;;
++ 	esac ;;
++     i*:UWIN*:*)
++-	echo "$UNAME_MACHINE"-pc-uwin
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-uwin
+++	;;
++     amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
++-	echo x86_64-unknown-cygwin
++-	exit ;;
+++	GUESS=x86_64-pc-cygwin
+++	;;
++     prep*:SunOS:5.*:*)
++-	echo powerpcle-unknown-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=powerpcle-unknown-solaris2$SUN_REL
+++	;;
++     *:GNU:*:*)
++ 	# the GNU system
++-	echo "`echo "$UNAME_MACHINE"|sed -e 's,[-/].*$,,'`-unknown-$LIBC`echo "$UNAME_RELEASE"|sed -e 's,/.*$,,'`"
++-	exit ;;
+++	GNU_ARCH=`echo "$UNAME_MACHINE" | sed -e 's,[-/].*$,,'`
+++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's,/.*$,,'`
+++	GUESS=$GNU_ARCH-unknown-$LIBC$GNU_REL
+++	;;
++     *:GNU/*:*:*)
++ 	# other systems with GNU libc and userland
++-	echo "$UNAME_MACHINE-unknown-`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"``echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`-$LIBC"
++-	exit ;;
++-    i*86:Minix:*:*)
++-	echo "$UNAME_MACHINE"-pc-minix
++-	exit ;;
+++	GNU_SYS=`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"`
+++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	GUESS=$UNAME_MACHINE-unknown-$GNU_SYS$GNU_REL-$LIBC
+++	;;
+++    x86_64:[Mm]anagarm:*:*|i?86:[Mm]anagarm:*:*)
+++	GUESS="$UNAME_MACHINE-pc-managarm-mlibc"
+++	;;
+++    *:[Mm]anagarm:*:*)
+++	GUESS="$UNAME_MACHINE-unknown-managarm-mlibc"
+++	;;
+++    *:Minix:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-minix
+++	;;
++     aarch64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	set_cc_for_build
+++	CPU=$UNAME_MACHINE
+++	LIBCABI=$LIBC
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+++	    ABI=64
+++	    sed 's/^	    //' << EOF > "$dummy.c"
+++	    #ifdef __ARM_EABI__
+++	    #ifdef __ARM_PCS_VFP
+++	    ABI=eabihf
+++	    #else
+++	    ABI=eabi
+++	    #endif
+++	    #endif
+++EOF
+++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
+++	    eval "$cc_set_abi"
+++	    case $ABI in
+++		eabi | eabihf) CPU=armv8l; LIBCABI=$LIBC$ABI ;;
+++	    esac
+++	fi
+++	GUESS=$CPU-unknown-linux-$LIBCABI
+++	;;
++     aarch64_be:Linux:*:*)
++ 	UNAME_MACHINE=aarch64_be
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     alpha:Linux:*:*)
++-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+++	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' /proc/cpuinfo 2>/dev/null` in
++ 	  EV5)   UNAME_MACHINE=alphaev5 ;;
++ 	  EV56)  UNAME_MACHINE=alphaev56 ;;
++ 	  PCA56) UNAME_MACHINE=alphapca56 ;;
++@@ -916,183 +1022,245 @@ EOF
++ 	esac
++ 	objdump --private-headers /bin/sh | grep -q ld.so.1
++ 	if test "$?" = 0 ; then LIBC=gnulibc1 ; fi
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
++-    arc:Linux:*:* | arceb:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
+++    arc:Linux:*:* | arceb:Linux:*:* | arc32:Linux:*:* | arc64:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     arm*:Linux:*:*)
++-	eval "$set_cc_for_build"
+++	set_cc_for_build
++ 	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
++ 	    | grep -q __ARM_EABI__
++ 	then
++-	    echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+++	    GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++ 	else
++ 	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
++ 		| grep -q __ARM_PCS_VFP
++ 	    then
++-		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabi
+++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabi
++ 	    else
++-		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabihf
+++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabihf
++ 	    fi
++ 	fi
++-	exit ;;
+++	;;
++     avr32*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     cris:Linux:*:*)
++-	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
+++	;;
++     crisv32:Linux:*:*)
++-	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
+++	;;
++     e2k:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     frv:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     hexagon:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     i*86:Linux:*:*)
++-	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-linux-$LIBC
+++	;;
++     ia64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     k1om:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
+++    kvx:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
+++    kvx:cos:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-cos
+++	;;
+++    kvx:mbr:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-mbr
+++	;;
+++    loongarch32:Linux:*:* | loongarch64:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     m32r*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     m68*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     mips:Linux:*:* | mips64:Linux:*:*)
++-	eval "$set_cc_for_build"
+++	set_cc_for_build
+++	IS_GLIBC=0
+++	test x"${LIBC}" = xgnu && IS_GLIBC=1
++ 	sed 's/^	//' << EOF > "$dummy.c"
++ 	#undef CPU
++-	#undef ${UNAME_MACHINE}
++-	#undef ${UNAME_MACHINE}el
+++	#undef mips
+++	#undef mipsel
+++	#undef mips64
+++	#undef mips64el
+++	#if ${IS_GLIBC} && defined(_ABI64)
+++	LIBCABI=gnuabi64
+++	#else
+++	#if ${IS_GLIBC} && defined(_ABIN32)
+++	LIBCABI=gnuabin32
+++	#else
+++	LIBCABI=${LIBC}
+++	#endif
+++	#endif
+++
+++	#if ${IS_GLIBC} && defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+++	CPU=mipsisa64r6
+++	#else
+++	#if ${IS_GLIBC} && !defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+++	CPU=mipsisa32r6
+++	#else
+++	#if defined(__mips64)
+++	CPU=mips64
+++	#else
+++	CPU=mips
+++	#endif
+++	#endif
+++	#endif
+++
++ 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
++-	CPU=${UNAME_MACHINE}el
+++	MIPS_ENDIAN=el
++ 	#else
++ 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
++-	CPU=${UNAME_MACHINE}
+++	MIPS_ENDIAN=
++ 	#else
++-	CPU=
+++	MIPS_ENDIAN=
++ 	#endif
++ 	#endif
++ EOF
++-	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU'`"
++-	test "x$CPU" != x && { echo "$CPU-unknown-linux-$LIBC"; exit; }
+++	cc_set_vars=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI'`
+++	eval "$cc_set_vars"
+++	test "x$CPU" != x && { echo "$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI"; exit; }
++ 	;;
++     mips64el:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     openrisc*:Linux:*:*)
++-	echo or1k-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=or1k-unknown-linux-$LIBC
+++	;;
++     or32:Linux:*:* | or1k*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     padre:Linux:*:*)
++-	echo sparc-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=sparc-unknown-linux-$LIBC
+++	;;
++     parisc64:Linux:*:* | hppa64:Linux:*:*)
++-	echo hppa64-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=hppa64-unknown-linux-$LIBC
+++	;;
++     parisc:Linux:*:* | hppa:Linux:*:*)
++ 	# Look for CPU level
++ 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
++-	  PA7*) echo hppa1.1-unknown-linux-"$LIBC" ;;
++-	  PA8*) echo hppa2.0-unknown-linux-"$LIBC" ;;
++-	  *)    echo hppa-unknown-linux-"$LIBC" ;;
+++	  PA7*) GUESS=hppa1.1-unknown-linux-$LIBC ;;
+++	  PA8*) GUESS=hppa2.0-unknown-linux-$LIBC ;;
+++	  *)    GUESS=hppa-unknown-linux-$LIBC ;;
++ 	esac
++-	exit ;;
+++	;;
++     ppc64:Linux:*:*)
++-	echo powerpc64-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpc64-unknown-linux-$LIBC
+++	;;
++     ppc:Linux:*:*)
++-	echo powerpc-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpc-unknown-linux-$LIBC
+++	;;
++     ppc64le:Linux:*:*)
++-	echo powerpc64le-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpc64le-unknown-linux-$LIBC
+++	;;
++     ppcle:Linux:*:*)
++-	echo powerpcle-unknown-linux-"$LIBC"
++-	exit ;;
++-    riscv32:Linux:*:* | riscv64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpcle-unknown-linux-$LIBC
+++	;;
+++    riscv32:Linux:*:* | riscv32be:Linux:*:* | riscv64:Linux:*:* | riscv64be:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     s390:Linux:*:* | s390x:Linux:*:*)
++-	echo "$UNAME_MACHINE"-ibm-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-ibm-linux-$LIBC
+++	;;
++     sh64*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     sh*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     sparc:Linux:*:* | sparc64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     tile*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     vax:Linux:*:*)
++-	echo "$UNAME_MACHINE"-dec-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-dec-linux-$LIBC
+++	;;
++     x86_64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
++-	exit ;;
+++	set_cc_for_build
+++	CPU=$UNAME_MACHINE
+++	LIBCABI=$LIBC
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+++	    ABI=64
+++	    sed 's/^	    //' << EOF > "$dummy.c"
+++	    #ifdef __i386__
+++	    ABI=x86
+++	    #else
+++	    #ifdef __ILP32__
+++	    ABI=x32
+++	    #endif
+++	    #endif
+++EOF
+++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
+++	    eval "$cc_set_abi"
+++	    case $ABI in
+++		x86) CPU=i686 ;;
+++		x32) LIBCABI=${LIBC}x32 ;;
+++	    esac
+++	fi
+++	GUESS=$CPU-pc-linux-$LIBCABI
+++	;;
++     xtensa*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     i*86:DYNIX/ptx:4*:*)
++ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
++ 	# earlier versions are messed up and put the nodename in both
++ 	# sysname and nodename.
++-	echo i386-sequent-sysv4
++-	exit ;;
+++	GUESS=i386-sequent-sysv4
+++	;;
++     i*86:UNIX_SV:4.2MP:2.*)
++ 	# Unixware is an offshoot of SVR4, but it has its own version
++ 	# number series starting with 2...
++ 	# I am not positive that other SVR4 systems won't match this,
++ 	# I just have to hope.  -- rms.
++ 	# Use sysv4.2uw... so that sysv4* matches it.
++-	echo "$UNAME_MACHINE"-pc-sysv4.2uw"$UNAME_VERSION"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-sysv4.2uw$UNAME_VERSION
+++	;;
++     i*86:OS/2:*:*)
++-	# If we were able to find `uname', then EMX Unix compatibility
+++	# If we were able to find 'uname', then EMX Unix compatibility
++ 	# is probably installed.
++-	echo "$UNAME_MACHINE"-pc-os2-emx
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-os2-emx
+++	;;
++     i*86:XTS-300:*:STOP)
++-	echo "$UNAME_MACHINE"-unknown-stop
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-stop
+++	;;
++     i*86:atheos:*:*)
++-	echo "$UNAME_MACHINE"-unknown-atheos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-atheos
+++	;;
++     i*86:syllable:*:*)
++-	echo "$UNAME_MACHINE"-pc-syllable
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-syllable
+++	;;
++     i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
++-	echo i386-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=i386-unknown-lynxos$UNAME_RELEASE
+++	;;
++     i*86:*DOS:*:*)
++-	echo "$UNAME_MACHINE"-pc-msdosdjgpp
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-msdosdjgpp
+++	;;
++     i*86:*:4.*:*)
++ 	UNAME_REL=`echo "$UNAME_RELEASE" | sed 's/\/MP$//'`
++ 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
++-		echo "$UNAME_MACHINE"-univel-sysv"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-univel-sysv$UNAME_REL
++ 	else
++-		echo "$UNAME_MACHINE"-pc-sysv"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-pc-sysv$UNAME_REL
++ 	fi
++-	exit ;;
+++	;;
++     i*86:*:5:[678]*)
++ 	# UnixWare 7.x, OpenUNIX and OpenServer 6.
++ 	case `/bin/uname -X | grep "^Machine"` in
++@@ -1100,12 +1268,12 @@ EOF
++ 	    *Pentium)	     UNAME_MACHINE=i586 ;;
++ 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
++ 	esac
++-	echo "$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}{$UNAME_VERSION}"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
+++	;;
++     i*86:*:3.2:*)
++ 	if test -f /usr/options/cb.name; then
++ 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
++-		echo "$UNAME_MACHINE"-pc-isc"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-pc-isc$UNAME_REL
++ 	elif /bin/uname -X 2>/dev/null >/dev/null ; then
++ 		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
++ 		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
++@@ -1115,11 +1283,11 @@ EOF
++ 			&& UNAME_MACHINE=i686
++ 		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
++ 			&& UNAME_MACHINE=i686
++-		echo "$UNAME_MACHINE"-pc-sco"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-pc-sco$UNAME_REL
++ 	else
++-		echo "$UNAME_MACHINE"-pc-sysv32
+++		GUESS=$UNAME_MACHINE-pc-sysv32
++ 	fi
++-	exit ;;
+++	;;
++     pc:*:*:*)
++ 	# Left here for compatibility:
++ 	# uname -m prints for DJGPP always 'pc', but it prints nothing about
++@@ -1127,31 +1295,31 @@ EOF
++ 	# Note: whatever this is, it MUST be the same as what config.sub
++ 	# prints for the "djgpp" host, or else GDB configure will decide that
++ 	# this is a cross-build.
++-	echo i586-pc-msdosdjgpp
++-	exit ;;
+++	GUESS=i586-pc-msdosdjgpp
+++	;;
++     Intel:Mach:3*:*)
++-	echo i386-pc-mach3
++-	exit ;;
+++	GUESS=i386-pc-mach3
+++	;;
++     paragon:*:*:*)
++-	echo i860-intel-osf1
++-	exit ;;
+++	GUESS=i860-intel-osf1
+++	;;
++     i860:*:4.*:*) # i860-SVR4
++ 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
++-	  echo i860-stardent-sysv"$UNAME_RELEASE" # Stardent Vistra i860-SVR4
+++	  GUESS=i860-stardent-sysv$UNAME_RELEASE    # Stardent Vistra i860-SVR4
++ 	else # Add other i860-SVR4 vendors below as they are discovered.
++-	  echo i860-unknown-sysv"$UNAME_RELEASE"  # Unknown i860-SVR4
+++	  GUESS=i860-unknown-sysv$UNAME_RELEASE     # Unknown i860-SVR4
++ 	fi
++-	exit ;;
+++	;;
++     mini*:CTIX:SYS*5:*)
++ 	# "miniframe"
++-	echo m68010-convergent-sysv
++-	exit ;;
+++	GUESS=m68010-convergent-sysv
+++	;;
++     mc68k:UNIX:SYSTEM5:3.51m)
++-	echo m68k-convergent-sysv
++-	exit ;;
+++	GUESS=m68k-convergent-sysv
+++	;;
++     M680?0:D-NIX:5.3:*)
++-	echo m68k-diab-dnix
++-	exit ;;
+++	GUESS=m68k-diab-dnix
+++	;;
++     M68*:*:R3V[5678]*:*)
++ 	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
++     3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
++@@ -1176,249 +1344,411 @@ EOF
++ 	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
++ 	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
++     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
++-	echo m68k-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-unknown-lynxos$UNAME_RELEASE
+++	;;
++     mc68030:UNIX_System_V:4.*:*)
++-	echo m68k-atari-sysv4
++-	exit ;;
+++	GUESS=m68k-atari-sysv4
+++	;;
++     TSUNAMI:LynxOS:2.*:*)
++-	echo sparc-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sparc-unknown-lynxos$UNAME_RELEASE
+++	;;
++     rs6000:LynxOS:2.*:*)
++-	echo rs6000-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=rs6000-unknown-lynxos$UNAME_RELEASE
+++	;;
++     PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
++-	echo powerpc-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-unknown-lynxos$UNAME_RELEASE
+++	;;
++     SM[BE]S:UNIX_SV:*:*)
++-	echo mips-dde-sysv"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-dde-sysv$UNAME_RELEASE
+++	;;
++     RM*:ReliantUNIX-*:*:*)
++-	echo mips-sni-sysv4
++-	exit ;;
+++	GUESS=mips-sni-sysv4
+++	;;
++     RM*:SINIX-*:*:*)
++-	echo mips-sni-sysv4
++-	exit ;;
+++	GUESS=mips-sni-sysv4
+++	;;
++     *:SINIX-*:*:*)
++ 	if uname -p 2>/dev/null >/dev/null ; then
++ 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
++-		echo "$UNAME_MACHINE"-sni-sysv4
+++		GUESS=$UNAME_MACHINE-sni-sysv4
++ 	else
++-		echo ns32k-sni-sysv
+++		GUESS=ns32k-sni-sysv
++ 	fi
++-	exit ;;
++-    PENTIUM:*:4.0*:*)	# Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+++	;;
+++    PENTIUM:*:4.0*:*)	# Unisys 'ClearPath HMP IX 4000' SVR4/MP effort
++ 			# says <Richard.M.Bartel@ccMail.Census.GOV>
++-	echo i586-unisys-sysv4
++-	exit ;;
+++	GUESS=i586-unisys-sysv4
+++	;;
++     *:UNIX_System_V:4*:FTX*)
++ 	# From Gerald Hewes <hewes@openmarket.com>.
++ 	# How about differentiating between stratus architectures? -djm
++-	echo hppa1.1-stratus-sysv4
++-	exit ;;
+++	GUESS=hppa1.1-stratus-sysv4
+++	;;
++     *:*:*:FTX*)
++ 	# From seanf@swdc.stratus.com.
++-	echo i860-stratus-sysv4
++-	exit ;;
+++	GUESS=i860-stratus-sysv4
+++	;;
++     i*86:VOS:*:*)
++ 	# From Paul.Green@stratus.com.
++-	echo "$UNAME_MACHINE"-stratus-vos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-stratus-vos
+++	;;
++     *:VOS:*:*)
++ 	# From Paul.Green@stratus.com.
++-	echo hppa1.1-stratus-vos
++-	exit ;;
+++	GUESS=hppa1.1-stratus-vos
+++	;;
++     mc68*:A/UX:*:*)
++-	echo m68k-apple-aux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-apple-aux$UNAME_RELEASE
+++	;;
++     news*:NEWS-OS:6*:*)
++-	echo mips-sony-newsos6
++-	exit ;;
+++	GUESS=mips-sony-newsos6
+++	;;
++     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
++-	if [ -d /usr/nec ]; then
++-		echo mips-nec-sysv"$UNAME_RELEASE"
+++	if test -d /usr/nec; then
+++		GUESS=mips-nec-sysv$UNAME_RELEASE
++ 	else
++-		echo mips-unknown-sysv"$UNAME_RELEASE"
+++		GUESS=mips-unknown-sysv$UNAME_RELEASE
++ 	fi
++-	exit ;;
+++	;;
++     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
++-	echo powerpc-be-beos
++-	exit ;;
+++	GUESS=powerpc-be-beos
+++	;;
++     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
++-	echo powerpc-apple-beos
++-	exit ;;
+++	GUESS=powerpc-apple-beos
+++	;;
++     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
++-	echo i586-pc-beos
++-	exit ;;
+++	GUESS=i586-pc-beos
+++	;;
++     BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
++-	echo i586-pc-haiku
++-	exit ;;
++-    x86_64:Haiku:*:*)
++-	echo x86_64-unknown-haiku
++-	exit ;;
+++	GUESS=i586-pc-haiku
+++	;;
+++    ppc:Haiku:*:*)	# Haiku running on Apple PowerPC
+++	GUESS=powerpc-apple-haiku
+++	;;
+++    *:Haiku:*:*)	# Haiku modern gcc (not bound by BeOS compat)
+++	GUESS=$UNAME_MACHINE-unknown-haiku
+++	;;
++     SX-4:SUPER-UX:*:*)
++-	echo sx4-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx4-nec-superux$UNAME_RELEASE
+++	;;
++     SX-5:SUPER-UX:*:*)
++-	echo sx5-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx5-nec-superux$UNAME_RELEASE
+++	;;
++     SX-6:SUPER-UX:*:*)
++-	echo sx6-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx6-nec-superux$UNAME_RELEASE
+++	;;
++     SX-7:SUPER-UX:*:*)
++-	echo sx7-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx7-nec-superux$UNAME_RELEASE
+++	;;
++     SX-8:SUPER-UX:*:*)
++-	echo sx8-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx8-nec-superux$UNAME_RELEASE
+++	;;
++     SX-8R:SUPER-UX:*:*)
++-	echo sx8r-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx8r-nec-superux$UNAME_RELEASE
+++	;;
++     SX-ACE:SUPER-UX:*:*)
++-	echo sxace-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sxace-nec-superux$UNAME_RELEASE
+++	;;
++     Power*:Rhapsody:*:*)
++-	echo powerpc-apple-rhapsody"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-apple-rhapsody$UNAME_RELEASE
+++	;;
++     *:Rhapsody:*:*)
++-	echo "$UNAME_MACHINE"-apple-rhapsody"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-apple-rhapsody$UNAME_RELEASE
+++	;;
+++    arm64:Darwin:*:*)
+++	GUESS=aarch64-apple-darwin$UNAME_RELEASE
+++	;;
++     *:Darwin:*:*)
++-	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
++-	eval "$set_cc_for_build"
++-	if test "$UNAME_PROCESSOR" = unknown ; then
++-	    UNAME_PROCESSOR=powerpc
+++	UNAME_PROCESSOR=`uname -p`
+++	case $UNAME_PROCESSOR in
+++	    unknown) UNAME_PROCESSOR=powerpc ;;
+++	esac
+++	if command -v xcode-select > /dev/null 2> /dev/null && \
+++		! xcode-select --print-path > /dev/null 2> /dev/null ; then
+++	    # Avoid executing cc if there is no toolchain installed as
+++	    # cc will be a stub that puts up a graphical alert
+++	    # prompting the user to install developer tools.
+++	    CC_FOR_BUILD=no_compiler_found
+++	else
+++	    set_cc_for_build
++ 	fi
++-	if test "`echo "$UNAME_RELEASE" | sed -e 's/\..*//'`" -le 10 ; then
++-	    if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
++-		if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
++-		       (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++-		       grep IS_64BIT_ARCH >/dev/null
++-		then
++-		    case $UNAME_PROCESSOR in
++-			i386) UNAME_PROCESSOR=x86_64 ;;
++-			powerpc) UNAME_PROCESSOR=powerpc64 ;;
++-		    esac
++-		fi
++-		# On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
++-		if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
++-		       (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++-		       grep IS_PPC >/dev/null
++-		then
++-		    UNAME_PROCESSOR=powerpc
++-		fi
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+++	    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		   grep IS_64BIT_ARCH >/dev/null
+++	    then
+++		case $UNAME_PROCESSOR in
+++		    i386) UNAME_PROCESSOR=x86_64 ;;
+++		    powerpc) UNAME_PROCESSOR=powerpc64 ;;
+++		esac
+++	    fi
+++	    # On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
+++	    if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
+++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		   grep IS_PPC >/dev/null
+++	    then
+++		UNAME_PROCESSOR=powerpc
++ 	    fi
++ 	elif test "$UNAME_PROCESSOR" = i386 ; then
++-	    # Avoid executing cc on OS X 10.9, as it ships with a stub
++-	    # that puts up a graphical alert prompting to install
++-	    # developer tools.  Any system running Mac OS X 10.7 or
++-	    # later (Darwin 11 and later) is required to have a 64-bit
++-	    # processor. This is not true of the ARM version of Darwin
++-	    # that Apple uses in portable devices.
++-	    UNAME_PROCESSOR=x86_64
+++	    # uname -m returns i386 or x86_64
+++	    UNAME_PROCESSOR=$UNAME_MACHINE
++ 	fi
++-	echo "$UNAME_PROCESSOR"-apple-darwin"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_PROCESSOR-apple-darwin$UNAME_RELEASE
+++	;;
++     *:procnto*:*:* | *:QNX:[0123456789]*:*)
++ 	UNAME_PROCESSOR=`uname -p`
++ 	if test "$UNAME_PROCESSOR" = x86; then
++ 		UNAME_PROCESSOR=i386
++ 		UNAME_MACHINE=pc
++ 	fi
++-	echo "$UNAME_PROCESSOR"-"$UNAME_MACHINE"-nto-qnx"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_PROCESSOR-$UNAME_MACHINE-nto-qnx$UNAME_RELEASE
+++	;;
++     *:QNX:*:4*)
++-	echo i386-pc-qnx
++-	exit ;;
+++	GUESS=i386-pc-qnx
+++	;;
++     NEO-*:NONSTOP_KERNEL:*:*)
++-	echo neo-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=neo-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSE-*:NONSTOP_KERNEL:*:*)
++-	echo nse-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nse-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSR-*:NONSTOP_KERNEL:*:*)
++-	echo nsr-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nsr-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSV-*:NONSTOP_KERNEL:*:*)
++-	echo nsv-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nsv-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSX-*:NONSTOP_KERNEL:*:*)
++-	echo nsx-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nsx-tandem-nsk$UNAME_RELEASE
+++	;;
++     *:NonStop-UX:*:*)
++-	echo mips-compaq-nonstopux
++-	exit ;;
+++	GUESS=mips-compaq-nonstopux
+++	;;
++     BS2000:POSIX*:*:*)
++-	echo bs2000-siemens-sysv
++-	exit ;;
+++	GUESS=bs2000-siemens-sysv
+++	;;
++     DS/*:UNIX_System_V:*:*)
++-	echo "$UNAME_MACHINE"-"$UNAME_SYSTEM"-"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-$UNAME_SYSTEM-$UNAME_RELEASE
+++	;;
++     *:Plan9:*:*)
++ 	# "uname -m" is not consistent, so use $cputype instead. 386
++ 	# is converted to i386 for consistency with other x86
++ 	# operating systems.
++-	if test "$cputype" = 386; then
+++	if test "${cputype-}" = 386; then
++ 	    UNAME_MACHINE=i386
++-	else
++-	    UNAME_MACHINE="$cputype"
+++	elif test "x${cputype-}" != x; then
+++	    UNAME_MACHINE=$cputype
++ 	fi
++-	echo "$UNAME_MACHINE"-unknown-plan9
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-plan9
+++	;;
++     *:TOPS-10:*:*)
++-	echo pdp10-unknown-tops10
++-	exit ;;
+++	GUESS=pdp10-unknown-tops10
+++	;;
++     *:TENEX:*:*)
++-	echo pdp10-unknown-tenex
++-	exit ;;
+++	GUESS=pdp10-unknown-tenex
+++	;;
++     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
++-	echo pdp10-dec-tops20
++-	exit ;;
+++	GUESS=pdp10-dec-tops20
+++	;;
++     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
++-	echo pdp10-xkl-tops20
++-	exit ;;
+++	GUESS=pdp10-xkl-tops20
+++	;;
++     *:TOPS-20:*:*)
++-	echo pdp10-unknown-tops20
++-	exit ;;
+++	GUESS=pdp10-unknown-tops20
+++	;;
++     *:ITS:*:*)
++-	echo pdp10-unknown-its
++-	exit ;;
+++	GUESS=pdp10-unknown-its
+++	;;
++     SEI:*:*:SEIUX)
++-	echo mips-sei-seiux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-sei-seiux$UNAME_RELEASE
+++	;;
++     *:DragonFly:*:*)
++-	echo "$UNAME_MACHINE"-unknown-dragonfly"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
++-	exit ;;
+++	DRAGONFLY_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	GUESS=$UNAME_MACHINE-unknown-dragonfly$DRAGONFLY_REL
+++	;;
++     *:*VMS:*:*)
++ 	UNAME_MACHINE=`(uname -p) 2>/dev/null`
++-	case "$UNAME_MACHINE" in
++-	    A*) echo alpha-dec-vms ; exit ;;
++-	    I*) echo ia64-dec-vms ; exit ;;
++-	    V*) echo vax-dec-vms ; exit ;;
+++	case $UNAME_MACHINE in
+++	    A*) GUESS=alpha-dec-vms ;;
+++	    I*) GUESS=ia64-dec-vms ;;
+++	    V*) GUESS=vax-dec-vms ;;
++ 	esac ;;
++     *:XENIX:*:SysV)
++-	echo i386-pc-xenix
++-	exit ;;
+++	GUESS=i386-pc-xenix
+++	;;
++     i*86:skyos:*:*)
++-	echo "$UNAME_MACHINE"-pc-skyos"`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`"
++-	exit ;;
+++	SKYOS_REL=`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`
+++	GUESS=$UNAME_MACHINE-pc-skyos$SKYOS_REL
+++	;;
++     i*86:rdos:*:*)
++-	echo "$UNAME_MACHINE"-pc-rdos
++-	exit ;;
++-    i*86:AROS:*:*)
++-	echo "$UNAME_MACHINE"-pc-aros
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-rdos
+++	;;
+++    i*86:Fiwix:*:*)
+++	GUESS=$UNAME_MACHINE-pc-fiwix
+++	;;
+++    *:AROS:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-aros
+++	;;
++     x86_64:VMkernel:*:*)
++-	echo "$UNAME_MACHINE"-unknown-esx
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-esx
+++	;;
++     amd64:Isilon\ OneFS:*:*)
++-	echo x86_64-unknown-onefs
++-	exit ;;
+++	GUESS=x86_64-unknown-onefs
+++	;;
+++    *:Unleashed:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-unleashed$UNAME_RELEASE
+++	;;
+++    *:Ironclad:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-ironclad
+++	;;
++ esac
++ 
+++# Do we have a guess based on uname results?
+++if test "x$GUESS" != x; then
+++    echo "$GUESS"
+++    exit
+++fi
+++
+++# No uname command or uname output not recognized.
+++set_cc_for_build
+++cat > "$dummy.c" <<EOF
+++#ifdef _SEQUENT_
+++#include <sys/types.h>
+++#include <sys/utsname.h>
+++#endif
+++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+++#if defined (vax) || defined (__vax) || defined (__vax__) || defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+++#include <signal.h>
+++#if defined(_SIZE_T_) || defined(SIGLOST)
+++#include <sys/utsname.h>
+++#endif
+++#endif
+++#endif
+++int
+++main ()
+++{
+++#if defined (sony)
+++#if defined (MIPSEB)
+++  /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
+++     I don't know....  */
+++  printf ("mips-sony-bsd\n"); exit (0);
+++#else
+++#include <sys/param.h>
+++  printf ("m68k-sony-newsos%s\n",
+++#ifdef NEWSOS4
+++  "4"
+++#else
+++  ""
+++#endif
+++  ); exit (0);
+++#endif
+++#endif
+++
+++#if defined (NeXT)
+++#if !defined (__ARCHITECTURE__)
+++#define __ARCHITECTURE__ "m68k"
+++#endif
+++  int version;
+++  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
+++  if (version < 4)
+++    printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
+++  else
+++    printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
+++  exit (0);
+++#endif
+++
+++#if defined (MULTIMAX) || defined (n16)
+++#if defined (UMAXV)
+++  printf ("ns32k-encore-sysv\n"); exit (0);
+++#else
+++#if defined (CMU)
+++  printf ("ns32k-encore-mach\n"); exit (0);
+++#else
+++  printf ("ns32k-encore-bsd\n"); exit (0);
+++#endif
+++#endif
+++#endif
+++
+++#if defined (__386BSD__)
+++  printf ("i386-pc-bsd\n"); exit (0);
+++#endif
+++
+++#if defined (sequent)
+++#if defined (i386)
+++  printf ("i386-sequent-dynix\n"); exit (0);
+++#endif
+++#if defined (ns32000)
+++  printf ("ns32k-sequent-dynix\n"); exit (0);
+++#endif
+++#endif
+++
+++#if defined (_SEQUENT_)
+++  struct utsname un;
+++
+++  uname(&un);
+++  if (strncmp(un.version, "V2", 2) == 0) {
+++    printf ("i386-sequent-ptx2\n"); exit (0);
+++  }
+++  if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
+++    printf ("i386-sequent-ptx1\n"); exit (0);
+++  }
+++  printf ("i386-sequent-ptx\n"); exit (0);
+++#endif
+++
+++#if defined (vax)
+++#if !defined (ultrix)
+++#include <sys/param.h>
+++#if defined (BSD)
+++#if BSD == 43
+++  printf ("vax-dec-bsd4.3\n"); exit (0);
+++#else
+++#if BSD == 199006
+++  printf ("vax-dec-bsd4.3reno\n"); exit (0);
+++#else
+++  printf ("vax-dec-bsd\n"); exit (0);
+++#endif
+++#endif
+++#else
+++  printf ("vax-dec-bsd\n"); exit (0);
+++#endif
+++#else
+++#if defined(_SIZE_T_) || defined(SIGLOST)
+++  struct utsname un;
+++  uname (&un);
+++  printf ("vax-dec-ultrix%s\n", un.release); exit (0);
+++#else
+++  printf ("vax-dec-ultrix\n"); exit (0);
+++#endif
+++#endif
+++#endif
+++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+++#if defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+++#if defined(_SIZE_T_) || defined(SIGLOST)
+++  struct utsname *un;
+++  uname (&un);
+++  printf ("mips-dec-ultrix%s\n", un.release); exit (0);
+++#else
+++  printf ("mips-dec-ultrix\n"); exit (0);
+++#endif
+++#endif
+++#endif
+++
+++#if defined (alliant) && defined (i860)
+++  printf ("i860-alliant-bsd\n"); exit (0);
+++#endif
+++
+++  exit (1);
+++}
+++EOF
+++
+++$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=`"$dummy"` &&
+++	{ echo "$SYSTEM_NAME"; exit; }
+++
+++# Apollos put the system type in the environment.
+++test -d /usr/apollo && { echo "$ISP-apollo-$SYSTYPE"; exit; }
+++
++ echo "$0: unable to guess system type" >&2
++ 
++-case "$UNAME_MACHINE:$UNAME_SYSTEM" in
+++case $UNAME_MACHINE:$UNAME_SYSTEM in
++     mips:Linux | mips64:Linux)
++ 	# If we got here on MIPS GNU/Linux, output extra information.
++ 	cat >&2 <<EOF
++@@ -1435,9 +1765,17 @@ This script (version $timestamp), has failed to recognize the
++ operating system you are using. If your script is old, overwrite *all*
++ copies of config.guess and config.sub with the latest versions from:
++ 
++-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
+++  https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
++ and
++-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
+++  https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
+++EOF
+++
+++our_year=`echo $timestamp | sed 's,-.*,,'`
+++thisyear=`date +%Y`
+++# shellcheck disable=SC2003
+++script_age=`expr "$thisyear" - "$our_year"`
+++if test "$script_age" -lt 3 ; then
+++   cat >&2 <<EOF
++ 
++ If $0 has already been updated, send the following data and any
++ information you think might be pertinent to config-patches@gnu.org to
++@@ -1465,6 +1803,7 @@ UNAME_RELEASE = "$UNAME_RELEASE"
++ UNAME_SYSTEM  = "$UNAME_SYSTEM"
++ UNAME_VERSION = "$UNAME_VERSION"
++ EOF
+++fi
++ 
++ exit 1
++ 
++diff --git a/config.sub b/config.sub
++index 20f7cf2..4aaae46 100755
++--- a/config.sub
+++++ b/config.sub
++@@ -1,12 +1,14 @@
++ #! /bin/sh
++ # Configuration validation subroutine script.
++-#   Copyright 1992-2018 Free Software Foundation, Inc.
+++#   Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++-timestamp='2018-05-05'
+++# shellcheck disable=SC2006,SC2268,SC2162 # see below for rationale
+++
+++timestamp='2024-05-27'
++ 
++ # This file is free software; you can redistribute it and/or modify it
++ # under the terms of the GNU General Public License as published by
++-# the Free Software Foundation; either version 3 of the License, or
+++# the Free Software Foundation, either version 3 of the License, or
++ # (at your option) any later version.
++ #
++ # This program is distributed in the hope that it will be useful, but
++@@ -33,7 +35,7 @@ timestamp='2018-05-05'
++ # Otherwise, we print the canonical config type on stdout and succeed.
++ 
++ # You can get the latest version of this script from:
++-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
+++# https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
++ 
++ # This file is supposed to be the same for all GNU packages
++ # and recognize all the CPU types, system types and aliases
++@@ -50,6 +52,13 @@ timestamp='2018-05-05'
++ #	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
++ # It is wrong to echo any other type of specification.
++ 
+++# The "shellcheck disable" line above the timestamp inhibits complaints
+++# about features and limitations of the classic Bourne shell that were
+++# superseded or lifted in POSIX.  However, this script identifies a wide
+++# variety of pre-POSIX systems that do not have POSIX shells at all, and
+++# even some reasonably current systems (Solaris 10 as case-in-point) still
+++# have a pre-POSIX /bin/sh.
+++
++ me=`echo "$0" | sed -e 's,.*/,,'`
++ 
++ usage="\
++@@ -67,13 +76,13 @@ Report bugs and patches to <config-patches@gnu.org>."
++ version="\
++ GNU config.sub ($timestamp)
++ 
++-Copyright 1992-2018 Free Software Foundation, Inc.
+++Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++ 
++ help="
++-Try \`$me --help' for more information."
+++Try '$me --help' for more information."
++ 
++ # Parse command line
++ while test $# -gt 0 ; do
++@@ -89,7 +98,7 @@ while test $# -gt 0 ; do
++     - )	# Use stdin as input.
++        break ;;
++     -* )
++-       echo "$me: invalid option $1$help"
+++       echo "$me: invalid option $1$help" >&2
++        exit 1 ;;
++ 
++     *local*)
++@@ -110,1249 +119,1371 @@ case $# in
++     exit 1;;
++ esac
++ 
++-# Spilt fields of configuration type
++-IFS="-" read -r field1 field2 field3 field4 <<EOF
+++# Split fields of configuration type
+++saved_IFS=$IFS
+++IFS="-" read field1 field2 field3 field4 <<EOF
++ $1
++ EOF
+++IFS=$saved_IFS
++ 
++ # Separate into logical components for further validation
++ case $1 in
+++	*-*-*-*-*)
+++		echo "Invalid configuration '$1': more than four components" >&2
+++		exit 1
+++		;;
++ 	*-*-*-*)
++ 		basic_machine=$field1-$field2
++-		os=-$field3-$field4
+++		basic_os=$field3-$field4
++ 		;;
++ 	*-*-*)
++ 		# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two
++ 		# parts
++ 		maybe_os=$field2-$field3
++ 		case $maybe_os in
++-			nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc \
++-			| linux-newlib* | linux-musl* | linux-uclibc* | uclinux-uclibc* \
++-			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
++-			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
++-			| storm-chaos* | os2-emx* | rtmk-nova*)
+++			  cloudabi*-eabi* \
+++			| kfreebsd*-gnu* \
+++			| knetbsd*-gnu* \
+++			| kopensolaris*-gnu* \
+++			| linux-* \
+++			| managarm-* \
+++			| netbsd*-eabi* \
+++			| netbsd*-gnu* \
+++			| nto-qnx* \
+++			| os2-emx* \
+++			| rtmk-nova* \
+++			| storm-chaos* \
+++			| uclinux-gnu* \
+++			| uclinux-uclibc* \
+++			| windows-* )
++ 				basic_machine=$field1
++-				os=-$maybe_os
+++				basic_os=$maybe_os
++ 				;;
++ 			android-linux)
++ 				basic_machine=$field1-unknown
++-				os=-linux-android
+++				basic_os=linux-android
++ 				;;
++ 			*)
++ 				basic_machine=$field1-$field2
++-				os=-$field3
+++				basic_os=$field3
++ 				;;
++ 		esac
++ 		;;
++ 	*-*)
++-		basic_machine=$field1
++-		os=-$field2
+++		case $field1-$field2 in
+++			# Shorthands that happen to contain a single dash
+++			convex-c[12] | convex-c3[248])
+++				basic_machine=$field2-convex
+++				basic_os=
+++				;;
+++			decstation-3100)
+++				basic_machine=mips-dec
+++				basic_os=
+++				;;
+++			*-*)
+++				# Second component is usually, but not always the OS
+++				case $field2 in
+++					# Do not treat sunos as a manufacturer
+++					sun*os*)
+++						basic_machine=$field1
+++						basic_os=$field2
+++						;;
+++					# Manufacturers
+++					  3100* \
+++					| 32* \
+++					| 3300* \
+++					| 3600* \
+++					| 7300* \
+++					| acorn \
+++					| altos* \
+++					| apollo \
+++					| apple \
+++					| atari \
+++					| att* \
+++					| axis \
+++					| be \
+++					| bull \
+++					| cbm \
+++					| ccur \
+++					| cisco \
+++					| commodore \
+++					| convergent* \
+++					| convex* \
+++					| cray \
+++					| crds \
+++					| dec* \
+++					| delta* \
+++					| dg \
+++					| digital \
+++					| dolphin \
+++					| encore* \
+++					| gould \
+++					| harris \
+++					| highlevel \
+++					| hitachi* \
+++					| hp \
+++					| ibm* \
+++					| intergraph \
+++					| isi* \
+++					| knuth \
+++					| masscomp \
+++					| microblaze* \
+++					| mips* \
+++					| motorola* \
+++					| ncr* \
+++					| news \
+++					| next \
+++					| ns \
+++					| oki \
+++					| omron* \
+++					| pc533* \
+++					| rebel \
+++					| rom68k \
+++					| rombug \
+++					| semi \
+++					| sequent* \
+++					| siemens \
+++					| sgi* \
+++					| siemens \
+++					| sim \
+++					| sni \
+++					| sony* \
+++					| stratus \
+++					| sun \
+++					| sun[234]* \
+++					| tektronix \
+++					| tti* \
+++					| ultra \
+++					| unicom* \
+++					| wec \
+++					| winbond \
+++					| wrs)
+++						basic_machine=$field1-$field2
+++						basic_os=
+++						;;
+++					zephyr*)
+++						basic_machine=$field1-unknown
+++						basic_os=$field2
+++						;;
+++					*)
+++						basic_machine=$field1
+++						basic_os=$field2
+++						;;
+++				esac
+++			;;
+++		esac
++ 		;;
++ 	*)
++-		basic_machine=$1
++-		os=
++-		;;
++-esac
++-
++-### Let's recognize common machines as not being operating systems so
++-### that things like config.sub decstation-3100 work.  We also
++-### recognize some manufacturers as not being operating systems, so we
++-### can provide default operating systems below.
++-case $os in
++-	-sun*os*)
++-		# Prevent following clause from handling this invalid input.
++-		;;
++-	-dec* | -mips* | -sequent* | -encore* | -pc532* | -sgi* | -sony* | \
++-	-att* | -7300* | -3300* | -delta* | -motorola* | -sun[234]* | \
++-	-unicom* | -ibm* | -next | -hp | -isi* | -apollo | -altos* | \
++-	-convergent* | -ncr* | -news | -32* | -3600* | -3100* | -hitachi* |\
++-	-c[123]* | -convex* | -sun | -crds | -omron* | -dg | -ultra | -tti* | \
++-	-harris | -dolphin | -highlevel | -gould | -cbm | -ns | -masscomp | \
++-	-apple | -axis | -knuth | -cray | -microblaze*)
++-		os=
++-		basic_machine=$1
++-		;;
++-	-bluegene*)
++-		os=-cnk
++-		;;
++-	-sim | -cisco | -oki | -wec | -winbond)
++-		os=
++-		basic_machine=$1
++-		;;
++-	-scout)
++-		;;
++-	-wrs)
++-		os=-vxworks
++-		basic_machine=$1
++-		;;
++-	-chorusos*)
++-		os=-chorusos
++-		basic_machine=$1
++-		;;
++-	-chorusrdb)
++-		os=-chorusrdb
++-		basic_machine=$1
++-		;;
++-	-hiux*)
++-		os=-hiuxwe2
++-		;;
++-	-sco6)
++-		os=-sco5v6
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-sco5)
++-		os=-sco3.2v5
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-sco4)
++-		os=-sco3.2v4
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-sco3.2.[4-9]*)
++-		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-sco3.2v[4-9]*)
++-		# Don't forget version if it is 3.2v4 or newer.
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-sco5v6*)
++-		# Don't forget version if it is 3.2v4 or newer.
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-sco*)
++-		os=-sco3.2v2
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-udk*)
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-isc)
++-		os=-isc2.2
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-clix*)
++-		basic_machine=clipper-intergraph
++-		;;
++-	-isc*)
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-pc/'`
++-		;;
++-	-lynx*178)
++-		os=-lynxos178
++-		;;
++-	-lynx*5)
++-		os=-lynxos5
++-		;;
++-	-lynx*)
++-		os=-lynxos
++-		;;
++-	-ptx*)
++-		basic_machine=`echo "$1" | sed -e 's/86-.*/86-sequent/'`
++-		;;
++-	-psos*)
++-		os=-psos
++-		;;
++-	-mint | -mint[0-9]*)
++-		basic_machine=m68k-atari
++-		os=-mint
+++		# Convert single-component short-hands not valid as part of
+++		# multi-component configurations.
+++		case $field1 in
+++			386bsd)
+++				basic_machine=i386-pc
+++				basic_os=bsd
+++				;;
+++			a29khif)
+++				basic_machine=a29k-amd
+++				basic_os=udi
+++				;;
+++			adobe68k)
+++				basic_machine=m68010-adobe
+++				basic_os=scout
+++				;;
+++			alliant)
+++				basic_machine=fx80-alliant
+++				basic_os=
+++				;;
+++			altos | altos3068)
+++				basic_machine=m68k-altos
+++				basic_os=
+++				;;
+++			am29k)
+++				basic_machine=a29k-none
+++				basic_os=bsd
+++				;;
+++			amdahl)
+++				basic_machine=580-amdahl
+++				basic_os=sysv
+++				;;
+++			amiga)
+++				basic_machine=m68k-unknown
+++				basic_os=
+++				;;
+++			amigaos | amigados)
+++				basic_machine=m68k-unknown
+++				basic_os=amigaos
+++				;;
+++			amigaunix | amix)
+++				basic_machine=m68k-unknown
+++				basic_os=sysv4
+++				;;
+++			apollo68)
+++				basic_machine=m68k-apollo
+++				basic_os=sysv
+++				;;
+++			apollo68bsd)
+++				basic_machine=m68k-apollo
+++				basic_os=bsd
+++				;;
+++			aros)
+++				basic_machine=i386-pc
+++				basic_os=aros
+++				;;
+++			aux)
+++				basic_machine=m68k-apple
+++				basic_os=aux
+++				;;
+++			balance)
+++				basic_machine=ns32k-sequent
+++				basic_os=dynix
+++				;;
+++			blackfin)
+++				basic_machine=bfin-unknown
+++				basic_os=linux
+++				;;
+++			cegcc)
+++				basic_machine=arm-unknown
+++				basic_os=cegcc
+++				;;
+++			cray)
+++				basic_machine=j90-cray
+++				basic_os=unicos
+++				;;
+++			crds | unos)
+++				basic_machine=m68k-crds
+++				basic_os=
+++				;;
+++			da30)
+++				basic_machine=m68k-da30
+++				basic_os=
+++				;;
+++			decstation | pmax | pmin | dec3100 | decstatn)
+++				basic_machine=mips-dec
+++				basic_os=
+++				;;
+++			delta88)
+++				basic_machine=m88k-motorola
+++				basic_os=sysv3
+++				;;
+++			dicos)
+++				basic_machine=i686-pc
+++				basic_os=dicos
+++				;;
+++			djgpp)
+++				basic_machine=i586-pc
+++				basic_os=msdosdjgpp
+++				;;
+++			ebmon29k)
+++				basic_machine=a29k-amd
+++				basic_os=ebmon
+++				;;
+++			es1800 | OSE68k | ose68k | ose | OSE)
+++				basic_machine=m68k-ericsson
+++				basic_os=ose
+++				;;
+++			gmicro)
+++				basic_machine=tron-gmicro
+++				basic_os=sysv
+++				;;
+++			go32)
+++				basic_machine=i386-pc
+++				basic_os=go32
+++				;;
+++			h8300hms)
+++				basic_machine=h8300-hitachi
+++				basic_os=hms
+++				;;
+++			h8300xray)
+++				basic_machine=h8300-hitachi
+++				basic_os=xray
+++				;;
+++			h8500hms)
+++				basic_machine=h8500-hitachi
+++				basic_os=hms
+++				;;
+++			harris)
+++				basic_machine=m88k-harris
+++				basic_os=sysv3
+++				;;
+++			hp300 | hp300hpux)
+++				basic_machine=m68k-hp
+++				basic_os=hpux
+++				;;
+++			hp300bsd)
+++				basic_machine=m68k-hp
+++				basic_os=bsd
+++				;;
+++			hppaosf)
+++				basic_machine=hppa1.1-hp
+++				basic_os=osf
+++				;;
+++			hppro)
+++				basic_machine=hppa1.1-hp
+++				basic_os=proelf
+++				;;
+++			i386mach)
+++				basic_machine=i386-mach
+++				basic_os=mach
+++				;;
+++			isi68 | isi)
+++				basic_machine=m68k-isi
+++				basic_os=sysv
+++				;;
+++			m68knommu)
+++				basic_machine=m68k-unknown
+++				basic_os=linux
+++				;;
+++			magnum | m3230)
+++				basic_machine=mips-mips
+++				basic_os=sysv
+++				;;
+++			merlin)
+++				basic_machine=ns32k-utek
+++				basic_os=sysv
+++				;;
+++			mingw64)
+++				basic_machine=x86_64-pc
+++				basic_os=mingw64
+++				;;
+++			mingw32)
+++				basic_machine=i686-pc
+++				basic_os=mingw32
+++				;;
+++			mingw32ce)
+++				basic_machine=arm-unknown
+++				basic_os=mingw32ce
+++				;;
+++			monitor)
+++				basic_machine=m68k-rom68k
+++				basic_os=coff
+++				;;
+++			morphos)
+++				basic_machine=powerpc-unknown
+++				basic_os=morphos
+++				;;
+++			moxiebox)
+++				basic_machine=moxie-unknown
+++				basic_os=moxiebox
+++				;;
+++			msdos)
+++				basic_machine=i386-pc
+++				basic_os=msdos
+++				;;
+++			msys)
+++				basic_machine=i686-pc
+++				basic_os=msys
+++				;;
+++			mvs)
+++				basic_machine=i370-ibm
+++				basic_os=mvs
+++				;;
+++			nacl)
+++				basic_machine=le32-unknown
+++				basic_os=nacl
+++				;;
+++			ncr3000)
+++				basic_machine=i486-ncr
+++				basic_os=sysv4
+++				;;
+++			netbsd386)
+++				basic_machine=i386-pc
+++				basic_os=netbsd
+++				;;
+++			netwinder)
+++				basic_machine=armv4l-rebel
+++				basic_os=linux
+++				;;
+++			news | news700 | news800 | news900)
+++				basic_machine=m68k-sony
+++				basic_os=newsos
+++				;;
+++			news1000)
+++				basic_machine=m68030-sony
+++				basic_os=newsos
+++				;;
+++			necv70)
+++				basic_machine=v70-nec
+++				basic_os=sysv
+++				;;
+++			nh3000)
+++				basic_machine=m68k-harris
+++				basic_os=cxux
+++				;;
+++			nh[45]000)
+++				basic_machine=m88k-harris
+++				basic_os=cxux
+++				;;
+++			nindy960)
+++				basic_machine=i960-intel
+++				basic_os=nindy
+++				;;
+++			mon960)
+++				basic_machine=i960-intel
+++				basic_os=mon960
+++				;;
+++			nonstopux)
+++				basic_machine=mips-compaq
+++				basic_os=nonstopux
+++				;;
+++			os400)
+++				basic_machine=powerpc-ibm
+++				basic_os=os400
+++				;;
+++			OSE68000 | ose68000)
+++				basic_machine=m68000-ericsson
+++				basic_os=ose
+++				;;
+++			os68k)
+++				basic_machine=m68k-none
+++				basic_os=os68k
+++				;;
+++			paragon)
+++				basic_machine=i860-intel
+++				basic_os=osf
+++				;;
+++			parisc)
+++				basic_machine=hppa-unknown
+++				basic_os=linux
+++				;;
+++			psp)
+++				basic_machine=mipsallegrexel-sony
+++				basic_os=psp
+++				;;
+++			pw32)
+++				basic_machine=i586-unknown
+++				basic_os=pw32
+++				;;
+++			rdos | rdos64)
+++				basic_machine=x86_64-pc
+++				basic_os=rdos
+++				;;
+++			rdos32)
+++				basic_machine=i386-pc
+++				basic_os=rdos
+++				;;
+++			rom68k)
+++				basic_machine=m68k-rom68k
+++				basic_os=coff
+++				;;
+++			sa29200)
+++				basic_machine=a29k-amd
+++				basic_os=udi
+++				;;
+++			sei)
+++				basic_machine=mips-sei
+++				basic_os=seiux
+++				;;
+++			sequent)
+++				basic_machine=i386-sequent
+++				basic_os=
+++				;;
+++			sps7)
+++				basic_machine=m68k-bull
+++				basic_os=sysv2
+++				;;
+++			st2000)
+++				basic_machine=m68k-tandem
+++				basic_os=
+++				;;
+++			stratus)
+++				basic_machine=i860-stratus
+++				basic_os=sysv4
+++				;;
+++			sun2)
+++				basic_machine=m68000-sun
+++				basic_os=
+++				;;
+++			sun2os3)
+++				basic_machine=m68000-sun
+++				basic_os=sunos3
+++				;;
+++			sun2os4)
+++				basic_machine=m68000-sun
+++				basic_os=sunos4
+++				;;
+++			sun3)
+++				basic_machine=m68k-sun
+++				basic_os=
+++				;;
+++			sun3os3)
+++				basic_machine=m68k-sun
+++				basic_os=sunos3
+++				;;
+++			sun3os4)
+++				basic_machine=m68k-sun
+++				basic_os=sunos4
+++				;;
+++			sun4)
+++				basic_machine=sparc-sun
+++				basic_os=
+++				;;
+++			sun4os3)
+++				basic_machine=sparc-sun
+++				basic_os=sunos3
+++				;;
+++			sun4os4)
+++				basic_machine=sparc-sun
+++				basic_os=sunos4
+++				;;
+++			sun4sol2)
+++				basic_machine=sparc-sun
+++				basic_os=solaris2
+++				;;
+++			sun386 | sun386i | roadrunner)
+++				basic_machine=i386-sun
+++				basic_os=
+++				;;
+++			sv1)
+++				basic_machine=sv1-cray
+++				basic_os=unicos
+++				;;
+++			symmetry)
+++				basic_machine=i386-sequent
+++				basic_os=dynix
+++				;;
+++			t3e)
+++				basic_machine=alphaev5-cray
+++				basic_os=unicos
+++				;;
+++			t90)
+++				basic_machine=t90-cray
+++				basic_os=unicos
+++				;;
+++			toad1)
+++				basic_machine=pdp10-xkl
+++				basic_os=tops20
+++				;;
+++			tpf)
+++				basic_machine=s390x-ibm
+++				basic_os=tpf
+++				;;
+++			udi29k)
+++				basic_machine=a29k-amd
+++				basic_os=udi
+++				;;
+++			ultra3)
+++				basic_machine=a29k-nyu
+++				basic_os=sym1
+++				;;
+++			v810 | necv810)
+++				basic_machine=v810-nec
+++				basic_os=none
+++				;;
+++			vaxv)
+++				basic_machine=vax-dec
+++				basic_os=sysv
+++				;;
+++			vms)
+++				basic_machine=vax-dec
+++				basic_os=vms
+++				;;
+++			vsta)
+++				basic_machine=i386-pc
+++				basic_os=vsta
+++				;;
+++			vxworks960)
+++				basic_machine=i960-wrs
+++				basic_os=vxworks
+++				;;
+++			vxworks68)
+++				basic_machine=m68k-wrs
+++				basic_os=vxworks
+++				;;
+++			vxworks29k)
+++				basic_machine=a29k-wrs
+++				basic_os=vxworks
+++				;;
+++			xbox)
+++				basic_machine=i686-pc
+++				basic_os=mingw32
+++				;;
+++			ymp)
+++				basic_machine=ymp-cray
+++				basic_os=unicos
+++				;;
+++			*)
+++				basic_machine=$1
+++				basic_os=
+++				;;
+++		esac
++ 		;;
++ esac
++ 
++-# Decode aliases for certain CPU-COMPANY combinations.
+++# Decode 1-component or ad-hoc basic machines
++ case $basic_machine in
++-	# Recognize the basic CPU types without company name.
++-	# Some are omitted here because they have special meanings below.
++-	1750a | 580 \
++-	| a29k \
++-	| aarch64 | aarch64_be \
++-	| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] | alphapca5[67] \
++-	| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] | alpha64pca5[67] \
++-	| am33_2.0 \
++-	| arc | arceb \
++-	| arm | arm[bl]e | arme[lb] | armv[2-8] | armv[3-8][lb] | armv6m | armv[78][arm] \
++-	| avr | avr32 \
++-	| ba \
++-	| be32 | be64 \
++-	| bfin \
++-	| c4x | c8051 | clipper | csky \
++-	| d10v | d30v | dlx | dsp16xx \
++-	| e2k | epiphany \
++-	| fido | fr30 | frv | ft32 \
++-	| h8300 | h8500 | hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
++-	| hexagon \
++-	| i370 | i860 | i960 | ia16 | ia64 \
++-	| ip2k | iq2000 \
++-	| k1om \
++-	| le32 | le64 \
++-	| lm32 \
++-	| m32c | m32r | m32rle | m68000 | m68k | m88k \
++-	| maxq | mb | microblaze | microblazeel | mcore | mep | metag \
++-	| mips | mipsbe | mipseb | mipsel | mipsle \
++-	| mips16 \
++-	| mips64 | mips64el \
++-	| mips64octeon | mips64octeonel \
++-	| mips64orion | mips64orionel \
++-	| mips64r5900 | mips64r5900el \
++-	| mips64vr | mips64vrel \
++-	| mips64vr4100 | mips64vr4100el \
++-	| mips64vr4300 | mips64vr4300el \
++-	| mips64vr5000 | mips64vr5000el \
++-	| mips64vr5900 | mips64vr5900el \
++-	| mipsisa32 | mipsisa32el \
++-	| mipsisa32r2 | mipsisa32r2el \
++-	| mipsisa32r6 | mipsisa32r6el \
++-	| mipsisa64 | mipsisa64el \
++-	| mipsisa64r2 | mipsisa64r2el \
++-	| mipsisa64r6 | mipsisa64r6el \
++-	| mipsisa64sb1 | mipsisa64sb1el \
++-	| mipsisa64sr71k | mipsisa64sr71kel \
++-	| mipsr5900 | mipsr5900el \
++-	| mipstx39 | mipstx39el \
++-	| mn10200 | mn10300 \
++-	| moxie \
++-	| mt \
++-	| msp430 \
++-	| nds32 | nds32le | nds32be \
++-	| nfp \
++-	| nios | nios2 | nios2eb | nios2el \
++-	| ns16k | ns32k \
++-	| open8 | or1k | or1knd | or32 \
++-	| pdp10 | pj | pjl \
++-	| powerpc | powerpc64 | powerpc64le | powerpcle \
++-	| pru \
++-	| pyramid \
++-	| riscv32 | riscv64 \
++-	| rl78 | rx \
++-	| score \
++-	| sh | sh[1234] | sh[24]a | sh[24]aeb | sh[23]e | sh[234]eb | sheb | shbe | shle | sh[1234]le | sh3ele \
++-	| sh64 | sh64le \
++-	| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet | sparclite \
++-	| sparcv8 | sparcv9 | sparcv9b | sparcv9v \
++-	| spu \
++-	| tahoe | tic4x | tic54x | tic55x | tic6x | tic80 | tron \
++-	| ubicom32 \
++-	| v850 | v850e | v850e1 | v850e2 | v850es | v850e2v3 \
++-	| visium \
++-	| wasm32 \
++-	| x86 | xc16x | xstormy16 | xtensa \
++-	| z8k | z80)
++-		basic_machine=$basic_machine-unknown
++-		;;
++-	c54x)
++-		basic_machine=tic54x-unknown
++-		;;
++-	c55x)
++-		basic_machine=tic55x-unknown
++-		;;
++-	c6x)
++-		basic_machine=tic6x-unknown
++-		;;
++-	leon|leon[3-9])
++-		basic_machine=sparc-$basic_machine
++-		;;
++-	m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | nvptx | picochip)
++-		basic_machine=$basic_machine-unknown
++-		os=-none
++-		;;
++-	m88110 | m680[12346]0 | m683?2 | m68360 | m5200 | v70 | w65)
+++	# Here we handle the default manufacturer of certain CPU types.  It is in
+++	# some cases the only manufacturer, in others, it is the most popular.
+++	w89k)
+++		cpu=hppa1.1
+++		vendor=winbond
++ 		;;
++-	m9s12z | m68hcs12z | hcs12z | s12z)
++-		basic_machine=s12z-unknown
++-		os=-none
+++	op50n)
+++		cpu=hppa1.1
+++		vendor=oki
++ 		;;
++-	ms1)
++-		basic_machine=mt-unknown
+++	op60c)
+++		cpu=hppa1.1
+++		vendor=oki
++ 		;;
++-
++-	strongarm | thumb | xscale)
++-		basic_machine=arm-unknown
+++	ibm*)
+++		cpu=i370
+++		vendor=ibm
++ 		;;
++-	xgate)
++-		basic_machine=$basic_machine-unknown
++-		os=-none
+++	orion105)
+++		cpu=clipper
+++		vendor=highlevel
++ 		;;
++-	xscaleeb)
++-		basic_machine=armeb-unknown
+++	mac | mpw | mac-mpw)
+++		cpu=m68k
+++		vendor=apple
++ 		;;
++-
++-	xscaleel)
++-		basic_machine=armel-unknown
+++	pmac | pmac-mpw)
+++		cpu=powerpc
+++		vendor=apple
++ 		;;
++ 
++-	# We use `pc' rather than `unknown'
++-	# because (1) that's what they normally are, and
++-	# (2) the word "unknown" tends to confuse beginning users.
++-	i*86 | x86_64)
++-	  basic_machine=$basic_machine-pc
++-	  ;;
++-	# Object if more than one company name word.
++-	*-*-*)
++-		echo Invalid configuration \`"$1"\': machine \`"$basic_machine"\' not recognized 1>&2
++-		exit 1
++-		;;
++-	# Recognize the basic CPU types with company name.
++-	580-* \
++-	| a29k-* \
++-	| aarch64-* | aarch64_be-* \
++-	| alpha-* | alphaev[4-8]-* | alphaev56-* | alphaev6[78]-* \
++-	| alpha64-* | alpha64ev[4-8]-* | alpha64ev56-* | alpha64ev6[78]-* \
++-	| alphapca5[67]-* | alpha64pca5[67]-* | arc-* | arceb-* \
++-	| arm-*  | armbe-* | armle-* | armeb-* | armv*-* \
++-	| avr-* | avr32-* \
++-	| ba-* \
++-	| be32-* | be64-* \
++-	| bfin-* | bs2000-* \
++-	| c[123]* | c30-* | [cjt]90-* | c4x-* \
++-	| c8051-* | clipper-* | craynv-* | csky-* | cydra-* \
++-	| d10v-* | d30v-* | dlx-* \
++-	| e2k-* | elxsi-* \
++-	| f30[01]-* | f700-* | fido-* | fr30-* | frv-* | fx80-* \
++-	| h8300-* | h8500-* \
++-	| hppa-* | hppa1.[01]-* | hppa2.0-* | hppa2.0[nw]-* | hppa64-* \
++-	| hexagon-* \
++-	| i*86-* | i860-* | i960-* | ia16-* | ia64-* \
++-	| ip2k-* | iq2000-* \
++-	| k1om-* \
++-	| le32-* | le64-* \
++-	| lm32-* \
++-	| m32c-* | m32r-* | m32rle-* \
++-	| m68000-* | m680[012346]0-* | m68360-* | m683?2-* | m68k-* \
++-	| m88110-* | m88k-* | maxq-* | mcore-* | metag-* \
++-	| microblaze-* | microblazeel-* \
++-	| mips-* | mipsbe-* | mipseb-* | mipsel-* | mipsle-* \
++-	| mips16-* \
++-	| mips64-* | mips64el-* \
++-	| mips64octeon-* | mips64octeonel-* \
++-	| mips64orion-* | mips64orionel-* \
++-	| mips64r5900-* | mips64r5900el-* \
++-	| mips64vr-* | mips64vrel-* \
++-	| mips64vr4100-* | mips64vr4100el-* \
++-	| mips64vr4300-* | mips64vr4300el-* \
++-	| mips64vr5000-* | mips64vr5000el-* \
++-	| mips64vr5900-* | mips64vr5900el-* \
++-	| mipsisa32-* | mipsisa32el-* \
++-	| mipsisa32r2-* | mipsisa32r2el-* \
++-	| mipsisa32r6-* | mipsisa32r6el-* \
++-	| mipsisa64-* | mipsisa64el-* \
++-	| mipsisa64r2-* | mipsisa64r2el-* \
++-	| mipsisa64r6-* | mipsisa64r6el-* \
++-	| mipsisa64sb1-* | mipsisa64sb1el-* \
++-	| mipsisa64sr71k-* | mipsisa64sr71kel-* \
++-	| mipsr5900-* | mipsr5900el-* \
++-	| mipstx39-* | mipstx39el-* \
++-	| mmix-* \
++-	| mt-* \
++-	| msp430-* \
++-	| nds32-* | nds32le-* | nds32be-* \
++-	| nfp-* \
++-	| nios-* | nios2-* | nios2eb-* | nios2el-* \
++-	| none-* | np1-* | ns16k-* | ns32k-* \
++-	| open8-* \
++-	| or1k*-* \
++-	| orion-* \
++-	| pdp10-* | pdp11-* | pj-* | pjl-* | pn-* | power-* \
++-	| powerpc-* | powerpc64-* | powerpc64le-* | powerpcle-* \
++-	| pru-* \
++-	| pyramid-* \
++-	| riscv32-* | riscv64-* \
++-	| rl78-* | romp-* | rs6000-* | rx-* \
++-	| sh-* | sh[1234]-* | sh[24]a-* | sh[24]aeb-* | sh[23]e-* | sh[34]eb-* | sheb-* | shbe-* \
++-	| shle-* | sh[1234]le-* | sh3ele-* | sh64-* | sh64le-* \
++-	| sparc-* | sparc64-* | sparc64b-* | sparc64v-* | sparc86x-* | sparclet-* \
++-	| sparclite-* \
++-	| sparcv8-* | sparcv9-* | sparcv9b-* | sparcv9v-* | sv1-* | sx*-* \
++-	| tahoe-* \
++-	| tic30-* | tic4x-* | tic54x-* | tic55x-* | tic6x-* | tic80-* \
++-	| tile*-* \
++-	| tron-* \
++-	| ubicom32-* \
++-	| v850-* | v850e-* | v850e1-* | v850es-* | v850e2-* | v850e2v3-* \
++-	| vax-* \
++-	| visium-* \
++-	| wasm32-* \
++-	| we32k-* \
++-	| x86-* | x86_64-* | xc16x-* | xps100-* \
++-	| xstormy16-* | xtensa*-* \
++-	| ymp-* \
++-	| z8k-* | z80-*)
++-		;;
++-	# Recognize the basic CPU types without company name, with glob match.
++-	xtensa*)
++-		basic_machine=$basic_machine-unknown
++-		;;
++ 	# Recognize the various machine names and aliases which stand
++ 	# for a CPU type and a company and sometimes even an OS.
++-	386bsd)
++-		basic_machine=i386-pc
++-		os=-bsd
++-		;;
++ 	3b1 | 7300 | 7300-att | att-7300 | pc7300 | safari | unixpc)
++-		basic_machine=m68000-att
+++		cpu=m68000
+++		vendor=att
++ 		;;
++ 	3b*)
++-		basic_machine=we32k-att
++-		;;
++-	a29khif)
++-		basic_machine=a29k-amd
++-		os=-udi
++-		;;
++-	abacus)
++-		basic_machine=abacus-unknown
++-		;;
++-	adobe68k)
++-		basic_machine=m68010-adobe
++-		os=-scout
++-		;;
++-	alliant | fx80)
++-		basic_machine=fx80-alliant
++-		;;
++-	altos | altos3068)
++-		basic_machine=m68k-altos
++-		;;
++-	am29k)
++-		basic_machine=a29k-none
++-		os=-bsd
++-		;;
++-	amd64)
++-		basic_machine=x86_64-pc
++-		;;
++-	amd64-*)
++-		basic_machine=x86_64-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		;;
++-	amdahl)
++-		basic_machine=580-amdahl
++-		os=-sysv
++-		;;
++-	amiga | amiga-*)
++-		basic_machine=m68k-unknown
++-		;;
++-	amigaos | amigados)
++-		basic_machine=m68k-unknown
++-		os=-amigaos
++-		;;
++-	amigaunix | amix)
++-		basic_machine=m68k-unknown
++-		os=-sysv4
++-		;;
++-	apollo68)
++-		basic_machine=m68k-apollo
++-		os=-sysv
++-		;;
++-	apollo68bsd)
++-		basic_machine=m68k-apollo
++-		os=-bsd
++-		;;
++-	aros)
++-		basic_machine=i386-pc
++-		os=-aros
++-		;;
++-	asmjs)
++-		basic_machine=asmjs-unknown
++-		;;
++-	aux)
++-		basic_machine=m68k-apple
++-		os=-aux
++-		;;
++-	balance)
++-		basic_machine=ns32k-sequent
++-		os=-dynix
++-		;;
++-	blackfin)
++-		basic_machine=bfin-unknown
++-		os=-linux
++-		;;
++-	blackfin-*)
++-		basic_machine=bfin-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		os=-linux
+++		cpu=we32k
+++		vendor=att
++ 		;;
++ 	bluegene*)
++-		basic_machine=powerpc-ibm
++-		os=-cnk
++-		;;
++-	c54x-*)
++-		basic_machine=tic54x-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		;;
++-	c55x-*)
++-		basic_machine=tic55x-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		;;
++-	c6x-*)
++-		basic_machine=tic6x-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		;;
++-	c90)
++-		basic_machine=c90-cray
++-		os=-unicos
++-		;;
++-	cegcc)
++-		basic_machine=arm-unknown
++-		os=-cegcc
++-		;;
++-	convex-c1)
++-		basic_machine=c1-convex
++-		os=-bsd
++-		;;
++-	convex-c2)
++-		basic_machine=c2-convex
++-		os=-bsd
++-		;;
++-	convex-c32)
++-		basic_machine=c32-convex
++-		os=-bsd
++-		;;
++-	convex-c34)
++-		basic_machine=c34-convex
++-		os=-bsd
++-		;;
++-	convex-c38)
++-		basic_machine=c38-convex
++-		os=-bsd
++-		;;
++-	cray | j90)
++-		basic_machine=j90-cray
++-		os=-unicos
++-		;;
++-	craynv)
++-		basic_machine=craynv-cray
++-		os=-unicosmp
++-		;;
++-	cr16 | cr16-*)
++-		basic_machine=cr16-unknown
++-		os=-elf
++-		;;
++-	crds | unos)
++-		basic_machine=m68k-crds
++-		;;
++-	crisv32 | crisv32-* | etraxfs*)
++-		basic_machine=crisv32-axis
++-		;;
++-	cris | cris-* | etrax*)
++-		basic_machine=cris-axis
++-		;;
++-	crx)
++-		basic_machine=crx-unknown
++-		os=-elf
++-		;;
++-	da30 | da30-*)
++-		basic_machine=m68k-da30
++-		;;
++-	decstation | decstation-3100 | pmax | pmax-* | pmin | dec3100 | decstatn)
++-		basic_machine=mips-dec
+++		cpu=powerpc
+++		vendor=ibm
+++		basic_os=cnk
++ 		;;
++ 	decsystem10* | dec10*)
++-		basic_machine=pdp10-dec
++-		os=-tops10
+++		cpu=pdp10
+++		vendor=dec
+++		basic_os=tops10
++ 		;;
++ 	decsystem20* | dec20*)
++-		basic_machine=pdp10-dec
++-		os=-tops20
++-		;;
++-	delta | 3300 | motorola-3300 | motorola-delta \
++-	      | 3300-motorola | delta-motorola)
++-		basic_machine=m68k-motorola
++-		;;
++-	delta88)
++-		basic_machine=m88k-motorola
++-		os=-sysv3
++-		;;
++-	dicos)
++-		basic_machine=i686-pc
++-		os=-dicos
++-		;;
++-	djgpp)
++-		basic_machine=i586-pc
++-		os=-msdosdjgpp
++-		;;
++-	dpx20 | dpx20-*)
++-		basic_machine=rs6000-bull
++-		os=-bosx
++-		;;
++-	dpx2*)
++-		basic_machine=m68k-bull
++-		os=-sysv3
++-		;;
++-	e500v[12])
++-		basic_machine=powerpc-unknown
++-		os=$os"spe"
++-		;;
++-	e500v[12]-*)
++-		basic_machine=powerpc-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		os=$os"spe"
++-		;;
++-	ebmon29k)
++-		basic_machine=a29k-amd
++-		os=-ebmon
++-		;;
++-	elxsi)
++-		basic_machine=elxsi-elxsi
++-		os=-bsd
+++		cpu=pdp10
+++		vendor=dec
+++		basic_os=tops20
+++		;;
+++	delta | 3300 | delta-motorola | 3300-motorola | motorola-delta | motorola-3300)
+++		cpu=m68k
+++		vendor=motorola
+++		;;
+++	# This used to be dpx2*, but that gets the RS6000-based
+++	# DPX/20 and the x86-based DPX/2-100 wrong.  See
+++	# https://oldskool.silicium.org/stations/bull_dpx20.htm
+++	# https://www.feb-patrimoine.com/english/bull_dpx2.htm
+++	# https://www.feb-patrimoine.com/english/unix_and_bull.htm
+++	dpx2 | dpx2[23]00 | dpx2[23]xx)
+++		cpu=m68k
+++		vendor=bull
+++		;;
+++	dpx2100 | dpx21xx)
+++		cpu=i386
+++		vendor=bull
+++		;;
+++	dpx20)
+++		cpu=rs6000
+++		vendor=bull
++ 		;;
++ 	encore | umax | mmax)
++-		basic_machine=ns32k-encore
+++		cpu=ns32k
+++		vendor=encore
++ 		;;
++-	es1800 | OSE68k | ose68k | ose | OSE)
++-		basic_machine=m68k-ericsson
++-		os=-ose
+++	elxsi)
+++		cpu=elxsi
+++		vendor=elxsi
+++		basic_os=${basic_os:-bsd}
++ 		;;
++ 	fx2800)
++-		basic_machine=i860-alliant
+++		cpu=i860
+++		vendor=alliant
++ 		;;
++ 	genix)
++-		basic_machine=ns32k-ns
++-		;;
++-	gmicro)
++-		basic_machine=tron-gmicro
++-		os=-sysv
++-		;;
++-	go32)
++-		basic_machine=i386-pc
++-		os=-go32
++-		;;
++-	h3050r* | hiux*)
++-		basic_machine=hppa1.1-hitachi
++-		os=-hiuxwe2
++-		;;
++-	h8300hms)
++-		basic_machine=h8300-hitachi
++-		os=-hms
++-		;;
++-	h8300xray)
++-		basic_machine=h8300-hitachi
++-		os=-xray
++-		;;
++-	h8500hms)
++-		basic_machine=h8500-hitachi
++-		os=-hms
++-		;;
++-	harris)
++-		basic_machine=m88k-harris
++-		os=-sysv3
++-		;;
++-	hp300-*)
++-		basic_machine=m68k-hp
++-		;;
++-	hp300bsd)
++-		basic_machine=m68k-hp
++-		os=-bsd
++-		;;
++-	hp300hpux)
++-		basic_machine=m68k-hp
++-		os=-hpux
++-		;;
++-	hp3k9[0-9][0-9] | hp9[0-9][0-9])
++-		basic_machine=hppa1.0-hp
++-		;;
++-	hp9k2[0-9][0-9] | hp9k31[0-9])
++-		basic_machine=m68000-hp
++-		;;
++-	hp9k3[2-9][0-9])
++-		basic_machine=m68k-hp
++-		;;
++-	hp9k6[0-9][0-9] | hp6[0-9][0-9])
++-		basic_machine=hppa1.0-hp
++-		;;
++-	hp9k7[0-79][0-9] | hp7[0-79][0-9])
++-		basic_machine=hppa1.1-hp
++-		;;
++-	hp9k78[0-9] | hp78[0-9])
++-		# FIXME: really hppa2.0-hp
++-		basic_machine=hppa1.1-hp
++-		;;
++-	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
++-		# FIXME: really hppa2.0-hp
++-		basic_machine=hppa1.1-hp
++-		;;
++-	hp9k8[0-9][13679] | hp8[0-9][13679])
++-		basic_machine=hppa1.1-hp
++-		;;
++-	hp9k8[0-9][0-9] | hp8[0-9][0-9])
++-		basic_machine=hppa1.0-hp
++-		;;
++-	hppaosf)
++-		basic_machine=hppa1.1-hp
++-		os=-osf
++-		;;
++-	hppro)
++-		basic_machine=hppa1.1-hp
++-		os=-proelf
++-		;;
++-	i370-ibm* | ibm*)
++-		basic_machine=i370-ibm
++-		;;
++-	i*86v32)
++-		basic_machine=`echo "$1" | sed -e 's/86.*/86-pc/'`
++-		os=-sysv32
++-		;;
++-	i*86v4*)
++-		basic_machine=`echo "$1" | sed -e 's/86.*/86-pc/'`
++-		os=-sysv4
++-		;;
++-	i*86v)
++-		basic_machine=`echo "$1" | sed -e 's/86.*/86-pc/'`
++-		os=-sysv
++-		;;
++-	i*86sol2)
++-		basic_machine=`echo "$1" | sed -e 's/86.*/86-pc/'`
++-		os=-solaris2
++-		;;
++-	i386mach)
++-		basic_machine=i386-mach
++-		os=-mach
++-		;;
++-	vsta)
++-		basic_machine=i386-unknown
++-		os=-vsta
++-		;;
++-	iris | iris4d)
++-		basic_machine=mips-sgi
++-		case $os in
++-		    -irix*)
++-			;;
++-		    *)
++-			os=-irix4
++-			;;
++-		esac
++-		;;
++-	isi68 | isi)
++-		basic_machine=m68k-isi
++-		os=-sysv
++-		;;
++-	leon-*|leon[3-9]-*)
++-		basic_machine=sparc-`echo "$basic_machine" | sed 's/-.*//'`
++-		;;
++-	m68knommu)
++-		basic_machine=m68k-unknown
++-		os=-linux
++-		;;
++-	m68knommu-*)
++-		basic_machine=m68k-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		os=-linux
++-		;;
++-	magnum | m3230)
++-		basic_machine=mips-mips
++-		os=-sysv
++-		;;
++-	merlin)
++-		basic_machine=ns32k-utek
++-		os=-sysv
++-		;;
++-	microblaze*)
++-		basic_machine=microblaze-xilinx
++-		;;
++-	mingw64)
++-		basic_machine=x86_64-pc
++-		os=-mingw64
++-		;;
++-	mingw32)
++-		basic_machine=i686-pc
++-		os=-mingw32
++-		;;
++-	mingw32ce)
++-		basic_machine=arm-unknown
++-		os=-mingw32ce
++-		;;
++-	miniframe)
++-		basic_machine=m68000-convergent
++-		;;
++-	*mint | -mint[0-9]* | *MiNT | *MiNT[0-9]*)
++-		basic_machine=m68k-atari
++-		os=-mint
++-		;;
++-	mips3*-*)
++-		basic_machine=`echo "$basic_machine" | sed -e 's/mips3/mips64/'`
++-		;;
++-	mips3*)
++-		basic_machine=`echo "$basic_machine" | sed -e 's/mips3/mips64/'`-unknown
++-		;;
++-	monitor)
++-		basic_machine=m68k-rom68k
++-		os=-coff
++-		;;
++-	morphos)
++-		basic_machine=powerpc-unknown
++-		os=-morphos
++-		;;
++-	moxiebox)
++-		basic_machine=moxie-unknown
++-		os=-moxiebox
++-		;;
++-	msdos)
++-		basic_machine=i386-pc
++-		os=-msdos
++-		;;
++-	ms1-*)
++-		basic_machine=`echo "$basic_machine" | sed -e 's/ms1-/mt-/'`
++-		;;
++-	msys)
++-		basic_machine=i686-pc
++-		os=-msys
++-		;;
++-	mvs)
++-		basic_machine=i370-ibm
++-		os=-mvs
++-		;;
++-	nacl)
++-		basic_machine=le32-unknown
++-		os=-nacl
++-		;;
++-	ncr3000)
++-		basic_machine=i486-ncr
++-		os=-sysv4
++-		;;
++-	netbsd386)
++-		basic_machine=i386-unknown
++-		os=-netbsd
++-		;;
++-	netwinder)
++-		basic_machine=armv4l-rebel
++-		os=-linux
++-		;;
++-	news | news700 | news800 | news900)
++-		basic_machine=m68k-sony
++-		os=-newsos
++-		;;
++-	news1000)
++-		basic_machine=m68030-sony
++-		os=-newsos
++-		;;
++-	news-3600 | risc-news)
++-		basic_machine=mips-sony
++-		os=-newsos
++-		;;
++-	necv70)
++-		basic_machine=v70-nec
++-		os=-sysv
++-		;;
++-	next | m*-next)
++-		basic_machine=m68k-next
++-		case $os in
++-		    -nextstep* )
++-			;;
++-		    -ns2*)
++-		      os=-nextstep2
++-			;;
++-		    *)
++-		      os=-nextstep3
++-			;;
++-		esac
++-		;;
++-	nh3000)
++-		basic_machine=m68k-harris
++-		os=-cxux
++-		;;
++-	nh[45]000)
++-		basic_machine=m88k-harris
++-		os=-cxux
++-		;;
++-	nindy960)
++-		basic_machine=i960-intel
++-		os=-nindy
++-		;;
++-	mon960)
++-		basic_machine=i960-intel
++-		os=-mon960
++-		;;
++-	nonstopux)
++-		basic_machine=mips-compaq
++-		os=-nonstopux
++-		;;
++-	np1)
++-		basic_machine=np1-gould
++-		;;
++-	neo-tandem)
++-		basic_machine=neo-tandem
++-		;;
++-	nse-tandem)
++-		basic_machine=nse-tandem
++-		;;
++-	nsr-tandem)
++-		basic_machine=nsr-tandem
++-		;;
++-	nsv-tandem)
++-		basic_machine=nsv-tandem
++-		;;
++-	nsx-tandem)
++-		basic_machine=nsx-tandem
+++		cpu=ns32k
+++		vendor=ns
++ 		;;
++-	op50n-* | op60c-*)
++-		basic_machine=hppa1.1-oki
++-		os=-proelf
+++	h3050r* | hiux*)
+++		cpu=hppa1.1
+++		vendor=hitachi
+++		basic_os=hiuxwe2
++ 		;;
++-	openrisc | openrisc-*)
++-		basic_machine=or32-unknown
+++	hp3k9[0-9][0-9] | hp9[0-9][0-9])
+++		cpu=hppa1.0
+++		vendor=hp
++ 		;;
++-	os400)
++-		basic_machine=powerpc-ibm
++-		os=-os400
+++	hp9k2[0-9][0-9] | hp9k31[0-9])
+++		cpu=m68000
+++		vendor=hp
++ 		;;
++-	OSE68000 | ose68000)
++-		basic_machine=m68000-ericsson
++-		os=-ose
+++	hp9k3[2-9][0-9])
+++		cpu=m68k
+++		vendor=hp
++ 		;;
++-	os68k)
++-		basic_machine=m68k-none
++-		os=-os68k
+++	hp9k6[0-9][0-9] | hp6[0-9][0-9])
+++		cpu=hppa1.0
+++		vendor=hp
++ 		;;
++-	pa-hitachi)
++-		basic_machine=hppa1.1-hitachi
++-		os=-hiuxwe2
+++	hp9k7[0-79][0-9] | hp7[0-79][0-9])
+++		cpu=hppa1.1
+++		vendor=hp
++ 		;;
++-	paragon)
++-		basic_machine=i860-intel
++-		os=-osf
+++	hp9k78[0-9] | hp78[0-9])
+++		# FIXME: really hppa2.0-hp
+++		cpu=hppa1.1
+++		vendor=hp
++ 		;;
++-	parisc)
++-		basic_machine=hppa-unknown
++-		os=-linux
+++	hp9k8[67]1 | hp8[67]1 | hp9k80[24] | hp80[24] | hp9k8[78]9 | hp8[78]9 | hp9k893 | hp893)
+++		# FIXME: really hppa2.0-hp
+++		cpu=hppa1.1
+++		vendor=hp
++ 		;;
++-	parisc-*)
++-		basic_machine=hppa-`echo "$basic_machine" | sed 's/^[^-]*-//'`
++-		os=-linux
+++	hp9k8[0-9][13679] | hp8[0-9][13679])
+++		cpu=hppa1.1
+++		vendor=hp
++ 		;;
++-	pbd)
++-		basic_machine=sparc-tti
+++	hp9k8[0-9][0-9] | hp8[0-9][0-9])
+++		cpu=hppa1.0
+++		vendor=hp
++ 		;;
++-	pbb)
++-		basic_machine=m68k-tti
+++	i*86v32)
+++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+++		vendor=pc
+++		basic_os=sysv32
++ 		;;
++-	pc532 | pc532-*)
++-		basic_machine=ns32k-pc532
+++	i*86v4*)
+++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+++		vendor=pc
+++		basic_os=sysv4
++ 		;;
++-	pc98)
++-		basic_machine=i386-pc
+++	i*86v)
+++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+++		vendor=pc
+++		basic_os=sysv
++ 		;;
++-	pc98-*)
++-		basic_machine=i386-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	i*86sol2)
+++		cpu=`echo "$1" | sed -e 's/86.*/86/'`
+++		vendor=pc
+++		basic_os=solaris2
++ 		;;
++-	pentium | p5 | k5 | k6 | nexgen | viac3)
++-		basic_machine=i586-pc
+++	j90 | j90-cray)
+++		cpu=j90
+++		vendor=cray
+++		basic_os=${basic_os:-unicos}
++ 		;;
++-	pentiumpro | p6 | 6x86 | athlon | athlon_*)
++-		basic_machine=i686-pc
+++	iris | iris4d)
+++		cpu=mips
+++		vendor=sgi
+++		case $basic_os in
+++		    irix*)
+++			;;
+++		    *)
+++			basic_os=irix4
+++			;;
+++		esac
++ 		;;
++-	pentiumii | pentium2 | pentiumiii | pentium3)
++-		basic_machine=i686-pc
+++	miniframe)
+++		cpu=m68000
+++		vendor=convergent
++ 		;;
++-	pentium4)
++-		basic_machine=i786-pc
+++	*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)
+++		cpu=m68k
+++		vendor=atari
+++		basic_os=mint
++ 		;;
++-	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
++-		basic_machine=i586-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	news-3600 | risc-news)
+++		cpu=mips
+++		vendor=sony
+++		basic_os=newsos
++ 		;;
++-	pentiumpro-* | p6-* | 6x86-* | athlon-*)
++-		basic_machine=i686-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	next | m*-next)
+++		cpu=m68k
+++		vendor=next
++ 		;;
++-	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
++-		basic_machine=i686-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	np1)
+++		cpu=np1
+++		vendor=gould
++ 		;;
++-	pentium4-*)
++-		basic_machine=i786-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	op50n-* | op60c-*)
+++		cpu=hppa1.1
+++		vendor=oki
+++		basic_os=proelf
++ 		;;
++-	pn)
++-		basic_machine=pn-gould
+++	pa-hitachi)
+++		cpu=hppa1.1
+++		vendor=hitachi
+++		basic_os=hiuxwe2
++ 		;;
++-	power)	basic_machine=power-ibm
+++	pbd)
+++		cpu=sparc
+++		vendor=tti
++ 		;;
++-	ppc | ppcbe)	basic_machine=powerpc-unknown
+++	pbb)
+++		cpu=m68k
+++		vendor=tti
++ 		;;
++-	ppc-* | ppcbe-*)
++-		basic_machine=powerpc-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	pc532)
+++		cpu=ns32k
+++		vendor=pc532
++ 		;;
++-	ppcle | powerpclittle)
++-		basic_machine=powerpcle-unknown
+++	pn)
+++		cpu=pn
+++		vendor=gould
++ 		;;
++-	ppcle-* | powerpclittle-*)
++-		basic_machine=powerpcle-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	power)
+++		cpu=power
+++		vendor=ibm
++ 		;;
++-	ppc64)	basic_machine=powerpc64-unknown
+++	ps2)
+++		cpu=i386
+++		vendor=ibm
++ 		;;
++-	ppc64-*) basic_machine=powerpc64-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	rm[46]00)
+++		cpu=mips
+++		vendor=siemens
++ 		;;
++-	ppc64le | powerpc64little)
++-		basic_machine=powerpc64le-unknown
+++	rtpc | rtpc-*)
+++		cpu=romp
+++		vendor=ibm
++ 		;;
++-	ppc64le-* | powerpc64little-*)
++-		basic_machine=powerpc64le-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	sde)
+++		cpu=mipsisa32
+++		vendor=sde
+++		basic_os=${basic_os:-elf}
++ 		;;
++-	ps2)
++-		basic_machine=i386-ibm
+++	simso-wrs)
+++		cpu=sparclite
+++		vendor=wrs
+++		basic_os=vxworks
++ 		;;
++-	pw32)
++-		basic_machine=i586-unknown
++-		os=-pw32
+++	tower | tower-32)
+++		cpu=m68k
+++		vendor=ncr
++ 		;;
++-	rdos | rdos64)
++-		basic_machine=x86_64-pc
++-		os=-rdos
+++	vpp*|vx|vx-*)
+++		cpu=f301
+++		vendor=fujitsu
++ 		;;
++-	rdos32)
++-		basic_machine=i386-pc
++-		os=-rdos
+++	w65)
+++		cpu=w65
+++		vendor=wdc
++ 		;;
++-	rom68k)
++-		basic_machine=m68k-rom68k
++-		os=-coff
+++	w89k-*)
+++		cpu=hppa1.1
+++		vendor=winbond
+++		basic_os=proelf
++ 		;;
++-	rm[46]00)
++-		basic_machine=mips-siemens
+++	none)
+++		cpu=none
+++		vendor=none
++ 		;;
++-	rtpc | rtpc-*)
++-		basic_machine=romp-ibm
+++	leon|leon[3-9])
+++		cpu=sparc
+++		vendor=$basic_machine
++ 		;;
++-	s390 | s390-*)
++-		basic_machine=s390-ibm
+++	leon-*|leon[3-9]-*)
+++		cpu=sparc
+++		vendor=`echo "$basic_machine" | sed 's/-.*//'`
++ 		;;
++-	s390x | s390x-*)
++-		basic_machine=s390x-ibm
+++
+++	*-*)
+++		saved_IFS=$IFS
+++		IFS="-" read cpu vendor <<EOF
+++$basic_machine
+++EOF
+++		IFS=$saved_IFS
++ 		;;
++-	sa29200)
++-		basic_machine=a29k-amd
++-		os=-udi
+++	# We use 'pc' rather than 'unknown'
+++	# because (1) that's what they normally are, and
+++	# (2) the word "unknown" tends to confuse beginning users.
+++	i*86 | x86_64)
+++		cpu=$basic_machine
+++		vendor=pc
++ 		;;
++-	sb1)
++-		basic_machine=mipsisa64sb1-unknown
+++	# These rules are duplicated from below for sake of the special case above;
+++	# i.e. things that normalized to x86 arches should also default to "pc"
+++	pc98)
+++		cpu=i386
+++		vendor=pc
++ 		;;
++-	sb1el)
++-		basic_machine=mipsisa64sb1el-unknown
+++	x64 | amd64)
+++		cpu=x86_64
+++		vendor=pc
++ 		;;
++-	sde)
++-		basic_machine=mipsisa32-sde
++-		os=-elf
+++	# Recognize the basic CPU types without company name.
+++	*)
+++		cpu=$basic_machine
+++		vendor=unknown
++ 		;;
++-	sei)
++-		basic_machine=mips-sei
++-		os=-seiux
+++esac
+++
+++unset -v basic_machine
+++
+++# Decode basic machines in the full and proper CPU-Company form.
+++case $cpu-$vendor in
+++	# Here we handle the default manufacturer of certain CPU types in canonical form.
+++	# It is in some cases the only manufacturer, in others, it is the most popular.
+++	c[12]-convex | c[12]-unknown | c3[248]-convex | c3[248]-unknown)
+++		vendor=convex
+++		basic_os=${basic_os:-bsd}
++ 		;;
++-	sequent)
++-		basic_machine=i386-sequent
+++	craynv-unknown)
+++		vendor=cray
+++		basic_os=${basic_os:-unicosmp}
++ 		;;
++-	sh5el)
++-		basic_machine=sh5le-unknown
+++	c90-unknown | c90-cray)
+++		vendor=cray
+++		basic_os=${basic_os:-unicos}
++ 		;;
++-	simso-wrs)
++-		basic_machine=sparclite-wrs
++-		os=-vxworks
+++	fx80-unknown)
+++		vendor=alliant
++ 		;;
++-	sps7)
++-		basic_machine=m68k-bull
++-		os=-sysv2
+++	romp-unknown)
+++		vendor=ibm
++ 		;;
++-	spur)
++-		basic_machine=spur-unknown
+++	mmix-unknown)
+++		vendor=knuth
++ 		;;
++-	st2000)
++-		basic_machine=m68k-tandem
+++	microblaze-unknown | microblazeel-unknown)
+++		vendor=xilinx
++ 		;;
++-	stratus)
++-		basic_machine=i860-stratus
++-		os=-sysv4
+++	rs6000-unknown)
+++		vendor=ibm
++ 		;;
++-	strongarm-* | thumb-*)
++-		basic_machine=arm-`echo "$basic_machine" | sed 's/^[^-]*-//'`
+++	vax-unknown)
+++		vendor=dec
++ 		;;
++-	sun2)
++-		basic_machine=m68000-sun
+++	pdp11-unknown)
+++		vendor=dec
++ 		;;
++-	sun2os3)
++-		basic_machine=m68000-sun
++-		os=-sunos3
+++	we32k-unknown)
+++		vendor=att
++ 		;;
++-	sun2os4)
++-		basic_machine=m68000-sun
++-		os=-sunos4
+++	cydra-unknown)
+++		vendor=cydrome
++ 		;;
++-	sun3os3)
++-		basic_machine=m68k-sun
++-		os=-sunos3
+++	i370-ibm*)
+++		vendor=ibm
++ 		;;
++-	sun3os4)
++-		basic_machine=m68k-sun
++-		os=-sunos4
+++	orion-unknown)
+++		vendor=highlevel
++ 		;;
++-	sun4os3)
++-		basic_machine=sparc-sun
++-		os=-sunos3
+++	xps-unknown | xps100-unknown)
+++		cpu=xps100
+++		vendor=honeywell
++ 		;;
++-	sun4os4)
++-		basic_machine=sparc-sun
++-		os=-sunos4
+++
+++	# Here we normalize CPU types with a missing or matching vendor
+++	armh-unknown | armh-alt)
+++		cpu=armv7l
+++		vendor=alt
+++		basic_os=${basic_os:-linux-gnueabihf}
++ 		;;
++-	sun4sol2)
++-		basic_machine=sparc-sun
++-		os=-solaris2
+++
+++	# Normalized CPU+vendor pairs that imply an OS, if not otherwise specified
+++	m68k-isi)
+++		basic_os=${basic_os:-sysv}
++ 		;;
++-	sun3 | sun3-*)
++-		basic_machine=m68k-sun
+++	m68k-sony)
+++		basic_os=${basic_os:-newsos}
++ 		;;
++-	sun4)
++-		basic_machine=sparc-sun
+++	m68k-tektronix)
+++		basic_os=${basic_os:-bsd}
++ 		;;
++-	sun386 | sun386i | roadrunner)
++-		basic_machine=i386-sun
+++	m88k-harris)
+++		basic_os=${basic_os:-sysv3}
++ 		;;
++-	sv1)
++-		basic_machine=sv1-cray
++-		os=-unicos
+++	i386-bull | m68k-bull)
+++		basic_os=${basic_os:-sysv3}
++ 		;;
++-	symmetry)
++-		basic_machine=i386-sequent
++-		os=-dynix
+++	rs6000-bull)
+++		basic_os=${basic_os:-bosx}
++ 		;;
++-	t3e)
++-		basic_machine=alphaev5-cray
++-		os=-unicos
+++	mips-sni)
+++		basic_os=${basic_os:-sysv4}
++ 		;;
++-	t90)
++-		basic_machine=t90-cray
++-		os=-unicos
+++
+++	# Here we normalize CPU types irrespective of the vendor
+++	amd64-*)
+++		cpu=x86_64
++ 		;;
++-	tile*)
++-		basic_machine=$basic_machine-unknown
++-		os=-linux-gnu
+++	blackfin-*)
+++		cpu=bfin
+++		basic_os=${basic_os:-linux}
++ 		;;
++-	tx39)
++-		basic_machine=mipstx39-unknown
+++	c54x-*)
+++		cpu=tic54x
++ 		;;
++-	tx39el)
++-		basic_machine=mipstx39el-unknown
+++	c55x-*)
+++		cpu=tic55x
++ 		;;
++-	toad1)
++-		basic_machine=pdp10-xkl
++-		os=-tops20
+++	c6x-*)
+++		cpu=tic6x
++ 		;;
++-	tower | tower-32)
++-		basic_machine=m68k-ncr
+++	e500v[12]-*)
+++		cpu=powerpc
+++		basic_os=${basic_os}"spe"
++ 		;;
++-	tpf)
++-		basic_machine=s390x-ibm
++-		os=-tpf
+++	mips3*-*)
+++		cpu=mips64
++ 		;;
++-	udi29k)
++-		basic_machine=a29k-amd
++-		os=-udi
+++	ms1-*)
+++		cpu=mt
++ 		;;
++-	ultra3)
++-		basic_machine=a29k-nyu
++-		os=-sym1
+++	m68knommu-*)
+++		cpu=m68k
+++		basic_os=${basic_os:-linux}
++ 		;;
++-	v810 | necv810)
++-		basic_machine=v810-nec
++-		os=-none
+++	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
+++		cpu=s12z
++ 		;;
++-	vaxv)
++-		basic_machine=vax-dec
++-		os=-sysv
+++	openrisc-*)
+++		cpu=or32
++ 		;;
++-	vms)
++-		basic_machine=vax-dec
++-		os=-vms
+++	parisc-*)
+++		cpu=hppa
+++		basic_os=${basic_os:-linux}
++ 		;;
++-	vpp*|vx|vx-*)
++-		basic_machine=f301-fujitsu
+++	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
+++		cpu=i586
++ 		;;
++-	vxworks960)
++-		basic_machine=i960-wrs
++-		os=-vxworks
+++	pentiumpro-* | p6-* | 6x86-* | athlon-* | athlon_*-*)
+++		cpu=i686
++ 		;;
++-	vxworks68)
++-		basic_machine=m68k-wrs
++-		os=-vxworks
+++	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
+++		cpu=i686
++ 		;;
++-	vxworks29k)
++-		basic_machine=a29k-wrs
++-		os=-vxworks
+++	pentium4-*)
+++		cpu=i786
++ 		;;
++-	w65*)
++-		basic_machine=w65-wdc
++-		os=-none
+++	ppc-* | ppcbe-*)
+++		cpu=powerpc
++ 		;;
++-	w89k-*)
++-		basic_machine=hppa1.1-winbond
++-		os=-proelf
+++	ppcle-* | powerpclittle-*)
+++		cpu=powerpcle
++ 		;;
++-	x64)
++-		basic_machine=x86_64-pc
+++	ppc64-*)
+++		cpu=powerpc64
++ 		;;
++-	xbox)
++-		basic_machine=i686-pc
++-		os=-mingw32
+++	ppc64le-* | powerpc64little-*)
+++		cpu=powerpc64le
++ 		;;
++-	xps | xps100)
++-		basic_machine=xps100-honeywell
+++	sb1-*)
+++		cpu=mipsisa64sb1
++ 		;;
++-	xscale-* | xscalee[bl]-*)
++-		basic_machine=`echo "$basic_machine" | sed 's/^xscale/arm/'`
+++	sb1el-*)
+++		cpu=mipsisa64sb1el
++ 		;;
++-	ymp)
++-		basic_machine=ymp-cray
++-		os=-unicos
+++	sh5e[lb]-*)
+++		cpu=`echo "$cpu" | sed 's/^\(sh.\)e\(.\)$/\1\2e/'`
++ 		;;
++-	none)
++-		basic_machine=none-none
++-		os=-none
+++	spur-*)
+++		cpu=spur
++ 		;;
++-
++-# Here we handle the default manufacturer of certain CPU types.  It is in
++-# some cases the only manufacturer, in others, it is the most popular.
++-	w89k)
++-		basic_machine=hppa1.1-winbond
+++	strongarm-* | thumb-*)
+++		cpu=arm
++ 		;;
++-	op50n)
++-		basic_machine=hppa1.1-oki
+++	tx39-*)
+++		cpu=mipstx39
++ 		;;
++-	op60c)
++-		basic_machine=hppa1.1-oki
+++	tx39el-*)
+++		cpu=mipstx39el
++ 		;;
++-	romp)
++-		basic_machine=romp-ibm
+++	xscale-* | xscalee[bl]-*)
+++		cpu=`echo "$cpu" | sed 's/^xscale/arm/'`
++ 		;;
++-	mmix)
++-		basic_machine=mmix-knuth
+++	arm64-* | aarch64le-*)
+++		cpu=aarch64
++ 		;;
++-	rs6000)
++-		basic_machine=rs6000-ibm
+++
+++	# Recognize the canonical CPU Types that limit and/or modify the
+++	# company names they are paired with.
+++	cr16-*)
+++		basic_os=${basic_os:-elf}
++ 		;;
++-	vax)
++-		basic_machine=vax-dec
+++	crisv32-* | etraxfs*-*)
+++		cpu=crisv32
+++		vendor=axis
++ 		;;
++-	pdp11)
++-		basic_machine=pdp11-dec
+++	cris-* | etrax*-*)
+++		cpu=cris
+++		vendor=axis
++ 		;;
++-	we32k)
++-		basic_machine=we32k-att
+++	crx-*)
+++		basic_os=${basic_os:-elf}
++ 		;;
++-	sh[1234] | sh[24]a | sh[24]aeb | sh[34]eb | sh[1234]le | sh[23]ele)
++-		basic_machine=sh-unknown
+++	neo-tandem)
+++		cpu=neo
+++		vendor=tandem
++ 		;;
++-	cydra)
++-		basic_machine=cydra-cydrome
+++	nse-tandem)
+++		cpu=nse
+++		vendor=tandem
++ 		;;
++-	orion)
++-		basic_machine=orion-highlevel
+++	nsr-tandem)
+++		cpu=nsr
+++		vendor=tandem
++ 		;;
++-	orion105)
++-		basic_machine=clipper-highlevel
+++	nsv-tandem)
+++		cpu=nsv
+++		vendor=tandem
++ 		;;
++-	mac | mpw | mac-mpw)
++-		basic_machine=m68k-apple
+++	nsx-tandem)
+++		cpu=nsx
+++		vendor=tandem
++ 		;;
++-	pmac | pmac-mpw)
++-		basic_machine=powerpc-apple
+++	mipsallegrexel-sony)
+++		cpu=mipsallegrexel
+++		vendor=sony
++ 		;;
++-	*-unknown)
++-		# Make sure to match an already-canonicalized machine name.
+++	tile*-*)
+++		basic_os=${basic_os:-linux-gnu}
++ 		;;
+++
++ 	*)
++-		echo Invalid configuration \`"$1"\': machine \`"$basic_machine"\' not recognized 1>&2
++-		exit 1
+++		# Recognize the canonical CPU types that are allowed with any
+++		# company name.
+++		case $cpu in
+++			  1750a \
+++			| 580 \
+++			| [cjt]90 \
+++			| a29k \
+++			| aarch64 \
+++			| aarch64_be \
+++			| aarch64c \
+++			| abacus \
+++			| alpha \
+++			| alpha64 \
+++			| alpha64ev56 \
+++			| alpha64ev6[78] \
+++			| alpha64ev[4-8] \
+++			| alpha64pca5[67] \
+++			| alphaev56 \
+++			| alphaev6[78] \
+++			| alphaev[4-8] \
+++			| alphapca5[67] \
+++			| am33_2.0 \
+++			| amdgcn \
+++			| arc \
+++			| arc32 \
+++			| arc64 \
+++			| arceb \
+++			| arm \
+++			| arm64e \
+++			| arm64ec \
+++			| arm[lb]e \
+++			| arme[lb] \
+++			| armv* \
+++			| asmjs \
+++			| avr \
+++			| avr32 \
+++			| ba \
+++			| be32 \
+++			| be64 \
+++			| bfin \
+++			| bpf \
+++			| bs2000 \
+++			| c30 \
+++			| c4x \
+++			| c8051 \
+++			| c[123]* \
+++			| clipper \
+++			| craynv \
+++			| csky \
+++			| cydra \
+++			| d10v \
+++			| d30v \
+++			| dlx \
+++			| dsp16xx \
+++			| e2k \
+++			| elxsi \
+++			| epiphany \
+++			| f30[01] \
+++			| f700 \
+++			| fido \
+++			| fr30 \
+++			| frv \
+++			| ft32 \
+++			| fx80 \
+++			| h8300 \
+++			| h8500 \
+++			| hexagon \
+++			| hppa \
+++			| hppa1.[01] \
+++			| hppa2.0 \
+++			| hppa2.0[nw] \
+++			| hppa64 \
+++			| i*86 \
+++			| i370 \
+++			| i860 \
+++			| i960 \
+++			| ia16 \
+++			| ia64 \
+++			| ip2k \
+++			| iq2000 \
+++			| javascript \
+++			| k1om \
+++			| kvx \
+++			| le32 \
+++			| le64 \
+++			| lm32 \
+++			| loongarch32 \
+++			| loongarch64 \
+++			| m32c \
+++			| m32r \
+++			| m32rle \
+++			| m5200 \
+++			| m68000 \
+++			| m680[012346]0 \
+++			| m6811 \
+++			| m6812 \
+++			| m68360 \
+++			| m683?2 \
+++			| m68hc11 \
+++			| m68hc12 \
+++			| m68hcs12x \
+++			| m68k \
+++			| m88110 \
+++			| m88k \
+++			| maxq \
+++			| mb \
+++			| mcore \
+++			| mep \
+++			| metag \
+++			| microblaze \
+++			| microblazeel \
+++			| mips* \
+++			| mmix \
+++			| mn10200 \
+++			| mn10300 \
+++			| moxie \
+++			| msp430 \
+++			| mt \
+++			| nanomips* \
+++			| nds32 \
+++			| nds32be \
+++			| nds32le \
+++			| nfp \
+++			| nios \
+++			| nios2 \
+++			| nios2eb \
+++			| nios2el \
+++			| none \
+++			| np1 \
+++			| ns16k \
+++			| ns32k \
+++			| nvptx \
+++			| open8 \
+++			| or1k* \
+++			| or32 \
+++			| orion \
+++			| pdp10 \
+++			| pdp11 \
+++			| picochip \
+++			| pj \
+++			| pjl \
+++			| pn \
+++			| power \
+++			| powerpc \
+++			| powerpc64 \
+++			| powerpc64le \
+++			| powerpcle \
+++			| powerpcspe \
+++			| pru \
+++			| pyramid \
+++			| riscv \
+++			| riscv32 \
+++			| riscv32be \
+++			| riscv64 \
+++			| riscv64be \
+++			| rl78 \
+++			| romp \
+++			| rs6000 \
+++			| rx \
+++			| s390 \
+++			| s390x \
+++			| score \
+++			| sh \
+++			| sh64 \
+++			| sh64le \
+++			| sh[12345][lb]e \
+++			| sh[1234] \
+++			| sh[1234]e[lb] \
+++			| sh[23]e \
+++			| sh[23]ele \
+++			| sh[24]a \
+++			| sh[24]ae[lb] \
+++			| sh[lb]e \
+++			| she[lb] \
+++			| shl \
+++			| sparc \
+++			| sparc64 \
+++			| sparc64b \
+++			| sparc64v \
+++			| sparc86x \
+++			| sparclet \
+++			| sparclite \
+++			| sparcv8 \
+++			| sparcv9 \
+++			| sparcv9b \
+++			| sparcv9v \
+++			| spu \
+++			| sv1 \
+++			| sx* \
+++			| tahoe \
+++			| thumbv7* \
+++			| tic30 \
+++			| tic4x \
+++			| tic54x \
+++			| tic55x \
+++			| tic6x \
+++			| tic80 \
+++			| tron \
+++			| ubicom32 \
+++			| v70 \
+++			| v810 \
+++			| v850 \
+++			| v850e \
+++			| v850e1 \
+++			| v850e2 \
+++			| v850e2v3 \
+++			| v850es \
+++			| vax \
+++			| vc4 \
+++			| visium \
+++			| w65 \
+++			| wasm32 \
+++			| wasm64 \
+++			| we32k \
+++			| x86 \
+++			| x86_64 \
+++			| xc16x \
+++			| xgate \
+++			| xps100 \
+++			| xstormy16 \
+++			| xtensa* \
+++			| ymp \
+++			| z80 \
+++			| z8k)
+++				;;
+++
+++			*)
+++				echo "Invalid configuration '$1': machine '$cpu-$vendor' not recognized" 1>&2
+++				exit 1
+++				;;
+++		esac
++ 		;;
++ esac
++ 
++ # Here we canonicalize certain aliases for manufacturers.
++-case $basic_machine in
++-	*-digital*)
++-		basic_machine=`echo "$basic_machine" | sed 's/digital.*/dec/'`
+++case $vendor in
+++	digital*)
+++		vendor=dec
++ 		;;
++-	*-commodore*)
++-		basic_machine=`echo "$basic_machine" | sed 's/commodore.*/cbm/'`
+++	commodore*)
+++		vendor=cbm
++ 		;;
++ 	*)
++ 		;;
++@@ -1360,209 +1491,247 @@ esac
++ 
++ # Decode manufacturer-specific aliases for certain operating systems.
++ 
++-if [ x$os != x ]
+++if test x"$basic_os" != x
++ then
+++
+++# First recognize some ad-hoc cases, or perhaps split kernel-os, or else just
+++# set os.
+++obj=
+++case $basic_os in
+++	gnu/linux*)
+++		kernel=linux
+++		os=`echo "$basic_os" | sed -e 's|gnu/linux|gnu|'`
+++		;;
+++	os2-emx)
+++		kernel=os2
+++		os=`echo "$basic_os" | sed -e 's|os2-emx|emx|'`
+++		;;
+++	nto-qnx*)
+++		kernel=nto
+++		os=`echo "$basic_os" | sed -e 's|nto-qnx|qnx|'`
+++		;;
+++	*-*)
+++		saved_IFS=$IFS
+++		IFS="-" read kernel os <<EOF
+++$basic_os
+++EOF
+++		IFS=$saved_IFS
+++		;;
+++	# Default OS when just kernel was specified
+++	nto*)
+++		kernel=nto
+++		os=`echo "$basic_os" | sed -e 's|nto|qnx|'`
+++		;;
+++	linux*)
+++		kernel=linux
+++		os=`echo "$basic_os" | sed -e 's|linux|gnu|'`
+++		;;
+++	managarm*)
+++		kernel=managarm
+++		os=`echo "$basic_os" | sed -e 's|managarm|mlibc|'`
+++		;;
+++	*)
+++		kernel=
+++		os=$basic_os
+++		;;
+++esac
+++
+++# Now, normalize the OS (knowing we just have one component, it's not a kernel,
+++# etc.)
++ case $os in
++ 	# First match some system type aliases that might get confused
++ 	# with valid system types.
++-	# -solaris* is a basic system type, with this one exception.
++-	-auroraux)
++-		os=-auroraux
+++	# solaris* is a basic system type, with this one exception.
+++	auroraux)
+++		os=auroraux
+++		;;
+++	bluegene*)
+++		os=cnk
+++		;;
+++	solaris1 | solaris1.*)
+++		os=`echo "$os" | sed -e 's|solaris1|sunos4|'`
+++		;;
+++	solaris)
+++		os=solaris2
+++		;;
+++	unixware*)
+++		os=sysv4.2uw
++ 		;;
++-	-solaris1 | -solaris1.*)
++-		os=`echo $os | sed -e 's|solaris1|sunos4|'`
+++	# The marketing names for NeXT's operating systems were
+++	# NeXTSTEP, NeXTSTEP 2, OpenSTEP 3, OpenSTEP 4.  'openstep' is
+++	# mapped to 'openstep3', but 'openstep1' and 'openstep2' are
+++	# mapped to 'nextstep' and 'nextstep2', consistent with the
+++	# treatment of SunOS/Solaris.
+++	ns | ns1 | nextstep | nextstep1 | openstep1)
+++		os=nextstep
++ 		;;
++-	-solaris)
++-		os=-solaris2
+++	ns2 | nextstep2 | openstep2)
+++		os=nextstep2
++ 		;;
++-	-unixware*)
++-		os=-sysv4.2uw
+++	ns3 | nextstep3 | openstep | openstep3)
+++		os=openstep3
++ 		;;
++-	-gnu/linux*)
++-		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
+++	ns4 | nextstep4 | openstep4)
+++		os=openstep4
++ 		;;
++ 	# es1800 is here to avoid being matched by es* (a different OS)
++-	-es1800*)
++-		os=-ose
+++	es1800*)
+++		os=ose
++ 		;;
++-	# Now accept the basic system types.
++-	# The portable systems comes first.
++-	# Each alternative MUST end in a * to match a version number.
++-	# -sysv* is not here because it comes later, after sysvr4.
++-	-gnu* | -bsd* | -mach* | -minix* | -genix* | -ultrix* | -irix* \
++-	      | -*vms* | -sco* | -esix* | -isc* | -aix* | -cnk* | -sunos | -sunos[34]*\
++-	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
++-	      | -sym* | -kopensolaris* | -plan9* \
++-	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
++-	      | -aos* | -aros* | -cloudabi* | -sortix* \
++-	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
++-	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
++-	      | -hiux* | -knetbsd* | -mirbsd* | -netbsd* \
++-	      | -bitrig* | -openbsd* | -solidbsd* | -libertybsd* \
++-	      | -ekkobsd* | -kfreebsd* | -freebsd* | -riscix* | -lynxos* \
++-	      | -bosx* | -nextstep* | -cxux* | -aout* | -elf* | -oabi* \
++-	      | -ptx* | -coff* | -ecoff* | -winnt* | -domain* | -vsta* \
++-	      | -udi* | -eabi* | -lites* | -ieee* | -go32* | -aux* | -hcos* \
++-	      | -chorusos* | -chorusrdb* | -cegcc* | -glidix* \
++-	      | -cygwin* | -msys* | -pe* | -psos* | -moss* | -proelf* | -rtems* \
++-	      | -midipix* | -mingw32* | -mingw64* | -linux-gnu* | -linux-android* \
++-	      | -linux-newlib* | -linux-musl* | -linux-uclibc* \
++-	      | -uxpv* | -beos* | -mpeix* | -udk* | -moxiebox* \
++-	      | -interix* | -uwin* | -mks* | -rhapsody* | -darwin* \
++-	      | -openstep* | -oskit* | -conix* | -pw32* | -nonstopux* \
++-	      | -storm-chaos* | -tops10* | -tenex* | -tops20* | -its* \
++-	      | -os2* | -vos* | -palmos* | -uclinux* | -nucleus* \
++-	      | -morphos* | -superux* | -rtmk* | -windiss* \
++-	      | -powermax* | -dnix* | -nx6 | -nx7 | -sei* | -dragonfly* \
++-	      | -skyos* | -haiku* | -rdos* | -toppers* | -drops* | -es* \
++-	      | -onefs* | -tirtos* | -phoenix* | -fuchsia* | -redox* | -bme* \
++-	      | -midnightbsd*)
++-	# Remember, each alternative MUST END IN *, to match a version number.
++-		;;
++-	-qnx*)
++-		case $basic_machine in
++-		    x86-* | i*86-*)
++-			;;
++-		    *)
++-			os=-nto$os
++-			;;
++-		esac
+++	# Some version numbers need modification
+++	chorusos*)
+++		os=chorusos
++ 		;;
++-	-nto-qnx*)
+++	isc)
+++		os=isc2.2
++ 		;;
++-	-nto*)
++-		os=`echo $os | sed -e 's|nto|nto-qnx|'`
+++	sco6)
+++		os=sco5v6
++ 		;;
++-	-sim | -xray | -os68k* | -v88r* \
++-	      | -windows* | -osx | -abug | -netware* | -os9* \
++-	      | -macos* | -mpw* | -magic* | -mmixware* | -mon960* | -lnews*)
+++	sco5)
+++		os=sco3.2v5
++ 		;;
++-	-mac*)
++-		os=`echo "$os" | sed -e 's|mac|macos|'`
+++	sco4)
+++		os=sco3.2v4
++ 		;;
++-	-linux-dietlibc)
++-		os=-linux-dietlibc
+++	sco3.2.[4-9]*)
+++		os=`echo "$os" | sed -e 's/sco3.2./sco3.2v/'`
++ 		;;
++-	-linux*)
++-		os=`echo $os | sed -e 's|linux|linux-gnu|'`
+++	sco*v* | scout)
+++		# Don't match below
++ 		;;
++-	-sunos5*)
++-		os=`echo "$os" | sed -e 's|sunos5|solaris2|'`
+++	sco*)
+++		os=sco3.2v2
++ 		;;
++-	-sunos6*)
++-		os=`echo "$os" | sed -e 's|sunos6|solaris3|'`
+++	psos*)
+++		os=psos
+++		;;
+++	qnx*)
+++		os=qnx
+++		;;
+++	hiux*)
+++		os=hiuxwe2
+++		;;
+++	lynx*178)
+++		os=lynxos178
++ 		;;
++-	-opened*)
++-		os=-openedition
+++	lynx*5)
+++		os=lynxos5
++ 		;;
++-	-os400*)
++-		os=-os400
+++	lynxos*)
+++		# don't get caught up in next wildcard
++ 		;;
++-	-wince*)
++-		os=-wince
+++	lynx*)
+++		os=lynxos
++ 		;;
++-	-utek*)
++-		os=-bsd
+++	mac[0-9]*)
+++		os=`echo "$os" | sed -e 's|mac|macos|'`
++ 		;;
++-	-dynix*)
++-		os=-bsd
+++	opened*)
+++		os=openedition
++ 		;;
++-	-acis*)
++-		os=-aos
+++	os400*)
+++		os=os400
++ 		;;
++-	-atheos*)
++-		os=-atheos
+++	sunos5*)
+++		os=`echo "$os" | sed -e 's|sunos5|solaris2|'`
++ 		;;
++-	-syllable*)
++-		os=-syllable
+++	sunos6*)
+++		os=`echo "$os" | sed -e 's|sunos6|solaris3|'`
++ 		;;
++-	-386bsd)
++-		os=-bsd
+++	wince*)
+++		os=wince
++ 		;;
++-	-ctix* | -uts*)
++-		os=-sysv
+++	utek*)
+++		os=bsd
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|tektronix|'`
++ 		;;
++-	-nova*)
++-		os=-rtmk-nova
+++	dynix*)
+++		os=bsd
++ 		;;
++-	-ns2)
++-		os=-nextstep2
+++	acis*)
+++		os=aos
++ 		;;
++-	-nsk*)
++-		os=-nsk
+++	atheos*)
+++		os=atheos
++ 		;;
++-	# Preserve the version number of sinix5.
++-	-sinix5.*)
++-		os=`echo $os | sed -e 's|sinix|sysv|'`
+++	syllable*)
+++		os=syllable
++ 		;;
++-	-sinix*)
++-		os=-sysv4
+++	386bsd)
+++		os=bsd
+++		;;
+++	ctix*)
+++		os=sysv
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|convergent|'`
+++		;;
+++	uts*)
+++		os=sysv
+++		;;
+++	nova*)
+++		kernel=rtmk
+++		os=nova
++ 		;;
++-	-tpf*)
++-		os=-tpf
+++	# Preserve the version number of sinix5.
+++	sinix5.*)
+++		os=`echo "$os" | sed -e 's|sinix|sysv|'`
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
++ 		;;
++-	-triton*)
++-		os=-sysv3
+++	sinix*)
+++		os=sysv4
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
++ 		;;
++-	-oss*)
++-		os=-sysv3
+++	tpf*)
+++		os=tpf
++ 		;;
++-	-svr4*)
++-		os=-sysv4
+++	triton*)
+++		os=sysv3
++ 		;;
++-	-svr3)
++-		os=-sysv3
+++	oss*)
+++		os=sysv3
++ 		;;
++-	-sysvr4)
++-		os=-sysv4
+++	svr4*)
+++		os=sysv4
++ 		;;
++-	# This must come after -sysvr4.
++-	-sysv*)
+++	svr3)
+++		os=sysv3
++ 		;;
++-	-ose*)
++-		os=-ose
+++	sysvr4)
+++		os=sysv4
++ 		;;
++-	-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
++-		os=-mint
+++	ose*)
+++		os=ose
++ 		;;
++-	-zvmoe)
++-		os=-zvmoe
+++	*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
+++		os=mint
++ 		;;
++-	-dicos*)
++-		os=-dicos
+++	dicos*)
+++		os=dicos
++ 		;;
++-	-pikeos*)
+++	pikeos*)
++ 		# Until real need of OS specific support for
++ 		# particular features comes up, bare metal
++ 		# configurations are quite functional.
++-		case $basic_machine in
+++		case $cpu in
++ 		    arm*)
++-			os=-eabi
+++			os=eabi
++ 			;;
++ 		    *)
++-			os=-elf
+++			os=
+++			obj=elf
++ 			;;
++ 		esac
++ 		;;
++-	-nacl*)
++-		;;
++-	-ios)
++-		;;
++-	-none)
++-		;;
++-	-*-eabi)
++-		case $basic_machine in
++-		    arm*)
++-			;;
++-		esac
+++	aout* | coff* | elf* | pe*)
+++		# These are machine code file formats, not OSes
+++		obj=$os
+++		os=
++ 		;;
++ 	*)
++-		# Get rid of the `-' at the beginning of $os.
++-		os=`echo $os | sed 's/[^-]*-//'`
++-		echo Invalid configuration \`"$1"\': system \`"$os"\' not recognized 1>&2
++-		exit 1
+++		# No normalization, but not necessarily accepted, that comes below.
++ 		;;
++ esac
+++
++ else
++ 
++ # Here we handle the default operating systems that come with various machines.
++@@ -1575,254 +1744,606 @@ else
++ # will signal an error saying that MANUFACTURER isn't an operating
++ # system, and we'll never get to this point.
++ 
++-case $basic_machine in
+++kernel=
+++obj=
+++case $cpu-$vendor in
++ 	score-*)
++-		os=-elf
+++		os=
+++		obj=elf
++ 		;;
++ 	spu-*)
++-		os=-elf
+++		os=
+++		obj=elf
++ 		;;
++ 	*-acorn)
++-		os=-riscix1.2
+++		os=riscix1.2
++ 		;;
++ 	arm*-rebel)
++-		os=-linux
+++		kernel=linux
+++		os=gnu
++ 		;;
++ 	arm*-semi)
++-		os=-aout
+++		os=
+++		obj=aout
++ 		;;
++ 	c4x-* | tic4x-*)
++-		os=-coff
+++		os=
+++		obj=coff
++ 		;;
++ 	c8051-*)
++-		os=-elf
+++		os=
+++		obj=elf
+++		;;
+++	clipper-intergraph)
+++		os=clix
++ 		;;
++ 	hexagon-*)
++-		os=-elf
+++		os=
+++		obj=elf
++ 		;;
++ 	tic54x-*)
++-		os=-coff
+++		os=
+++		obj=coff
++ 		;;
++ 	tic55x-*)
++-		os=-coff
+++		os=
+++		obj=coff
++ 		;;
++ 	tic6x-*)
++-		os=-coff
+++		os=
+++		obj=coff
++ 		;;
++ 	# This must come before the *-dec entry.
++ 	pdp10-*)
++-		os=-tops20
+++		os=tops20
++ 		;;
++ 	pdp11-*)
++-		os=-none
+++		os=none
++ 		;;
++ 	*-dec | vax-*)
++-		os=-ultrix4.2
+++		os=ultrix4.2
++ 		;;
++ 	m68*-apollo)
++-		os=-domain
+++		os=domain
++ 		;;
++ 	i386-sun)
++-		os=-sunos4.0.2
+++		os=sunos4.0.2
++ 		;;
++ 	m68000-sun)
++-		os=-sunos3
+++		os=sunos3
++ 		;;
++ 	m68*-cisco)
++-		os=-aout
+++		os=
+++		obj=aout
++ 		;;
++ 	mep-*)
++-		os=-elf
+++		os=
+++		obj=elf
+++		;;
+++	# The -sgi and -siemens entries must be before the mips- entry
+++	# or we get the wrong os.
+++	*-sgi)
+++		os=irix
+++		;;
+++	*-siemens)
+++		os=sysv4
++ 		;;
++ 	mips*-cisco)
++-		os=-elf
+++		os=
+++		obj=elf
++ 		;;
++-	mips*-*)
++-		os=-elf
+++	mips*-*|nanomips*-*)
+++		os=
+++		obj=elf
++ 		;;
++ 	or32-*)
++-		os=-coff
+++		os=
+++		obj=coff
++ 		;;
++-	*-tti)	# must be before sparc entry or we get the wrong os.
++-		os=-sysv3
+++	# This must be before the sparc-* entry or we get the wrong os.
+++	*-tti)
+++		os=sysv3
++ 		;;
++ 	sparc-* | *-sun)
++-		os=-sunos4.1.1
+++		os=sunos4.1.1
++ 		;;
++ 	pru-*)
++-		os=-elf
+++		os=
+++		obj=elf
++ 		;;
++ 	*-be)
++-		os=-beos
+++		os=beos
++ 		;;
++ 	*-ibm)
++-		os=-aix
+++		os=aix
++ 		;;
++ 	*-knuth)
++-		os=-mmixware
+++		os=mmixware
++ 		;;
++ 	*-wec)
++-		os=-proelf
+++		os=proelf
++ 		;;
++ 	*-winbond)
++-		os=-proelf
+++		os=proelf
++ 		;;
++ 	*-oki)
++-		os=-proelf
+++		os=proelf
++ 		;;
++ 	*-hp)
++-		os=-hpux
+++		os=hpux
++ 		;;
++ 	*-hitachi)
++-		os=-hiux
+++		os=hiuxwe2
++ 		;;
++ 	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
++-		os=-sysv
+++		os=sysv
++ 		;;
++ 	*-cbm)
++-		os=-amigaos
+++		os=amigaos
++ 		;;
++ 	*-dg)
++-		os=-dgux
+++		os=dgux
++ 		;;
++ 	*-dolphin)
++-		os=-sysv3
+++		os=sysv3
++ 		;;
++ 	m68k-ccur)
++-		os=-rtu
+++		os=rtu
++ 		;;
++ 	m88k-omron*)
++-		os=-luna
+++		os=luna
++ 		;;
++ 	*-next)
++-		os=-nextstep
+++		os=nextstep
++ 		;;
++ 	*-sequent)
++-		os=-ptx
+++		os=ptx
++ 		;;
++ 	*-crds)
++-		os=-unos
+++		os=unos
++ 		;;
++ 	*-ns)
++-		os=-genix
+++		os=genix
++ 		;;
++ 	i370-*)
++-		os=-mvs
+++		os=mvs
++ 		;;
++ 	*-gould)
++-		os=-sysv
+++		os=sysv
++ 		;;
++ 	*-highlevel)
++-		os=-bsd
+++		os=bsd
++ 		;;
++ 	*-encore)
++-		os=-bsd
++-		;;
++-	*-sgi)
++-		os=-irix
++-		;;
++-	*-siemens)
++-		os=-sysv4
+++		os=bsd
++ 		;;
++ 	*-masscomp)
++-		os=-rtu
+++		os=rtu
++ 		;;
++ 	f30[01]-fujitsu | f700-fujitsu)
++-		os=-uxpv
+++		os=uxpv
++ 		;;
++ 	*-rom68k)
++-		os=-coff
+++		os=
+++		obj=coff
++ 		;;
++ 	*-*bug)
++-		os=-coff
+++		os=
+++		obj=coff
++ 		;;
++ 	*-apple)
++-		os=-macos
+++		os=macos
++ 		;;
++ 	*-atari*)
++-		os=-mint
+++		os=mint
+++		;;
+++	*-wrs)
+++		os=vxworks
++ 		;;
++ 	*)
++-		os=-none
+++		os=none
++ 		;;
++ esac
+++
++ fi
++ 
+++# Now, validate our (potentially fixed-up) individual pieces (OS, OBJ).
+++
+++case $os in
+++	# Sometimes we do "kernel-libc", so those need to count as OSes.
+++	llvm* | musl* | newlib* | relibc* | uclibc*)
+++		;;
+++	# Likewise for "kernel-abi"
+++	eabi* | gnueabi*)
+++		;;
+++	# VxWorks passes extra cpu info in the 4th filed.
+++	simlinux | simwindows | spe)
+++		;;
+++	# See `case $cpu-$os` validation below
+++	ghcjs)
+++		;;
+++	# Now accept the basic system types.
+++	# Each alternative MUST end in a * to match a version number.
+++	  abug \
+++	| aix* \
+++	| amdhsa* \
+++	| amigados* \
+++	| amigaos* \
+++	| android* \
+++	| aof* \
+++	| aos* \
+++	| aros* \
+++	| atheos* \
+++	| auroraux* \
+++	| aux* \
+++	| beos* \
+++	| bitrig* \
+++	| bme* \
+++	| bosx* \
+++	| bsd* \
+++	| cegcc* \
+++	| chorusos* \
+++	| chorusrdb* \
+++	| clix* \
+++	| cloudabi* \
+++	| cnk* \
+++	| conix* \
+++	| cos* \
+++	| cxux* \
+++	| cygwin* \
+++	| darwin* \
+++	| dgux* \
+++	| dicos* \
+++	| dnix* \
+++	| domain* \
+++	| dragonfly* \
+++	| drops* \
+++	| ebmon* \
+++	| ecoff* \
+++	| ekkobsd* \
+++	| emscripten* \
+++	| emx* \
+++	| es* \
+++	| fiwix* \
+++	| freebsd* \
+++	| fuchsia* \
+++	| genix* \
+++	| genode* \
+++	| glidix* \
+++	| gnu* \
+++	| go32* \
+++	| haiku* \
+++	| hcos* \
+++	| hiux* \
+++	| hms* \
+++	| hpux* \
+++	| ieee* \
+++	| interix* \
+++	| ios* \
+++	| iris* \
+++	| irix* \
+++	| ironclad* \
+++	| isc* \
+++	| its* \
+++	| l4re* \
+++	| libertybsd* \
+++	| lites* \
+++	| lnews* \
+++	| luna* \
+++	| lynxos* \
+++	| mach* \
+++	| macos* \
+++	| magic* \
+++	| mbr* \
+++	| midipix* \
+++	| midnightbsd* \
+++	| mingw32* \
+++	| mingw64* \
+++	| minix* \
+++	| mint* \
+++	| mirbsd* \
+++	| mks* \
+++	| mlibc* \
+++	| mmixware* \
+++	| mon960* \
+++	| morphos* \
+++	| moss* \
+++	| moxiebox* \
+++	| mpeix* \
+++	| mpw* \
+++	| msdos* \
+++	| msys* \
+++	| mvs* \
+++	| nacl* \
+++	| netbsd* \
+++	| netware* \
+++	| newsos* \
+++	| nextstep* \
+++	| nindy* \
+++	| nonstopux* \
+++	| nova* \
+++	| nsk* \
+++	| nucleus* \
+++	| nx6 \
+++	| nx7 \
+++	| oabi* \
+++	| ohos* \
+++	| onefs* \
+++	| openbsd* \
+++	| openedition* \
+++	| openstep* \
+++	| os108* \
+++	| os2* \
+++	| os400* \
+++	| os68k* \
+++	| os9* \
+++	| ose* \
+++	| osf* \
+++	| oskit* \
+++	| osx* \
+++	| palmos* \
+++	| phoenix* \
+++	| plan9* \
+++	| powermax* \
+++	| powerunix* \
+++	| proelf* \
+++	| psos* \
+++	| psp* \
+++	| ptx* \
+++	| pw32* \
+++	| qnx* \
+++	| rdos* \
+++	| redox* \
+++	| rhapsody* \
+++	| riscix* \
+++	| riscos* \
+++	| rtems* \
+++	| rtmk* \
+++	| rtu* \
+++	| scout* \
+++	| secbsd* \
+++	| sei* \
+++	| serenity* \
+++	| sim* \
+++	| skyos* \
+++	| solaris* \
+++	| solidbsd* \
+++	| sortix* \
+++	| storm-chaos* \
+++	| sunos \
+++	| sunos[34]* \
+++	| superux* \
+++	| syllable* \
+++	| sym* \
+++	| sysv* \
+++	| tenex* \
+++	| tirtos* \
+++	| toppers* \
+++	| tops10* \
+++	| tops20* \
+++	| tpf* \
+++	| tvos* \
+++	| twizzler* \
+++	| uclinux* \
+++	| udi* \
+++	| udk* \
+++	| ultrix* \
+++	| unicos* \
+++	| uniplus* \
+++	| unleashed* \
+++	| unos* \
+++	| uwin* \
+++	| uxpv* \
+++	| v88r* \
+++	|*vms* \
+++	| vos* \
+++	| vsta* \
+++	| vxsim* \
+++	| vxworks* \
+++	| wasi* \
+++	| watchos* \
+++	| wince* \
+++	| windiss* \
+++	| windows* \
+++	| winnt* \
+++	| xenix* \
+++	| xray* \
+++	| zephyr* \
+++	| zvmoe* )
+++		;;
+++	# This one is extra strict with allowed versions
+++	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
+++		# Don't forget version if it is 3.2v4 or newer.
+++		;;
+++	# This refers to builds using the UEFI calling convention
+++	# (which depends on the architecture) and PE file format.
+++	# Note that this is both a different calling convention and
+++	# different file format than that of GNU-EFI
+++	# (x86_64-w64-mingw32).
+++	uefi)
+++		;;
+++	none)
+++		;;
+++	kernel* | msvc* )
+++		# Restricted further below
+++		;;
+++	'')
+++		if test x"$obj" = x
+++		then
+++			echo "Invalid configuration '$1': Blank OS only allowed with explicit machine code file format" 1>&2
+++		fi
+++		;;
+++	*)
+++		echo "Invalid configuration '$1': OS '$os' not recognized" 1>&2
+++		exit 1
+++		;;
+++esac
+++
+++case $obj in
+++	aout* | coff* | elf* | pe*)
+++		;;
+++	'')
+++		# empty is fine
+++		;;
+++	*)
+++		echo "Invalid configuration '$1': Machine code format '$obj' not recognized" 1>&2
+++		exit 1
+++		;;
+++esac
+++
+++# Here we handle the constraint that a (synthetic) cpu and os are
+++# valid only in combination with each other and nowhere else.
+++case $cpu-$os in
+++	# The "javascript-unknown-ghcjs" triple is used by GHC; we
+++	# accept it here in order to tolerate that, but reject any
+++	# variations.
+++	javascript-ghcjs)
+++		;;
+++	javascript-* | *-ghcjs)
+++		echo "Invalid configuration '$1': cpu '$cpu' is not valid with os '$os$obj'" 1>&2
+++		exit 1
+++		;;
+++esac
+++
+++# As a final step for OS-related things, validate the OS-kernel combination
+++# (given a valid OS), if there is a kernel.
+++case $kernel-$os-$obj in
+++	linux-gnu*- | linux-android*- | linux-dietlibc*- | linux-llvm*- \
+++		    | linux-mlibc*- | linux-musl*- | linux-newlib*- \
+++		    | linux-relibc*- | linux-uclibc*- | linux-ohos*- )
+++		;;
+++	uclinux-uclibc*- | uclinux-gnu*- )
+++		;;
+++	managarm-mlibc*- | managarm-kernel*- )
+++		;;
+++	windows*-msvc*-)
+++		;;
+++	-dietlibc*- | -llvm*- | -mlibc*- | -musl*- | -newlib*- | -relibc*- \
+++		    | -uclibc*- )
+++		# These are just libc implementations, not actual OSes, and thus
+++		# require a kernel.
+++		echo "Invalid configuration '$1': libc '$os' needs explicit kernel." 1>&2
+++		exit 1
+++		;;
+++	-kernel*- )
+++		echo "Invalid configuration '$1': '$os' needs explicit kernel." 1>&2
+++		exit 1
+++		;;
+++	*-kernel*- )
+++		echo "Invalid configuration '$1': '$kernel' does not support '$os'." 1>&2
+++		exit 1
+++		;;
+++	*-msvc*- )
+++		echo "Invalid configuration '$1': '$os' needs 'windows'." 1>&2
+++		exit 1
+++		;;
+++	kfreebsd*-gnu*- | knetbsd*-gnu*- | netbsd*-gnu*- | kopensolaris*-gnu*-)
+++		;;
+++	vxworks-simlinux- | vxworks-simwindows- | vxworks-spe-)
+++		;;
+++	nto-qnx*-)
+++		;;
+++	os2-emx-)
+++		;;
+++	rtmk-nova-)
+++		;;
+++	*-eabi*- | *-gnueabi*-)
+++		;;
+++	none--*)
+++		# None (no kernel, i.e. freestanding / bare metal),
+++		# can be paired with an machine code file format
+++		;;
+++	-*-)
+++		# Blank kernel with real OS is always fine.
+++		;;
+++	--*)
+++		# Blank kernel and OS with real machine code file format is always fine.
+++		;;
+++	*-*-*)
+++		echo "Invalid configuration '$1': Kernel '$kernel' not known to work with OS '$os'." 1>&2
+++		exit 1
+++		;;
+++esac
+++
++ # Here we handle the case where we know the os, and the CPU type, but not the
++ # manufacturer.  We pick the logical manufacturer.
++-vendor=unknown
++-case $basic_machine in
++-	*-unknown)
++-		case $os in
++-			-riscix*)
+++case $vendor in
+++	unknown)
+++		case $cpu-$os in
+++			*-riscix*)
++ 				vendor=acorn
++ 				;;
++-			-sunos*)
+++			*-sunos* | *-solaris*)
++ 				vendor=sun
++ 				;;
++-			-cnk*|-aix*)
+++			*-cnk* | *-aix*)
++ 				vendor=ibm
++ 				;;
++-			-beos*)
+++			*-beos*)
++ 				vendor=be
++ 				;;
++-			-hpux*)
+++			*-hpux*)
++ 				vendor=hp
++ 				;;
++-			-mpeix*)
+++			*-mpeix*)
++ 				vendor=hp
++ 				;;
++-			-hiux*)
+++			*-hiux*)
++ 				vendor=hitachi
++ 				;;
++-			-unos*)
+++			*-unos*)
++ 				vendor=crds
++ 				;;
++-			-dgux*)
+++			*-dgux*)
++ 				vendor=dg
++ 				;;
++-			-luna*)
+++			*-luna*)
++ 				vendor=omron
++ 				;;
++-			-genix*)
+++			*-genix*)
++ 				vendor=ns
++ 				;;
++-			-mvs* | -opened*)
+++			*-clix*)
+++				vendor=intergraph
+++				;;
+++			*-mvs* | *-opened*)
+++				vendor=ibm
+++				;;
+++			*-os400*)
++ 				vendor=ibm
++ 				;;
++-			-os400*)
+++			s390-* | s390x-*)
++ 				vendor=ibm
++ 				;;
++-			-ptx*)
+++			*-ptx*)
++ 				vendor=sequent
++ 				;;
++-			-tpf*)
+++			*-tpf*)
++ 				vendor=ibm
++ 				;;
++-			-vxsim* | -vxworks* | -windiss*)
+++			*-vxsim* | *-vxworks* | *-windiss*)
++ 				vendor=wrs
++ 				;;
++-			-aux*)
+++			*-aux*)
++ 				vendor=apple
++ 				;;
++-			-hms*)
+++			*-hms*)
++ 				vendor=hitachi
++ 				;;
++-			-mpw* | -macos*)
+++			*-mpw* | *-macos*)
++ 				vendor=apple
++ 				;;
++-			-*mint | -mint[0-9]* | -*MiNT | -MiNT[0-9]*)
+++			*-*mint | *-mint[0-9]* | *-*MiNT | *-MiNT[0-9]*)
++ 				vendor=atari
++ 				;;
++-			-vos*)
+++			*-vos*)
++ 				vendor=stratus
++ 				;;
++ 		esac
++-		basic_machine=`echo "$basic_machine" | sed "s/unknown/$vendor/"`
++ 		;;
++ esac
++ 
++-echo "$basic_machine$os"
+++echo "$cpu-$vendor${kernel:+-$kernel}${os:+-$os}${obj:+-$obj}"
++ exit
++ 
++ # Local variables:
+diff --git a/external/libcmis/UnpackedTarball_libcmis.mk b/external/libcmis/UnpackedTarball_libcmis.mk
+index d224ed603..ccda316b0 100644
+--- a/external/libcmis/UnpackedTarball_libcmis.mk
++++ b/external/libcmis/UnpackedTarball_libcmis.mk
+@@ -21,6 +21,7 @@ $(eval $(call gb_UnpackedTarball_add_patches,libcmis, \
+ 	external/libcmis/libcmis_gdrive.patch.1 \
+ 	external/libcmis/libcmis-boost-string.patch \
+ 	external/libcmis/0002-HttpSession-add-a-callback-that-can-be-used-to-confi.patch \
++	external/libcmis/0003-update-config.patch \
+ ))
+ 
+ # vim: set noet sw=4 ts=4:
+diff --git a/external/nss/ExternalProject_nss.mk b/external/nss/ExternalProject_nss.mk
+index cc6c19bdb..48fd9fec6 100644
+--- a/external/nss/ExternalProject_nss.mk
++++ b/external/nss/ExternalProject_nss.mk
+@@ -58,6 +58,7 @@ $(call gb_ExternalProject_get_state_target,nss,build): \
+ 		$(if $(filter ANDROID FREEBSD LINUX MACOSX,$(OS)),$(if $(filter X86_64,$(CPUNAME)),USE_64=1)) \
+ 		$(if $(filter AARCH64,$(CPUNAME)),USE_64=1 CPU_ARCH=aarch64) \
+ 		$(if $(filter POWERPC64,$(CPUNAME)),USE_64=1 CPU_ARCH=ppc64le) \
++		$(if $(filter LOONGARCH64,$(CPUNAME)),USE_64=1 CPU_ARCH=loongarch64) \
+ 		$(if $(filter MACOSX,$(OS)),\
+ 			MACOS_SDK_DIR=$(MACOSX_SDK_PATH) \
+ 			NSS_USE_SYSTEM_SQLITE=1) \
+diff --git a/external/python3/ExternalPackage_python3.mk b/external/python3/ExternalPackage_python3.mk
+index 241233914..0e2ff089a 100644
+--- a/external/python3/ExternalPackage_python3.mk
++++ b/external/python3/ExternalPackage_python3.mk
+@@ -16,6 +16,8 @@ ifeq ($(CPUNAME),X86_64)
+ python_arch_subdir=amd64/
+ else ifeq ($(CPUNAME),AARCH64)
+ python_arch_subdir=arm64/
++else ifeq ($(CPUNAME),LOONGARCH64)
++python_arch_subdir=loongarch64/
+ else
+ python_arch_subdir=win32/
+ endif
+@@ -46,7 +48,7 @@ $(eval $(call gb_ExternalPackage_add_file,python3,$(LIBO_BIN_FOLDER)/python.bin,
+ $(eval $(call gb_ExternalPackage_add_file,python3,$(LIBO_BIN_FOLDER)/libpython$(PYTHON_VERSION_MAJOR).$(PYTHON_VERSION_MINOR)$(if $(ENABLE_DBGUTIL),d).so,libpython$(PYTHON_VERSION_MAJOR).$(PYTHON_VERSION_MINOR)$(if $(ENABLE_DBGUTIL),d).so))
+ $(eval $(call gb_ExternalPackage_add_file,python3,$(LIBO_BIN_FOLDER)/libpython$(PYTHON_VERSION_MAJOR).$(PYTHON_VERSION_MINOR)$(if $(ENABLE_DBGUTIL),d).so.1.0,libpython$(PYTHON_VERSION_MAJOR).$(PYTHON_VERSION_MINOR)$(if $(ENABLE_DBGUTIL),d).so))
+ $(eval $(call gb_ExternalPackage_add_file,python3,$(LIBO_BIN_FOLDER)/python.bin-gdb.py,Tools/gdb/libpython.py))
+-
++$(eval $(call gb_ExternalPackage_add_file,python3,$(LIBO_BIN_FOLDER)/python-core-$(PYTHON_VERSION)/lib/lib-dynload,LO_lib/zlib.cpython-3.8.so))
+ # Unfortunately the python build system does not allow to explicitly enable or
+ # disable these, it just tries to build them and then prints which did not
+ # build successfully without stopping; so the build will break on delivering if
+@@ -54,7 +56,6 @@ $(eval $(call gb_ExternalPackage_add_file,python3,$(LIBO_BIN_FOLDER)/python.bin-
+ # Obviously this list should not contain stuff with external dependencies
+ # that may not be available on baseline systems.
+ 
+-ifneq ($(OS),AIX)
+ python3_EXTENSION_MODULE_SUFFIX=cpython-$(PYTHON_VERSION_MAJOR).$(PYTHON_VERSION_MINOR)$(if $(ENABLE_DBGUTIL),d)
+ $(eval $(call gb_ExternalPackage_add_files,python3,$(LIBO_BIN_FOLDER)/python-core-$(PYTHON_VERSION)/lib/lib-dynload,\
+ 	LO_lib/array.$(python3_EXTENSION_MODULE_SUFFIX).so \
+@@ -123,7 +124,6 @@ $(eval $(call gb_ExternalPackage_add_files,python3,$(LIBO_BIN_FOLDER)/python-cor
+ 	LO_lib/zlib.$(python3_EXTENSION_MODULE_SUFFIX).so \
+ ))
+ endif
+-endif
+ 
+ # headers are not delivered, but used from unpacked dir Include/
+ # (+ toplevel for pyconfig.h)
+@@ -147,6 +147,11 @@ $(eval $(call gb_ExternalPackage_add_files,python3,$(LIBO_BIN_FOLDER)/python-cor
+         LO_lib/_sysconfigdata_$(if $(ENABLE_DBGUTIL),d)_linux_powerpc64le-linux-gnu.py \
+ ))
+ else
++ifeq ($(HOST_PLATFORM),loongarch64-unknown-linux-gnu)
++$(eval $(call gb_ExternalPackage_add_files,python3,$(LIBO_BIN_FOLDER)/python-core-$(PYTHON_VERSION)/lib,\
++        LO_lib/_sysconfigdata__linux_loongarch64-linux-gnu.py \
++))
++else
+ # note: python configure overrides config.guess with something that doesn't
+ # put -pc in its linux platform triplets, so filter that...
+ ifneq ($(OS),WNT)
+@@ -162,6 +167,7 @@ endif
+ endif
+ endif
+ endif
++endif
+ 
+ 
+ # packages not shipped:
+diff --git a/external/python3/README b/external/python3/README
+index edde023af..f6a415a98 100644
+--- a/external/python3/README
++++ b/external/python3/README
+@@ -1 +1,5 @@
+-CPython implementation of Python 3 from http://www.python.org
++修改了逻辑
++由于需要loongarch架构三元组支持，但patch打入方式有问题
++所以将configure、configure.ac这两部分相关的patch手动打入
++将config.guess/sub 更新
++打成xz包
+diff --git a/external/python3/UnpackedTarball_python3.mk b/external/python3/UnpackedTarball_python3.mk
+index 31b6a166e..3b2fbada9 100644
+--- a/external/python3/UnpackedTarball_python3.mk
++++ b/external/python3/UnpackedTarball_python3.mk
+@@ -19,13 +19,10 @@ $(eval $(call gb_UnpackedTarball_fix_end_of_line,python3,\
+ # <https://bugs.python.org/issue44065> "'configure: error: internal configure error for the platform
+ # triplet' on macOS with Clang supporting --print-multiarch:"
+ $(eval $(call gb_UnpackedTarball_add_patches,python3,\
+-	external/python3/i100492-freebsd.patch.1 \
+-	external/python3/python-3.3.0-darwin.patch.1 \
+ 	external/python3/python-3.8-msvc-sdk.patch.1 \
+ 	external/python3/python-3.7.6-msvc-ssl.patch.1 \
+ 	external/python3/python-3.5.4-msvc-disable.patch.1 \
+ 	external/python3/ubsan.patch.0 \
+-	external/python3/python-3.5.tweak.strip.soabi.patch \
+ 	external/python3/darwin.patch.0 \
+ 	external/python3/macos-11.patch.0 \
+ ))
+@@ -42,10 +39,5 @@ $(eval $(call gb_UnpackedTarball_add_patches,python3,\
+ ))
+ endif
+ 
+-ifneq ($(SYSTEM_ZLIB),TRUE)
+-$(eval $(call gb_UnpackedTarball_add_patches,python3, \
+-    external/python3/internal-zlib.patch.0 \
+-))
+-endif
+ 
+ # vim: set noet sw=4 ts=4:
+diff --git a/external/python3/internal-zlib.patch.0 b/external/python3/internal-zlib.patch.0-old
+similarity index 100%
+rename from external/python3/internal-zlib.patch.0
+rename to external/python3/internal-zlib.patch.0-old
+diff --git a/external/python3/python-3.3.0-darwin.patch.1 b/external/python3/python-3.3.0-darwin.patch.1-old
+similarity index 100%
+rename from external/python3/python-3.3.0-darwin.patch.1
+rename to external/python3/python-3.3.0-darwin.patch.1-old
+diff --git a/external/python3/python-3.5.tweak.strip.soabi.patch b/external/python3/python-3.5.tweak.strip.soabi.patch-old
+similarity index 100%
+rename from external/python3/python-3.5.tweak.strip.soabi.patch
+rename to external/python3/python-3.5.tweak.strip.soabi.patch-old
+diff --git a/fontconfig-update-config.patch b/fontconfig-update-config.patch
+new file mode 100644
+index 000000000..edb23b34f
+--- /dev/null
++++ b/fontconfig-update-config.patch
+@@ -0,0 +1,4507 @@
++diff --git a/config.guess b/config.guess
++index b33c9e8..48a6846 100755
++--- a/config.guess
+++++ b/config.guess
++@@ -1,12 +1,14 @@
++ #! /bin/sh
++ # Attempt to guess a canonical system name.
++-#   Copyright 1992-2018 Free Software Foundation, Inc.
+++#   Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++-timestamp='2018-08-29'
+++# shellcheck disable=SC2006,SC2268 # see below for rationale
+++
+++timestamp='2024-07-27'
++ 
++ # This file is free software; you can redistribute it and/or modify it
++ # under the terms of the GNU General Public License as published by
++-# the Free Software Foundation; either version 3 of the License, or
+++# the Free Software Foundation, either version 3 of the License, or
++ # (at your option) any later version.
++ #
++ # This program is distributed in the hope that it will be useful, but
++@@ -27,17 +29,25 @@ timestamp='2018-08-29'
++ # Originally written by Per Bothner; maintained since 2000 by Ben Elliston.
++ #
++ # You can get the latest version of this script from:
++-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
+++# https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
++ #
++ # Please send patches to <config-patches@gnu.org>.
++ 
++ 
+++# The "shellcheck disable" line above the timestamp inhibits complaints
+++# about features and limitations of the classic Bourne shell that were
+++# superseded or lifted in POSIX.  However, this script identifies a wide
+++# variety of pre-POSIX systems that do not have POSIX shells at all, and
+++# even some reasonably current systems (Solaris 10 as case-in-point) still
+++# have a pre-POSIX /bin/sh.
+++
+++
++ me=`echo "$0" | sed -e 's,.*/,,'`
++ 
++ usage="\
++ Usage: $0 [OPTION]
++ 
++-Output the configuration name of the system \`$me' is run on.
+++Output the configuration name of the system '$me' is run on.
++ 
++ Options:
++   -h, --help         print this help, then exit
++@@ -50,13 +60,13 @@ version="\
++ GNU config.guess ($timestamp)
++ 
++ Originally written by Per Bothner.
++-Copyright 1992-2018 Free Software Foundation, Inc.
+++Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++ 
++ help="
++-Try \`$me --help' for more information."
+++Try '$me --help' for more information."
++ 
++ # Parse command line
++ while test $# -gt 0 ; do
++@@ -84,24 +94,28 @@ if test $# != 0; then
++   exit 1
++ fi
++ 
+++# Just in case it came from the environment.
+++GUESS=
+++
++ # CC_FOR_BUILD -- compiler used by this script. Note that the use of a
++ # compiler to aid in system detection is discouraged as it requires
++ # temporary files to be created and, as you can see below, it is a
++ # headache to deal with in a portable fashion.
++ 
++-# Historically, `CC_FOR_BUILD' used to be named `HOST_CC'. We still
++-# use `HOST_CC' if defined, but it is deprecated.
+++# Historically, 'CC_FOR_BUILD' used to be named 'HOST_CC'. We still
+++# use 'HOST_CC' if defined, but it is deprecated.
++ 
++ # Portable tmp directory creation inspired by the Autoconf team.
++ 
++ tmp=
++ # shellcheck disable=SC2172
++-trap 'test -z "$tmp" || rm -fr "$tmp"' 1 2 13 15
++-trap 'exitcode=$?; test -z "$tmp" || rm -fr "$tmp"; exit $exitcode' 0
+++trap 'test -z "$tmp" || rm -fr "$tmp"' 0 1 2 13 15
++ 
++ set_cc_for_build() {
+++    # prevent multiple calls if $tmp is already set
+++    test "$tmp" && return 0
++     : "${TMPDIR=/tmp}"
++-    # shellcheck disable=SC2039
+++    # shellcheck disable=SC2039,SC3028
++     { tmp=`(umask 077 && mktemp -d "$TMPDIR/cgXXXXXX") 2>/dev/null` && test -n "$tmp" && test -d "$tmp" ; } ||
++ 	{ test -n "$RANDOM" && tmp=$TMPDIR/cg$$-$RANDOM && (umask 077 && mkdir "$tmp" 2>/dev/null) ; } ||
++ 	{ tmp=$TMPDIR/cg-$$ && (umask 077 && mkdir "$tmp" 2>/dev/null) && echo "Warning: creating insecure temp directory" >&2 ; } ||
++@@ -109,9 +123,9 @@ set_cc_for_build() {
++     dummy=$tmp/dummy
++     case ${CC_FOR_BUILD-},${HOST_CC-},${CC-} in
++ 	,,)    echo "int x;" > "$dummy.c"
++-	       for driver in cc gcc c89 c99 ; do
+++	       for driver in cc gcc c17 c99 c89 ; do
++ 		   if ($driver -c -o "$dummy.o" "$dummy.c") >/dev/null 2>&1 ; then
++-		       CC_FOR_BUILD="$driver"
+++		       CC_FOR_BUILD=$driver
++ 		       break
++ 		   fi
++ 	       done
++@@ -132,40 +146,57 @@ fi
++ 
++ UNAME_MACHINE=`(uname -m) 2>/dev/null` || UNAME_MACHINE=unknown
++ UNAME_RELEASE=`(uname -r) 2>/dev/null` || UNAME_RELEASE=unknown
++-UNAME_SYSTEM=`(uname -s) 2>/dev/null`  || UNAME_SYSTEM=unknown
+++UNAME_SYSTEM=`(uname -s) 2>/dev/null` || UNAME_SYSTEM=unknown
++ UNAME_VERSION=`(uname -v) 2>/dev/null` || UNAME_VERSION=unknown
++ 
++-case "$UNAME_SYSTEM" in
+++case $UNAME_SYSTEM in
++ Linux|GNU|GNU/*)
++-	# If the system lacks a compiler, then just pick glibc.
++-	# We could probably try harder.
++-	LIBC=gnu
+++	LIBC=unknown
++ 
++ 	set_cc_for_build
++ 	cat <<-EOF > "$dummy.c"
+++	#if defined(__ANDROID__)
+++	LIBC=android
+++	#else
++ 	#include <features.h>
++ 	#if defined(__UCLIBC__)
++ 	LIBC=uclibc
++ 	#elif defined(__dietlibc__)
++ 	LIBC=dietlibc
++-	#else
+++	#elif defined(__GLIBC__)
++ 	LIBC=gnu
+++	#elif defined(__LLVM_LIBC__)
+++	LIBC=llvm
+++	#else
+++	#include <stdarg.h>
+++	/* First heuristic to detect musl libc.  */
+++	#ifdef __DEFINED_va_list
+++	LIBC=musl
+++	#endif
+++	#endif
++ 	#endif
++ 	EOF
++-	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`"
+++	cc_set_libc=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^LIBC' | sed 's, ,,g'`
+++	eval "$cc_set_libc"
++ 
++-	# If ldd exists, use it to detect musl libc.
++-	if command -v ldd >/dev/null && \
++-		ldd --version 2>&1 | grep -q ^musl
++-	then
++-	    LIBC=musl
+++	# Second heuristic to detect musl libc.
+++	if [ "$LIBC" = unknown ] &&
+++	   command -v ldd >/dev/null &&
+++	   ldd --version 2>&1 | grep -q ^musl; then
+++		LIBC=musl
+++	fi
+++
+++	# If the system lacks a compiler, then just pick glibc.
+++	# We could probably try harder.
+++	if [ "$LIBC" = unknown ]; then
+++		LIBC=gnu
++ 	fi
++ 	;;
++ esac
++ 
++ # Note: order is significant - the case branches are not exclusive.
++ 
++-case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
+++case $UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION in
++     *:NetBSD:*:*)
++ 	# NetBSD (nbsd) targets should (where applicable) match one or
++ 	# more of the tuples: *-*-netbsdelf*, *-*-netbsdaout*,
++@@ -177,12 +208,12 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	#
++ 	# Note: NetBSD doesn't particularly care about the vendor
++ 	# portion of the name.  We always set it to "unknown".
++-	sysctl="sysctl -n hw.machine_arch"
++ 	UNAME_MACHINE_ARCH=`(uname -p 2>/dev/null || \
++-	    "/sbin/$sysctl" 2>/dev/null || \
++-	    "/usr/sbin/$sysctl" 2>/dev/null || \
+++	    /sbin/sysctl -n hw.machine_arch 2>/dev/null || \
+++	    /usr/sbin/sysctl -n hw.machine_arch 2>/dev/null || \
++ 	    echo unknown)`
++-	case "$UNAME_MACHINE_ARCH" in
+++	case $UNAME_MACHINE_ARCH in
+++	    aarch64eb) machine=aarch64_be-unknown ;;
++ 	    armeb) machine=armeb-unknown ;;
++ 	    arm*) machine=arm-unknown ;;
++ 	    sh3el) machine=shl-unknown ;;
++@@ -191,13 +222,13 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	    earmv*)
++ 		arch=`echo "$UNAME_MACHINE_ARCH" | sed -e 's,^e\(armv[0-9]\).*$,\1,'`
++ 		endian=`echo "$UNAME_MACHINE_ARCH" | sed -ne 's,^.*\(eb\)$,\1,p'`
++-		machine="${arch}${endian}"-unknown
+++		machine=${arch}${endian}-unknown
++ 		;;
++-	    *) machine="$UNAME_MACHINE_ARCH"-unknown ;;
+++	    *) machine=$UNAME_MACHINE_ARCH-unknown ;;
++ 	esac
++ 	# The Operating System including object format, if it has switched
++ 	# to ELF recently (or will in the future) and ABI.
++-	case "$UNAME_MACHINE_ARCH" in
+++	case $UNAME_MACHINE_ARCH in
++ 	    earm*)
++ 		os=netbsdelf
++ 		;;
++@@ -218,7 +249,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 		;;
++ 	esac
++ 	# Determine ABI tags.
++-	case "$UNAME_MACHINE_ARCH" in
+++	case $UNAME_MACHINE_ARCH in
++ 	    earm*)
++ 		expr='s/^earmv[0-9]/-eabi/;s/eb$//'
++ 		abi=`echo "$UNAME_MACHINE_ARCH" | sed -e "$expr"`
++@@ -229,7 +260,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# thus, need a distinct triplet. However, they do not need
++ 	# kernel version information, so it can be replaced with a
++ 	# suitable tag, in the style of linux-gnu.
++-	case "$UNAME_VERSION" in
+++	case $UNAME_VERSION in
++ 	    Debian*)
++ 		release='-gnu'
++ 		;;
++@@ -240,45 +271,57 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# Since CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM:
++ 	# contains redundant information, the shorter form:
++ 	# CPU_TYPE-MANUFACTURER-OPERATING_SYSTEM is used.
++-	echo "$machine-${os}${release}${abi-}"
++-	exit ;;
+++	GUESS=$machine-${os}${release}${abi-}
+++	;;
++     *:Bitrig:*:*)
++ 	UNAME_MACHINE_ARCH=`arch | sed 's/Bitrig.//'`
++-	echo "$UNAME_MACHINE_ARCH"-unknown-bitrig"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-bitrig$UNAME_RELEASE
+++	;;
++     *:OpenBSD:*:*)
++ 	UNAME_MACHINE_ARCH=`arch | sed 's/OpenBSD.//'`
++-	echo "$UNAME_MACHINE_ARCH"-unknown-openbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-openbsd$UNAME_RELEASE
+++	;;
+++    *:SecBSD:*:*)
+++	UNAME_MACHINE_ARCH=`arch | sed 's/SecBSD.//'`
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-secbsd$UNAME_RELEASE
+++	;;
++     *:LibertyBSD:*:*)
++ 	UNAME_MACHINE_ARCH=`arch | sed 's/^.*BSD\.//'`
++-	echo "$UNAME_MACHINE_ARCH"-unknown-libertybsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE_ARCH-unknown-libertybsd$UNAME_RELEASE
+++	;;
++     *:MidnightBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-midnightbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-midnightbsd$UNAME_RELEASE
+++	;;
++     *:ekkoBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-ekkobsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-ekkobsd$UNAME_RELEASE
+++	;;
++     *:SolidBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-solidbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-solidbsd$UNAME_RELEASE
+++	;;
+++    *:OS108:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-os108_$UNAME_RELEASE
+++	;;
++     macppc:MirBSD:*:*)
++-	echo powerpc-unknown-mirbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-unknown-mirbsd$UNAME_RELEASE
+++	;;
++     *:MirBSD:*:*)
++-	echo "$UNAME_MACHINE"-unknown-mirbsd"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-mirbsd$UNAME_RELEASE
+++	;;
++     *:Sortix:*:*)
++-	echo "$UNAME_MACHINE"-unknown-sortix
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-sortix
+++	;;
+++    *:Twizzler:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-twizzler
+++	;;
++     *:Redox:*:*)
++-	echo "$UNAME_MACHINE"-unknown-redox
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-redox
+++	;;
++     mips:OSF1:*.*)
++-        echo mips-dec-osf1
++-        exit ;;
+++	GUESS=mips-dec-osf1
+++	;;
++     alpha:OSF1:*:*)
+++	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
+++	trap '' 0
++ 	case $UNAME_RELEASE in
++ 	*4.0)
++ 		UNAME_RELEASE=`/usr/sbin/sizer -v | awk '{print $3}'`
++@@ -292,7 +335,7 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# covers most systems running today.  This code pipes the CPU
++ 	# types through head -n 1, so we only detect the type of CPU 0.
++ 	ALPHA_CPU_TYPE=`/usr/sbin/psrinfo -v | sed -n -e 's/^  The alpha \(.*\) processor.*$/\1/p' | head -n 1`
++-	case "$ALPHA_CPU_TYPE" in
+++	case $ALPHA_CPU_TYPE in
++ 	    "EV4 (21064)")
++ 		UNAME_MACHINE=alpha ;;
++ 	    "EV4.5 (21064)")
++@@ -329,112 +372,121 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++ 	# A Tn.n version is a released field test version.
++ 	# A Xn.n version is an unreleased experimental baselevel.
++ 	# 1.2 uses "1.2" for uname -r.
++-	echo "$UNAME_MACHINE"-dec-osf"`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`"
++-	# Reset EXIT trap before exiting to avoid spurious non-zero exit code.
++-	exitcode=$?
++-	trap '' 0
++-	exit $exitcode ;;
+++	OSF_REL=`echo "$UNAME_RELEASE" | sed -e 's/^[PVTX]//' | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
+++	GUESS=$UNAME_MACHINE-dec-osf$OSF_REL
+++	;;
++     Amiga*:UNIX_System_V:4.0:*)
++-	echo m68k-unknown-sysv4
++-	exit ;;
+++	GUESS=m68k-unknown-sysv4
+++	;;
++     *:[Aa]miga[Oo][Ss]:*:*)
++-	echo "$UNAME_MACHINE"-unknown-amigaos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-amigaos
+++	;;
++     *:[Mm]orph[Oo][Ss]:*:*)
++-	echo "$UNAME_MACHINE"-unknown-morphos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-morphos
+++	;;
++     *:OS/390:*:*)
++-	echo i370-ibm-openedition
++-	exit ;;
+++	GUESS=i370-ibm-openedition
+++	;;
++     *:z/VM:*:*)
++-	echo s390-ibm-zvmoe
++-	exit ;;
+++	GUESS=s390-ibm-zvmoe
+++	;;
++     *:OS400:*:*)
++-	echo powerpc-ibm-os400
++-	exit ;;
+++	GUESS=powerpc-ibm-os400
+++	;;
++     arm:RISC*:1.[012]*:*|arm:riscix:1.[012]*:*)
++-	echo arm-acorn-riscix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=arm-acorn-riscix$UNAME_RELEASE
+++	;;
++     arm*:riscos:*:*|arm*:RISCOS:*:*)
++-	echo arm-unknown-riscos
++-	exit ;;
+++	GUESS=arm-unknown-riscos
+++	;;
++     SR2?01:HI-UX/MPP:*:* | SR8000:HI-UX/MPP:*:*)
++-	echo hppa1.1-hitachi-hiuxmpp
++-	exit ;;
+++	GUESS=hppa1.1-hitachi-hiuxmpp
+++	;;
++     Pyramid*:OSx*:*:* | MIS*:OSx*:*:* | MIS*:SMP_DC-OSx*:*:*)
++ 	# akee@wpdis03.wpafb.af.mil (Earle F. Ake) contributed MIS and NILE.
++-	if test "`(/bin/universe) 2>/dev/null`" = att ; then
++-		echo pyramid-pyramid-sysv3
++-	else
++-		echo pyramid-pyramid-bsd
++-	fi
++-	exit ;;
+++	case `(/bin/universe) 2>/dev/null` in
+++	    att) GUESS=pyramid-pyramid-sysv3 ;;
+++	    *)   GUESS=pyramid-pyramid-bsd   ;;
+++	esac
+++	;;
++     NILE*:*:*:dcosx)
++-	echo pyramid-pyramid-svr4
++-	exit ;;
+++	GUESS=pyramid-pyramid-svr4
+++	;;
++     DRS?6000:unix:4.0:6*)
++-	echo sparc-icl-nx6
++-	exit ;;
+++	GUESS=sparc-icl-nx6
+++	;;
++     DRS?6000:UNIX_SV:4.2*:7* | DRS?6000:isis:4.2*:7*)
++ 	case `/usr/bin/uname -p` in
++-	    sparc) echo sparc-icl-nx7; exit ;;
++-	esac ;;
+++	    sparc) GUESS=sparc-icl-nx7 ;;
+++	esac
+++	;;
++     s390x:SunOS:*:*)
++-	echo "$UNAME_MACHINE"-ibm-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=$UNAME_MACHINE-ibm-solaris2$SUN_REL
+++	;;
++     sun4H:SunOS:5.*:*)
++-	echo sparc-hal-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=sparc-hal-solaris2$SUN_REL
+++	;;
++     sun4*:SunOS:5.*:* | tadpole*:SunOS:5.*:*)
++-	echo sparc-sun-solaris2"`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=sparc-sun-solaris2$SUN_REL
+++	;;
++     i86pc:AuroraUX:5.*:* | i86xen:AuroraUX:5.*:*)
++-	echo i386-pc-auroraux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=i386-pc-auroraux$UNAME_RELEASE
+++	;;
++     i86pc:SunOS:5.*:* | i86xen:SunOS:5.*:*)
++-	UNAME_REL="`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`"
++-	case `isainfo -b` in
++-	    32)
++-		echo i386-pc-solaris2"$UNAME_REL"
++-		;;
++-	    64)
++-		echo x86_64-pc-solaris2"$UNAME_REL"
++-		;;
++-	esac
++-	exit ;;
+++	set_cc_for_build
+++	SUN_ARCH=i386
+++	# If there is a compiler, see if it is configured for 64-bit objects.
+++	# Note that the Sun cc does not turn __LP64__ into 1 like gcc does.
+++	# This test works for both compilers.
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+++	    if (echo '#ifdef __amd64'; echo IS_64BIT_ARCH; echo '#endif') | \
+++		(CCOPTS="" $CC_FOR_BUILD -m64 -E - 2>/dev/null) | \
+++		grep IS_64BIT_ARCH >/dev/null
+++	    then
+++		SUN_ARCH=x86_64
+++	    fi
+++	fi
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=$SUN_ARCH-pc-solaris2$SUN_REL
+++	;;
++     sun4*:SunOS:6*:*)
++ 	# According to config.sub, this is the proper way to canonicalize
++ 	# SunOS6.  Hard to guess exactly what SunOS6 will be like, but
++ 	# it's likely to be more like Solaris than SunOS4.
++-	echo sparc-sun-solaris3"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=sparc-sun-solaris3$SUN_REL
+++	;;
++     sun4*:SunOS:*:*)
++-	case "`/usr/bin/arch -k`" in
+++	case `/usr/bin/arch -k` in
++ 	    Series*|S4*)
++ 		UNAME_RELEASE=`uname -v`
++ 		;;
++ 	esac
++-	# Japanese Language versions have a version number like `4.1.3-JL'.
++-	echo sparc-sun-sunos"`echo "$UNAME_RELEASE"|sed -e 's/-/_/'`"
++-	exit ;;
+++	# Japanese Language versions have a version number like '4.1.3-JL'.
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/'`
+++	GUESS=sparc-sun-sunos$SUN_REL
+++	;;
++     sun3*:SunOS:*:*)
++-	echo m68k-sun-sunos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-sun-sunos$UNAME_RELEASE
+++	;;
++     sun*:*:4.2BSD:*)
++ 	UNAME_RELEASE=`(sed 1q /etc/motd | awk '{print substr($5,1,3)}') 2>/dev/null`
++ 	test "x$UNAME_RELEASE" = x && UNAME_RELEASE=3
++-	case "`/bin/arch`" in
+++	case `/bin/arch` in
++ 	    sun3)
++-		echo m68k-sun-sunos"$UNAME_RELEASE"
+++		GUESS=m68k-sun-sunos$UNAME_RELEASE
++ 		;;
++ 	    sun4)
++-		echo sparc-sun-sunos"$UNAME_RELEASE"
+++		GUESS=sparc-sun-sunos$UNAME_RELEASE
++ 		;;
++ 	esac
++-	exit ;;
+++	;;
++     aushp:SunOS:*:*)
++-	echo sparc-auspex-sunos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sparc-auspex-sunos$UNAME_RELEASE
+++	;;
++     # The situation for MiNT is a little confusing.  The machine name
++     # can be virtually everything (everything which is not
++     # "atarist" or "atariste" at least should have a processor
++@@ -444,41 +496,41 @@ case "$UNAME_MACHINE:$UNAME_SYSTEM:$UNAME_RELEASE:$UNAME_VERSION" in
++     # MiNT.  But MiNT is downward compatible to TOS, so this should
++     # be no problem.
++     atarist[e]:*MiNT:*:* | atarist[e]:*mint:*:* | atarist[e]:*TOS:*:*)
++-	echo m68k-atari-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-atari-mint$UNAME_RELEASE
+++	;;
++     atari*:*MiNT:*:* | atari*:*mint:*:* | atarist[e]:*TOS:*:*)
++-	echo m68k-atari-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-atari-mint$UNAME_RELEASE
+++	;;
++     *falcon*:*MiNT:*:* | *falcon*:*mint:*:* | *falcon*:*TOS:*:*)
++-	echo m68k-atari-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-atari-mint$UNAME_RELEASE
+++	;;
++     milan*:*MiNT:*:* | milan*:*mint:*:* | *milan*:*TOS:*:*)
++-	echo m68k-milan-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-milan-mint$UNAME_RELEASE
+++	;;
++     hades*:*MiNT:*:* | hades*:*mint:*:* | *hades*:*TOS:*:*)
++-	echo m68k-hades-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-hades-mint$UNAME_RELEASE
+++	;;
++     *:*MiNT:*:* | *:*mint:*:* | *:*TOS:*:*)
++-	echo m68k-unknown-mint"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-unknown-mint$UNAME_RELEASE
+++	;;
++     m68k:machten:*:*)
++-	echo m68k-apple-machten"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-apple-machten$UNAME_RELEASE
+++	;;
++     powerpc:machten:*:*)
++-	echo powerpc-apple-machten"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-apple-machten$UNAME_RELEASE
+++	;;
++     RISC*:Mach:*:*)
++-	echo mips-dec-mach_bsd4.3
++-	exit ;;
+++	GUESS=mips-dec-mach_bsd4.3
+++	;;
++     RISC*:ULTRIX:*:*)
++-	echo mips-dec-ultrix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-dec-ultrix$UNAME_RELEASE
+++	;;
++     VAX*:ULTRIX*:*:*)
++-	echo vax-dec-ultrix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=vax-dec-ultrix$UNAME_RELEASE
+++	;;
++     2020:CLIX:*:* | 2430:CLIX:*:*)
++-	echo clipper-intergraph-clix"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=clipper-intergraph-clix$UNAME_RELEASE
+++	;;
++     mips:*:*:UMIPS | mips:*:*:RISCos)
++ 	set_cc_for_build
++ 	sed 's/^	//' << EOF > "$dummy.c"
++@@ -506,82 +558,84 @@ EOF
++ 	  dummyarg=`echo "$UNAME_RELEASE" | sed -n 's/\([0-9]*\).*/\1/p'` &&
++ 	  SYSTEM_NAME=`"$dummy" "$dummyarg"` &&
++ 	    { echo "$SYSTEM_NAME"; exit; }
++-	echo mips-mips-riscos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-mips-riscos$UNAME_RELEASE
+++	;;
++     Motorola:PowerMAX_OS:*:*)
++-	echo powerpc-motorola-powermax
++-	exit ;;
+++	GUESS=powerpc-motorola-powermax
+++	;;
++     Motorola:*:4.3:PL8-*)
++-	echo powerpc-harris-powermax
++-	exit ;;
+++	GUESS=powerpc-harris-powermax
+++	;;
++     Night_Hawk:*:*:PowerMAX_OS | Synergy:PowerMAX_OS:*:*)
++-	echo powerpc-harris-powermax
++-	exit ;;
+++	GUESS=powerpc-harris-powermax
+++	;;
++     Night_Hawk:Power_UNIX:*:*)
++-	echo powerpc-harris-powerunix
++-	exit ;;
+++	GUESS=powerpc-harris-powerunix
+++	;;
++     m88k:CX/UX:7*:*)
++-	echo m88k-harris-cxux7
++-	exit ;;
+++	GUESS=m88k-harris-cxux7
+++	;;
++     m88k:*:4*:R4*)
++-	echo m88k-motorola-sysv4
++-	exit ;;
+++	GUESS=m88k-motorola-sysv4
+++	;;
++     m88k:*:3*:R3*)
++-	echo m88k-motorola-sysv3
++-	exit ;;
+++	GUESS=m88k-motorola-sysv3
+++	;;
++     AViiON:dgux:*:*)
++ 	# DG/UX returns AViiON for all architectures
++ 	UNAME_PROCESSOR=`/usr/bin/uname -p`
++-	if [ "$UNAME_PROCESSOR" = mc88100 ] || [ "$UNAME_PROCESSOR" = mc88110 ]
+++	if test "$UNAME_PROCESSOR" = mc88100 || test "$UNAME_PROCESSOR" = mc88110
++ 	then
++-	    if [ "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx ] || \
++-	       [ "$TARGET_BINARY_INTERFACE"x = x ]
+++	    if test "$TARGET_BINARY_INTERFACE"x = m88kdguxelfx || \
+++	       test "$TARGET_BINARY_INTERFACE"x = x
++ 	    then
++-		echo m88k-dg-dgux"$UNAME_RELEASE"
+++		GUESS=m88k-dg-dgux$UNAME_RELEASE
++ 	    else
++-		echo m88k-dg-dguxbcs"$UNAME_RELEASE"
+++		GUESS=m88k-dg-dguxbcs$UNAME_RELEASE
++ 	    fi
++ 	else
++-	    echo i586-dg-dgux"$UNAME_RELEASE"
+++	    GUESS=i586-dg-dgux$UNAME_RELEASE
++ 	fi
++-	exit ;;
+++	;;
++     M88*:DolphinOS:*:*)	# DolphinOS (SVR3)
++-	echo m88k-dolphin-sysv3
++-	exit ;;
+++	GUESS=m88k-dolphin-sysv3
+++	;;
++     M88*:*:R3*:*)
++ 	# Delta 88k system running SVR3
++-	echo m88k-motorola-sysv3
++-	exit ;;
+++	GUESS=m88k-motorola-sysv3
+++	;;
++     XD88*:*:*:*) # Tektronix XD88 system running UTekV (SVR3)
++-	echo m88k-tektronix-sysv3
++-	exit ;;
+++	GUESS=m88k-tektronix-sysv3
+++	;;
++     Tek43[0-9][0-9]:UTek:*:*) # Tektronix 4300 system running UTek (BSD)
++-	echo m68k-tektronix-bsd
++-	exit ;;
+++	GUESS=m68k-tektronix-bsd
+++	;;
++     *:IRIX*:*:*)
++-	echo mips-sgi-irix"`echo "$UNAME_RELEASE"|sed -e 's/-/_/g'`"
++-	exit ;;
+++	IRIX_REL=`echo "$UNAME_RELEASE" | sed -e 's/-/_/g'`
+++	GUESS=mips-sgi-irix$IRIX_REL
+++	;;
++     ????????:AIX?:[12].1:2)   # AIX 2.2.1 or AIX 2.1.1 is RT/PC AIX.
++-	echo romp-ibm-aix     # uname -m gives an 8 hex-code CPU id
++-	exit ;;               # Note that: echo "'`uname -s`'" gives 'AIX '
+++	GUESS=romp-ibm-aix    # uname -m gives an 8 hex-code CPU id
+++	;;                    # Note that: echo "'`uname -s`'" gives 'AIX '
++     i*86:AIX:*:*)
++-	echo i386-ibm-aix
++-	exit ;;
+++	GUESS=i386-ibm-aix
+++	;;
++     ia64:AIX:*:*)
++-	if [ -x /usr/bin/oslevel ] ; then
+++	if test -x /usr/bin/oslevel ; then
++ 		IBM_REV=`/usr/bin/oslevel`
++ 	else
++-		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
+++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
++ 	fi
++-	echo "$UNAME_MACHINE"-ibm-aix"$IBM_REV"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-ibm-aix$IBM_REV
+++	;;
++     *:AIX:2:3)
++ 	if grep bos325 /usr/include/stdio.h >/dev/null 2>&1; then
++ 		set_cc_for_build
++ 		sed 's/^		//' << EOF > "$dummy.c"
++ 		#include <sys/systemcfg.h>
++ 
++-		main()
+++		int
+++		main ()
++ 			{
++ 			if (!__power_pc())
++ 				exit(1);
++@@ -591,16 +645,16 @@ EOF
++ EOF
++ 		if $CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"`
++ 		then
++-			echo "$SYSTEM_NAME"
+++			GUESS=$SYSTEM_NAME
++ 		else
++-			echo rs6000-ibm-aix3.2.5
+++			GUESS=rs6000-ibm-aix3.2.5
++ 		fi
++ 	elif grep bos324 /usr/include/stdio.h >/dev/null 2>&1; then
++-		echo rs6000-ibm-aix3.2.4
+++		GUESS=rs6000-ibm-aix3.2.4
++ 	else
++-		echo rs6000-ibm-aix3.2
+++		GUESS=rs6000-ibm-aix3.2
++ 	fi
++-	exit ;;
+++	;;
++     *:AIX:*:[4567])
++ 	IBM_CPU_ID=`/usr/sbin/lsdev -C -c processor -S available | sed 1q | awk '{ print $1 }'`
++ 	if /usr/sbin/lsattr -El "$IBM_CPU_ID" | grep ' POWER' >/dev/null 2>&1; then
++@@ -608,56 +662,56 @@ EOF
++ 	else
++ 		IBM_ARCH=powerpc
++ 	fi
++-	if [ -x /usr/bin/lslpp ] ; then
++-		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc |
+++	if test -x /usr/bin/lslpp ; then
+++		IBM_REV=`/usr/bin/lslpp -Lqc bos.rte.libc | \
++ 			   awk -F: '{ print $3 }' | sed s/[0-9]*$/0/`
++ 	else
++-		IBM_REV="$UNAME_VERSION.$UNAME_RELEASE"
+++		IBM_REV=$UNAME_VERSION.$UNAME_RELEASE
++ 	fi
++-	echo "$IBM_ARCH"-ibm-aix"$IBM_REV"
++-	exit ;;
+++	GUESS=$IBM_ARCH-ibm-aix$IBM_REV
+++	;;
++     *:AIX:*:*)
++-	echo rs6000-ibm-aix
++-	exit ;;
+++	GUESS=rs6000-ibm-aix
+++	;;
++     ibmrt:4.4BSD:*|romp-ibm:4.4BSD:*)
++-	echo romp-ibm-bsd4.4
++-	exit ;;
+++	GUESS=romp-ibm-bsd4.4
+++	;;
++     ibmrt:*BSD:*|romp-ibm:BSD:*)            # covers RT/PC BSD and
++-	echo romp-ibm-bsd"$UNAME_RELEASE"   # 4.3 with uname added to
++-	exit ;;                             # report: romp-ibm BSD 4.3
+++	GUESS=romp-ibm-bsd$UNAME_RELEASE    # 4.3 with uname added to
+++	;;                                  # report: romp-ibm BSD 4.3
++     *:BOSX:*:*)
++-	echo rs6000-bull-bosx
++-	exit ;;
+++	GUESS=rs6000-bull-bosx
+++	;;
++     DPX/2?00:B.O.S.:*:*)
++-	echo m68k-bull-sysv3
++-	exit ;;
+++	GUESS=m68k-bull-sysv3
+++	;;
++     9000/[34]??:4.3bsd:1.*:*)
++-	echo m68k-hp-bsd
++-	exit ;;
+++	GUESS=m68k-hp-bsd
+++	;;
++     hp300:4.4BSD:*:* | 9000/[34]??:4.3bsd:2.*:*)
++-	echo m68k-hp-bsd4.4
++-	exit ;;
+++	GUESS=m68k-hp-bsd4.4
+++	;;
++     9000/[34678]??:HP-UX:*:*)
++-	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
++-	case "$UNAME_MACHINE" in
+++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
+++	case $UNAME_MACHINE in
++ 	    9000/31?)            HP_ARCH=m68000 ;;
++ 	    9000/[34]??)         HP_ARCH=m68k ;;
++ 	    9000/[678][0-9][0-9])
++-		if [ -x /usr/bin/getconf ]; then
+++		if test -x /usr/bin/getconf; then
++ 		    sc_cpu_version=`/usr/bin/getconf SC_CPU_VERSION 2>/dev/null`
++ 		    sc_kernel_bits=`/usr/bin/getconf SC_KERNEL_BITS 2>/dev/null`
++-		    case "$sc_cpu_version" in
+++		    case $sc_cpu_version in
++ 		      523) HP_ARCH=hppa1.0 ;; # CPU_PA_RISC1_0
++ 		      528) HP_ARCH=hppa1.1 ;; # CPU_PA_RISC1_1
++ 		      532)                      # CPU_PA_RISC2_0
++-			case "$sc_kernel_bits" in
+++			case $sc_kernel_bits in
++ 			  32) HP_ARCH=hppa2.0n ;;
++ 			  64) HP_ARCH=hppa2.0w ;;
++ 			  '') HP_ARCH=hppa2.0 ;;   # HP-UX 10.20
++ 			esac ;;
++ 		    esac
++ 		fi
++-		if [ "$HP_ARCH" = "" ]; then
+++		if test "$HP_ARCH" = ""; then
++ 		    set_cc_for_build
++ 		    sed 's/^		//' << EOF > "$dummy.c"
++ 
++@@ -665,7 +719,8 @@ EOF
++ 		#include <stdlib.h>
++ 		#include <unistd.h>
++ 
++-		int main ()
+++		int
+++		main ()
++ 		{
++ 		#if defined(_SC_KERNEL_BITS)
++ 		    long bits = sysconf(_SC_KERNEL_BITS);
++@@ -696,7 +751,7 @@ EOF
++ 		    test -z "$HP_ARCH" && HP_ARCH=hppa
++ 		fi ;;
++ 	esac
++-	if [ "$HP_ARCH" = hppa2.0w ]
+++	if test "$HP_ARCH" = hppa2.0w
++ 	then
++ 	    set_cc_for_build
++ 
++@@ -717,12 +772,12 @@ EOF
++ 		HP_ARCH=hppa64
++ 	    fi
++ 	fi
++-	echo "$HP_ARCH"-hp-hpux"$HPUX_REV"
++-	exit ;;
+++	GUESS=$HP_ARCH-hp-hpux$HPUX_REV
+++	;;
++     ia64:HP-UX:*:*)
++-	HPUX_REV=`echo "$UNAME_RELEASE"|sed -e 's/[^.]*.[0B]*//'`
++-	echo ia64-hp-hpux"$HPUX_REV"
++-	exit ;;
+++	HPUX_REV=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*.[0B]*//'`
+++	GUESS=ia64-hp-hpux$HPUX_REV
+++	;;
++     3050*:HI-UX:*:*)
++ 	set_cc_for_build
++ 	sed 's/^	//' << EOF > "$dummy.c"
++@@ -752,36 +807,36 @@ EOF
++ EOF
++ 	$CC_FOR_BUILD -o "$dummy" "$dummy.c" && SYSTEM_NAME=`"$dummy"` &&
++ 		{ echo "$SYSTEM_NAME"; exit; }
++-	echo unknown-hitachi-hiuxwe2
++-	exit ;;
+++	GUESS=unknown-hitachi-hiuxwe2
+++	;;
++     9000/7??:4.3bsd:*:* | 9000/8?[79]:4.3bsd:*:*)
++-	echo hppa1.1-hp-bsd
++-	exit ;;
+++	GUESS=hppa1.1-hp-bsd
+++	;;
++     9000/8??:4.3bsd:*:*)
++-	echo hppa1.0-hp-bsd
++-	exit ;;
+++	GUESS=hppa1.0-hp-bsd
+++	;;
++     *9??*:MPE/iX:*:* | *3000*:MPE/iX:*:*)
++-	echo hppa1.0-hp-mpeix
++-	exit ;;
+++	GUESS=hppa1.0-hp-mpeix
+++	;;
++     hp7??:OSF1:*:* | hp8?[79]:OSF1:*:*)
++-	echo hppa1.1-hp-osf
++-	exit ;;
+++	GUESS=hppa1.1-hp-osf
+++	;;
++     hp8??:OSF1:*:*)
++-	echo hppa1.0-hp-osf
++-	exit ;;
+++	GUESS=hppa1.0-hp-osf
+++	;;
++     i*86:OSF1:*:*)
++-	if [ -x /usr/sbin/sysversion ] ; then
++-	    echo "$UNAME_MACHINE"-unknown-osf1mk
+++	if test -x /usr/sbin/sysversion ; then
+++	    GUESS=$UNAME_MACHINE-unknown-osf1mk
++ 	else
++-	    echo "$UNAME_MACHINE"-unknown-osf1
+++	    GUESS=$UNAME_MACHINE-unknown-osf1
++ 	fi
++-	exit ;;
+++	;;
++     parisc*:Lites*:*:*)
++-	echo hppa1.1-hp-lites
++-	exit ;;
+++	GUESS=hppa1.1-hp-lites
+++	;;
++     C1*:ConvexOS:*:* | convex:ConvexOS:C1*:*)
++-	echo c1-convex-bsd
++-	exit ;;
+++	GUESS=c1-convex-bsd
+++	;;
++     C2*:ConvexOS:*:* | convex:ConvexOS:C2*:*)
++ 	if getsysinfo -f scalar_acc
++ 	then echo c32-convex-bsd
++@@ -789,17 +844,18 @@ EOF
++ 	fi
++ 	exit ;;
++     C34*:ConvexOS:*:* | convex:ConvexOS:C34*:*)
++-	echo c34-convex-bsd
++-	exit ;;
+++	GUESS=c34-convex-bsd
+++	;;
++     C38*:ConvexOS:*:* | convex:ConvexOS:C38*:*)
++-	echo c38-convex-bsd
++-	exit ;;
+++	GUESS=c38-convex-bsd
+++	;;
++     C4*:ConvexOS:*:* | convex:ConvexOS:C4*:*)
++-	echo c4-convex-bsd
++-	exit ;;
+++	GUESS=c4-convex-bsd
+++	;;
++     CRAY*Y-MP:*:*:*)
++-	echo ymp-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=ymp-cray-unicos$CRAY_REL
+++	;;
++     CRAY*[A-Z]90:*:*:*)
++ 	echo "$UNAME_MACHINE"-cray-unicos"$UNAME_RELEASE" \
++ 	| sed -e 's/CRAY.*\([A-Z]90\)/\1/' \
++@@ -807,114 +863,155 @@ EOF
++ 	      -e 's/\.[^.]*$/.X/'
++ 	exit ;;
++     CRAY*TS:*:*:*)
++-	echo t90-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=t90-cray-unicos$CRAY_REL
+++	;;
++     CRAY*T3E:*:*:*)
++-	echo alphaev5-cray-unicosmk"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=alphaev5-cray-unicosmk$CRAY_REL
+++	;;
++     CRAY*SV1:*:*:*)
++-	echo sv1-cray-unicos"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=sv1-cray-unicos$CRAY_REL
+++	;;
++     *:UNICOS/mp:*:*)
++-	echo craynv-cray-unicosmp"$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'
++-	exit ;;
+++	CRAY_REL=`echo "$UNAME_RELEASE" | sed -e 's/\.[^.]*$/.X/'`
+++	GUESS=craynv-cray-unicosmp$CRAY_REL
+++	;;
++     F30[01]:UNIX_System_V:*:* | F700:UNIX_System_V:*:*)
++ 	FUJITSU_PROC=`uname -m | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz`
++ 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
++ 	FUJITSU_REL=`echo "$UNAME_RELEASE" | sed -e 's/ /_/'`
++-	echo "${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++-	exit ;;
+++	GUESS=${FUJITSU_PROC}-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
+++	;;
++     5000:UNIX_System_V:4.*:*)
++ 	FUJITSU_SYS=`uname -p | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/\///'`
++ 	FUJITSU_REL=`echo "$UNAME_RELEASE" | tr ABCDEFGHIJKLMNOPQRSTUVWXYZ abcdefghijklmnopqrstuvwxyz | sed -e 's/ /_/'`
++-	echo "sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}"
++-	exit ;;
+++	GUESS=sparc-fujitsu-${FUJITSU_SYS}${FUJITSU_REL}
+++	;;
++     i*86:BSD/386:*:* | i*86:BSD/OS:*:* | *:Ascend\ Embedded/OS:*:*)
++-	echo "$UNAME_MACHINE"-pc-bsdi"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-bsdi$UNAME_RELEASE
+++	;;
++     sparc*:BSD/OS:*:*)
++-	echo sparc-unknown-bsdi"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sparc-unknown-bsdi$UNAME_RELEASE
+++	;;
++     *:BSD/OS:*:*)
++-	echo "$UNAME_MACHINE"-unknown-bsdi"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-bsdi$UNAME_RELEASE
+++	;;
++     arm:FreeBSD:*:*)
++ 	UNAME_PROCESSOR=`uname -p`
++ 	set_cc_for_build
++ 	if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
++ 	    | grep -q __ARM_PCS_VFP
++ 	then
++-	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`"-gnueabi
+++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabi
++ 	else
++-	    echo "${UNAME_PROCESSOR}"-unknown-freebsd"`echo ${UNAME_RELEASE}|sed -e 's/[-(].*//'`"-gnueabihf
+++	    FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	    GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL-gnueabihf
++ 	fi
++-	exit ;;
+++	;;
++     *:FreeBSD:*:*)
++-	UNAME_PROCESSOR=`/usr/bin/uname -p`
++-	case "$UNAME_PROCESSOR" in
+++	UNAME_PROCESSOR=`uname -p`
+++	case $UNAME_PROCESSOR in
++ 	    amd64)
++ 		UNAME_PROCESSOR=x86_64 ;;
++ 	    i386)
++ 		UNAME_PROCESSOR=i586 ;;
++ 	esac
++-	echo "$UNAME_PROCESSOR"-unknown-freebsd"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
++-	exit ;;
+++	FREEBSD_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	GUESS=$UNAME_PROCESSOR-unknown-freebsd$FREEBSD_REL
+++	;;
++     i*:CYGWIN*:*)
++-	echo "$UNAME_MACHINE"-pc-cygwin
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-cygwin
+++	;;
++     *:MINGW64*:*)
++-	echo "$UNAME_MACHINE"-pc-mingw64
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-mingw64
+++	;;
++     *:MINGW*:*)
++-	echo "$UNAME_MACHINE"-pc-mingw32
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-mingw32
+++	;;
++     *:MSYS*:*)
++-	echo "$UNAME_MACHINE"-pc-msys
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-msys
+++	;;
++     i*:PW*:*)
++-	echo "$UNAME_MACHINE"-pc-pw32
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-pw32
+++	;;
+++    *:SerenityOS:*:*)
+++        GUESS=$UNAME_MACHINE-pc-serenity
+++        ;;
++     *:Interix*:*)
++-	case "$UNAME_MACHINE" in
+++	case $UNAME_MACHINE in
++ 	    x86)
++-		echo i586-pc-interix"$UNAME_RELEASE"
++-		exit ;;
+++		GUESS=i586-pc-interix$UNAME_RELEASE
+++		;;
++ 	    authenticamd | genuineintel | EM64T)
++-		echo x86_64-unknown-interix"$UNAME_RELEASE"
++-		exit ;;
+++		GUESS=x86_64-unknown-interix$UNAME_RELEASE
+++		;;
++ 	    IA64)
++-		echo ia64-unknown-interix"$UNAME_RELEASE"
++-		exit ;;
+++		GUESS=ia64-unknown-interix$UNAME_RELEASE
+++		;;
++ 	esac ;;
++     i*:UWIN*:*)
++-	echo "$UNAME_MACHINE"-pc-uwin
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-uwin
+++	;;
++     amd64:CYGWIN*:*:* | x86_64:CYGWIN*:*:*)
++-	echo x86_64-unknown-cygwin
++-	exit ;;
+++	GUESS=x86_64-pc-cygwin
+++	;;
++     prep*:SunOS:5.*:*)
++-	echo powerpcle-unknown-solaris2"`echo "$UNAME_RELEASE"|sed -e 's/[^.]*//'`"
++-	exit ;;
+++	SUN_REL=`echo "$UNAME_RELEASE" | sed -e 's/[^.]*//'`
+++	GUESS=powerpcle-unknown-solaris2$SUN_REL
+++	;;
++     *:GNU:*:*)
++ 	# the GNU system
++-	echo "`echo "$UNAME_MACHINE"|sed -e 's,[-/].*$,,'`-unknown-$LIBC`echo "$UNAME_RELEASE"|sed -e 's,/.*$,,'`"
++-	exit ;;
+++	GNU_ARCH=`echo "$UNAME_MACHINE" | sed -e 's,[-/].*$,,'`
+++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's,/.*$,,'`
+++	GUESS=$GNU_ARCH-unknown-$LIBC$GNU_REL
+++	;;
++     *:GNU/*:*:*)
++ 	# other systems with GNU libc and userland
++-	echo "$UNAME_MACHINE-unknown-`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"``echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`-$LIBC"
++-	exit ;;
+++	GNU_SYS=`echo "$UNAME_SYSTEM" | sed 's,^[^/]*/,,' | tr "[:upper:]" "[:lower:]"`
+++	GNU_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	GUESS=$UNAME_MACHINE-unknown-$GNU_SYS$GNU_REL-$LIBC
+++	;;
+++    x86_64:[Mm]anagarm:*:*|i?86:[Mm]anagarm:*:*)
+++	GUESS="$UNAME_MACHINE-pc-managarm-mlibc"
+++	;;
+++    *:[Mm]anagarm:*:*)
+++	GUESS="$UNAME_MACHINE-unknown-managarm-mlibc"
+++	;;
++     *:Minix:*:*)
++-	echo "$UNAME_MACHINE"-unknown-minix
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-minix
+++	;;
++     aarch64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	set_cc_for_build
+++	CPU=$UNAME_MACHINE
+++	LIBCABI=$LIBC
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+++	    ABI=64
+++	    sed 's/^	    //' << EOF > "$dummy.c"
+++	    #ifdef __ARM_EABI__
+++	    #ifdef __ARM_PCS_VFP
+++	    ABI=eabihf
+++	    #else
+++	    ABI=eabi
+++	    #endif
+++	    #endif
+++EOF
+++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
+++	    eval "$cc_set_abi"
+++	    case $ABI in
+++		eabi | eabihf) CPU=armv8l; LIBCABI=$LIBC$ABI ;;
+++	    esac
+++	fi
+++	GUESS=$CPU-unknown-linux-$LIBCABI
+++	;;
++     aarch64_be:Linux:*:*)
++ 	UNAME_MACHINE=aarch64_be
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     alpha:Linux:*:*)
++-	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' < /proc/cpuinfo` in
+++	case `sed -n '/^cpu model/s/^.*: \(.*\)/\1/p' /proc/cpuinfo 2>/dev/null` in
++ 	  EV5)   UNAME_MACHINE=alphaev5 ;;
++ 	  EV56)  UNAME_MACHINE=alphaev56 ;;
++ 	  PCA56) UNAME_MACHINE=alphapca56 ;;
++@@ -925,183 +1022,245 @@ EOF
++ 	esac
++ 	objdump --private-headers /bin/sh | grep -q ld.so.1
++ 	if test "$?" = 0 ; then LIBC=gnulibc1 ; fi
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
++-    arc:Linux:*:* | arceb:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
+++    arc:Linux:*:* | arceb:Linux:*:* | arc32:Linux:*:* | arc64:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     arm*:Linux:*:*)
++ 	set_cc_for_build
++ 	if echo __ARM_EABI__ | $CC_FOR_BUILD -E - 2>/dev/null \
++ 	    | grep -q __ARM_EABI__
++ 	then
++-	    echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
+++	    GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
++ 	else
++ 	    if echo __ARM_PCS_VFP | $CC_FOR_BUILD -E - 2>/dev/null \
++ 		| grep -q __ARM_PCS_VFP
++ 	    then
++-		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabi
+++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabi
++ 	    else
++-		echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"eabihf
+++		GUESS=$UNAME_MACHINE-unknown-linux-${LIBC}eabihf
++ 	    fi
++ 	fi
++-	exit ;;
+++	;;
++     avr32*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     cris:Linux:*:*)
++-	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
+++	;;
++     crisv32:Linux:*:*)
++-	echo "$UNAME_MACHINE"-axis-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-axis-linux-$LIBC
+++	;;
++     e2k:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     frv:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     hexagon:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     i*86:Linux:*:*)
++-	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-linux-$LIBC
+++	;;
++     ia64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     k1om:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
+++    kvx:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
+++    kvx:cos:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-cos
+++	;;
+++    kvx:mbr:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-mbr
+++	;;
+++    loongarch32:Linux:*:* | loongarch64:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     m32r*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     m68*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     mips:Linux:*:* | mips64:Linux:*:*)
++ 	set_cc_for_build
+++	IS_GLIBC=0
+++	test x"${LIBC}" = xgnu && IS_GLIBC=1
++ 	sed 's/^	//' << EOF > "$dummy.c"
++ 	#undef CPU
++-	#undef ${UNAME_MACHINE}
++-	#undef ${UNAME_MACHINE}el
+++	#undef mips
+++	#undef mipsel
+++	#undef mips64
+++	#undef mips64el
+++	#if ${IS_GLIBC} && defined(_ABI64)
+++	LIBCABI=gnuabi64
+++	#else
+++	#if ${IS_GLIBC} && defined(_ABIN32)
+++	LIBCABI=gnuabin32
+++	#else
+++	LIBCABI=${LIBC}
+++	#endif
+++	#endif
+++
+++	#if ${IS_GLIBC} && defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+++	CPU=mipsisa64r6
+++	#else
+++	#if ${IS_GLIBC} && !defined(__mips64) && defined(__mips_isa_rev) && __mips_isa_rev>=6
+++	CPU=mipsisa32r6
+++	#else
+++	#if defined(__mips64)
+++	CPU=mips64
+++	#else
+++	CPU=mips
+++	#endif
+++	#endif
+++	#endif
+++
++ 	#if defined(__MIPSEL__) || defined(__MIPSEL) || defined(_MIPSEL) || defined(MIPSEL)
++-	CPU=${UNAME_MACHINE}el
+++	MIPS_ENDIAN=el
++ 	#else
++ 	#if defined(__MIPSEB__) || defined(__MIPSEB) || defined(_MIPSEB) || defined(MIPSEB)
++-	CPU=${UNAME_MACHINE}
+++	MIPS_ENDIAN=
++ 	#else
++-	CPU=
+++	MIPS_ENDIAN=
++ 	#endif
++ 	#endif
++ EOF
++-	eval "`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU'`"
++-	test "x$CPU" != x && { echo "$CPU-unknown-linux-$LIBC"; exit; }
+++	cc_set_vars=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^CPU\|^MIPS_ENDIAN\|^LIBCABI'`
+++	eval "$cc_set_vars"
+++	test "x$CPU" != x && { echo "$CPU${MIPS_ENDIAN}-unknown-linux-$LIBCABI"; exit; }
++ 	;;
++     mips64el:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     openrisc*:Linux:*:*)
++-	echo or1k-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=or1k-unknown-linux-$LIBC
+++	;;
++     or32:Linux:*:* | or1k*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     padre:Linux:*:*)
++-	echo sparc-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=sparc-unknown-linux-$LIBC
+++	;;
++     parisc64:Linux:*:* | hppa64:Linux:*:*)
++-	echo hppa64-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=hppa64-unknown-linux-$LIBC
+++	;;
++     parisc:Linux:*:* | hppa:Linux:*:*)
++ 	# Look for CPU level
++ 	case `grep '^cpu[^a-z]*:' /proc/cpuinfo 2>/dev/null | cut -d' ' -f2` in
++-	  PA7*) echo hppa1.1-unknown-linux-"$LIBC" ;;
++-	  PA8*) echo hppa2.0-unknown-linux-"$LIBC" ;;
++-	  *)    echo hppa-unknown-linux-"$LIBC" ;;
+++	  PA7*) GUESS=hppa1.1-unknown-linux-$LIBC ;;
+++	  PA8*) GUESS=hppa2.0-unknown-linux-$LIBC ;;
+++	  *)    GUESS=hppa-unknown-linux-$LIBC ;;
++ 	esac
++-	exit ;;
+++	;;
++     ppc64:Linux:*:*)
++-	echo powerpc64-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpc64-unknown-linux-$LIBC
+++	;;
++     ppc:Linux:*:*)
++-	echo powerpc-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpc-unknown-linux-$LIBC
+++	;;
++     ppc64le:Linux:*:*)
++-	echo powerpc64le-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpc64le-unknown-linux-$LIBC
+++	;;
++     ppcle:Linux:*:*)
++-	echo powerpcle-unknown-linux-"$LIBC"
++-	exit ;;
++-    riscv32:Linux:*:* | riscv64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=powerpcle-unknown-linux-$LIBC
+++	;;
+++    riscv32:Linux:*:* | riscv32be:Linux:*:* | riscv64:Linux:*:* | riscv64be:Linux:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     s390:Linux:*:* | s390x:Linux:*:*)
++-	echo "$UNAME_MACHINE"-ibm-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-ibm-linux-$LIBC
+++	;;
++     sh64*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     sh*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     sparc:Linux:*:* | sparc64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     tile*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     vax:Linux:*:*)
++-	echo "$UNAME_MACHINE"-dec-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-dec-linux-$LIBC
+++	;;
++     x86_64:Linux:*:*)
++-	echo "$UNAME_MACHINE"-pc-linux-"$LIBC"
++-	exit ;;
+++	set_cc_for_build
+++	CPU=$UNAME_MACHINE
+++	LIBCABI=$LIBC
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+++	    ABI=64
+++	    sed 's/^	    //' << EOF > "$dummy.c"
+++	    #ifdef __i386__
+++	    ABI=x86
+++	    #else
+++	    #ifdef __ILP32__
+++	    ABI=x32
+++	    #endif
+++	    #endif
+++EOF
+++	    cc_set_abi=`$CC_FOR_BUILD -E "$dummy.c" 2>/dev/null | grep '^ABI' | sed 's, ,,g'`
+++	    eval "$cc_set_abi"
+++	    case $ABI in
+++		x86) CPU=i686 ;;
+++		x32) LIBCABI=${LIBC}x32 ;;
+++	    esac
+++	fi
+++	GUESS=$CPU-pc-linux-$LIBCABI
+++	;;
++     xtensa*:Linux:*:*)
++-	echo "$UNAME_MACHINE"-unknown-linux-"$LIBC"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-linux-$LIBC
+++	;;
++     i*86:DYNIX/ptx:4*:*)
++ 	# ptx 4.0 does uname -s correctly, with DYNIX/ptx in there.
++ 	# earlier versions are messed up and put the nodename in both
++ 	# sysname and nodename.
++-	echo i386-sequent-sysv4
++-	exit ;;
+++	GUESS=i386-sequent-sysv4
+++	;;
++     i*86:UNIX_SV:4.2MP:2.*)
++ 	# Unixware is an offshoot of SVR4, but it has its own version
++ 	# number series starting with 2...
++ 	# I am not positive that other SVR4 systems won't match this,
++ 	# I just have to hope.  -- rms.
++ 	# Use sysv4.2uw... so that sysv4* matches it.
++-	echo "$UNAME_MACHINE"-pc-sysv4.2uw"$UNAME_VERSION"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-sysv4.2uw$UNAME_VERSION
+++	;;
++     i*86:OS/2:*:*)
++-	# If we were able to find `uname', then EMX Unix compatibility
+++	# If we were able to find 'uname', then EMX Unix compatibility
++ 	# is probably installed.
++-	echo "$UNAME_MACHINE"-pc-os2-emx
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-os2-emx
+++	;;
++     i*86:XTS-300:*:STOP)
++-	echo "$UNAME_MACHINE"-unknown-stop
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-stop
+++	;;
++     i*86:atheos:*:*)
++-	echo "$UNAME_MACHINE"-unknown-atheos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-atheos
+++	;;
++     i*86:syllable:*:*)
++-	echo "$UNAME_MACHINE"-pc-syllable
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-syllable
+++	;;
++     i*86:LynxOS:2.*:* | i*86:LynxOS:3.[01]*:* | i*86:LynxOS:4.[02]*:*)
++-	echo i386-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=i386-unknown-lynxos$UNAME_RELEASE
+++	;;
++     i*86:*DOS:*:*)
++-	echo "$UNAME_MACHINE"-pc-msdosdjgpp
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-msdosdjgpp
+++	;;
++     i*86:*:4.*:*)
++ 	UNAME_REL=`echo "$UNAME_RELEASE" | sed 's/\/MP$//'`
++ 	if grep Novell /usr/include/link.h >/dev/null 2>/dev/null; then
++-		echo "$UNAME_MACHINE"-univel-sysv"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-univel-sysv$UNAME_REL
++ 	else
++-		echo "$UNAME_MACHINE"-pc-sysv"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-pc-sysv$UNAME_REL
++ 	fi
++-	exit ;;
+++	;;
++     i*86:*:5:[678]*)
++ 	# UnixWare 7.x, OpenUNIX and OpenServer 6.
++ 	case `/bin/uname -X | grep "^Machine"` in
++@@ -1109,12 +1268,12 @@ EOF
++ 	    *Pentium)	     UNAME_MACHINE=i586 ;;
++ 	    *Pent*|*Celeron) UNAME_MACHINE=i686 ;;
++ 	esac
++-	echo "$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}{$UNAME_VERSION}"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-sysv${UNAME_RELEASE}${UNAME_SYSTEM}${UNAME_VERSION}
+++	;;
++     i*86:*:3.2:*)
++ 	if test -f /usr/options/cb.name; then
++ 		UNAME_REL=`sed -n 's/.*Version //p' </usr/options/cb.name`
++-		echo "$UNAME_MACHINE"-pc-isc"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-pc-isc$UNAME_REL
++ 	elif /bin/uname -X 2>/dev/null >/dev/null ; then
++ 		UNAME_REL=`(/bin/uname -X|grep Release|sed -e 's/.*= //')`
++ 		(/bin/uname -X|grep i80486 >/dev/null) && UNAME_MACHINE=i486
++@@ -1124,11 +1283,11 @@ EOF
++ 			&& UNAME_MACHINE=i686
++ 		(/bin/uname -X|grep '^Machine.*Pentium Pro' >/dev/null) \
++ 			&& UNAME_MACHINE=i686
++-		echo "$UNAME_MACHINE"-pc-sco"$UNAME_REL"
+++		GUESS=$UNAME_MACHINE-pc-sco$UNAME_REL
++ 	else
++-		echo "$UNAME_MACHINE"-pc-sysv32
+++		GUESS=$UNAME_MACHINE-pc-sysv32
++ 	fi
++-	exit ;;
+++	;;
++     pc:*:*:*)
++ 	# Left here for compatibility:
++ 	# uname -m prints for DJGPP always 'pc', but it prints nothing about
++@@ -1136,31 +1295,31 @@ EOF
++ 	# Note: whatever this is, it MUST be the same as what config.sub
++ 	# prints for the "djgpp" host, or else GDB configure will decide that
++ 	# this is a cross-build.
++-	echo i586-pc-msdosdjgpp
++-	exit ;;
+++	GUESS=i586-pc-msdosdjgpp
+++	;;
++     Intel:Mach:3*:*)
++-	echo i386-pc-mach3
++-	exit ;;
+++	GUESS=i386-pc-mach3
+++	;;
++     paragon:*:*:*)
++-	echo i860-intel-osf1
++-	exit ;;
+++	GUESS=i860-intel-osf1
+++	;;
++     i860:*:4.*:*) # i860-SVR4
++ 	if grep Stardent /usr/include/sys/uadmin.h >/dev/null 2>&1 ; then
++-	  echo i860-stardent-sysv"$UNAME_RELEASE" # Stardent Vistra i860-SVR4
+++	  GUESS=i860-stardent-sysv$UNAME_RELEASE    # Stardent Vistra i860-SVR4
++ 	else # Add other i860-SVR4 vendors below as they are discovered.
++-	  echo i860-unknown-sysv"$UNAME_RELEASE"  # Unknown i860-SVR4
+++	  GUESS=i860-unknown-sysv$UNAME_RELEASE     # Unknown i860-SVR4
++ 	fi
++-	exit ;;
+++	;;
++     mini*:CTIX:SYS*5:*)
++ 	# "miniframe"
++-	echo m68010-convergent-sysv
++-	exit ;;
+++	GUESS=m68010-convergent-sysv
+++	;;
++     mc68k:UNIX:SYSTEM5:3.51m)
++-	echo m68k-convergent-sysv
++-	exit ;;
+++	GUESS=m68k-convergent-sysv
+++	;;
++     M680?0:D-NIX:5.3:*)
++-	echo m68k-diab-dnix
++-	exit ;;
+++	GUESS=m68k-diab-dnix
+++	;;
++     M68*:*:R3V[5678]*:*)
++ 	test -r /sysV68 && { echo 'm68k-motorola-sysv'; exit; } ;;
++     3[345]??:*:4.0:3.0 | 3[34]??A:*:4.0:3.0 | 3[34]??,*:*:4.0:3.0 | 3[34]??/*:*:4.0:3.0 | 4400:*:4.0:3.0 | 4850:*:4.0:3.0 | SKA40:*:4.0:3.0 | SDS2:*:4.0:3.0 | SHG2:*:4.0:3.0 | S7501*:*:4.0:3.0)
++@@ -1185,250 +1344,411 @@ EOF
++ 	/bin/uname -p 2>/dev/null | /bin/grep pteron >/dev/null \
++ 	    && { echo i586-ncr-sysv4.3"$OS_REL"; exit; } ;;
++     m68*:LynxOS:2.*:* | m68*:LynxOS:3.0*:*)
++-	echo m68k-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-unknown-lynxos$UNAME_RELEASE
+++	;;
++     mc68030:UNIX_System_V:4.*:*)
++-	echo m68k-atari-sysv4
++-	exit ;;
+++	GUESS=m68k-atari-sysv4
+++	;;
++     TSUNAMI:LynxOS:2.*:*)
++-	echo sparc-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sparc-unknown-lynxos$UNAME_RELEASE
+++	;;
++     rs6000:LynxOS:2.*:*)
++-	echo rs6000-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=rs6000-unknown-lynxos$UNAME_RELEASE
+++	;;
++     PowerPC:LynxOS:2.*:* | PowerPC:LynxOS:3.[01]*:* | PowerPC:LynxOS:4.[02]*:*)
++-	echo powerpc-unknown-lynxos"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-unknown-lynxos$UNAME_RELEASE
+++	;;
++     SM[BE]S:UNIX_SV:*:*)
++-	echo mips-dde-sysv"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-dde-sysv$UNAME_RELEASE
+++	;;
++     RM*:ReliantUNIX-*:*:*)
++-	echo mips-sni-sysv4
++-	exit ;;
+++	GUESS=mips-sni-sysv4
+++	;;
++     RM*:SINIX-*:*:*)
++-	echo mips-sni-sysv4
++-	exit ;;
+++	GUESS=mips-sni-sysv4
+++	;;
++     *:SINIX-*:*:*)
++ 	if uname -p 2>/dev/null >/dev/null ; then
++ 		UNAME_MACHINE=`(uname -p) 2>/dev/null`
++-		echo "$UNAME_MACHINE"-sni-sysv4
+++		GUESS=$UNAME_MACHINE-sni-sysv4
++ 	else
++-		echo ns32k-sni-sysv
+++		GUESS=ns32k-sni-sysv
++ 	fi
++-	exit ;;
++-    PENTIUM:*:4.0*:*)	# Unisys `ClearPath HMP IX 4000' SVR4/MP effort
+++	;;
+++    PENTIUM:*:4.0*:*)	# Unisys 'ClearPath HMP IX 4000' SVR4/MP effort
++ 			# says <Richard.M.Bartel@ccMail.Census.GOV>
++-	echo i586-unisys-sysv4
++-	exit ;;
+++	GUESS=i586-unisys-sysv4
+++	;;
++     *:UNIX_System_V:4*:FTX*)
++ 	# From Gerald Hewes <hewes@openmarket.com>.
++ 	# How about differentiating between stratus architectures? -djm
++-	echo hppa1.1-stratus-sysv4
++-	exit ;;
+++	GUESS=hppa1.1-stratus-sysv4
+++	;;
++     *:*:*:FTX*)
++ 	# From seanf@swdc.stratus.com.
++-	echo i860-stratus-sysv4
++-	exit ;;
+++	GUESS=i860-stratus-sysv4
+++	;;
++     i*86:VOS:*:*)
++ 	# From Paul.Green@stratus.com.
++-	echo "$UNAME_MACHINE"-stratus-vos
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-stratus-vos
+++	;;
++     *:VOS:*:*)
++ 	# From Paul.Green@stratus.com.
++-	echo hppa1.1-stratus-vos
++-	exit ;;
+++	GUESS=hppa1.1-stratus-vos
+++	;;
++     mc68*:A/UX:*:*)
++-	echo m68k-apple-aux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=m68k-apple-aux$UNAME_RELEASE
+++	;;
++     news*:NEWS-OS:6*:*)
++-	echo mips-sony-newsos6
++-	exit ;;
+++	GUESS=mips-sony-newsos6
+++	;;
++     R[34]000:*System_V*:*:* | R4000:UNIX_SYSV:*:* | R*000:UNIX_SV:*:*)
++-	if [ -d /usr/nec ]; then
++-		echo mips-nec-sysv"$UNAME_RELEASE"
+++	if test -d /usr/nec; then
+++		GUESS=mips-nec-sysv$UNAME_RELEASE
++ 	else
++-		echo mips-unknown-sysv"$UNAME_RELEASE"
+++		GUESS=mips-unknown-sysv$UNAME_RELEASE
++ 	fi
++-	exit ;;
+++	;;
++     BeBox:BeOS:*:*)	# BeOS running on hardware made by Be, PPC only.
++-	echo powerpc-be-beos
++-	exit ;;
+++	GUESS=powerpc-be-beos
+++	;;
++     BeMac:BeOS:*:*)	# BeOS running on Mac or Mac clone, PPC only.
++-	echo powerpc-apple-beos
++-	exit ;;
+++	GUESS=powerpc-apple-beos
+++	;;
++     BePC:BeOS:*:*)	# BeOS running on Intel PC compatible.
++-	echo i586-pc-beos
++-	exit ;;
+++	GUESS=i586-pc-beos
+++	;;
++     BePC:Haiku:*:*)	# Haiku running on Intel PC compatible.
++-	echo i586-pc-haiku
++-	exit ;;
++-    x86_64:Haiku:*:*)
++-	echo x86_64-unknown-haiku
++-	exit ;;
+++	GUESS=i586-pc-haiku
+++	;;
+++    ppc:Haiku:*:*)	# Haiku running on Apple PowerPC
+++	GUESS=powerpc-apple-haiku
+++	;;
+++    *:Haiku:*:*)	# Haiku modern gcc (not bound by BeOS compat)
+++	GUESS=$UNAME_MACHINE-unknown-haiku
+++	;;
++     SX-4:SUPER-UX:*:*)
++-	echo sx4-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx4-nec-superux$UNAME_RELEASE
+++	;;
++     SX-5:SUPER-UX:*:*)
++-	echo sx5-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx5-nec-superux$UNAME_RELEASE
+++	;;
++     SX-6:SUPER-UX:*:*)
++-	echo sx6-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx6-nec-superux$UNAME_RELEASE
+++	;;
++     SX-7:SUPER-UX:*:*)
++-	echo sx7-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx7-nec-superux$UNAME_RELEASE
+++	;;
++     SX-8:SUPER-UX:*:*)
++-	echo sx8-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx8-nec-superux$UNAME_RELEASE
+++	;;
++     SX-8R:SUPER-UX:*:*)
++-	echo sx8r-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sx8r-nec-superux$UNAME_RELEASE
+++	;;
++     SX-ACE:SUPER-UX:*:*)
++-	echo sxace-nec-superux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=sxace-nec-superux$UNAME_RELEASE
+++	;;
++     Power*:Rhapsody:*:*)
++-	echo powerpc-apple-rhapsody"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=powerpc-apple-rhapsody$UNAME_RELEASE
+++	;;
++     *:Rhapsody:*:*)
++-	echo "$UNAME_MACHINE"-apple-rhapsody"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-apple-rhapsody$UNAME_RELEASE
+++	;;
+++    arm64:Darwin:*:*)
+++	GUESS=aarch64-apple-darwin$UNAME_RELEASE
+++	;;
++     *:Darwin:*:*)
++-	UNAME_PROCESSOR=`uname -p` || UNAME_PROCESSOR=unknown
++-	set_cc_for_build
++-	if test "$UNAME_PROCESSOR" = unknown ; then
++-	    UNAME_PROCESSOR=powerpc
+++	UNAME_PROCESSOR=`uname -p`
+++	case $UNAME_PROCESSOR in
+++	    unknown) UNAME_PROCESSOR=powerpc ;;
+++	esac
+++	if command -v xcode-select > /dev/null 2> /dev/null && \
+++		! xcode-select --print-path > /dev/null 2> /dev/null ; then
+++	    # Avoid executing cc if there is no toolchain installed as
+++	    # cc will be a stub that puts up a graphical alert
+++	    # prompting the user to install developer tools.
+++	    CC_FOR_BUILD=no_compiler_found
+++	else
+++	    set_cc_for_build
++ 	fi
++-	if test "`echo "$UNAME_RELEASE" | sed -e 's/\..*//'`" -le 10 ; then
++-	    if [ "$CC_FOR_BUILD" != no_compiler_found ]; then
++-		if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
++-		       (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++-		       grep IS_64BIT_ARCH >/dev/null
++-		then
++-		    case $UNAME_PROCESSOR in
++-			i386) UNAME_PROCESSOR=x86_64 ;;
++-			powerpc) UNAME_PROCESSOR=powerpc64 ;;
++-		    esac
++-		fi
++-		# On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
++-		if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
++-		       (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
++-		       grep IS_PPC >/dev/null
++-		then
++-		    UNAME_PROCESSOR=powerpc
++-		fi
+++	if test "$CC_FOR_BUILD" != no_compiler_found; then
+++	    if (echo '#ifdef __LP64__'; echo IS_64BIT_ARCH; echo '#endif') | \
+++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		   grep IS_64BIT_ARCH >/dev/null
+++	    then
+++		case $UNAME_PROCESSOR in
+++		    i386) UNAME_PROCESSOR=x86_64 ;;
+++		    powerpc) UNAME_PROCESSOR=powerpc64 ;;
+++		esac
+++	    fi
+++	    # On 10.4-10.6 one might compile for PowerPC via gcc -arch ppc
+++	    if (echo '#ifdef __POWERPC__'; echo IS_PPC; echo '#endif') | \
+++		   (CCOPTS="" $CC_FOR_BUILD -E - 2>/dev/null) | \
+++		   grep IS_PPC >/dev/null
+++	    then
+++		UNAME_PROCESSOR=powerpc
++ 	    fi
++ 	elif test "$UNAME_PROCESSOR" = i386 ; then
++-	    # Avoid executing cc on OS X 10.9, as it ships with a stub
++-	    # that puts up a graphical alert prompting to install
++-	    # developer tools.  Any system running Mac OS X 10.7 or
++-	    # later (Darwin 11 and later) is required to have a 64-bit
++-	    # processor. This is not true of the ARM version of Darwin
++-	    # that Apple uses in portable devices.
++-	    UNAME_PROCESSOR=x86_64
+++	    # uname -m returns i386 or x86_64
+++	    UNAME_PROCESSOR=$UNAME_MACHINE
++ 	fi
++-	echo "$UNAME_PROCESSOR"-apple-darwin"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_PROCESSOR-apple-darwin$UNAME_RELEASE
+++	;;
++     *:procnto*:*:* | *:QNX:[0123456789]*:*)
++ 	UNAME_PROCESSOR=`uname -p`
++ 	if test "$UNAME_PROCESSOR" = x86; then
++ 		UNAME_PROCESSOR=i386
++ 		UNAME_MACHINE=pc
++ 	fi
++-	echo "$UNAME_PROCESSOR"-"$UNAME_MACHINE"-nto-qnx"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_PROCESSOR-$UNAME_MACHINE-nto-qnx$UNAME_RELEASE
+++	;;
++     *:QNX:*:4*)
++-	echo i386-pc-qnx
++-	exit ;;
+++	GUESS=i386-pc-qnx
+++	;;
++     NEO-*:NONSTOP_KERNEL:*:*)
++-	echo neo-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=neo-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSE-*:NONSTOP_KERNEL:*:*)
++-	echo nse-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nse-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSR-*:NONSTOP_KERNEL:*:*)
++-	echo nsr-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nsr-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSV-*:NONSTOP_KERNEL:*:*)
++-	echo nsv-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nsv-tandem-nsk$UNAME_RELEASE
+++	;;
++     NSX-*:NONSTOP_KERNEL:*:*)
++-	echo nsx-tandem-nsk"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=nsx-tandem-nsk$UNAME_RELEASE
+++	;;
++     *:NonStop-UX:*:*)
++-	echo mips-compaq-nonstopux
++-	exit ;;
+++	GUESS=mips-compaq-nonstopux
+++	;;
++     BS2000:POSIX*:*:*)
++-	echo bs2000-siemens-sysv
++-	exit ;;
+++	GUESS=bs2000-siemens-sysv
+++	;;
++     DS/*:UNIX_System_V:*:*)
++-	echo "$UNAME_MACHINE"-"$UNAME_SYSTEM"-"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-$UNAME_SYSTEM-$UNAME_RELEASE
+++	;;
++     *:Plan9:*:*)
++ 	# "uname -m" is not consistent, so use $cputype instead. 386
++ 	# is converted to i386 for consistency with other x86
++ 	# operating systems.
++-	# shellcheck disable=SC2154
++-	if test "$cputype" = 386; then
+++	if test "${cputype-}" = 386; then
++ 	    UNAME_MACHINE=i386
++-	else
++-	    UNAME_MACHINE="$cputype"
+++	elif test "x${cputype-}" != x; then
+++	    UNAME_MACHINE=$cputype
++ 	fi
++-	echo "$UNAME_MACHINE"-unknown-plan9
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-plan9
+++	;;
++     *:TOPS-10:*:*)
++-	echo pdp10-unknown-tops10
++-	exit ;;
+++	GUESS=pdp10-unknown-tops10
+++	;;
++     *:TENEX:*:*)
++-	echo pdp10-unknown-tenex
++-	exit ;;
+++	GUESS=pdp10-unknown-tenex
+++	;;
++     KS10:TOPS-20:*:* | KL10:TOPS-20:*:* | TYPE4:TOPS-20:*:*)
++-	echo pdp10-dec-tops20
++-	exit ;;
+++	GUESS=pdp10-dec-tops20
+++	;;
++     XKL-1:TOPS-20:*:* | TYPE5:TOPS-20:*:*)
++-	echo pdp10-xkl-tops20
++-	exit ;;
+++	GUESS=pdp10-xkl-tops20
+++	;;
++     *:TOPS-20:*:*)
++-	echo pdp10-unknown-tops20
++-	exit ;;
+++	GUESS=pdp10-unknown-tops20
+++	;;
++     *:ITS:*:*)
++-	echo pdp10-unknown-its
++-	exit ;;
+++	GUESS=pdp10-unknown-its
+++	;;
++     SEI:*:*:SEIUX)
++-	echo mips-sei-seiux"$UNAME_RELEASE"
++-	exit ;;
+++	GUESS=mips-sei-seiux$UNAME_RELEASE
+++	;;
++     *:DragonFly:*:*)
++-	echo "$UNAME_MACHINE"-unknown-dragonfly"`echo "$UNAME_RELEASE"|sed -e 's/[-(].*//'`"
++-	exit ;;
+++	DRAGONFLY_REL=`echo "$UNAME_RELEASE" | sed -e 's/[-(].*//'`
+++	GUESS=$UNAME_MACHINE-unknown-dragonfly$DRAGONFLY_REL
+++	;;
++     *:*VMS:*:*)
++ 	UNAME_MACHINE=`(uname -p) 2>/dev/null`
++-	case "$UNAME_MACHINE" in
++-	    A*) echo alpha-dec-vms ; exit ;;
++-	    I*) echo ia64-dec-vms ; exit ;;
++-	    V*) echo vax-dec-vms ; exit ;;
+++	case $UNAME_MACHINE in
+++	    A*) GUESS=alpha-dec-vms ;;
+++	    I*) GUESS=ia64-dec-vms ;;
+++	    V*) GUESS=vax-dec-vms ;;
++ 	esac ;;
++     *:XENIX:*:SysV)
++-	echo i386-pc-xenix
++-	exit ;;
+++	GUESS=i386-pc-xenix
+++	;;
++     i*86:skyos:*:*)
++-	echo "$UNAME_MACHINE"-pc-skyos"`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`"
++-	exit ;;
+++	SKYOS_REL=`echo "$UNAME_RELEASE" | sed -e 's/ .*$//'`
+++	GUESS=$UNAME_MACHINE-pc-skyos$SKYOS_REL
+++	;;
++     i*86:rdos:*:*)
++-	echo "$UNAME_MACHINE"-pc-rdos
++-	exit ;;
++-    i*86:AROS:*:*)
++-	echo "$UNAME_MACHINE"-pc-aros
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-pc-rdos
+++	;;
+++    i*86:Fiwix:*:*)
+++	GUESS=$UNAME_MACHINE-pc-fiwix
+++	;;
+++    *:AROS:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-aros
+++	;;
++     x86_64:VMkernel:*:*)
++-	echo "$UNAME_MACHINE"-unknown-esx
++-	exit ;;
+++	GUESS=$UNAME_MACHINE-unknown-esx
+++	;;
++     amd64:Isilon\ OneFS:*:*)
++-	echo x86_64-unknown-onefs
++-	exit ;;
+++	GUESS=x86_64-unknown-onefs
+++	;;
+++    *:Unleashed:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-unleashed$UNAME_RELEASE
+++	;;
+++    *:Ironclad:*:*)
+++	GUESS=$UNAME_MACHINE-unknown-ironclad
+++	;;
++ esac
++ 
+++# Do we have a guess based on uname results?
+++if test "x$GUESS" != x; then
+++    echo "$GUESS"
+++    exit
+++fi
+++
+++# No uname command or uname output not recognized.
+++set_cc_for_build
+++cat > "$dummy.c" <<EOF
+++#ifdef _SEQUENT_
+++#include <sys/types.h>
+++#include <sys/utsname.h>
+++#endif
+++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+++#if defined (vax) || defined (__vax) || defined (__vax__) || defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+++#include <signal.h>
+++#if defined(_SIZE_T_) || defined(SIGLOST)
+++#include <sys/utsname.h>
+++#endif
+++#endif
+++#endif
+++int
+++main ()
+++{
+++#if defined (sony)
+++#if defined (MIPSEB)
+++  /* BFD wants "bsd" instead of "newsos".  Perhaps BFD should be changed,
+++     I don't know....  */
+++  printf ("mips-sony-bsd\n"); exit (0);
+++#else
+++#include <sys/param.h>
+++  printf ("m68k-sony-newsos%s\n",
+++#ifdef NEWSOS4
+++  "4"
+++#else
+++  ""
+++#endif
+++  ); exit (0);
+++#endif
+++#endif
+++
+++#if defined (NeXT)
+++#if !defined (__ARCHITECTURE__)
+++#define __ARCHITECTURE__ "m68k"
+++#endif
+++  int version;
+++  version=`(hostinfo | sed -n 's/.*NeXT Mach \([0-9]*\).*/\1/p') 2>/dev/null`;
+++  if (version < 4)
+++    printf ("%s-next-nextstep%d\n", __ARCHITECTURE__, version);
+++  else
+++    printf ("%s-next-openstep%d\n", __ARCHITECTURE__, version);
+++  exit (0);
+++#endif
+++
+++#if defined (MULTIMAX) || defined (n16)
+++#if defined (UMAXV)
+++  printf ("ns32k-encore-sysv\n"); exit (0);
+++#else
+++#if defined (CMU)
+++  printf ("ns32k-encore-mach\n"); exit (0);
+++#else
+++  printf ("ns32k-encore-bsd\n"); exit (0);
+++#endif
+++#endif
+++#endif
+++
+++#if defined (__386BSD__)
+++  printf ("i386-pc-bsd\n"); exit (0);
+++#endif
+++
+++#if defined (sequent)
+++#if defined (i386)
+++  printf ("i386-sequent-dynix\n"); exit (0);
+++#endif
+++#if defined (ns32000)
+++  printf ("ns32k-sequent-dynix\n"); exit (0);
+++#endif
+++#endif
+++
+++#if defined (_SEQUENT_)
+++  struct utsname un;
+++
+++  uname(&un);
+++  if (strncmp(un.version, "V2", 2) == 0) {
+++    printf ("i386-sequent-ptx2\n"); exit (0);
+++  }
+++  if (strncmp(un.version, "V1", 2) == 0) { /* XXX is V1 correct? */
+++    printf ("i386-sequent-ptx1\n"); exit (0);
+++  }
+++  printf ("i386-sequent-ptx\n"); exit (0);
+++#endif
+++
+++#if defined (vax)
+++#if !defined (ultrix)
+++#include <sys/param.h>
+++#if defined (BSD)
+++#if BSD == 43
+++  printf ("vax-dec-bsd4.3\n"); exit (0);
+++#else
+++#if BSD == 199006
+++  printf ("vax-dec-bsd4.3reno\n"); exit (0);
+++#else
+++  printf ("vax-dec-bsd\n"); exit (0);
+++#endif
+++#endif
+++#else
+++  printf ("vax-dec-bsd\n"); exit (0);
+++#endif
+++#else
+++#if defined(_SIZE_T_) || defined(SIGLOST)
+++  struct utsname un;
+++  uname (&un);
+++  printf ("vax-dec-ultrix%s\n", un.release); exit (0);
+++#else
+++  printf ("vax-dec-ultrix\n"); exit (0);
+++#endif
+++#endif
+++#endif
+++#if defined(ultrix) || defined(_ultrix) || defined(__ultrix) || defined(__ultrix__)
+++#if defined(mips) || defined(__mips) || defined(__mips__) || defined(MIPS) || defined(__MIPS__)
+++#if defined(_SIZE_T_) || defined(SIGLOST)
+++  struct utsname *un;
+++  uname (&un);
+++  printf ("mips-dec-ultrix%s\n", un.release); exit (0);
+++#else
+++  printf ("mips-dec-ultrix\n"); exit (0);
+++#endif
+++#endif
+++#endif
+++
+++#if defined (alliant) && defined (i860)
+++  printf ("i860-alliant-bsd\n"); exit (0);
+++#endif
+++
+++  exit (1);
+++}
+++EOF
+++
+++$CC_FOR_BUILD -o "$dummy" "$dummy.c" 2>/dev/null && SYSTEM_NAME=`"$dummy"` &&
+++	{ echo "$SYSTEM_NAME"; exit; }
+++
+++# Apollos put the system type in the environment.
+++test -d /usr/apollo && { echo "$ISP-apollo-$SYSTYPE"; exit; }
+++
++ echo "$0: unable to guess system type" >&2
++ 
++-case "$UNAME_MACHINE:$UNAME_SYSTEM" in
+++case $UNAME_MACHINE:$UNAME_SYSTEM in
++     mips:Linux | mips64:Linux)
++ 	# If we got here on MIPS GNU/Linux, output extra information.
++ 	cat >&2 <<EOF
++@@ -1445,9 +1765,17 @@ This script (version $timestamp), has failed to recognize the
++ operating system you are using. If your script is old, overwrite *all*
++ copies of config.guess and config.sub with the latest versions from:
++ 
++-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.guess
+++  https://git.savannah.gnu.org/cgit/config.git/plain/config.guess
++ and
++-  https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
+++  https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
+++EOF
+++
+++our_year=`echo $timestamp | sed 's,-.*,,'`
+++thisyear=`date +%Y`
+++# shellcheck disable=SC2003
+++script_age=`expr "$thisyear" - "$our_year"`
+++if test "$script_age" -lt 3 ; then
+++   cat >&2 <<EOF
++ 
++ If $0 has already been updated, send the following data and any
++ information you think might be pertinent to config-patches@gnu.org to
++@@ -1475,6 +1803,7 @@ UNAME_RELEASE = "$UNAME_RELEASE"
++ UNAME_SYSTEM  = "$UNAME_SYSTEM"
++ UNAME_VERSION = "$UNAME_VERSION"
++ EOF
+++fi
++ 
++ exit 1
++ 
++diff --git a/config.sub b/config.sub
++index b51fb8c..4aaae46 100755
++--- a/config.sub
+++++ b/config.sub
++@@ -1,12 +1,14 @@
++ #! /bin/sh
++ # Configuration validation subroutine script.
++-#   Copyright 1992-2018 Free Software Foundation, Inc.
+++#   Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++-timestamp='2018-08-29'
+++# shellcheck disable=SC2006,SC2268,SC2162 # see below for rationale
+++
+++timestamp='2024-05-27'
++ 
++ # This file is free software; you can redistribute it and/or modify it
++ # under the terms of the GNU General Public License as published by
++-# the Free Software Foundation; either version 3 of the License, or
+++# the Free Software Foundation, either version 3 of the License, or
++ # (at your option) any later version.
++ #
++ # This program is distributed in the hope that it will be useful, but
++@@ -33,7 +35,7 @@ timestamp='2018-08-29'
++ # Otherwise, we print the canonical config type on stdout and succeed.
++ 
++ # You can get the latest version of this script from:
++-# https://git.savannah.gnu.org/gitweb/?p=config.git;a=blob_plain;f=config.sub
+++# https://git.savannah.gnu.org/cgit/config.git/plain/config.sub
++ 
++ # This file is supposed to be the same for all GNU packages
++ # and recognize all the CPU types, system types and aliases
++@@ -50,6 +52,13 @@ timestamp='2018-08-29'
++ #	CPU_TYPE-MANUFACTURER-KERNEL-OPERATING_SYSTEM
++ # It is wrong to echo any other type of specification.
++ 
+++# The "shellcheck disable" line above the timestamp inhibits complaints
+++# about features and limitations of the classic Bourne shell that were
+++# superseded or lifted in POSIX.  However, this script identifies a wide
+++# variety of pre-POSIX systems that do not have POSIX shells at all, and
+++# even some reasonably current systems (Solaris 10 as case-in-point) still
+++# have a pre-POSIX /bin/sh.
+++
++ me=`echo "$0" | sed -e 's,.*/,,'`
++ 
++ usage="\
++@@ -67,13 +76,13 @@ Report bugs and patches to <config-patches@gnu.org>."
++ version="\
++ GNU config.sub ($timestamp)
++ 
++-Copyright 1992-2018 Free Software Foundation, Inc.
+++Copyright 1992-2024 Free Software Foundation, Inc.
++ 
++ This is free software; see the source for copying conditions.  There is NO
++ warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE."
++ 
++ help="
++-Try \`$me --help' for more information."
+++Try '$me --help' for more information."
++ 
++ # Parse command line
++ while test $# -gt 0 ; do
++@@ -89,7 +98,7 @@ while test $# -gt 0 ; do
++     - )	# Use stdin as input.
++        break ;;
++     -* )
++-       echo "$me: invalid option $1$help"
+++       echo "$me: invalid option $1$help" >&2
++        exit 1 ;;
++ 
++     *local*)
++@@ -111,74 +120,154 @@ case $# in
++ esac
++ 
++ # Split fields of configuration type
++-IFS="-" read -r field1 field2 field3 field4 <<EOF
+++saved_IFS=$IFS
+++IFS="-" read field1 field2 field3 field4 <<EOF
++ $1
++ EOF
+++IFS=$saved_IFS
++ 
++ # Separate into logical components for further validation
++ case $1 in
++ 	*-*-*-*-*)
++-		echo Invalid configuration \`"$1"\': more than four components >&2
+++		echo "Invalid configuration '$1': more than four components" >&2
++ 		exit 1
++ 		;;
++ 	*-*-*-*)
++ 		basic_machine=$field1-$field2
++-		os=$field3-$field4
+++		basic_os=$field3-$field4
++ 		;;
++ 	*-*-*)
++ 		# Ambiguous whether COMPANY is present, or skipped and KERNEL-OS is two
++ 		# parts
++ 		maybe_os=$field2-$field3
++ 		case $maybe_os in
++-			nto-qnx* | linux-gnu* | linux-android* | linux-dietlibc \
++-			| linux-newlib* | linux-musl* | linux-uclibc* | uclinux-uclibc* \
++-			| uclinux-gnu* | kfreebsd*-gnu* | knetbsd*-gnu* | netbsd*-gnu* \
++-			| netbsd*-eabi* | kopensolaris*-gnu* | cloudabi*-eabi* \
++-			| storm-chaos* | os2-emx* | rtmk-nova*)
+++			  cloudabi*-eabi* \
+++			| kfreebsd*-gnu* \
+++			| knetbsd*-gnu* \
+++			| kopensolaris*-gnu* \
+++			| linux-* \
+++			| managarm-* \
+++			| netbsd*-eabi* \
+++			| netbsd*-gnu* \
+++			| nto-qnx* \
+++			| os2-emx* \
+++			| rtmk-nova* \
+++			| storm-chaos* \
+++			| uclinux-gnu* \
+++			| uclinux-uclibc* \
+++			| windows-* )
++ 				basic_machine=$field1
++-				os=$maybe_os
+++				basic_os=$maybe_os
++ 				;;
++ 			android-linux)
++ 				basic_machine=$field1-unknown
++-				os=linux-android
+++				basic_os=linux-android
++ 				;;
++ 			*)
++ 				basic_machine=$field1-$field2
++-				os=$field3
+++				basic_os=$field3
++ 				;;
++ 		esac
++ 		;;
++ 	*-*)
++-		# A lone config we happen to match not fitting any patern
++ 		case $field1-$field2 in
+++			# Shorthands that happen to contain a single dash
+++			convex-c[12] | convex-c3[248])
+++				basic_machine=$field2-convex
+++				basic_os=
+++				;;
++ 			decstation-3100)
++ 				basic_machine=mips-dec
++-				os=
+++				basic_os=
++ 				;;
++ 			*-*)
++ 				# Second component is usually, but not always the OS
++ 				case $field2 in
++-					# Prevent following clause from handling this valid os
+++					# Do not treat sunos as a manufacturer
++ 					sun*os*)
++ 						basic_machine=$field1
++-						os=$field2
+++						basic_os=$field2
++ 						;;
++ 					# Manufacturers
++-					dec* | mips* | sequent* | encore* | pc533* | sgi* | sony* \
++-					| att* | 7300* | 3300* | delta* | motorola* | sun[234]* \
++-					| unicom* | ibm* | next | hp | isi* | apollo | altos* \
++-					| convergent* | ncr* | news | 32* | 3600* | 3100* \
++-					| hitachi* | c[123]* | convex* | sun | crds | omron* | dg \
++-					| ultra | tti* | harris | dolphin | highlevel | gould \
++-					| cbm | ns | masscomp | apple | axis | knuth | cray \
++-					| microblaze* | sim | cisco \
++-					| oki | wec | wrs | winbond)
+++					  3100* \
+++					| 32* \
+++					| 3300* \
+++					| 3600* \
+++					| 7300* \
+++					| acorn \
+++					| altos* \
+++					| apollo \
+++					| apple \
+++					| atari \
+++					| att* \
+++					| axis \
+++					| be \
+++					| bull \
+++					| cbm \
+++					| ccur \
+++					| cisco \
+++					| commodore \
+++					| convergent* \
+++					| convex* \
+++					| cray \
+++					| crds \
+++					| dec* \
+++					| delta* \
+++					| dg \
+++					| digital \
+++					| dolphin \
+++					| encore* \
+++					| gould \
+++					| harris \
+++					| highlevel \
+++					| hitachi* \
+++					| hp \
+++					| ibm* \
+++					| intergraph \
+++					| isi* \
+++					| knuth \
+++					| masscomp \
+++					| microblaze* \
+++					| mips* \
+++					| motorola* \
+++					| ncr* \
+++					| news \
+++					| next \
+++					| ns \
+++					| oki \
+++					| omron* \
+++					| pc533* \
+++					| rebel \
+++					| rom68k \
+++					| rombug \
+++					| semi \
+++					| sequent* \
+++					| siemens \
+++					| sgi* \
+++					| siemens \
+++					| sim \
+++					| sni \
+++					| sony* \
+++					| stratus \
+++					| sun \
+++					| sun[234]* \
+++					| tektronix \
+++					| tti* \
+++					| ultra \
+++					| unicom* \
+++					| wec \
+++					| winbond \
+++					| wrs)
++ 						basic_machine=$field1-$field2
++-						os=
+++						basic_os=
+++						;;
+++					zephyr*)
+++						basic_machine=$field1-unknown
+++						basic_os=$field2
++ 						;;
++ 					*)
++ 						basic_machine=$field1
++-						os=$field2
+++						basic_os=$field2
++ 						;;
++ 				esac
++ 			;;
++@@ -190,450 +279,431 @@ case $1 in
++ 		case $field1 in
++ 			386bsd)
++ 				basic_machine=i386-pc
++-				os=bsd
+++				basic_os=bsd
++ 				;;
++ 			a29khif)
++ 				basic_machine=a29k-amd
++-				os=udi
+++				basic_os=udi
++ 				;;
++ 			adobe68k)
++ 				basic_machine=m68010-adobe
++-				os=scout
+++				basic_os=scout
++ 				;;
++ 			alliant)
++ 				basic_machine=fx80-alliant
++-				os=
+++				basic_os=
++ 				;;
++ 			altos | altos3068)
++ 				basic_machine=m68k-altos
++-				os=
+++				basic_os=
++ 				;;
++ 			am29k)
++ 				basic_machine=a29k-none
++-				os=bsd
+++				basic_os=bsd
++ 				;;
++ 			amdahl)
++ 				basic_machine=580-amdahl
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			amiga)
++ 				basic_machine=m68k-unknown
++-				os=
+++				basic_os=
++ 				;;
++ 			amigaos | amigados)
++ 				basic_machine=m68k-unknown
++-				os=amigaos
+++				basic_os=amigaos
++ 				;;
++ 			amigaunix | amix)
++ 				basic_machine=m68k-unknown
++-				os=sysv4
+++				basic_os=sysv4
++ 				;;
++ 			apollo68)
++ 				basic_machine=m68k-apollo
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			apollo68bsd)
++ 				basic_machine=m68k-apollo
++-				os=bsd
+++				basic_os=bsd
++ 				;;
++ 			aros)
++ 				basic_machine=i386-pc
++-				os=aros
+++				basic_os=aros
++ 				;;
++ 			aux)
++ 				basic_machine=m68k-apple
++-				os=aux
+++				basic_os=aux
++ 				;;
++ 			balance)
++ 				basic_machine=ns32k-sequent
++-				os=dynix
+++				basic_os=dynix
++ 				;;
++ 			blackfin)
++ 				basic_machine=bfin-unknown
++-				os=linux
+++				basic_os=linux
++ 				;;
++ 			cegcc)
++ 				basic_machine=arm-unknown
++-				os=cegcc
++-				;;
++-			convex-c1)
++-				basic_machine=c1-convex
++-				os=bsd
++-				;;
++-			convex-c2)
++-				basic_machine=c2-convex
++-				os=bsd
++-				;;
++-			convex-c32)
++-				basic_machine=c32-convex
++-				os=bsd
++-				;;
++-			convex-c34)
++-				basic_machine=c34-convex
++-				os=bsd
++-				;;
++-			convex-c38)
++-				basic_machine=c38-convex
++-				os=bsd
+++				basic_os=cegcc
++ 				;;
++ 			cray)
++ 				basic_machine=j90-cray
++-				os=unicos
+++				basic_os=unicos
++ 				;;
++ 			crds | unos)
++ 				basic_machine=m68k-crds
++-				os=
+++				basic_os=
++ 				;;
++ 			da30)
++ 				basic_machine=m68k-da30
++-				os=
+++				basic_os=
++ 				;;
++ 			decstation | pmax | pmin | dec3100 | decstatn)
++ 				basic_machine=mips-dec
++-				os=
+++				basic_os=
++ 				;;
++ 			delta88)
++ 				basic_machine=m88k-motorola
++-				os=sysv3
+++				basic_os=sysv3
++ 				;;
++ 			dicos)
++ 				basic_machine=i686-pc
++-				os=dicos
+++				basic_os=dicos
++ 				;;
++ 			djgpp)
++ 				basic_machine=i586-pc
++-				os=msdosdjgpp
+++				basic_os=msdosdjgpp
++ 				;;
++ 			ebmon29k)
++ 				basic_machine=a29k-amd
++-				os=ebmon
+++				basic_os=ebmon
++ 				;;
++ 			es1800 | OSE68k | ose68k | ose | OSE)
++ 				basic_machine=m68k-ericsson
++-				os=ose
+++				basic_os=ose
++ 				;;
++ 			gmicro)
++ 				basic_machine=tron-gmicro
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			go32)
++ 				basic_machine=i386-pc
++-				os=go32
+++				basic_os=go32
++ 				;;
++ 			h8300hms)
++ 				basic_machine=h8300-hitachi
++-				os=hms
+++				basic_os=hms
++ 				;;
++ 			h8300xray)
++ 				basic_machine=h8300-hitachi
++-				os=xray
+++				basic_os=xray
++ 				;;
++ 			h8500hms)
++ 				basic_machine=h8500-hitachi
++-				os=hms
+++				basic_os=hms
++ 				;;
++ 			harris)
++ 				basic_machine=m88k-harris
++-				os=sysv3
+++				basic_os=sysv3
++ 				;;
++-			hp300)
+++			hp300 | hp300hpux)
++ 				basic_machine=m68k-hp
+++				basic_os=hpux
++ 				;;
++ 			hp300bsd)
++ 				basic_machine=m68k-hp
++-				os=bsd
++-				;;
++-			hp300hpux)
++-				basic_machine=m68k-hp
++-				os=hpux
+++				basic_os=bsd
++ 				;;
++ 			hppaosf)
++ 				basic_machine=hppa1.1-hp
++-				os=osf
+++				basic_os=osf
++ 				;;
++ 			hppro)
++ 				basic_machine=hppa1.1-hp
++-				os=proelf
+++				basic_os=proelf
++ 				;;
++ 			i386mach)
++ 				basic_machine=i386-mach
++-				os=mach
++-				;;
++-			vsta)
++-				basic_machine=i386-pc
++-				os=vsta
+++				basic_os=mach
++ 				;;
++ 			isi68 | isi)
++ 				basic_machine=m68k-isi
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			m68knommu)
++ 				basic_machine=m68k-unknown
++-				os=linux
+++				basic_os=linux
++ 				;;
++ 			magnum | m3230)
++ 				basic_machine=mips-mips
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			merlin)
++ 				basic_machine=ns32k-utek
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			mingw64)
++ 				basic_machine=x86_64-pc
++-				os=mingw64
+++				basic_os=mingw64
++ 				;;
++ 			mingw32)
++ 				basic_machine=i686-pc
++-				os=mingw32
+++				basic_os=mingw32
++ 				;;
++ 			mingw32ce)
++ 				basic_machine=arm-unknown
++-				os=mingw32ce
+++				basic_os=mingw32ce
++ 				;;
++ 			monitor)
++ 				basic_machine=m68k-rom68k
++-				os=coff
+++				basic_os=coff
++ 				;;
++ 			morphos)
++ 				basic_machine=powerpc-unknown
++-				os=morphos
+++				basic_os=morphos
++ 				;;
++ 			moxiebox)
++ 				basic_machine=moxie-unknown
++-				os=moxiebox
+++				basic_os=moxiebox
++ 				;;
++ 			msdos)
++ 				basic_machine=i386-pc
++-				os=msdos
+++				basic_os=msdos
++ 				;;
++ 			msys)
++ 				basic_machine=i686-pc
++-				os=msys
+++				basic_os=msys
++ 				;;
++ 			mvs)
++ 				basic_machine=i370-ibm
++-				os=mvs
+++				basic_os=mvs
++ 				;;
++ 			nacl)
++ 				basic_machine=le32-unknown
++-				os=nacl
+++				basic_os=nacl
++ 				;;
++ 			ncr3000)
++ 				basic_machine=i486-ncr
++-				os=sysv4
+++				basic_os=sysv4
++ 				;;
++ 			netbsd386)
++ 				basic_machine=i386-pc
++-				os=netbsd
+++				basic_os=netbsd
++ 				;;
++ 			netwinder)
++ 				basic_machine=armv4l-rebel
++-				os=linux
+++				basic_os=linux
++ 				;;
++ 			news | news700 | news800 | news900)
++ 				basic_machine=m68k-sony
++-				os=newsos
+++				basic_os=newsos
++ 				;;
++ 			news1000)
++ 				basic_machine=m68030-sony
++-				os=newsos
+++				basic_os=newsos
++ 				;;
++ 			necv70)
++ 				basic_machine=v70-nec
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			nh3000)
++ 				basic_machine=m68k-harris
++-				os=cxux
+++				basic_os=cxux
++ 				;;
++ 			nh[45]000)
++ 				basic_machine=m88k-harris
++-				os=cxux
+++				basic_os=cxux
++ 				;;
++ 			nindy960)
++ 				basic_machine=i960-intel
++-				os=nindy
+++				basic_os=nindy
++ 				;;
++ 			mon960)
++ 				basic_machine=i960-intel
++-				os=mon960
+++				basic_os=mon960
++ 				;;
++ 			nonstopux)
++ 				basic_machine=mips-compaq
++-				os=nonstopux
+++				basic_os=nonstopux
++ 				;;
++ 			os400)
++ 				basic_machine=powerpc-ibm
++-				os=os400
+++				basic_os=os400
++ 				;;
++ 			OSE68000 | ose68000)
++ 				basic_machine=m68000-ericsson
++-				os=ose
+++				basic_os=ose
++ 				;;
++ 			os68k)
++ 				basic_machine=m68k-none
++-				os=os68k
+++				basic_os=os68k
++ 				;;
++ 			paragon)
++ 				basic_machine=i860-intel
++-				os=osf
+++				basic_os=osf
++ 				;;
++ 			parisc)
++ 				basic_machine=hppa-unknown
++-				os=linux
+++				basic_os=linux
+++				;;
+++			psp)
+++				basic_machine=mipsallegrexel-sony
+++				basic_os=psp
++ 				;;
++ 			pw32)
++ 				basic_machine=i586-unknown
++-				os=pw32
+++				basic_os=pw32
++ 				;;
++ 			rdos | rdos64)
++ 				basic_machine=x86_64-pc
++-				os=rdos
+++				basic_os=rdos
++ 				;;
++ 			rdos32)
++ 				basic_machine=i386-pc
++-				os=rdos
+++				basic_os=rdos
++ 				;;
++ 			rom68k)
++ 				basic_machine=m68k-rom68k
++-				os=coff
+++				basic_os=coff
++ 				;;
++ 			sa29200)
++ 				basic_machine=a29k-amd
++-				os=udi
+++				basic_os=udi
++ 				;;
++ 			sei)
++ 				basic_machine=mips-sei
++-				os=seiux
+++				basic_os=seiux
++ 				;;
++ 			sequent)
++ 				basic_machine=i386-sequent
++-				os=
+++				basic_os=
++ 				;;
++ 			sps7)
++ 				basic_machine=m68k-bull
++-				os=sysv2
+++				basic_os=sysv2
++ 				;;
++ 			st2000)
++ 				basic_machine=m68k-tandem
++-				os=
+++				basic_os=
++ 				;;
++ 			stratus)
++ 				basic_machine=i860-stratus
++-				os=sysv4
+++				basic_os=sysv4
++ 				;;
++ 			sun2)
++ 				basic_machine=m68000-sun
++-				os=
+++				basic_os=
++ 				;;
++ 			sun2os3)
++ 				basic_machine=m68000-sun
++-				os=sunos3
+++				basic_os=sunos3
++ 				;;
++ 			sun2os4)
++ 				basic_machine=m68000-sun
++-				os=sunos4
+++				basic_os=sunos4
++ 				;;
++ 			sun3)
++ 				basic_machine=m68k-sun
++-				os=
+++				basic_os=
++ 				;;
++ 			sun3os3)
++ 				basic_machine=m68k-sun
++-				os=sunos3
+++				basic_os=sunos3
++ 				;;
++ 			sun3os4)
++ 				basic_machine=m68k-sun
++-				os=sunos4
+++				basic_os=sunos4
++ 				;;
++ 			sun4)
++ 				basic_machine=sparc-sun
++-				os=
+++				basic_os=
++ 				;;
++ 			sun4os3)
++ 				basic_machine=sparc-sun
++-				os=sunos3
+++				basic_os=sunos3
++ 				;;
++ 			sun4os4)
++ 				basic_machine=sparc-sun
++-				os=sunos4
+++				basic_os=sunos4
++ 				;;
++ 			sun4sol2)
++ 				basic_machine=sparc-sun
++-				os=solaris2
+++				basic_os=solaris2
++ 				;;
++ 			sun386 | sun386i | roadrunner)
++ 				basic_machine=i386-sun
++-				os=
+++				basic_os=
++ 				;;
++ 			sv1)
++ 				basic_machine=sv1-cray
++-				os=unicos
+++				basic_os=unicos
++ 				;;
++ 			symmetry)
++ 				basic_machine=i386-sequent
++-				os=dynix
+++				basic_os=dynix
++ 				;;
++ 			t3e)
++ 				basic_machine=alphaev5-cray
++-				os=unicos
+++				basic_os=unicos
++ 				;;
++ 			t90)
++ 				basic_machine=t90-cray
++-				os=unicos
+++				basic_os=unicos
++ 				;;
++ 			toad1)
++ 				basic_machine=pdp10-xkl
++-				os=tops20
+++				basic_os=tops20
++ 				;;
++ 			tpf)
++ 				basic_machine=s390x-ibm
++-				os=tpf
+++				basic_os=tpf
++ 				;;
++ 			udi29k)
++ 				basic_machine=a29k-amd
++-				os=udi
+++				basic_os=udi
++ 				;;
++ 			ultra3)
++ 				basic_machine=a29k-nyu
++-				os=sym1
+++				basic_os=sym1
++ 				;;
++ 			v810 | necv810)
++ 				basic_machine=v810-nec
++-				os=none
+++				basic_os=none
++ 				;;
++ 			vaxv)
++ 				basic_machine=vax-dec
++-				os=sysv
+++				basic_os=sysv
++ 				;;
++ 			vms)
++ 				basic_machine=vax-dec
++-				os=vms
+++				basic_os=vms
+++				;;
+++			vsta)
+++				basic_machine=i386-pc
+++				basic_os=vsta
++ 				;;
++ 			vxworks960)
++ 				basic_machine=i960-wrs
++-				os=vxworks
+++				basic_os=vxworks
++ 				;;
++ 			vxworks68)
++ 				basic_machine=m68k-wrs
++-				os=vxworks
+++				basic_os=vxworks
++ 				;;
++ 			vxworks29k)
++ 				basic_machine=a29k-wrs
++-				os=vxworks
+++				basic_os=vxworks
++ 				;;
++ 			xbox)
++ 				basic_machine=i686-pc
++-				os=mingw32
+++				basic_os=mingw32
++ 				;;
++ 			ymp)
++ 				basic_machine=ymp-cray
++-				os=unicos
+++				basic_os=unicos
++ 				;;
++ 			*)
++ 				basic_machine=$1
++-				os=
+++				basic_os=
++ 				;;
++ 		esac
++ 		;;
++@@ -685,27 +755,38 @@ case $basic_machine in
++ 	bluegene*)
++ 		cpu=powerpc
++ 		vendor=ibm
++-		os=cnk
+++		basic_os=cnk
++ 		;;
++ 	decsystem10* | dec10*)
++ 		cpu=pdp10
++ 		vendor=dec
++-		os=tops10
+++		basic_os=tops10
++ 		;;
++ 	decsystem20* | dec20*)
++ 		cpu=pdp10
++ 		vendor=dec
++-		os=tops20
+++		basic_os=tops20
++ 		;;
++-	delta | 3300 | motorola-3300 | motorola-delta \
++-	      | 3300-motorola | delta-motorola)
+++	delta | 3300 | delta-motorola | 3300-motorola | motorola-delta | motorola-3300)
++ 		cpu=m68k
++ 		vendor=motorola
++ 		;;
++-	dpx2*)
+++	# This used to be dpx2*, but that gets the RS6000-based
+++	# DPX/20 and the x86-based DPX/2-100 wrong.  See
+++	# https://oldskool.silicium.org/stations/bull_dpx20.htm
+++	# https://www.feb-patrimoine.com/english/bull_dpx2.htm
+++	# https://www.feb-patrimoine.com/english/unix_and_bull.htm
+++	dpx2 | dpx2[23]00 | dpx2[23]xx)
++ 		cpu=m68k
++ 		vendor=bull
++-		os=sysv3
+++		;;
+++	dpx2100 | dpx21xx)
+++		cpu=i386
+++		vendor=bull
+++		;;
+++	dpx20)
+++		cpu=rs6000
+++		vendor=bull
++ 		;;
++ 	encore | umax | mmax)
++ 		cpu=ns32k
++@@ -714,7 +795,7 @@ case $basic_machine in
++ 	elxsi)
++ 		cpu=elxsi
++ 		vendor=elxsi
++-		os=${os:-bsd}
+++		basic_os=${basic_os:-bsd}
++ 		;;
++ 	fx2800)
++ 		cpu=i860
++@@ -727,7 +808,7 @@ case $basic_machine in
++ 	h3050r* | hiux*)
++ 		cpu=hppa1.1
++ 		vendor=hitachi
++-		os=hiuxwe2
+++		basic_os=hiuxwe2
++ 		;;
++ 	hp3k9[0-9][0-9] | hp9[0-9][0-9])
++ 		cpu=hppa1.0
++@@ -770,36 +851,36 @@ case $basic_machine in
++ 	i*86v32)
++ 		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++ 		vendor=pc
++-		os=sysv32
+++		basic_os=sysv32
++ 		;;
++ 	i*86v4*)
++ 		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++ 		vendor=pc
++-		os=sysv4
+++		basic_os=sysv4
++ 		;;
++ 	i*86v)
++ 		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++ 		vendor=pc
++-		os=sysv
+++		basic_os=sysv
++ 		;;
++ 	i*86sol2)
++ 		cpu=`echo "$1" | sed -e 's/86.*/86/'`
++ 		vendor=pc
++-		os=solaris2
+++		basic_os=solaris2
++ 		;;
++ 	j90 | j90-cray)
++ 		cpu=j90
++ 		vendor=cray
++-		os=${os:-unicos}
+++		basic_os=${basic_os:-unicos}
++ 		;;
++ 	iris | iris4d)
++ 		cpu=mips
++ 		vendor=sgi
++-		case $os in
+++		case $basic_os in
++ 		    irix*)
++ 			;;
++ 		    *)
++-			os=irix4
+++			basic_os=irix4
++ 			;;
++ 		esac
++ 		;;
++@@ -810,26 +891,16 @@ case $basic_machine in
++ 	*mint | mint[0-9]* | *MiNT | *MiNT[0-9]*)
++ 		cpu=m68k
++ 		vendor=atari
++-		os=mint
+++		basic_os=mint
++ 		;;
++ 	news-3600 | risc-news)
++ 		cpu=mips
++ 		vendor=sony
++-		os=newsos
+++		basic_os=newsos
++ 		;;
++ 	next | m*-next)
++ 		cpu=m68k
++ 		vendor=next
++-		case $os in
++-		    nextstep* )
++-			;;
++-		    ns2*)
++-		      os=nextstep2
++-			;;
++-		    *)
++-		      os=nextstep3
++-			;;
++-		esac
++ 		;;
++ 	np1)
++ 		cpu=np1
++@@ -838,12 +909,12 @@ case $basic_machine in
++ 	op50n-* | op60c-*)
++ 		cpu=hppa1.1
++ 		vendor=oki
++-		os=proelf
+++		basic_os=proelf
++ 		;;
++ 	pa-hitachi)
++ 		cpu=hppa1.1
++ 		vendor=hitachi
++-		os=hiuxwe2
+++		basic_os=hiuxwe2
++ 		;;
++ 	pbd)
++ 		cpu=sparc
++@@ -880,12 +951,12 @@ case $basic_machine in
++ 	sde)
++ 		cpu=mipsisa32
++ 		vendor=sde
++-		os=${os:-elf}
+++		basic_os=${basic_os:-elf}
++ 		;;
++ 	simso-wrs)
++ 		cpu=sparclite
++ 		vendor=wrs
++-		os=vxworks
+++		basic_os=vxworks
++ 		;;
++ 	tower | tower-32)
++ 		cpu=m68k
++@@ -902,7 +973,7 @@ case $basic_machine in
++ 	w89k-*)
++ 		cpu=hppa1.1
++ 		vendor=winbond
++-		os=proelf
+++		basic_os=proelf
++ 		;;
++ 	none)
++ 		cpu=none
++@@ -918,11 +989,13 @@ case $basic_machine in
++ 		;;
++ 
++ 	*-*)
++-		IFS="-" read -r cpu vendor <<EOF
+++		saved_IFS=$IFS
+++		IFS="-" read cpu vendor <<EOF
++ $basic_machine
++ EOF
+++		IFS=$saved_IFS
++ 		;;
++-	# We use `pc' rather than `unknown'
+++	# We use 'pc' rather than 'unknown'
++ 	# because (1) that's what they normally are, and
++ 	# (2) the word "unknown" tends to confuse beginning users.
++ 	i*86 | x86_64)
++@@ -950,15 +1023,19 @@ unset -v basic_machine
++ 
++ # Decode basic machines in the full and proper CPU-Company form.
++ case $cpu-$vendor in
++-	# Here we handle the default manufacturer of certain CPU types in cannonical form. It is in
++-	# some cases the only manufacturer, in others, it is the most popular.
+++	# Here we handle the default manufacturer of certain CPU types in canonical form.
+++	# It is in some cases the only manufacturer, in others, it is the most popular.
+++	c[12]-convex | c[12]-unknown | c3[248]-convex | c3[248]-unknown)
+++		vendor=convex
+++		basic_os=${basic_os:-bsd}
+++		;;
++ 	craynv-unknown)
++ 		vendor=cray
++-		os=${os:-unicosmp}
+++		basic_os=${basic_os:-unicosmp}
++ 		;;
++ 	c90-unknown | c90-cray)
++ 		vendor=cray
++-		os=${os:-unicos}
+++		basic_os=${basic_os:-unicos}
++ 		;;
++ 	fx80-unknown)
++ 		vendor=alliant
++@@ -999,10 +1076,33 @@ case $cpu-$vendor in
++ 		;;
++ 
++ 	# Here we normalize CPU types with a missing or matching vendor
++-	dpx20-unknown | dpx20-bull)
++-		cpu=rs6000
++-		vendor=bull
++-		os=${os:-bosx}
+++	armh-unknown | armh-alt)
+++		cpu=armv7l
+++		vendor=alt
+++		basic_os=${basic_os:-linux-gnueabihf}
+++		;;
+++
+++	# Normalized CPU+vendor pairs that imply an OS, if not otherwise specified
+++	m68k-isi)
+++		basic_os=${basic_os:-sysv}
+++		;;
+++	m68k-sony)
+++		basic_os=${basic_os:-newsos}
+++		;;
+++	m68k-tektronix)
+++		basic_os=${basic_os:-bsd}
+++		;;
+++	m88k-harris)
+++		basic_os=${basic_os:-sysv3}
+++		;;
+++	i386-bull | m68k-bull)
+++		basic_os=${basic_os:-sysv3}
+++		;;
+++	rs6000-bull)
+++		basic_os=${basic_os:-bosx}
+++		;;
+++	mips-sni)
+++		basic_os=${basic_os:-sysv4}
++ 		;;
++ 
++ 	# Here we normalize CPU types irrespective of the vendor
++@@ -1011,7 +1111,7 @@ case $cpu-$vendor in
++ 		;;
++ 	blackfin-*)
++ 		cpu=bfin
++-		os=linux
+++		basic_os=${basic_os:-linux}
++ 		;;
++ 	c54x-*)
++ 		cpu=tic54x
++@@ -1024,7 +1124,7 @@ case $cpu-$vendor in
++ 		;;
++ 	e500v[12]-*)
++ 		cpu=powerpc
++-		os=$os"spe"
+++		basic_os=${basic_os}"spe"
++ 		;;
++ 	mips3*-*)
++ 		cpu=mips64
++@@ -1034,7 +1134,7 @@ case $cpu-$vendor in
++ 		;;
++ 	m68knommu-*)
++ 		cpu=m68k
++-		os=linux
+++		basic_os=${basic_os:-linux}
++ 		;;
++ 	m9s12z-* | m68hcs12z-* | hcs12z-* | s12z-*)
++ 		cpu=s12z
++@@ -1044,12 +1144,12 @@ case $cpu-$vendor in
++ 		;;
++ 	parisc-*)
++ 		cpu=hppa
++-		os=linux
+++		basic_os=${basic_os:-linux}
++ 		;;
++ 	pentium-* | p5-* | k5-* | k6-* | nexgen-* | viac3-*)
++ 		cpu=i586
++ 		;;
++-	pentiumpro-* | p6-* | 6x86-* | athlon-* | athalon_*-*)
+++	pentiumpro-* | p6-* | 6x86-* | athlon-* | athlon_*-*)
++ 		cpu=i686
++ 		;;
++ 	pentiumii-* | pentium2-* | pentiumiii-* | pentium3-*)
++@@ -1058,9 +1158,6 @@ case $cpu-$vendor in
++ 	pentium4-*)
++ 		cpu=i786
++ 		;;
++-	pc98-*)
++-		cpu=i386
++-		;;
++ 	ppc-* | ppcbe-*)
++ 		cpu=powerpc
++ 		;;
++@@ -1094,17 +1191,17 @@ case $cpu-$vendor in
++ 	tx39el-*)
++ 		cpu=mipstx39el
++ 		;;
++-	x64-*)
++-		cpu=x86_64
++-		;;
++ 	xscale-* | xscalee[bl]-*)
++ 		cpu=`echo "$cpu" | sed 's/^xscale/arm/'`
++ 		;;
+++	arm64-* | aarch64le-*)
+++		cpu=aarch64
+++		;;
++ 
++-	# Recognize the cannonical CPU Types that limit and/or modify the
+++	# Recognize the canonical CPU Types that limit and/or modify the
++ 	# company names they are paired with.
++ 	cr16-*)
++-		os=${os:-elf}
+++		basic_os=${basic_os:-elf}
++ 		;;
++ 	crisv32-* | etraxfs*-*)
++ 		cpu=crisv32
++@@ -1115,7 +1212,7 @@ case $cpu-$vendor in
++ 		vendor=axis
++ 		;;
++ 	crx-*)
++-		os=${os:-elf}
+++		basic_os=${basic_os:-elf}
++ 		;;
++ 	neo-tandem)
++ 		cpu=neo
++@@ -1137,119 +1234,243 @@ case $cpu-$vendor in
++ 		cpu=nsx
++ 		vendor=tandem
++ 		;;
++-	s390-*)
++-		cpu=s390
++-		vendor=ibm
++-		;;
++-	s390x-*)
++-		cpu=s390x
++-		vendor=ibm
+++	mipsallegrexel-sony)
+++		cpu=mipsallegrexel
+++		vendor=sony
++ 		;;
++ 	tile*-*)
++-		os=${os:-linux-gnu}
+++		basic_os=${basic_os:-linux-gnu}
++ 		;;
++ 
++ 	*)
++-		# Recognize the cannonical CPU types that are allowed with any
+++		# Recognize the canonical CPU types that are allowed with any
++ 		# company name.
++ 		case $cpu in
++-			1750a | 580 \
+++			  1750a \
+++			| 580 \
+++			| [cjt]90 \
++ 			| a29k \
++-			| aarch64 | aarch64_be \
+++			| aarch64 \
+++			| aarch64_be \
+++			| aarch64c \
++ 			| abacus \
++-			| alpha | alphaev[4-8] | alphaev56 | alphaev6[78] \
++-			| alpha64 | alpha64ev[4-8] | alpha64ev56 | alpha64ev6[78] \
++-			| alphapca5[67] | alpha64pca5[67] \
+++			| alpha \
+++			| alpha64 \
+++			| alpha64ev56 \
+++			| alpha64ev6[78] \
+++			| alpha64ev[4-8] \
+++			| alpha64pca5[67] \
+++			| alphaev56 \
+++			| alphaev6[78] \
+++			| alphaev[4-8] \
+++			| alphapca5[67] \
++ 			| am33_2.0 \
++-			| arc | arceb \
++-			| arm  | arm[lb]e | arme[lb] | armv* \
++-			| avr | avr32 \
+++			| amdgcn \
+++			| arc \
+++			| arc32 \
+++			| arc64 \
+++			| arceb \
+++			| arm \
+++			| arm64e \
+++			| arm64ec \
+++			| arm[lb]e \
+++			| arme[lb] \
+++			| armv* \
++ 			| asmjs \
+++			| avr \
+++			| avr32 \
++ 			| ba \
++-			| be32 | be64 \
++-			| bfin | bs2000 \
++-			| c[123]* | c30 | [cjt]90 | c4x \
++-			| c8051 | clipper | craynv | csky | cydra \
++-			| d10v | d30v | dlx | dsp16xx \
++-			| e2k | elxsi | epiphany \
++-			| f30[01] | f700 | fido | fr30 | frv | ft32 | fx80 \
++-			| h8300 | h8500 \
++-			| hppa | hppa1.[01] | hppa2.0 | hppa2.0[nw] | hppa64 \
+++			| be32 \
+++			| be64 \
+++			| bfin \
+++			| bpf \
+++			| bs2000 \
+++			| c30 \
+++			| c4x \
+++			| c8051 \
+++			| c[123]* \
+++			| clipper \
+++			| craynv \
+++			| csky \
+++			| cydra \
+++			| d10v \
+++			| d30v \
+++			| dlx \
+++			| dsp16xx \
+++			| e2k \
+++			| elxsi \
+++			| epiphany \
+++			| f30[01] \
+++			| f700 \
+++			| fido \
+++			| fr30 \
+++			| frv \
+++			| ft32 \
+++			| fx80 \
+++			| h8300 \
+++			| h8500 \
++ 			| hexagon \
++-			| i370 | i*86 | i860 | i960 | ia16 | ia64 \
++-			| ip2k | iq2000 \
+++			| hppa \
+++			| hppa1.[01] \
+++			| hppa2.0 \
+++			| hppa2.0[nw] \
+++			| hppa64 \
+++			| i*86 \
+++			| i370 \
+++			| i860 \
+++			| i960 \
+++			| ia16 \
+++			| ia64 \
+++			| ip2k \
+++			| iq2000 \
+++			| javascript \
++ 			| k1om \
++-			| le32 | le64 \
+++			| kvx \
+++			| le32 \
+++			| le64 \
++ 			| lm32 \
++-			| m32c | m32r | m32rle \
++-			| m5200 | m68000 | m680[012346]0 | m68360 | m683?2 | m68k | v70 | w65 \
++-			| m6811 | m68hc11 | m6812 | m68hc12 | m68hcs12x | nvptx | picochip \
++-			| m88110 | m88k | maxq | mb | mcore | mep | metag \
++-			| microblaze | microblazeel \
++-			| mips | mipsbe | mipseb | mipsel | mipsle \
++-			| mips16 \
++-			| mips64 | mips64el \
++-			| mips64octeon | mips64octeonel \
++-			| mips64orion | mips64orionel \
++-			| mips64r5900 | mips64r5900el \
++-			| mips64vr | mips64vrel \
++-			| mips64vr4100 | mips64vr4100el \
++-			| mips64vr4300 | mips64vr4300el \
++-			| mips64vr5000 | mips64vr5000el \
++-			| mips64vr5900 | mips64vr5900el \
++-			| mipsisa32 | mipsisa32el \
++-			| mipsisa32r2 | mipsisa32r2el \
++-			| mipsisa32r6 | mipsisa32r6el \
++-			| mipsisa64 | mipsisa64el \
++-			| mipsisa64r2 | mipsisa64r2el \
++-			| mipsisa64r6 | mipsisa64r6el \
++-			| mipsisa64sb1 | mipsisa64sb1el \
++-			| mipsisa64sr71k | mipsisa64sr71kel \
++-			| mipsr5900 | mipsr5900el \
++-			| mipstx39 | mipstx39el \
+++			| loongarch32 \
+++			| loongarch64 \
+++			| m32c \
+++			| m32r \
+++			| m32rle \
+++			| m5200 \
+++			| m68000 \
+++			| m680[012346]0 \
+++			| m6811 \
+++			| m6812 \
+++			| m68360 \
+++			| m683?2 \
+++			| m68hc11 \
+++			| m68hc12 \
+++			| m68hcs12x \
+++			| m68k \
+++			| m88110 \
+++			| m88k \
+++			| maxq \
+++			| mb \
+++			| mcore \
+++			| mep \
+++			| metag \
+++			| microblaze \
+++			| microblazeel \
+++			| mips* \
++ 			| mmix \
++-			| mn10200 | mn10300 \
+++			| mn10200 \
+++			| mn10300 \
++ 			| moxie \
++-			| mt \
++ 			| msp430 \
++-			| nds32 | nds32le | nds32be \
+++			| mt \
+++			| nanomips* \
+++			| nds32 \
+++			| nds32be \
+++			| nds32le \
++ 			| nfp \
++-			| nios | nios2 | nios2eb | nios2el \
++-			| none | np1 | ns16k | ns32k \
+++			| nios \
+++			| nios2 \
+++			| nios2eb \
+++			| nios2el \
+++			| none \
+++			| np1 \
+++			| ns16k \
+++			| ns32k \
+++			| nvptx \
++ 			| open8 \
++ 			| or1k* \
++ 			| or32 \
++ 			| orion \
++-			| pdp10 | pdp11 | pj | pjl | pn | power \
++-			| powerpc | powerpc64 | powerpc64le | powerpcle | powerpcspe \
+++			| pdp10 \
+++			| pdp11 \
+++			| picochip \
+++			| pj \
+++			| pjl \
+++			| pn \
+++			| power \
+++			| powerpc \
+++			| powerpc64 \
+++			| powerpc64le \
+++			| powerpcle \
+++			| powerpcspe \
++ 			| pru \
++ 			| pyramid \
++-			| riscv | riscv32 | riscv64 \
++-			| rl78 | romp | rs6000 | rx \
+++			| riscv \
+++			| riscv32 \
+++			| riscv32be \
+++			| riscv64 \
+++			| riscv64be \
+++			| rl78 \
+++			| romp \
+++			| rs6000 \
+++			| rx \
+++			| s390 \
+++			| s390x \
++ 			| score \
++-			| sh | sh[1234] | sh[24]a | sh[24]ae[lb] | sh[23]e | she[lb] | sh[lb]e \
++-			| sh[1234]e[lb] |  sh[12345][lb]e | sh[23]ele | sh64 | sh64le \
++-			| sparc | sparc64 | sparc64b | sparc64v | sparc86x | sparclet \
+++			| sh \
+++			| sh64 \
+++			| sh64le \
+++			| sh[12345][lb]e \
+++			| sh[1234] \
+++			| sh[1234]e[lb] \
+++			| sh[23]e \
+++			| sh[23]ele \
+++			| sh[24]a \
+++			| sh[24]ae[lb] \
+++			| sh[lb]e \
+++			| she[lb] \
+++			| shl \
+++			| sparc \
+++			| sparc64 \
+++			| sparc64b \
+++			| sparc64v \
+++			| sparc86x \
+++			| sparclet \
++ 			| sparclite \
++-			| sparcv8 | sparcv9 | sparcv9b | sparcv9v | sv1 | sx* \
+++			| sparcv8 \
+++			| sparcv9 \
+++			| sparcv9b \
+++			| sparcv9v \
++ 			| spu \
+++			| sv1 \
+++			| sx* \
++ 			| tahoe \
++-			| tic30 | tic4x | tic54x | tic55x | tic6x | tic80 \
+++			| thumbv7* \
+++			| tic30 \
+++			| tic4x \
+++			| tic54x \
+++			| tic55x \
+++			| tic6x \
+++			| tic80 \
++ 			| tron \
++ 			| ubicom32 \
++-			| v850 | v850e | v850e1 | v850es | v850e2 | v850e2v3 \
+++			| v70 \
+++			| v810 \
+++			| v850 \
+++			| v850e \
+++			| v850e1 \
+++			| v850e2 \
+++			| v850e2v3 \
+++			| v850es \
++ 			| vax \
+++			| vc4 \
++ 			| visium \
+++			| w65 \
++ 			| wasm32 \
+++			| wasm64 \
++ 			| we32k \
++-			| x86 | x86_64 | xc16x | xgate | xps100 \
++-			| xstormy16 | xtensa* \
+++			| x86 \
+++			| x86_64 \
+++			| xc16x \
+++			| xgate \
+++			| xps100 \
+++			| xstormy16 \
+++			| xtensa* \
++ 			| ymp \
++-			| z8k | z80)
+++			| z80 \
+++			| z8k)
++ 				;;
++ 
++ 			*)
++-				echo Invalid configuration \`"$1"\': machine \`"$cpu-$vendor"\' not recognized 1>&2
+++				echo "Invalid configuration '$1': machine '$cpu-$vendor' not recognized" 1>&2
++ 				exit 1
++ 				;;
++ 		esac
++@@ -1270,8 +1491,53 @@ esac
++ 
++ # Decode manufacturer-specific aliases for certain operating systems.
++ 
++-if [ x$os != x ]
+++if test x"$basic_os" != x
++ then
+++
+++# First recognize some ad-hoc cases, or perhaps split kernel-os, or else just
+++# set os.
+++obj=
+++case $basic_os in
+++	gnu/linux*)
+++		kernel=linux
+++		os=`echo "$basic_os" | sed -e 's|gnu/linux|gnu|'`
+++		;;
+++	os2-emx)
+++		kernel=os2
+++		os=`echo "$basic_os" | sed -e 's|os2-emx|emx|'`
+++		;;
+++	nto-qnx*)
+++		kernel=nto
+++		os=`echo "$basic_os" | sed -e 's|nto-qnx|qnx|'`
+++		;;
+++	*-*)
+++		saved_IFS=$IFS
+++		IFS="-" read kernel os <<EOF
+++$basic_os
+++EOF
+++		IFS=$saved_IFS
+++		;;
+++	# Default OS when just kernel was specified
+++	nto*)
+++		kernel=nto
+++		os=`echo "$basic_os" | sed -e 's|nto|qnx|'`
+++		;;
+++	linux*)
+++		kernel=linux
+++		os=`echo "$basic_os" | sed -e 's|linux|gnu|'`
+++		;;
+++	managarm*)
+++		kernel=managarm
+++		os=`echo "$basic_os" | sed -e 's|managarm|mlibc|'`
+++		;;
+++	*)
+++		kernel=
+++		os=$basic_os
+++		;;
+++esac
+++
+++# Now, normalize the OS (knowing we just have one component, it's not a kernel,
+++# etc.)
++ case $os in
++ 	# First match some system type aliases that might get confused
++ 	# with valid system types.
++@@ -1283,7 +1549,7 @@ case $os in
++ 		os=cnk
++ 		;;
++ 	solaris1 | solaris1.*)
++-		os=`echo $os | sed -e 's|solaris1|sunos4|'`
+++		os=`echo "$os" | sed -e 's|solaris1|sunos4|'`
++ 		;;
++ 	solaris)
++ 		os=solaris2
++@@ -1291,8 +1557,22 @@ case $os in
++ 	unixware*)
++ 		os=sysv4.2uw
++ 		;;
++-	gnu/linux*)
++-		os=`echo $os | sed -e 's|gnu/linux|linux-gnu|'`
+++	# The marketing names for NeXT's operating systems were
+++	# NeXTSTEP, NeXTSTEP 2, OpenSTEP 3, OpenSTEP 4.  'openstep' is
+++	# mapped to 'openstep3', but 'openstep1' and 'openstep2' are
+++	# mapped to 'nextstep' and 'nextstep2', consistent with the
+++	# treatment of SunOS/Solaris.
+++	ns | ns1 | nextstep | nextstep1 | openstep1)
+++		os=nextstep
+++		;;
+++	ns2 | nextstep2 | openstep2)
+++		os=nextstep2
+++		;;
+++	ns3 | nextstep3 | openstep | openstep3)
+++		os=openstep3
+++		;;
+++	ns4 | nextstep4 | openstep4)
+++		os=openstep4
++ 		;;
++ 	# es1800 is here to avoid being matched by es* (a different OS)
++ 	es1800*)
++@@ -1315,12 +1595,9 @@ case $os in
++ 		os=sco3.2v4
++ 		;;
++ 	sco3.2.[4-9]*)
++-		os=`echo $os | sed -e 's/sco3.2./sco3.2v/'`
+++		os=`echo "$os" | sed -e 's/sco3.2./sco3.2v/'`
++ 		;;
++-	sco3.2v[4-9]* | sco5v6*)
++-		# Don't forget version if it is 3.2v4 or newer.
++-		;;
++-	scout)
+++	sco*v* | scout)
++ 		# Don't match below
++ 		;;
++ 	sco*)
++@@ -1329,77 +1606,25 @@ case $os in
++ 	psos*)
++ 		os=psos
++ 		;;
++-	# Now accept the basic system types.
++-	# The portable systems comes first.
++-	# Each alternative MUST end in a * to match a version number.
++-	# sysv* is not here because it comes later, after sysvr4.
++-	gnu* | bsd* | mach* | minix* | genix* | ultrix* | irix* \
++-	     | *vms* | esix* | aix* | cnk* | sunos | sunos[34]*\
++-	     | hpux* | unos* | osf* | luna* | dgux* | auroraux* | solaris* \
++-	     | sym* | kopensolaris* | plan9* \
++-	     | amigaos* | amigados* | msdos* | newsos* | unicos* | aof* \
++-	     | aos* | aros* | cloudabi* | sortix* \
++-	     | nindy* | vxsim* | vxworks* | ebmon* | hms* | mvs* \
++-	     | clix* | riscos* | uniplus* | iris* | isc* | rtu* | xenix* \
++-	     | knetbsd* | mirbsd* | netbsd* \
++-	     | bitrig* | openbsd* | solidbsd* | libertybsd* \
++-	     | ekkobsd* | kfreebsd* | freebsd* | riscix* | lynxos* \
++-	     | bosx* | nextstep* | cxux* | aout* | elf* | oabi* \
++-	     | ptx* | coff* | ecoff* | winnt* | domain* | vsta* \
++-	     | udi* | eabi* | lites* | ieee* | go32* | aux* | hcos* \
++-	     | chorusrdb* | cegcc* | glidix* \
++-	     | cygwin* | msys* | pe* | moss* | proelf* | rtems* \
++-	     | midipix* | mingw32* | mingw64* | linux-gnu* | linux-android* \
++-	     | linux-newlib* | linux-musl* | linux-uclibc* \
++-	     | uxpv* | beos* | mpeix* | udk* | moxiebox* \
++-	     | interix* | uwin* | mks* | rhapsody* | darwin* \
++-	     | openstep* | oskit* | conix* | pw32* | nonstopux* \
++-	     | storm-chaos* | tops10* | tenex* | tops20* | its* \
++-	     | os2* | vos* | palmos* | uclinux* | nucleus* \
++-	     | morphos* | superux* | rtmk* | windiss* \
++-	     | powermax* | dnix* | nx6 | nx7 | sei* | dragonfly* \
++-	     | skyos* | haiku* | rdos* | toppers* | drops* | es* \
++-	     | onefs* | tirtos* | phoenix* | fuchsia* | redox* | bme* \
++-	     | midnightbsd*)
++-	# Remember, each alternative MUST END IN *, to match a version number.
++-		;;
++ 	qnx*)
++-		case $cpu in
++-		    x86 | i*86)
++-			;;
++-		    *)
++-			os=nto-$os
++-			;;
++-		esac
+++		os=qnx
++ 		;;
++ 	hiux*)
++ 		os=hiuxwe2
++ 		;;
++-	nto-qnx*)
++-		;;
++-	nto*)
++-		os=`echo $os | sed -e 's|nto|nto-qnx|'`
++-		;;
++-	sim | xray | os68k* | v88r* \
++-	    | windows* | osx | abug | netware* | os9* \
++-	    | macos* | mpw* | magic* | mmixware* | mon960* | lnews*)
++-		;;
++-	linux-dietlibc)
++-		os=linux-dietlibc
++-		;;
++-	linux*)
++-		os=`echo $os | sed -e 's|linux|linux-gnu|'`
++-		;;
++ 	lynx*178)
++ 		os=lynxos178
++ 		;;
++ 	lynx*5)
++ 		os=lynxos5
++ 		;;
+++	lynxos*)
+++		# don't get caught up in next wildcard
+++		;;
++ 	lynx*)
++ 		os=lynxos
++ 		;;
++-	mac*)
+++	mac[0-9]*)
++ 		os=`echo "$os" | sed -e 's|mac|macos|'`
++ 		;;
++ 	opened*)
++@@ -1419,6 +1644,7 @@ case $os in
++ 		;;
++ 	utek*)
++ 		os=bsd
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|tektronix|'`
++ 		;;
++ 	dynix*)
++ 		os=bsd
++@@ -1435,24 +1661,25 @@ case $os in
++ 	386bsd)
++ 		os=bsd
++ 		;;
++-	ctix* | uts*)
+++	ctix*)
++ 		os=sysv
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|convergent|'`
++ 		;;
++-	nova*)
++-		os=rtmk-nova
++-		;;
++-	ns2)
++-		os=nextstep2
+++	uts*)
+++		os=sysv
++ 		;;
++-	nsk*)
++-		os=nsk
+++	nova*)
+++		kernel=rtmk
+++		os=nova
++ 		;;
++ 	# Preserve the version number of sinix5.
++ 	sinix5.*)
++-		os=`echo $os | sed -e 's|sinix|sysv|'`
+++		os=`echo "$os" | sed -e 's|sinix|sysv|'`
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
++ 		;;
++ 	sinix*)
++ 		os=sysv4
+++		vendor=`echo "$vendor" | sed -e 's|^unknown$|sni|'`
++ 		;;
++ 	tpf*)
++ 		os=tpf
++@@ -1472,18 +1699,12 @@ case $os in
++ 	sysvr4)
++ 		os=sysv4
++ 		;;
++-	# This must come after sysvr4.
++-	sysv*)
++-		;;
++ 	ose*)
++ 		os=ose
++ 		;;
++ 	*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
++ 		os=mint
++ 		;;
++-	zvmoe)
++-		os=zvmoe
++-		;;
++ 	dicos*)
++ 		os=dicos
++ 		;;
++@@ -1496,23 +1717,21 @@ case $os in
++ 			os=eabi
++ 			;;
++ 		    *)
++-			os=elf
+++			os=
+++			obj=elf
++ 			;;
++ 		esac
++ 		;;
++-	nacl*)
++-		;;
++-	ios)
++-		;;
++-	none)
++-		;;
++-	*-eabi)
+++	aout* | coff* | elf* | pe*)
+++		# These are machine code file formats, not OSes
+++		obj=$os
+++		os=
++ 		;;
++ 	*)
++-		echo Invalid configuration \`"$1"\': system \`"$os"\' not recognized 1>&2
++-		exit 1
+++		# No normalization, but not necessarily accepted, that comes below.
++ 		;;
++ esac
+++
++ else
++ 
++ # Here we handle the default operating systems that come with various machines.
++@@ -1525,42 +1744,54 @@ else
++ # will signal an error saying that MANUFACTURER isn't an operating
++ # system, and we'll never get to this point.
++ 
+++kernel=
+++obj=
++ case $cpu-$vendor in
++ 	score-*)
++-		os=elf
+++		os=
+++		obj=elf
++ 		;;
++ 	spu-*)
++-		os=elf
+++		os=
+++		obj=elf
++ 		;;
++ 	*-acorn)
++ 		os=riscix1.2
++ 		;;
++ 	arm*-rebel)
++-		os=linux
+++		kernel=linux
+++		os=gnu
++ 		;;
++ 	arm*-semi)
++-		os=aout
+++		os=
+++		obj=aout
++ 		;;
++ 	c4x-* | tic4x-*)
++-		os=coff
+++		os=
+++		obj=coff
++ 		;;
++ 	c8051-*)
++-		os=elf
+++		os=
+++		obj=elf
++ 		;;
++ 	clipper-intergraph)
++ 		os=clix
++ 		;;
++ 	hexagon-*)
++-		os=elf
+++		os=
+++		obj=elf
++ 		;;
++ 	tic54x-*)
++-		os=coff
+++		os=
+++		obj=coff
++ 		;;
++ 	tic55x-*)
++-		os=coff
+++		os=
+++		obj=coff
++ 		;;
++ 	tic6x-*)
++-		os=coff
+++		os=
+++		obj=coff
++ 		;;
++ 	# This must come before the *-dec entry.
++ 	pdp10-*)
++@@ -1582,28 +1813,43 @@ case $cpu-$vendor in
++ 		os=sunos3
++ 		;;
++ 	m68*-cisco)
++-		os=aout
+++		os=
+++		obj=aout
++ 		;;
++ 	mep-*)
++-		os=elf
+++		os=
+++		obj=elf
+++		;;
+++	# The -sgi and -siemens entries must be before the mips- entry
+++	# or we get the wrong os.
+++	*-sgi)
+++		os=irix
+++		;;
+++	*-siemens)
+++		os=sysv4
++ 		;;
++ 	mips*-cisco)
++-		os=elf
+++		os=
+++		obj=elf
++ 		;;
++-	mips*-*)
++-		os=elf
+++	mips*-*|nanomips*-*)
+++		os=
+++		obj=elf
++ 		;;
++ 	or32-*)
++-		os=coff
+++		os=
+++		obj=coff
++ 		;;
++-	*-tti)	# must be before sparc entry or we get the wrong os.
+++	# This must be before the sparc-* entry or we get the wrong os.
+++	*-tti)
++ 		os=sysv3
++ 		;;
++ 	sparc-* | *-sun)
++ 		os=sunos4.1.1
++ 		;;
++ 	pru-*)
++-		os=elf
+++		os=
+++		obj=elf
++ 		;;
++ 	*-be)
++ 		os=beos
++@@ -1627,7 +1873,7 @@ case $cpu-$vendor in
++ 		os=hpux
++ 		;;
++ 	*-hitachi)
++-		os=hiux
+++		os=hiuxwe2
++ 		;;
++ 	i860-* | *-att | *-ncr | *-altos | *-motorola | *-convergent)
++ 		os=sysv
++@@ -1671,12 +1917,6 @@ case $cpu-$vendor in
++ 	*-encore)
++ 		os=bsd
++ 		;;
++-	*-sgi)
++-		os=irix
++-		;;
++-	*-siemens)
++-		os=sysv4
++-		;;
++ 	*-masscomp)
++ 		os=rtu
++ 		;;
++@@ -1684,10 +1924,12 @@ case $cpu-$vendor in
++ 		os=uxpv
++ 		;;
++ 	*-rom68k)
++-		os=coff
+++		os=
+++		obj=coff
++ 		;;
++ 	*-*bug)
++-		os=coff
+++		os=
+++		obj=coff
++ 		;;
++ 	*-apple)
++ 		os=macos
++@@ -1702,84 +1944,406 @@ case $cpu-$vendor in
++ 		os=none
++ 		;;
++ esac
+++
++ fi
++ 
+++# Now, validate our (potentially fixed-up) individual pieces (OS, OBJ).
+++
+++case $os in
+++	# Sometimes we do "kernel-libc", so those need to count as OSes.
+++	llvm* | musl* | newlib* | relibc* | uclibc*)
+++		;;
+++	# Likewise for "kernel-abi"
+++	eabi* | gnueabi*)
+++		;;
+++	# VxWorks passes extra cpu info in the 4th filed.
+++	simlinux | simwindows | spe)
+++		;;
+++	# See `case $cpu-$os` validation below
+++	ghcjs)
+++		;;
+++	# Now accept the basic system types.
+++	# Each alternative MUST end in a * to match a version number.
+++	  abug \
+++	| aix* \
+++	| amdhsa* \
+++	| amigados* \
+++	| amigaos* \
+++	| android* \
+++	| aof* \
+++	| aos* \
+++	| aros* \
+++	| atheos* \
+++	| auroraux* \
+++	| aux* \
+++	| beos* \
+++	| bitrig* \
+++	| bme* \
+++	| bosx* \
+++	| bsd* \
+++	| cegcc* \
+++	| chorusos* \
+++	| chorusrdb* \
+++	| clix* \
+++	| cloudabi* \
+++	| cnk* \
+++	| conix* \
+++	| cos* \
+++	| cxux* \
+++	| cygwin* \
+++	| darwin* \
+++	| dgux* \
+++	| dicos* \
+++	| dnix* \
+++	| domain* \
+++	| dragonfly* \
+++	| drops* \
+++	| ebmon* \
+++	| ecoff* \
+++	| ekkobsd* \
+++	| emscripten* \
+++	| emx* \
+++	| es* \
+++	| fiwix* \
+++	| freebsd* \
+++	| fuchsia* \
+++	| genix* \
+++	| genode* \
+++	| glidix* \
+++	| gnu* \
+++	| go32* \
+++	| haiku* \
+++	| hcos* \
+++	| hiux* \
+++	| hms* \
+++	| hpux* \
+++	| ieee* \
+++	| interix* \
+++	| ios* \
+++	| iris* \
+++	| irix* \
+++	| ironclad* \
+++	| isc* \
+++	| its* \
+++	| l4re* \
+++	| libertybsd* \
+++	| lites* \
+++	| lnews* \
+++	| luna* \
+++	| lynxos* \
+++	| mach* \
+++	| macos* \
+++	| magic* \
+++	| mbr* \
+++	| midipix* \
+++	| midnightbsd* \
+++	| mingw32* \
+++	| mingw64* \
+++	| minix* \
+++	| mint* \
+++	| mirbsd* \
+++	| mks* \
+++	| mlibc* \
+++	| mmixware* \
+++	| mon960* \
+++	| morphos* \
+++	| moss* \
+++	| moxiebox* \
+++	| mpeix* \
+++	| mpw* \
+++	| msdos* \
+++	| msys* \
+++	| mvs* \
+++	| nacl* \
+++	| netbsd* \
+++	| netware* \
+++	| newsos* \
+++	| nextstep* \
+++	| nindy* \
+++	| nonstopux* \
+++	| nova* \
+++	| nsk* \
+++	| nucleus* \
+++	| nx6 \
+++	| nx7 \
+++	| oabi* \
+++	| ohos* \
+++	| onefs* \
+++	| openbsd* \
+++	| openedition* \
+++	| openstep* \
+++	| os108* \
+++	| os2* \
+++	| os400* \
+++	| os68k* \
+++	| os9* \
+++	| ose* \
+++	| osf* \
+++	| oskit* \
+++	| osx* \
+++	| palmos* \
+++	| phoenix* \
+++	| plan9* \
+++	| powermax* \
+++	| powerunix* \
+++	| proelf* \
+++	| psos* \
+++	| psp* \
+++	| ptx* \
+++	| pw32* \
+++	| qnx* \
+++	| rdos* \
+++	| redox* \
+++	| rhapsody* \
+++	| riscix* \
+++	| riscos* \
+++	| rtems* \
+++	| rtmk* \
+++	| rtu* \
+++	| scout* \
+++	| secbsd* \
+++	| sei* \
+++	| serenity* \
+++	| sim* \
+++	| skyos* \
+++	| solaris* \
+++	| solidbsd* \
+++	| sortix* \
+++	| storm-chaos* \
+++	| sunos \
+++	| sunos[34]* \
+++	| superux* \
+++	| syllable* \
+++	| sym* \
+++	| sysv* \
+++	| tenex* \
+++	| tirtos* \
+++	| toppers* \
+++	| tops10* \
+++	| tops20* \
+++	| tpf* \
+++	| tvos* \
+++	| twizzler* \
+++	| uclinux* \
+++	| udi* \
+++	| udk* \
+++	| ultrix* \
+++	| unicos* \
+++	| uniplus* \
+++	| unleashed* \
+++	| unos* \
+++	| uwin* \
+++	| uxpv* \
+++	| v88r* \
+++	|*vms* \
+++	| vos* \
+++	| vsta* \
+++	| vxsim* \
+++	| vxworks* \
+++	| wasi* \
+++	| watchos* \
+++	| wince* \
+++	| windiss* \
+++	| windows* \
+++	| winnt* \
+++	| xenix* \
+++	| xray* \
+++	| zephyr* \
+++	| zvmoe* )
+++		;;
+++	# This one is extra strict with allowed versions
+++	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
+++		# Don't forget version if it is 3.2v4 or newer.
+++		;;
+++	# This refers to builds using the UEFI calling convention
+++	# (which depends on the architecture) and PE file format.
+++	# Note that this is both a different calling convention and
+++	# different file format than that of GNU-EFI
+++	# (x86_64-w64-mingw32).
+++	uefi)
+++		;;
+++	none)
+++		;;
+++	kernel* | msvc* )
+++		# Restricted further below
+++		;;
+++	'')
+++		if test x"$obj" = x
+++		then
+++			echo "Invalid configuration '$1': Blank OS only allowed with explicit machine code file format" 1>&2
+++		fi
+++		;;
+++	*)
+++		echo "Invalid configuration '$1': OS '$os' not recognized" 1>&2
+++		exit 1
+++		;;
+++esac
+++
+++case $obj in
+++	aout* | coff* | elf* | pe*)
+++		;;
+++	'')
+++		# empty is fine
+++		;;
+++	*)
+++		echo "Invalid configuration '$1': Machine code format '$obj' not recognized" 1>&2
+++		exit 1
+++		;;
+++esac
+++
+++# Here we handle the constraint that a (synthetic) cpu and os are
+++# valid only in combination with each other and nowhere else.
+++case $cpu-$os in
+++	# The "javascript-unknown-ghcjs" triple is used by GHC; we
+++	# accept it here in order to tolerate that, but reject any
+++	# variations.
+++	javascript-ghcjs)
+++		;;
+++	javascript-* | *-ghcjs)
+++		echo "Invalid configuration '$1': cpu '$cpu' is not valid with os '$os$obj'" 1>&2
+++		exit 1
+++		;;
+++esac
+++
+++# As a final step for OS-related things, validate the OS-kernel combination
+++# (given a valid OS), if there is a kernel.
+++case $kernel-$os-$obj in
+++	linux-gnu*- | linux-android*- | linux-dietlibc*- | linux-llvm*- \
+++		    | linux-mlibc*- | linux-musl*- | linux-newlib*- \
+++		    | linux-relibc*- | linux-uclibc*- | linux-ohos*- )
+++		;;
+++	uclinux-uclibc*- | uclinux-gnu*- )
+++		;;
+++	managarm-mlibc*- | managarm-kernel*- )
+++		;;
+++	windows*-msvc*-)
+++		;;
+++	-dietlibc*- | -llvm*- | -mlibc*- | -musl*- | -newlib*- | -relibc*- \
+++		    | -uclibc*- )
+++		# These are just libc implementations, not actual OSes, and thus
+++		# require a kernel.
+++		echo "Invalid configuration '$1': libc '$os' needs explicit kernel." 1>&2
+++		exit 1
+++		;;
+++	-kernel*- )
+++		echo "Invalid configuration '$1': '$os' needs explicit kernel." 1>&2
+++		exit 1
+++		;;
+++	*-kernel*- )
+++		echo "Invalid configuration '$1': '$kernel' does not support '$os'." 1>&2
+++		exit 1
+++		;;
+++	*-msvc*- )
+++		echo "Invalid configuration '$1': '$os' needs 'windows'." 1>&2
+++		exit 1
+++		;;
+++	kfreebsd*-gnu*- | knetbsd*-gnu*- | netbsd*-gnu*- | kopensolaris*-gnu*-)
+++		;;
+++	vxworks-simlinux- | vxworks-simwindows- | vxworks-spe-)
+++		;;
+++	nto-qnx*-)
+++		;;
+++	os2-emx-)
+++		;;
+++	rtmk-nova-)
+++		;;
+++	*-eabi*- | *-gnueabi*-)
+++		;;
+++	none--*)
+++		# None (no kernel, i.e. freestanding / bare metal),
+++		# can be paired with an machine code file format
+++		;;
+++	-*-)
+++		# Blank kernel with real OS is always fine.
+++		;;
+++	--*)
+++		# Blank kernel and OS with real machine code file format is always fine.
+++		;;
+++	*-*-*)
+++		echo "Invalid configuration '$1': Kernel '$kernel' not known to work with OS '$os'." 1>&2
+++		exit 1
+++		;;
+++esac
+++
++ # Here we handle the case where we know the os, and the CPU type, but not the
++ # manufacturer.  We pick the logical manufacturer.
++ case $vendor in
++ 	unknown)
++-		case $os in
++-			riscix*)
+++		case $cpu-$os in
+++			*-riscix*)
++ 				vendor=acorn
++ 				;;
++-			sunos*)
+++			*-sunos* | *-solaris*)
++ 				vendor=sun
++ 				;;
++-			cnk*|-aix*)
+++			*-cnk* | *-aix*)
++ 				vendor=ibm
++ 				;;
++-			beos*)
+++			*-beos*)
++ 				vendor=be
++ 				;;
++-			hpux*)
+++			*-hpux*)
++ 				vendor=hp
++ 				;;
++-			mpeix*)
+++			*-mpeix*)
++ 				vendor=hp
++ 				;;
++-			hiux*)
+++			*-hiux*)
++ 				vendor=hitachi
++ 				;;
++-			unos*)
+++			*-unos*)
++ 				vendor=crds
++ 				;;
++-			dgux*)
+++			*-dgux*)
++ 				vendor=dg
++ 				;;
++-			luna*)
+++			*-luna*)
++ 				vendor=omron
++ 				;;
++-			genix*)
+++			*-genix*)
++ 				vendor=ns
++ 				;;
++-			clix*)
+++			*-clix*)
++ 				vendor=intergraph
++ 				;;
++-			mvs* | opened*)
+++			*-mvs* | *-opened*)
+++				vendor=ibm
+++				;;
+++			*-os400*)
++ 				vendor=ibm
++ 				;;
++-			os400*)
+++			s390-* | s390x-*)
++ 				vendor=ibm
++ 				;;
++-			ptx*)
+++			*-ptx*)
++ 				vendor=sequent
++ 				;;
++-			tpf*)
+++			*-tpf*)
++ 				vendor=ibm
++ 				;;
++-			vxsim* | vxworks* | windiss*)
+++			*-vxsim* | *-vxworks* | *-windiss*)
++ 				vendor=wrs
++ 				;;
++-			aux*)
+++			*-aux*)
++ 				vendor=apple
++ 				;;
++-			hms*)
+++			*-hms*)
++ 				vendor=hitachi
++ 				;;
++-			mpw* | macos*)
+++			*-mpw* | *-macos*)
++ 				vendor=apple
++ 				;;
++-			*mint | mint[0-9]* | *MiNT | MiNT[0-9]*)
+++			*-*mint | *-mint[0-9]* | *-*MiNT | *-MiNT[0-9]*)
++ 				vendor=atari
++ 				;;
++-			vos*)
+++			*-vos*)
++ 				vendor=stratus
++ 				;;
++ 		esac
++ 		;;
++ esac
++ 
++-echo "$cpu-$vendor-$os"
+++echo "$cpu-$vendor${kernel:+-$kernel}${os:+-$os}${obj:+-$obj}"
++ exit
++ 
++ # Local variables:
+diff --git a/include/LibreOfficeKit/LibreOfficeKit.h b/include/LibreOfficeKit/LibreOfficeKit.h
+index 899fdc7a2..66ff0418e 100644
+--- a/include/LibreOfficeKit/LibreOfficeKit.h
++++ b/include/LibreOfficeKit/LibreOfficeKit.h
+@@ -21,7 +21,11 @@
+ # include <stdint.h>
+ #endif
+ 
+-#include <LibreOfficeKit/LibreOfficeKitTypes.h>
++#ifdef __APPLE__
++#include <TargetConditionals.h>
++#endif
++
++#include "LibreOfficeKitTypes.h"
+ 
+ #ifdef __cplusplus
+ extern "C"
+@@ -119,7 +123,7 @@ struct _LibreOfficeKitClass
+     /// @see lok::Office::setOption
+     void (*setOption) (LibreOfficeKit* pThis, const char* pOption, const char* pValue);
+ 
+-    /// @see lok::Document::dumpState
++    /// @see lok::Office::dumpState
+     /// @since LibreOffice 7.5
+     void (*dumpState) (LibreOfficeKit* pThis, const char* pOptions, char** pState);
+ 
+@@ -127,6 +131,37 @@ struct _LibreOfficeKitClass
+      */
+     char* (*extractRequest) (LibreOfficeKit* pThis,
+                            const char* pFilePath);
++
++    /// @see lok::Office::trimMemory
++    /// @since LibreOffice 7.6
++    void (*trimMemory) (LibreOfficeKit* pThis, int nTarget);
++
++    /// @see lok::Office::startURP
++    void* (*startURP)(LibreOfficeKit* pThis,
++                    void* pReceiveURPFromLOContext, void* pSendURPToLOContext,
++                    int (*fnReceiveURPFromLO)(void* pContext, const signed char* pBuffer, int nLen),
++                    int (*fnSendURPToLO)(void* pContext, signed char* pBuffer, int nLen));
++
++    /// @see lok::Office::stopURP
++    void (*stopURP)(LibreOfficeKit* pThis, void* pSendURPToLOContext);
++
++    /// @see lok::Office::joinThreads
++    int (*joinThreads)(LibreOfficeKit* pThis);
++
++    /// @see lok::Office::startThreads
++    void (*startThreads)(LibreOfficeKit* pThis);
++
++    /// @see lok::Office::setForkedChild
++    void (*setForkedChild)(LibreOfficeKit* pThis, bool bIsChild);
++
++    /** @see lok::Office::extractDocumentStructureRequest.
++     */
++    char* (*extractDocumentStructureRequest)(LibreOfficeKit* pThis, const char* pFilePath,
++                                             const char* pFilter);
++
++    /// @see lok::Office::registerAnyInputCallback()
++    void (*registerAnyInputCallback)(LibreOfficeKit* pThis,
++                                     LibreOfficeKitAnyInputCallback pCallback, void* pData);
+ };
+ 
+ #define LIBREOFFICEKIT_DOCUMENT_HAS(pDoc,member) LIBREOFFICEKIT_HAS_MEMBER(LibreOfficeKitDocumentClass,member,(pDoc)->pClass->nSize)
+@@ -352,18 +387,6 @@ struct _LibreOfficeKitDocumentClass
+                             const int width, const int height,
+                             const double dpiscale);
+ 
+-#ifdef IOS
+-    /// @see lok::Document::paintTileToCGContext().
+-    void (*paintTileToCGContext) (LibreOfficeKitDocument* pThis,
+-                                  void* rCGContext,
+-                                  const int nCanvasWidth,
+-                                  const int nCanvasHeight,
+-                                  const int nTilePosX,
+-                                  const int nTilePosY,
+-                                  const int nTileWidth,
+-                                  const int nTileHeight);
+-#endif // IOS
+-
+ // CERTIFICATE AND SIGNING
+ 
+     /// @see lok::Document::insertCertificate().
+@@ -501,6 +524,41 @@ struct _LibreOfficeKitDocumentClass
+     /// @see lok::Document::setViewTimezone().
+     void (*setViewTimezone) (LibreOfficeKitDocument* pThis, int nId, const char* timezone);
+ 
++    /// @see lok::Document::setAccessibilityState().
++    void (*setAccessibilityState) (LibreOfficeKitDocument* pThis, int nId, bool nEnabled);
++
++    /// @see lok::Document::getA11yFocusedParagraph.
++    char* (*getA11yFocusedParagraph) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::getA11yCaretPosition.
++    int (*getA11yCaretPosition) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::setViewReadOnly().
++    void (*setViewReadOnly) (LibreOfficeKitDocument* pThis, int nId, const bool readOnly);
++
++    /// @see lok::Document::setAllowChangeComments().
++    void (*setAllowChangeComments) (LibreOfficeKitDocument* pThis, int nId, const bool allow);
++
++    /// @see lok::Document::getPresentationInfo
++    char* (*getPresentationInfo) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::createSlideRenderer
++    bool (*createSlideRenderer) (
++        LibreOfficeKitDocument* pThis,
++        const char* pSlideHash,
++        int nSlideNumber, unsigned* nViewWidth, unsigned* nViewHeight,
++        bool bRenderBackground, bool bRenderMasterPage);
++
++    /// @see lok::Document::postSlideshowCleanup
++    void (*postSlideshowCleanup)(LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::renderNextSlideLayer
++    bool (*renderNextSlideLayer)(
++        LibreOfficeKitDocument* pThis, unsigned char* pBuffer, bool* bIsBitmapLayer, double* pScale, char** pJsonMessage);
++
++    /// @see lok::Document::setViewOption
++    void (*setViewOption)(LibreOfficeKitDocument* pThis, const char* pOption, const char* pValue);
++
+ #endif // defined LOK_USE_UNSTABLE_API || defined LIBO_INTERNAL_ONLY
+ };
+ 
+diff --git a/include/LibreOfficeKit/LibreOfficeKit.h-old b/include/LibreOfficeKit/LibreOfficeKit.h-old
+new file mode 100644
+index 000000000..2465b1e8a
+--- /dev/null
++++ b/include/LibreOfficeKit/LibreOfficeKit.h-old
+@@ -0,0 +1,545 @@
++/* -*- Mode: C; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ */
++
++#ifndef INCLUDED_LIBREOFFICEKIT_LIBREOFFICEKIT_H
++#define INCLUDED_LIBREOFFICEKIT_LIBREOFFICEKIT_H
++
++#include <stddef.h>
++
++// the unstable API needs C99's bool
++// TODO remove the C99 types from the API before making stable
++#if defined LOK_USE_UNSTABLE_API || defined LIBO_INTERNAL_ONLY
++# ifndef _WIN32
++#  include <stdbool.h>
++# endif
++# include <stdint.h>
++#endif
++
++#include <LibreOfficeKit/LibreOfficeKitTypes.h>
++
++#ifdef __cplusplus
++extern "C"
++{
++#endif
++
++typedef struct _LibreOfficeKit LibreOfficeKit;
++typedef struct _LibreOfficeKitClass LibreOfficeKitClass;
++
++typedef struct _LibreOfficeKitDocument LibreOfficeKitDocument;
++typedef struct _LibreOfficeKitDocumentClass LibreOfficeKitDocumentClass;
++
++// Do we have an extended member in this struct ?
++#define LIBREOFFICEKIT_HAS_MEMBER(strct,member,nSize) \
++    (offsetof(strct, member) < (nSize))
++
++#define LIBREOFFICEKIT_HAS(pKit,member) LIBREOFFICEKIT_HAS_MEMBER(LibreOfficeKitClass,member,(pKit)->pClass->nSize)
++
++struct _LibreOfficeKit
++{
++    LibreOfficeKitClass* pClass;
++};
++
++struct _LibreOfficeKitClass
++{
++    size_t  nSize;
++
++    void (*destroy) (LibreOfficeKit* pThis);
++
++    LibreOfficeKitDocument* (*documentLoad) (LibreOfficeKit* pThis,
++                                             const char* pURL);
++
++    char* (*getError) (LibreOfficeKit* pThis);
++
++    /// @since LibreOffice 5.0
++    LibreOfficeKitDocument* (*documentLoadWithOptions) (LibreOfficeKit* pThis,
++                                                        const char* pURL,
++                                                        const char* pOptions);
++    /// @since LibreOffice 5.2
++    void (*freeError) (char* pFree);
++
++    /// @since LibreOffice 6.0
++    void (*registerCallback) (LibreOfficeKit* pThis,
++                              LibreOfficeKitCallback pCallback,
++                              void* pData);
++
++    /** @see lok::Office::getFilterTypes().
++        @since LibreOffice 6.0
++     */
++    char* (*getFilterTypes) (LibreOfficeKit* pThis);
++
++    /** @see lok::Office::setOptionalFeatures().
++        @since LibreOffice 6.0
++     */
++    void (*setOptionalFeatures)(LibreOfficeKit* pThis, unsigned long long features);
++
++    /** @see lok::Office::setDocumentPassword().
++        @since LibreOffice 6.0
++     */
++    void (*setDocumentPassword) (LibreOfficeKit* pThis,
++            char const* pURL,
++            char const* pPassword);
++
++    /** @see lok::Office::getVersionInfo().
++        @since LibreOffice 6.0
++     */
++    char* (*getVersionInfo) (LibreOfficeKit* pThis);
++
++    /** @see lok::Office::runMacro().
++        @since LibreOffice 6.0
++     */
++    int (*runMacro) (LibreOfficeKit *pThis, const char* pURL);
++
++    /** @see lok::Office::signDocument().
++        @since LibreOffice 6.2
++     */
++     bool (*signDocument) (LibreOfficeKit* pThis,
++                           const char* pUrl,
++                           const unsigned char* pCertificateBinary,
++                           const int nCertificateBinarySize,
++                           const unsigned char* pPrivateKeyBinary,
++                           const int nPrivateKeyBinarySize);
++
++    /// @see lok::Office::runLoop()
++    void (*runLoop) (LibreOfficeKit* pThis,
++                     LibreOfficeKitPollCallback pPollCallback,
++                     LibreOfficeKitWakeCallback pWakeCallback,
++                     void* pData);
++
++    /// @see lok::Office::sendDialogEvent
++    void (*sendDialogEvent) (LibreOfficeKit* pThis,
++                            unsigned long long int nLOKWindowId,
++                            const char* pArguments);
++
++    /// @see lok::Office::setOption
++    void (*setOption) (LibreOfficeKit* pThis, const char* pOption, const char* pValue);
++
++    /// @see lok::Document::dumpState
++    /// @since LibreOffice 7.5
++    void (*dumpState) (LibreOfficeKit* pThis, const char* pOptions, char** pState);
++
++    /** @see lok::Office::extractRequest.
++     */
++    char* (*extractRequest) (LibreOfficeKit* pThis,
++                           const char* pFilePath);
++
++    /// @see lok::Office::trimMemory
++    /// @since LibreOffice 7.6
++    void (*trimMemory) (LibreOfficeKit* pThis, int nTarget);
++
++    /// @see lok::Office::startURP
++    void* (*startURP)(LibreOfficeKit* pThis,
++                    void* pReceiveURPFromLOContext, void* pSendURPToLOContext,
++                    int (*fnReceiveURPFromLO)(void* pContext, const signed char* pBuffer, int nLen),
++                    int (*fnSendURPToLO)(void* pContext, signed char* pBuffer, int nLen));
++
++    /// @see lok::Office::stopURP
++    void (*stopURP)(LibreOfficeKit* pThis, void* pSendURPToLOContext);
++
++    /// @see lok::Office::joinThreads
++    int (*joinThreads)(LibreOfficeKit* pThis);
++
++    /// @see lok::Office::startThreads
++    void (*startThreads)(LibreOfficeKit* pThis);
++
++    /// @see lok::Office::setForkedChild
++    void (*setForkedChild)(LibreOfficeKit* pThis, bool bIsChild);
++
++    /** @see lok::Office::extractDocumentStructureRequest.
++     */
++    char* (*extractDocumentStructureRequest)(LibreOfficeKit* pThis, const char* pFilePath,
++                                             const char* pFilter);
++
++};
++
++#define LIBREOFFICEKIT_DOCUMENT_HAS(pDoc,member) LIBREOFFICEKIT_HAS_MEMBER(LibreOfficeKitDocumentClass,member,(pDoc)->pClass->nSize)
++
++struct _LibreOfficeKitDocument
++{
++    LibreOfficeKitDocumentClass* pClass;
++};
++
++struct _LibreOfficeKitDocumentClass
++{
++    size_t  nSize;
++
++    void (*destroy) (LibreOfficeKitDocument* pThis);
++
++    int (*saveAs) (LibreOfficeKitDocument* pThis,
++                   const char* pUrl,
++                   const char* pFormat,
++                   const char* pFilterOptions);
++
++    /** @see lok::Document::getDocumentType().
++        @since LibreOffice 6.0
++     */
++    int (*getDocumentType) (LibreOfficeKitDocument* pThis);
++
++#if defined LOK_USE_UNSTABLE_API || defined LIBO_INTERNAL_ONLY
++    /// @see lok::Document::getParts().
++    int (*getParts) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::getPartPageRectangles().
++    char* (*getPartPageRectangles) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::getPart().
++    int (*getPart) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::setPart().
++    void (*setPart) (LibreOfficeKitDocument* pThis,
++                     int nPart);
++
++    /// @see lok::Document::getPartName().
++    char* (*getPartName) (LibreOfficeKitDocument* pThis,
++                          int nPart);
++
++    /// @see lok::Document::setPartMode().
++    void (*setPartMode) (LibreOfficeKitDocument* pThis,
++                         int nMode);
++
++    /// @see lok::Document::paintTile().
++    void (*paintTile) (LibreOfficeKitDocument* pThis,
++                       unsigned char* pBuffer,
++                       const int nCanvasWidth,
++                       const int nCanvasHeight,
++                       const int nTilePosX,
++                       const int nTilePosY,
++                       const int nTileWidth,
++                       const int nTileHeight);
++
++    /// @see lok::Document::getTileMode().
++    int (*getTileMode) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::getDocumentSize().
++    void (*getDocumentSize) (LibreOfficeKitDocument* pThis,
++                             long* pWidth,
++                             long* pHeight);
++
++    /// @see lok::Document::initializeForRendering().
++    void (*initializeForRendering) (LibreOfficeKitDocument* pThis,
++                                    const char* pArguments);
++
++    /// @see lok::Document::registerCallback().
++    void (*registerCallback) (LibreOfficeKitDocument* pThis,
++                              LibreOfficeKitCallback pCallback,
++                              void* pData);
++
++    /// @see lok::Document::postKeyEvent
++    void (*postKeyEvent) (LibreOfficeKitDocument* pThis,
++                          int nType,
++                          int nCharCode,
++                          int nKeyCode);
++
++    /// @see lok::Document::postMouseEvent
++    void (*postMouseEvent) (LibreOfficeKitDocument* pThis,
++                            int nType,
++                            int nX,
++                            int nY,
++                            int nCount,
++                            int nButtons,
++                            int nModifier);
++
++    /// @see lok::Document::postUnoCommand
++    void (*postUnoCommand) (LibreOfficeKitDocument* pThis,
++                            const char* pCommand,
++                            const char* pArguments,
++                            bool bNotifyWhenFinished);
++
++    /// @see lok::Document::setTextSelection
++    void (*setTextSelection) (LibreOfficeKitDocument* pThis,
++                              int nType,
++                              int nX,
++                              int nY);
++
++    /// @see lok::Document::getTextSelection
++    char* (*getTextSelection) (LibreOfficeKitDocument* pThis,
++                               const char* pMimeType,
++                               char** pUsedMimeType);
++
++    /// @see lok::Document::paste().
++    bool (*paste) (LibreOfficeKitDocument* pThis,
++                   const char* pMimeType,
++                   const char* pData,
++                   size_t nSize);
++
++    /// @see lok::Document::setGraphicSelection
++    void (*setGraphicSelection) (LibreOfficeKitDocument* pThis,
++                                 int nType,
++                                 int nX,
++                                 int nY);
++
++    /// @see lok::Document::resetSelection
++    void (*resetSelection) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::getCommandValues().
++    char* (*getCommandValues) (LibreOfficeKitDocument* pThis, const char* pCommand);
++
++    /// @see lok::Document::setClientZoom().
++    void (*setClientZoom) (LibreOfficeKitDocument* pThis,
++            int nTilePixelWidth,
++            int nTilePixelHeight,
++            int nTileTwipWidth,
++            int nTileTwipHeight);
++
++    /// @see lok::Document::setVisibleArea).
++    void (*setClientVisibleArea) (LibreOfficeKitDocument* pThis, int nX, int nY, int nWidth, int nHeight);
++
++    /// @see lok::Document::createView().
++    int (*createView) (LibreOfficeKitDocument* pThis);
++    /// @see lok::Document::destroyView().
++    void (*destroyView) (LibreOfficeKitDocument* pThis, int nId);
++    /// @see lok::Document::setView().
++    void (*setView) (LibreOfficeKitDocument* pThis, int nId);
++    /// @see lok::Document::getView().
++    int (*getView) (LibreOfficeKitDocument* pThis);
++    /// @see lok::Document::getViewsCount().
++    int (*getViewsCount) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::renderFont().
++    unsigned char* (*renderFont) (LibreOfficeKitDocument* pThis,
++                       const char* pFontName,
++                       const char* pChar,
++                       int* pFontWidth,
++                       int* pFontHeight);
++
++    /// @see lok::Document::getPartHash().
++    char* (*getPartHash) (LibreOfficeKitDocument* pThis,
++                          int nPart);
++
++    /// Paints a tile from a specific part.
++    /// @see lok::Document::paintTile().
++    void (*paintPartTile) (LibreOfficeKitDocument* pThis,
++                           unsigned char* pBuffer,
++                           const int nPart,
++                           const int nMode,
++                           const int nCanvasWidth,
++                           const int nCanvasHeight,
++                           const int nTilePosX,
++                           const int nTilePosY,
++                           const int nTileWidth,
++                           const int nTileHeight);
++
++    /// @see lok::Document::getViewIds().
++    bool (*getViewIds) (LibreOfficeKitDocument* pThis,
++                       int* pArray,
++                       size_t nSize);
++
++    /// @see lok::Document::setOutlineState).
++    void (*setOutlineState) (LibreOfficeKitDocument* pThis, bool bColumn, int nLevel, int nIndex, bool bHidden);
++
++    /// Paints window with given id to the buffer
++    /// @see lok::Document::paintWindow().
++    void (*paintWindow) (LibreOfficeKitDocument* pThis, unsigned nWindowId,
++                         unsigned char* pBuffer,
++                         const int x, const int y,
++                         const int width, const int height);
++
++    /// @see lok::Document::postWindow().
++    void (*postWindow) (LibreOfficeKitDocument* pThis, unsigned nWindowId, int nAction, const char* pData);
++
++    /// @see lok::Document::postWindowKeyEvent().
++    void (*postWindowKeyEvent) (LibreOfficeKitDocument* pThis,
++                                unsigned nWindowId,
++                                int nType,
++                                int nCharCode,
++                                int nKeyCode);
++
++    /// @see lok::Document::postWindowMouseEvent().
++    void (*postWindowMouseEvent) (LibreOfficeKitDocument* pThis,
++                                  unsigned nWindowId,
++                                  int nType,
++                                  int nX,
++                                  int nY,
++                                  int nCount,
++                                  int nButtons,
++                                  int nModifier);
++
++    /// @see lok::Document::setViewLanguage().
++    void (*setViewLanguage) (LibreOfficeKitDocument* pThis, int nId, const char* language);
++
++    /// @see lok::Document::postWindowExtTextInputEvent
++    void (*postWindowExtTextInputEvent) (LibreOfficeKitDocument* pThis,
++                                         unsigned nWindowId,
++                                         int nType,
++                                         const char* pText);
++
++    /// @see lok::Document::getPartInfo().
++    char* (*getPartInfo) (LibreOfficeKitDocument* pThis, int nPart);
++
++    /// Paints window with given id to the buffer with the give DPI scale
++    /// (every pixel is dpiscale-times larger).
++    /// @see lok::Document::paintWindow().
++    void (*paintWindowDPI) (LibreOfficeKitDocument* pThis, unsigned nWindowId,
++                            unsigned char* pBuffer,
++                            const int x, const int y,
++                            const int width, const int height,
++                            const double dpiscale);
++
++#ifdef IOS
++    /// @see lok::Document::paintTileToCGContext().
++    void (*paintTileToCGContext) (LibreOfficeKitDocument* pThis,
++                                  void* rCGContext,
++                                  const int nCanvasWidth,
++                                  const int nCanvasHeight,
++                                  const int nTilePosX,
++                                  const int nTilePosY,
++                                  const int nTileWidth,
++                                  const int nTileHeight);
++#endif // IOS
++
++// CERTIFICATE AND SIGNING
++
++    /// @see lok::Document::insertCertificate().
++    bool (*insertCertificate) (LibreOfficeKitDocument* pThis,
++                                const unsigned char* pCertificateBinary,
++                                const int nCertificateBinarySize,
++                                const unsigned char* pPrivateKeyBinary,
++                                const int nPrivateKeyBinarySize);
++
++    /// @see lok::Document::addCertificate().
++    bool (*addCertificate) (LibreOfficeKitDocument* pThis,
++                                const unsigned char* pCertificateBinary,
++                                const int nCertificateBinarySize);
++
++    /// @see lok::Document::getSignatureState().
++    int (*getSignatureState) (LibreOfficeKitDocument* pThis);
++// END CERTIFICATE AND SIGNING
++
++    /// @see lok::Document::renderShapeSelection
++    size_t (*renderShapeSelection)(LibreOfficeKitDocument* pThis, char** pOutput);
++
++    /// @see lok::Document::postWindowGestureEvent().
++    void (*postWindowGestureEvent) (LibreOfficeKitDocument* pThis,
++                                  unsigned nWindowId,
++                                  const char* pType,
++                                  int nX,
++                                  int nY,
++                                  int nOffset);
++
++    /// @see lok::Document::createViewWithOptions().
++    int (*createViewWithOptions) (LibreOfficeKitDocument* pThis, const char* pOptions);
++
++    /// @see lok::Document::selectPart().
++    void (*selectPart) (LibreOfficeKitDocument* pThis, int nPart, int nSelect);
++
++    /// @see lok::Document::moveSelectedParts().
++    void (*moveSelectedParts) (LibreOfficeKitDocument* pThis, int nPosition, bool bDuplicate);
++
++    /// Resize window with given id.
++    /// @see lok::Document::resizeWindow().
++    void (*resizeWindow) (LibreOfficeKitDocument* pThis, unsigned nWindowId,
++                          const int width, const int height);
++
++    /// Pass a nullptr terminated array of mime-type strings
++    /// @see lok::Document::getClipboard for more details
++    int (*getClipboard) (LibreOfficeKitDocument* pThis,
++                         const char **pMimeTypes,
++                         size_t      *pOutCount,
++                         char      ***pOutMimeTypes,
++                         size_t     **pOutSizes,
++                         char      ***pOutStreams);
++
++    /// @see lok::Document::setClipboard
++    int (*setClipboard) (LibreOfficeKitDocument* pThis,
++                         const size_t   nInCount,
++                         const char   **pInMimeTypes,
++                         const size_t  *pInSizes,
++                         const char   **pInStreams);
++
++    /// @see lok::Document::getSelectionType
++    int (*getSelectionType) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::removeTextContext
++    void (*removeTextContext) (LibreOfficeKitDocument* pThis,
++                               unsigned nWindowId,
++                               int nBefore,
++                               int nAfter);
++
++    /// @see lok::Document::sendDialogEvent
++    void (*sendDialogEvent) (LibreOfficeKitDocument* pThis,
++                            unsigned long long int nLOKWindowId,
++                            const char* pArguments);
++
++    /// @see lok::Document::renderFontOrientation().
++    unsigned char* (*renderFontOrientation) (LibreOfficeKitDocument* pThis,
++                       const char* pFontName,
++                       const char* pChar,
++                       int* pFontWidth,
++                       int* pFontHeight,
++                       int pOrientation);
++
++    /// Switches view to viewId if viewId >= 0, and paints window
++    /// @see lok::Document::paintWindowDPI().
++    void (*paintWindowForView) (LibreOfficeKitDocument* pThis, unsigned nWindowId,
++                                unsigned char* pBuffer,
++                                const int x, const int y,
++                                const int width, const int height,
++                                const double dpiscale,
++                                int viewId);
++
++    /// @see lok::Document::completeFunction().
++    void (*completeFunction) (LibreOfficeKitDocument* pThis, const char* pFunctionName);
++
++    /// @see lok::Document::setWindowTextSelection
++    void (*setWindowTextSelection) (LibreOfficeKitDocument* pThis,
++                                    unsigned nWindowId,
++                                    bool bSwap,
++                                    int nX,
++                                    int nY);
++
++    /// @see lok::Document::sendFormFieldEvent
++    void (*sendFormFieldEvent) (LibreOfficeKitDocument* pThis,
++                                const char* pArguments);
++
++    /// @see lok::Document::setBlockedCommandList
++    void (*setBlockedCommandList) (LibreOfficeKitDocument* pThis,
++                                int nViewId,
++                                const char* blockedCommandList);
++
++    /// @see lok::Document::renderSearchResult
++    bool (*renderSearchResult) (LibreOfficeKitDocument* pThis,
++                                const char* pSearchResult,
++                                unsigned char** pBitmapBuffer,
++                                int* pWidth, int* pHeight, size_t* pByteSize);
++
++    /// @see lok::Document::sendContentControlEvent().
++    void (*sendContentControlEvent)(LibreOfficeKitDocument* pThis, const char* pArguments);
++
++    /// @see lok::Document::getSelectionTypeAndText
++    /// @since LibreOffice 7.4
++    int (*getSelectionTypeAndText) (LibreOfficeKitDocument* pThis,
++                                    const char* pMimeType,
++                                    char** pText,
++                                    char** pUsedMimeType);
++
++    /// @see lok::Document::getDataArea().
++    void (*getDataArea) (LibreOfficeKitDocument* pThis,
++                         long nPart,
++                         long* pCol,
++                         long* pRow);
++
++    /// @see lok::Document::getEditMode().
++    int (*getEditMode) (LibreOfficeKitDocument* pThis);
++
++    /// @see lok::Document::setViewTimezone().
++    void (*setViewTimezone) (LibreOfficeKitDocument* pThis, int nId, const char* timezone);
++
++    ///添加新函数 为online
++    /// @see lok::Document::setViewOption
++    void (*setViewOption)(LibreOfficeKitDocument* pThis, const char* pOption, const char* pValue);
++
++#endif // defined LOK_USE_UNSTABLE_API || defined LIBO_INTERNAL_ONLY
++};
++
++#ifdef __cplusplus
++}
++#endif
++
++#endif // INCLUDED_LIBREOFFICEKIT_LIBREOFFICEKIT_H
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab: */
+diff --git a/include/LibreOfficeKit/LibreOfficeKit.hxx b/include/LibreOfficeKit/LibreOfficeKit.hxx
+index 035a0923c..f6f581c1c 100644
+--- a/include/LibreOfficeKit/LibreOfficeKit.hxx
++++ b/include/LibreOfficeKit/LibreOfficeKit.hxx
+@@ -9,9 +9,9 @@
+ 
+ #pragma once
+ 
+-#include <LibreOfficeKit/LibreOfficeKit.h>
+-#include <LibreOfficeKit/LibreOfficeKitEnums.h>
+-#include <LibreOfficeKit/LibreOfficeKitInit.h>
++#include "LibreOfficeKit.h"
++#include "LibreOfficeKitEnums.h"
++#include "LibreOfficeKitInit.h"
+ 
+ /*
+  * The reasons this C++ code is not as pretty as it could be are:
+@@ -84,10 +84,11 @@ public:
+     }
+ 
+     /**
+-     * Get the logical rectangle of each part in the document.
++     * Get the extent of each page in the document.
+      *
+-     * A part refers to an individual page in Writer and has no relevant for
+-     * Calc or Impress.
++     * This function is relevant for Writer documents only. It is a
++     * mistake that the API has "part" in its name as Writer documents
++     * don't have parts.
+      *
+      * @return a rectangle list, using the same format as
+      * LOK_CALLBACK_TEXT_SELECTION.
+@@ -663,34 +664,6 @@ public:
+         mpDoc->pClass->postWindowExtTextInputEvent(mpDoc, nWindowId, nType, pText);
+     }
+ 
+-#ifdef IOS
+-    /**
+-     * Renders a subset of the document to a Core Graphics context.
+-     *
+-     * Note that the buffer size and the tile size implicitly supports
+-     * rendering at different zoom levels, as the number of rendered pixels and
+-     * the rendered rectangle of the document are independent.
+-     *
+-     * @param rCGContext the CGContextRef, cast to a void*.
+-     * @param nCanvasHeight number of pixels in a column of pBuffer.
+-     * @param nTilePosX logical X position of the top left corner of the rendered rectangle, in TWIPs.
+-     * @param nTilePosY logical Y position of the top left corner of the rendered rectangle, in TWIPs.
+-     * @param nTileWidth logical width of the rendered rectangle, in TWIPs.
+-     * @param nTileHeight logical height of the rendered rectangle, in TWIPs.
+-     */
+-    void paintTileToCGContext(void* rCGContext,
+-                              const int nCanvasWidth,
+-                              const int nCanvasHeight,
+-                              const int nTilePosX,
+-                              const int nTilePosY,
+-                              const int nTileWidth,
+-                              const int nTileHeight)
+-    {
+-        return mpDoc->pClass->paintTileToCGContext(mpDoc, rCGContext, nCanvasWidth, nCanvasHeight,
+-                                                   nTilePosX, nTilePosY, nTileWidth, nTileHeight);
+-    }
+-#endif // IOS
+-
+     /**
+      *  Insert certificate (in binary form) to the certificate store.
+      */
+@@ -886,6 +859,90 @@ public:
+         mpDoc->pClass->setViewTimezone(mpDoc, nId, timezone);
+     }
+ 
++    /** Set if the view should be treated as readonly or not.
++     *
++     * @param nId view ID
++     * @param readOnly
++    */
++    void setViewReadOnly(int nId, const bool readOnly)
++    {
++        mpDoc->pClass->setViewReadOnly(mpDoc, nId, readOnly);
++    }
++
++    /** Set if the view can edit comments on readonly mode or not.
++     *
++     * @param nId view ID
++     * @param allow
++    */
++    void setAllowChangeComments(int nId, const bool allow)
++    {
++        mpDoc->pClass->setAllowChangeComments(mpDoc, nId, allow);
++    }
++
++    /**
++     * Enable/Disable accessibility support for the window with the specified nId.
++     *
++     * @param nId a view ID, returned by createView().
++     * @param nEnabled true/false
++     */
++    void setAccessibilityState(int nId, bool nEnabled)
++    {
++        mpDoc->pClass->setAccessibilityState(mpDoc, nId, nEnabled);
++    }
++
++    /**
++     *  Get the current focused paragraph info:
++     *  {
++     *      "content": paragraph content
++     *      "start": selection start
++     *      "end": selection end
++     *  }
++     */
++    char* getA11yFocusedParagraph()
++    {
++        return mpDoc->pClass->getA11yFocusedParagraph(mpDoc);
++    }
++
++    /// Get the current text cursor position.
++    int getA11yCaretPosition()
++    {
++        return mpDoc->pClass->getA11yCaretPosition(mpDoc);
++    }
++
++    /// Get the information about the current presentation (Impress only).
++    char* getPresentationInfo()
++    {
++        return mpDoc->pClass->getPresentationInfo(mpDoc);
++    }
++
++    /// Create a slide renderer in core for the input slide.
++    bool createSlideRenderer(
++        const char* pSlideHash,
++        int nSlideNumber, unsigned* nViewWidth, unsigned* nViewHeight,
++        bool bRenderBackground, bool bRenderMasterPage)
++    {
++        return mpDoc->pClass->createSlideRenderer(
++            mpDoc, pSlideHash, nSlideNumber, nViewWidth, nViewHeight, bRenderBackground, bRenderMasterPage);
++    }
++
++    /// Clean-up the slideshow (slide renderer)
++    void postSlideshowCleanup()
++    {
++        mpDoc->pClass->postSlideshowCleanup(mpDoc);
++    }
++
++    /// Render the slide layer
++    bool renderNextSlideLayer(unsigned char* pBuffer, bool* bIsBitmapLayer, double* pScale, char** pJsonMessage)
++    {
++        return mpDoc->pClass->renderNextSlideLayer(mpDoc, pBuffer, bIsBitmapLayer, pScale, pJsonMessage);
++    }
++
++    /// Set named view options
++    void setViewOption(const char* pOption, const char* pValue)
++    {
++        mpDoc->pClass->setViewOption(mpDoc, pOption, pValue);
++    }
++
+ #endif // defined LOK_USE_UNSTABLE_API || defined LIBO_INTERNAL_ONLY
+ };
+ 
+@@ -1043,14 +1100,13 @@ public:
+      * @since LibreOffice 6.0
+      * @param pURL macro url to run
+      */
+-
+     bool runMacro( const char* pURL)
+     {
+         return mpThis->pClass->runMacro( mpThis, pURL );
+     }
+ 
+     /**
+-     * Exports the document and signes its content.
++     * Exports the document and signs its content.
+      */
+     bool signDocument(const char* pURL,
+                        const unsigned char* pCertificateBinary, const int nCertificateBinarySize,
+@@ -1146,6 +1202,91 @@ public:
+     {
+         return mpThis->pClass->extractRequest(mpThis, pFilePath);
+     }
++
++    /**
++     * Trim memory usage.
++     *
++     * LibreOfficeKit caches lots of information from large pixmaps
++     * to view and calculation results. When a view has not been
++     * used for some time, depending on the load on memory it can
++     * be useful to free up memory.
++     *
++     * @param nTarget - a negative number means the app is back
++     * in active use, and to re-fill caches, a large positive
++     * number (>=1000) encourages immediate maximum memory saving.
++     */
++    void trimMemory (int nTarget)
++    {
++        mpThis->pClass->trimMemory(mpThis, nTarget);
++    }
++
++    /**
++     * Start a UNO acceptor using the function pointers provides to read and write data to/from the acceptor.
++     *
++     * @param pReceiveURPFromLOContext A pointer that will be passed to your fnRecieveURPFromLO function
++     * @param pSendURPToLOContext A pointer that will be passed to your fnSendURPToLO function
++     * @param fnReceiveURPFromLO A function pointer that LO should use to pass URP back to the caller
++     * @param fnSendURPToLO A function pointer pointer that the caller should use to pass URP to LO
++     */
++    void* startURP(void* pReceiveURPFromLOContext, void* pSendURPToLOContext,
++                   int (*fnReceiveURPFromLO)(void* pContext, const signed char* pBuffer, int nLen),
++                   int (*fnSendURPToLO)(void* pContext, signed char* pBuffer, int nLen))
++    {
++        return mpThis->pClass->startURP(mpThis, pReceiveURPFromLOContext, pSendURPToLOContext,
++                                        fnReceiveURPFromLO, fnSendURPToLO);
++    }
++
++    /**
++     * Stop a function based URP connection you previously started with startURP
++     *
++     * @param pURPContext the context returned by startURP  when starting the connection
++     */
++    void stopURP(void* pURPContext)
++    {
++        mpThis->pClass->stopURP(mpThis, pURPContext);
++    }
++
++    /**
++     * Joins all threads if possible to get down to a single process
++     * which can be forked from safely.
++     *
++     * @returns non-zero for successful join, 0 for failure.
++     */
++    int joinThreads()
++    {
++        return mpThis->pClass->joinThreads(mpThis);
++    }
++
++    /**
++     * Starts all threads that are necessary to continue working
++     * after a joinThreads().
++     */
++    void startThreads()
++    {
++        mpThis->pClass->startThreads(mpThis);
++    }
++
++    /**
++     * Informs that this process is either a parent, or a child
++     * process post-fork, allowing improved resource sharing.
++     */
++    void setForkedChild(bool bIsChild)
++    {
++        return mpThis->pClass->setForkedChild(mpThis, bIsChild);
++    }
++
++    char* extractDocumentStructureRequest(const char* pFilePath, const char* pFilter)
++    {
++        return mpThis->pClass->extractDocumentStructureRequest(mpThis, pFilePath, pFilter);
++    }
++
++    /**
++     * Registers a callback that can determine if there are any pending input events.
++     */
++    void registerAnyInputCallback(LibreOfficeKitAnyInputCallback pCallback, void* pData)
++    {
++        return mpThis->pClass->registerAnyInputCallback(mpThis, pCallback, pData);
++    }
+ };
+ 
+ /// Factory method to create a lok::Office instance.
+diff --git a/include/LibreOfficeKit/LibreOfficeKit.hxx-old b/include/LibreOfficeKit/LibreOfficeKit.hxx-old
+new file mode 100644
+index 000000000..4fb3608c1
+--- /dev/null
++++ b/include/LibreOfficeKit/LibreOfficeKit.hxx-old
+@@ -0,0 +1,1196 @@
++/* -*- Mode: C++; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- */
++/*
++ * This file is part of the LibreOffice project.
++ *
++ * This Source Code Form is subject to the terms of the Mozilla Public
++ * License, v. 2.0. If a copy of the MPL was not distributed with this
++ * file, You can obtain one at http://mozilla.org/MPL/2.0/.
++ */
++
++#pragma once
++
++#include <LibreOfficeKit/LibreOfficeKit.h>
++#include <LibreOfficeKit/LibreOfficeKitEnums.h>
++#include <LibreOfficeKit/LibreOfficeKitInit.h>
++
++/*
++ * The reasons this C++ code is not as pretty as it could be are:
++ *  a) provide a pure C API - that's useful for some people
++ *  b) allow ABI stability - C++ vtables are not good for that.
++ *  c) avoid C++ types as part of the API.
++ */
++namespace lok
++{
++
++/// The lok::Document class represents one loaded document instance.
++class Document
++{
++private:
++    LibreOfficeKitDocument* mpDoc;
++
++public:
++    /// A lok::Document is typically created by the lok::Office::documentLoad() method.
++    Document(LibreOfficeKitDocument* pDoc) :
++        mpDoc(pDoc)
++    {}
++
++    ~Document()
++    {
++        mpDoc->pClass->destroy(mpDoc);
++    }
++
++    /**
++     添加函数为online 解决报错
++     kit/ChildSession.cpp:1255:29: 错误：‘using element_type = class lok::Document’ {aka ‘class lok::Document’} has no member named ‘setViewOption’
++ 1255 |         getLOKitDocument()->setViewOption("dpiscale", dpiScale.c_str());
++      |                             ^~~~~~~~~~~~~
++kit/ChildSession.cpp:1256:29: 错误：‘using element_type = class lok::Document’ {aka ‘class lok::Document’} has no member named ‘setViewOption’
++ 1256 |         getLOKitDocument()->setViewOption("zoom", zoom.c_str());
++      |                             ^~~~~~~~~~~~~
++     **/
++    void setViewOption(const char* pOption, const char* pValue)
++    {
++        if (mpDoc && mpDoc->pClass && mpDoc->pClass->setViewOption)
++            mpDoc->pClass->setViewOption(mpDoc, pOption, pValue);
++    }
++    
++    /**
++     * Stores the document's persistent data to a URL and
++     * continues to be a representation of the old URL.
++     *
++     * @param pUrl the location where to store the document
++     * @param pFormat the format to use while exporting, when omitted, then deducted from pURL's extension
++     * @param pFilterOptions options for the export filter, e.g. SkipImages.
++     *        Another useful FilterOption is "TakeOwnership".  It is consumed
++     *        by the saveAs() itself, and when provided, the document identity
++     *        changes to the provided pUrl - meaning that '.uno:ModifiedStatus'
++     *        is triggered as with the "Save As..." in the UI.
++     *        "TakeOwnership" mode must not be used when saving to PNG or PDF.
++     */
++    bool saveAs(const char* pUrl, const char* pFormat = NULL, const char* pFilterOptions = NULL)
++    {
++        return mpDoc->pClass->saveAs(mpDoc, pUrl, pFormat, pFilterOptions) != 0;
++    }
++
++    /// Gives access to the underlying C pointer.
++    LibreOfficeKitDocument *get() { return mpDoc; }
++
++    /**
++     * Get document type.
++     *
++     * @since LibreOffice 6.0
++     * @return an element of the LibreOfficeKitDocumentType enum.
++     */
++    int getDocumentType()
++    {
++        return mpDoc->pClass->getDocumentType(mpDoc);
++    }
++
++#if defined LOK_USE_UNSTABLE_API || defined LIBO_INTERNAL_ONLY
++    /**
++     * Get number of part that the document contains.
++     *
++     * Part refers to either individual sheets in a Calc, or slides in Impress,
++     * and has no relevance for Writer.
++     */
++    int getParts()
++    {
++        return mpDoc->pClass->getParts(mpDoc);
++    }
++
++    /**
++     * Get the logical rectangle of each part in the document.
++     *
++     * A part refers to an individual page in Writer and has no relevant for
++     * Calc or Impress.
++     *
++     * @return a rectangle list, using the same format as
++     * LOK_CALLBACK_TEXT_SELECTION.
++     */
++    char* getPartPageRectangles()
++    {
++        return mpDoc->pClass->getPartPageRectangles(mpDoc);
++    }
++
++    /// Get the current part of the document.
++    int getPart()
++    {
++        return mpDoc->pClass->getPart(mpDoc);
++    }
++
++    /// Set the current part of the document.
++    void setPart(int nPart)
++    {
++        mpDoc->pClass->setPart(mpDoc, nPart);
++    }
++
++    /// Get the current part's name.
++    char* getPartName(int nPart)
++    {
++        return mpDoc->pClass->getPartName(mpDoc, nPart);
++    }
++
++    /// Get the current part's hash.
++    char* getPartHash(int nPart)
++    {
++        return mpDoc->pClass->getPartHash(mpDoc, nPart);
++    }
++
++    void setPartMode(int nMode)
++    {
++        mpDoc->pClass->setPartMode(mpDoc, nMode);
++    }
++
++    int getEditMode()
++    {
++        return mpDoc->pClass->getEditMode(mpDoc);
++    }
++
++    /**
++     * Renders a subset of the document to a pre-allocated buffer.
++     *
++     * Note that the buffer size and the tile size implicitly supports
++     * rendering at different zoom levels, as the number of rendered pixels and
++     * the rendered rectangle of the document are independent.
++     *
++     * @param pBuffer pointer to the buffer, its size is determined by nCanvasWidth and nCanvasHeight.
++     * @param nCanvasWidth number of pixels in a row of pBuffer.
++     * @param nCanvasHeight number of pixels in a column of pBuffer.
++     * @param nTilePosX logical X position of the top left corner of the rendered rectangle, in TWIPs.
++     * @param nTilePosY logical Y position of the top left corner of the rendered rectangle, in TWIPs.
++     * @param nTileWidth logical width of the rendered rectangle, in TWIPs.
++     * @param nTileHeight logical height of the rendered rectangle, in TWIPs.
++     */
++    void paintTile(unsigned char* pBuffer,
++                          const int nCanvasWidth,
++                          const int nCanvasHeight,
++                          const int nTilePosX,
++                          const int nTilePosY,
++                          const int nTileWidth,
++                          const int nTileHeight)
++    {
++        return mpDoc->pClass->paintTile(mpDoc, pBuffer, nCanvasWidth, nCanvasHeight,
++                                nTilePosX, nTilePosY, nTileWidth, nTileHeight);
++    }
++
++    /**
++     * Renders a window (dialog, popup, etc.) with give id
++     *
++     * @param nWindowId
++     * @param pBuffer Buffer with enough memory allocated to render any dialog
++     * @param x x-coordinate from where the dialog should start painting
++     * @param y y-coordinate from where the dialog should start painting
++     * @param width The width of the dialog image to be painted
++     * @param height The height of the dialog image to be painted
++     * @param dpiscale The dpi scale value used by the client.  Please note
++     *                 that the x, y, width, height are supposed to be the
++     *                 values with dpiscale applied (ie. dialog covering
++     *                 100x100 "normal" pixels with dpiscale '2' will have
++     *                 200x200 width x height), so that it is easy to compute
++     *                 the buffer sizes etc.
++     */
++    void paintWindow(unsigned nWindowId,
++                     unsigned char* pBuffer,
++                     const int x,
++                     const int y,
++                     const int width,
++                     const int height,
++                     const double dpiscale = 1.0,
++                     const int viewId = -1)
++    {
++        return mpDoc->pClass->paintWindowForView(mpDoc, nWindowId, pBuffer, x, y,
++                                                 width, height, dpiscale, viewId);
++    }
++
++    /**
++     * Posts a command to the window (dialog, popup, etc.) with given id
++     *
++     * @param nWindowid
++     */
++    void postWindow(unsigned nWindowId, int nAction, const char* pData = nullptr)
++    {
++        return mpDoc->pClass->postWindow(mpDoc, nWindowId, nAction, pData);
++    }
++
++    /**
++     * Gets the tile mode: the pixel format used for the pBuffer of paintTile().
++     *
++     * @return an element of the LibreOfficeKitTileMode enum.
++     */
++    int getTileMode()
++    {
++        return mpDoc->pClass->getTileMode(mpDoc);
++    }
++
++    /// Get the document sizes in TWIPs.
++    void getDocumentSize(long* pWidth, long* pHeight)
++    {
++        mpDoc->pClass->getDocumentSize(mpDoc, pWidth, pHeight);
++    }
++
++    /// Get the data area (in Calc last row and column).
++    void getDataArea(long nPart, long* pCol, long* pRow)
++    {
++        mpDoc->pClass->getDataArea(mpDoc, nPart, pCol, pRow);
++    }
++
++    /**
++     * Initialize document for rendering.
++     *
++     * Sets the rendering and document parameters to default values that are
++     * needed to render the document correctly using tiled rendering. This
++     * method has to be called right after documentLoad() in case any of the
++     * tiled rendering methods are to be used later.
++     *
++     * Example argument string for text documents:
++     *
++     * {
++     *     ".uno:HideWhitespace":
++     *     {
++     *         "type": "boolean",
++     *         "value": "true"
++     *     }
++     * }
++     *
++     * @param pArguments arguments of the rendering
++     */
++    void initializeForRendering(const char* pArguments = NULL)
++    {
++        mpDoc->pClass->initializeForRendering(mpDoc, pArguments);
++    }
++
++    /**
++     * Registers a callback. LOK will invoke this function when it wants to
++     * inform the client about events.
++     *
++     * @param pCallback the callback to invoke
++     * @param pData the user data, will be passed to the callback on invocation
++     */
++    void registerCallback(LibreOfficeKitCallback pCallback, void* pData)
++    {
++        mpDoc->pClass->registerCallback(mpDoc, pCallback, pData);
++    }
++
++    /**
++     * Posts a keyboard event to the focused frame.
++     *
++     * @param nType Event type, like press or release.
++     * @param nCharCode contains the Unicode character generated by this event or 0
++     * @param nKeyCode contains the integer code representing the key of the event (non-zero for control keys)
++     */
++    void postKeyEvent(int nType, int nCharCode, int nKeyCode)
++    {
++        mpDoc->pClass->postKeyEvent(mpDoc, nType, nCharCode, nKeyCode);
++    }
++
++    /**
++     * Posts a keyboard event to the dialog
++     *
++     * @param nWindowId
++     * @param nType Event type, like press or release.
++     * @param nCharCode contains the Unicode character generated by this event or 0
++     * @param nKeyCode contains the integer code representing the key of the event (non-zero for control keys)
++     */
++    void postWindowKeyEvent(unsigned nWindowId, int nType, int nCharCode, int nKeyCode)
++    {
++        mpDoc->pClass->postWindowKeyEvent(mpDoc, nWindowId, nType, nCharCode, nKeyCode);
++    }
++
++    /**
++     * Posts a mouse event to the document.
++     *
++     * @param nType Event type, like down, move or up.
++     * @param nX horizontal position in document coordinates
++     * @param nY vertical position in document coordinates
++     * @param nCount number of clicks: 1 for single click, 2 for double click
++     * @param nButtons: which mouse buttons: 1 for left, 2 for middle, 4 right
++     * @param nModifier: which keyboard modifier: (see include/vcl/vclenum.hxx for possible values)
++     */
++    void postMouseEvent(int nType, int nX, int nY, int nCount, int nButtons, int nModifier)
++    {
++        mpDoc->pClass->postMouseEvent(mpDoc, nType, nX, nY, nCount, nButtons, nModifier);
++    }
++
++    /**
++     * Posts a mouse event to the window with given id.
++     *
++     * @param nWindowId
++     * @param nType Event type, like down, move or up.
++     * @param nX horizontal position in document coordinates
++     * @param nY vertical position in document coordinates
++     * @param nCount number of clicks: 1 for single click, 2 for double click
++     * @param nButtons: which mouse buttons: 1 for left, 2 for middle, 4 right
++     * @param nModifier: which keyboard modifier: (see include/vcl/vclenum.hxx for possible values)
++     */
++    void postWindowMouseEvent(unsigned nWindowId, int nType, int nX, int nY, int nCount, int nButtons, int nModifier)
++    {
++        mpDoc->pClass->postWindowMouseEvent(mpDoc, nWindowId, nType, nX, nY, nCount, nButtons, nModifier);
++    }
++
++    /**
++     * Posts a dialog event for the window with given id
++     *
++     * @param nWindowId id of the window to notify
++     * @param pArguments arguments of the event.
++     */
++    void sendDialogEvent(unsigned long long int nWindowId, const char* pArguments = NULL)
++    {
++        mpDoc->pClass->sendDialogEvent(mpDoc, nWindowId, pArguments);
++    }
++
++    /**
++     * Posts a UNO command to the document.
++     *
++     * Example argument string:
++     *
++     * {
++     *     "SearchItem.SearchString":
++     *     {
++     *         "type": "string",
++     *         "value": "foobar"
++     *     },
++     *     "SearchItem.Backward":
++     *     {
++     *         "type": "boolean",
++     *         "value": "false"
++     *     }
++     * }
++     *
++     * @param pCommand uno command to be posted to the document, like ".uno:Bold"
++     * @param pArguments arguments of the uno command.
++     */
++    void postUnoCommand(const char* pCommand, const char* pArguments = NULL, bool bNotifyWhenFinished = false)
++    {
++        mpDoc->pClass->postUnoCommand(mpDoc, pCommand, pArguments, bNotifyWhenFinished);
++    }
++
++    /**
++     * Sets the start or end of a text selection.
++     *
++     * @param nType @see LibreOfficeKitSetTextSelectionType
++     * @param nX horizontal position in document coordinates
++     * @param nY vertical position in document coordinates
++     */
++    void setTextSelection(int nType, int nX, int nY)
++    {
++        mpDoc->pClass->setTextSelection(mpDoc, nType, nX, nY);
++    }
++
++    /**
++     * Gets the currently selected text.
++     *
++     * @param pMimeType suggests the return format, for example text/plain;charset=utf-8.
++     * @param pUsedMimeType output parameter to inform about the determined format (suggested one or plain text).
++     */
++    char* getTextSelection(const char* pMimeType, char** pUsedMimeType = NULL)
++    {
++        return mpDoc->pClass->getTextSelection(mpDoc, pMimeType, pUsedMimeType);
++    }
++
++    /**
++     * Gets the type of the selected content.
++     *
++     * In most cases it is more efficient to use getSelectionTypeAndText().
++     *
++     * @return an element of the LibreOfficeKitSelectionType enum.
++     */
++    int getSelectionType()
++    {
++        return mpDoc->pClass->getSelectionType(mpDoc);
++    }
++
++    /**
++     * Gets the type of the selected content and possibly its text.
++     *
++     * This function is a more efficient combination of getSelectionType() and getTextSelection().
++     * It returns the same as getSelectionType(), and additionally if the return value is
++     * LOK_SELTYPE_TEXT then it also returns the same as getTextSelection(), otherwise
++     * pText and pUsedMimeType are unchanged.
++     *
++     * @param pMimeType suggests the return format, for example text/plain;charset=utf-8.
++     * @param pText the currently selected text
++     * @param pUsedMimeType output parameter to inform about the determined format (suggested one or plain text).
++     * @return an element of the LibreOfficeKitSelectionType enum.
++     * @since LibreOffice 7.4
++     */
++    int getSelectionTypeAndText(const char* pMimeType, char** pText, char** pUsedMimeType = NULL)
++    {
++        if (LIBREOFFICEKIT_DOCUMENT_HAS(mpDoc, getSelectionTypeAndText))
++            return mpDoc->pClass->getSelectionTypeAndText(mpDoc, pMimeType, pText, pUsedMimeType);
++        int type = mpDoc->pClass->getSelectionType(mpDoc);
++        if(type == LOK_SELTYPE_TEXT && pText)
++            *pText = mpDoc->pClass->getTextSelection(mpDoc, pMimeType, pUsedMimeType);
++        return type;
++    }
++
++    /**
++     * Gets the content on the clipboard for the current view as a series of binary streams.
++     *
++     * NB. returns a complete set of possible selection types if nullptr is passed for pMimeTypes.
++     *
++     * @param pMimeTypes passes in a nullptr terminated list of mime types to fetch
++     * @param pOutCount     returns the size of the other @pOut arrays
++     * @param pOutMimeTypes returns an array of mime types
++     * @param pOutSizes     returns the size of each pOutStream
++     * @param pOutStreams   the content of each mime-type, of length in @pOutSizes
++     *
++     * @returns: true on success, false on error.
++     */
++    bool getClipboard(const char **pMimeTypes,
++                      size_t      *pOutCount,
++                      char      ***pOutMimeTypes,
++                      size_t     **pOutSizes,
++                      char      ***pOutStreams)
++    {
++        return mpDoc->pClass->getClipboard(mpDoc, pMimeTypes, pOutCount, pOutMimeTypes, pOutSizes, pOutStreams);
++    }
++
++    /**
++     * Populates the clipboard for this view with multiple types of content.
++     *
++     * @param nInCount the number of types to paste
++     * @param pInMimeTypes array of mime type strings
++     * @param pInSizes array of sizes of the data to paste
++     * @param pInStreams array containing the data of the various types
++     *
++     * @return if the supplied data was populated successfully.
++     */
++    bool setClipboard(const size_t  nInCount,
++                      const char  **pInMimeTypes,
++                      const size_t *pInSizes,
++                      const char  **pInStreams)
++    {
++        return mpDoc->pClass->setClipboard(mpDoc, nInCount, pInMimeTypes, pInSizes, pInStreams);
++    }
++
++    /**
++     * Pastes content at the current cursor position.
++     *
++     * @param pMimeType format of pData, for example text/plain;charset=utf-8.
++     * @param pData the actual data to be pasted.
++     * @return if the supplied data was pasted successfully.
++     */
++    bool paste(const char* pMimeType, const char* pData, size_t nSize)
++    {
++        return mpDoc->pClass->paste(mpDoc, pMimeType, pData, nSize);
++    }
++
++    /**
++     * Adjusts the graphic selection.
++     *
++     * @param nType @see LibreOfficeKitSetGraphicSelectionType
++     * @param nX horizontal position in document coordinates
++     * @param nY vertical position in document coordinates
++     */
++    void setGraphicSelection(int nType, int nX, int nY)
++    {
++        mpDoc->pClass->setGraphicSelection(mpDoc, nType, nX, nY);
++    }
++
++    /**
++     * Gets rid of any text or graphic selection.
++     */
++    void resetSelection()
++    {
++        mpDoc->pClass->resetSelection(mpDoc);
++    }
++
++    /**
++     * Returns a json mapping of the possible values for the given command
++     * e.g. {commandName: ".uno:StyleApply", commandValues: {"familyName1" : ["list of style names in the family1"], etc.}}
++     * @param pCommand a UNO command for which the possible values are requested
++     * @return {commandName: unoCmd, commandValues: {possible_values}}
++     */
++    char* getCommandValues(const char* pCommand)
++    {
++        return mpDoc->pClass->getCommandValues(mpDoc, pCommand);
++    }
++
++    /**
++     * Save the client's view so that we can compute the right zoom level
++     * for the mouse events. This only affects CALC.
++     * @param nTilePixelWidth - tile width in pixels
++     * @param nTilePixelHeight - tile height in pixels
++     * @param nTileTwipWidth - tile width in twips
++     * @param nTileTwipHeight - tile height in twips
++     */
++    void setClientZoom(
++            int nTilePixelWidth,
++            int nTilePixelHeight,
++            int nTileTwipWidth,
++            int nTileTwipHeight)
++    {
++        mpDoc->pClass->setClientZoom(mpDoc, nTilePixelWidth, nTilePixelHeight, nTileTwipWidth, nTileTwipHeight);
++    }
++
++    /**
++     * Inform core about the currently visible area of the document on the
++     * client, so that it can perform e.g. page down (which depends on the
++     * visible height) in a sane way.
++     *
++     * @param nX - top left corner horizontal position
++     * @param nY - top left corner vertical position
++     * @param nWidth - area width
++     * @param nHeight - area height
++     */
++    void setClientVisibleArea(int nX, int nY, int nWidth, int nHeight)
++    {
++        mpDoc->pClass->setClientVisibleArea(mpDoc, nX, nY, nWidth, nHeight);
++    }
++
++    /**
++     * Show/Hide a single row/column header outline for Calc documents.
++     *
++     * @param bColumn - if we are dealing with a column or row group
++     * @param nLevel - the level to which the group belongs
++     * @param nIndex - the group entry index
++     * @param bHidden - the new group state (collapsed/expanded)
++     */
++    void setOutlineState(bool bColumn, int nLevel, int nIndex, bool bHidden)
++    {
++        mpDoc->pClass->setOutlineState(mpDoc, bColumn, nLevel, nIndex, bHidden);
++    }
++
++    /**
++     * Create a new view for an existing document with
++     * options similar to documentLoadWithOptions.
++     * By default a loaded document has 1 view.
++     * @return the ID of the new view.
++     */
++    int createView(const char* pOptions = nullptr)
++    {
++        if (LIBREOFFICEKIT_DOCUMENT_HAS(mpDoc, createViewWithOptions))
++            return mpDoc->pClass->createViewWithOptions(mpDoc, pOptions);
++        else
++            return mpDoc->pClass->createView(mpDoc);
++    }
++
++    /**
++     * Destroy a view of an existing document.
++     * @param nId a view ID, returned by createView().
++     */
++    void destroyView(int nId)
++    {
++        mpDoc->pClass->destroyView(mpDoc, nId);
++    }
++
++    /**
++     * Set an existing view of an existing document as current.
++     * @param nId a view ID, returned by createView().
++     */
++    void setView(int nId)
++    {
++        mpDoc->pClass->setView(mpDoc, nId);
++    }
++
++    /**
++     * Get the current view.
++     * @return a view ID, previously returned by createView().
++     */
++    int getView()
++    {
++        return mpDoc->pClass->getView(mpDoc);
++    }
++
++    /**
++     * Get number of views of this document.
++     */
++    int getViewsCount()
++    {
++        return mpDoc->pClass->getViewsCount(mpDoc);
++    }
++
++    /**
++     * Paints a font name or character if provided to be displayed in the font list
++     * @param pFontName the font to be painted
++     */
++    unsigned char* renderFont(const char *pFontName,
++                          const char *pChar,
++                          int *pFontWidth,
++                          int *pFontHeight,
++                          int pOrientation=0)
++    {
++        if (LIBREOFFICEKIT_DOCUMENT_HAS(mpDoc, renderFontOrientation))
++            return mpDoc->pClass->renderFontOrientation(mpDoc, pFontName, pChar, pFontWidth, pFontHeight, pOrientation);
++        else
++            return mpDoc->pClass->renderFont(mpDoc, pFontName, pChar, pFontWidth, pFontHeight);
++    }
++
++    /**
++     * Renders a subset of the document's part to a pre-allocated buffer.
++     *
++     * @param nPart the part number of the document of which the tile is painted.
++     * @see paintTile.
++     */
++    void paintPartTile(unsigned char* pBuffer,
++                              const int nPart,
++                              const int nMode,
++                              const int nCanvasWidth,
++                              const int nCanvasHeight,
++                              const int nTilePosX,
++                              const int nTilePosY,
++                              const int nTileWidth,
++                              const int nTileHeight)
++    {
++        return mpDoc->pClass->paintPartTile(mpDoc, pBuffer, nPart, nMode,
++                                            nCanvasWidth, nCanvasHeight,
++                                            nTilePosX, nTilePosY,
++                                            nTileWidth, nTileHeight);
++    }
++
++    /**
++     * Returns the viewID for each existing view. Since viewIDs are not reused,
++     * viewIDs are not the same as the index of the view in the view array over
++     * time. Use getViewsCount() to know the minimal nSize that's large enough.
++     *
++     * @param pArray the array to write the viewIDs into
++     * @param nSize the size of pArray
++     * @returns true if pArray was large enough and result is written, false
++     * otherwise.
++     */
++    bool getViewIds(int* pArray,
++                           size_t nSize)
++    {
++        return mpDoc->pClass->getViewIds(mpDoc, pArray, nSize);
++    }
++
++    /**
++     * Set the language tag of the window with the specified nId.
++     *
++     * @param nId a view ID, returned by createView().
++     * @param language Bcp47 languageTag, like en-US or so.
++     */
++    void setViewLanguage(int nId, const char* language)
++    {
++        mpDoc->pClass->setViewLanguage(mpDoc, nId, language);
++    }
++
++    /**
++     * Post the text input from external input window, like IME, to given windowId
++     *
++     * @param nWindowId Specify the window id to post the input event to. If
++     * nWindow is 0, the event is posted into the document
++     * @param nType see LibreOfficeKitExtTextInputType
++     * @param pText Text for LOK_EXT_TEXTINPUT
++     */
++    void postWindowExtTextInputEvent(unsigned nWindowId, int nType, const char* pText)
++    {
++        mpDoc->pClass->postWindowExtTextInputEvent(mpDoc, nWindowId, nType, pText);
++    }
++
++#ifdef IOS
++    /**
++     * Renders a subset of the document to a Core Graphics context.
++     *
++     * Note that the buffer size and the tile size implicitly supports
++     * rendering at different zoom levels, as the number of rendered pixels and
++     * the rendered rectangle of the document are independent.
++     *
++     * @param rCGContext the CGContextRef, cast to a void*.
++     * @param nCanvasHeight number of pixels in a column of pBuffer.
++     * @param nTilePosX logical X position of the top left corner of the rendered rectangle, in TWIPs.
++     * @param nTilePosY logical Y position of the top left corner of the rendered rectangle, in TWIPs.
++     * @param nTileWidth logical width of the rendered rectangle, in TWIPs.
++     * @param nTileHeight logical height of the rendered rectangle, in TWIPs.
++     */
++    void paintTileToCGContext(void* rCGContext,
++                              const int nCanvasWidth,
++                              const int nCanvasHeight,
++                              const int nTilePosX,
++                              const int nTilePosY,
++                              const int nTileWidth,
++                              const int nTileHeight)
++    {
++        return mpDoc->pClass->paintTileToCGContext(mpDoc, rCGContext, nCanvasWidth, nCanvasHeight,
++                                                   nTilePosX, nTilePosY, nTileWidth, nTileHeight);
++    }
++#endif // IOS
++
++    /**
++     *  Insert certificate (in binary form) to the certificate store.
++     */
++    bool insertCertificate(const unsigned char* pCertificateBinary,
++                           const int pCertificateBinarySize,
++                           const unsigned char* pPrivateKeyBinary,
++                           const int nPrivateKeyBinarySize)
++    {
++        return mpDoc->pClass->insertCertificate(mpDoc,
++                                                pCertificateBinary, pCertificateBinarySize,
++                                                pPrivateKeyBinary, nPrivateKeyBinarySize);
++    }
++
++    /**
++     *  Add the certificate (in binary form) to the certificate store.
++     *
++     */
++    bool addCertificate(const unsigned char* pCertificateBinary,
++                         const int pCertificateBinarySize)
++    {
++        return mpDoc->pClass->addCertificate(mpDoc,
++                                             pCertificateBinary, pCertificateBinarySize);
++    }
++
++    /**
++     *  Verify signature of the document.
++     *
++     *  Check possible values in include/sfx2/signaturestate.hxx
++     */
++    int getSignatureState()
++    {
++        return mpDoc->pClass->getSignatureState(mpDoc);
++    }
++
++    /**
++     * Gets an image of the selected shapes.
++     * @param pOutput contains the result; use free to deallocate.
++     * @return the size of *pOutput in bytes.
++     */
++    size_t renderShapeSelection(char** pOutput)
++    {
++        return mpDoc->pClass->renderShapeSelection(mpDoc, pOutput);
++    }
++
++    /**
++     * Posts a gesture event to the window with given id.
++     *
++     * @param nWindowId
++     * @param pType Event type, like panStart, panEnd, panUpdate.
++     * @param nX horizontal position in document coordinates
++     * @param nY vertical position in document coordinates
++     * @param nOffset difference value from when the gesture started to current value
++     */
++    void postWindowGestureEvent(unsigned nWindowId,
++                              const char* pType,
++                              int nX, int nY, int nOffset)
++    {
++        return mpDoc->pClass->postWindowGestureEvent(mpDoc, nWindowId, pType, nX, nY, nOffset);
++    }
++
++    /// Set a part's selection mode.
++    /// nSelect is 0 to deselect, 1 to select, and 2 to toggle.
++    void selectPart(int nPart, int nSelect)
++    {
++        mpDoc->pClass->selectPart(mpDoc, nPart, nSelect);
++    }
++
++    /// Moves the selected pages/slides to a new position.
++    /// nPosition is the new position where the selection
++    /// should go. bDuplicate when true will copy instead of move.
++    void moveSelectedParts(int nPosition, bool bDuplicate)
++    {
++        mpDoc->pClass->moveSelectedParts(mpDoc, nPosition, bDuplicate);
++    }
++
++    /**
++     * Resize a window (dialog, popup, etc.) with give id.
++     *
++     * @param nWindowId
++     * @param width The width of the window.
++     * @param height The height of the window.
++     */
++    void resizeWindow(unsigned nWindowId,
++                      const int width,
++                      const int height)
++    {
++        return mpDoc->pClass->resizeWindow(mpDoc, nWindowId, width, height);
++    }
++
++    /**
++     * For deleting many characters all at once
++     *
++     * @param nWindowId Specify the window id to post the input event to. If
++     * nWindow is 0, the event is posted into the document
++     * @param nBefore The characters to be deleted before the cursor position
++     * @param nAfter The characters to be deleted after the cursor position
++     */
++    void removeTextContext(unsigned nWindowId, int nBefore, int nAfter)
++    {
++        mpDoc->pClass->removeTextContext(mpDoc, nWindowId, nBefore, nAfter);
++    }
++
++    /**
++     * Select the Calc function to be pasted into the formula input box
++     *
++     * @param nIndex is the index of the selected function
++     */
++    void completeFunction(const char* pFunctionName)
++    {
++        mpDoc->pClass->completeFunction(mpDoc, pFunctionName);
++    }
++
++    /**
++     * Sets the start or end of a text selection for a dialog.
++     *
++     * @param nWindowId
++     * @param bSwap swap anchor and cursor position of current selection
++     * @param nX horizontal position in document coordinates
++     * @param nY vertical position in document coordinates
++     */
++    void setWindowTextSelection(unsigned nWindowId, bool bSwap, int nX, int nY)
++    {
++        mpDoc->pClass->setWindowTextSelection(mpDoc, nWindowId, bSwap, nX, nY);
++    }
++
++    /**
++     * Posts an event for the form field at the cursor position.
++     *
++     * @param pArguments arguments of the event.
++     */
++    void sendFormFieldEvent(const char* pArguments)
++    {
++        mpDoc->pClass->sendFormFieldEvent(mpDoc, pArguments);
++    }
++
++    void setBlockedCommandList(int nViewId, const char* blockedCommandList)
++    {
++        mpDoc->pClass->setBlockedCommandList(mpDoc, nViewId, blockedCommandList);
++    }
++    /**
++     * Render input search result to a bitmap buffer.
++     *
++     * @param pSearchResult payload containing the search result data
++     * @param pBitmapBuffer contains the bitmap; use free to deallocate.
++     * @param nWidth output bitmap width
++     * @param nHeight output bitmap height
++     * @param nByteSize output bitmap byte size
++     * @return true if successful
++     */
++    bool renderSearchResult(const char* pSearchResult, unsigned char** pBitmapBuffer,
++                            int* pWidth, int* pHeight, size_t* pByteSize)
++    {
++        return mpDoc->pClass->renderSearchResult(mpDoc, pSearchResult, pBitmapBuffer, pWidth, pHeight, pByteSize);
++    }
++
++    /**
++     * Posts an event for the content control at the cursor position.
++     *
++     * @param pArguments arguments of the event.
++     *
++     * Examples:
++     * To select the 3rd list item of the drop-down:
++     * {
++     *     "type": "drop-down",
++     *     "selected": "2"
++     * }
++     *
++     * To change a picture place-holder:
++     * {
++     *     "type": "picture",
++     *     "changed": "file:///path/to/test.png"
++     * }
++     *
++     * To select a date of the current date content control:
++     * {
++     *     "type": "date",
++     *     "selected": "2022-05-29T00:00:00Z"
++     * }
++     */
++    void sendContentControlEvent(const char* pArguments)
++    {
++        mpDoc->pClass->sendContentControlEvent(mpDoc, pArguments);
++    }
++
++    /**
++     * Set the timezone of the window with the specified nId.
++     *
++     * @param nId a view ID, returned by createView().
++     * @param timezone a timezone in the tzfile(5) format (e.g. Pacific/Auckland).
++     */
++    void setViewTimezone(int nId, const char* timezone)
++    {
++        mpDoc->pClass->setViewTimezone(mpDoc, nId, timezone);
++    }
++
++#endif // defined LOK_USE_UNSTABLE_API || defined LIBO_INTERNAL_ONLY
++};
++
++/// The lok::Office class represents one started LibreOfficeKit instance.
++class Office
++{
++private:
++    LibreOfficeKit* mpThis;
++
++public:
++    /// A lok::Office is typically created by the lok_cpp_init() function.
++    Office(LibreOfficeKit* pThis) :
++        mpThis(pThis)
++    {}
++
++    ~Office()
++    {
++        mpThis->pClass->destroy(mpThis);
++    }
++
++    /**
++     * Loads a document from a URL.
++     *
++     * @param pUrl the URL of the document to load
++     * @param pFilterOptions options for the import filter, e.g. SkipImages.
++     *        Another useful FilterOption is "Language=...".  It is consumed
++     *        by the documentLoad() itself, and when provided, LibreOfficeKit
++     *        switches the language accordingly first.
++     * @since pFilterOptions argument added in LibreOffice 5.0
++     */
++    Document* documentLoad(const char* pUrl, const char* pFilterOptions = NULL)
++    {
++        LibreOfficeKitDocument* pDoc = NULL;
++
++        if (LIBREOFFICEKIT_HAS(mpThis, documentLoadWithOptions))
++            pDoc = mpThis->pClass->documentLoadWithOptions(mpThis, pUrl, pFilterOptions);
++        else
++            pDoc = mpThis->pClass->documentLoad(mpThis, pUrl);
++
++        if (pDoc == NULL)
++            return NULL;
++
++        return new Document(pDoc);
++    }
++
++    /// Returns the last error as a string, the returned pointer has to be freed by the caller.
++    char* getError()
++    {
++        return mpThis->pClass->getError(mpThis);
++    }
++
++    /**
++     * Frees the memory pointed to by pFree.
++     *
++     * @since LibreOffice 5.2
++     */
++    void freeError(char* pFree)
++    {
++        mpThis->pClass->freeError(pFree);
++    }
++
++    /**
++     * Registers a callback. LOK will invoke this function when it wants to
++     * inform the client about events.
++     *
++     * @since LibreOffice 6.0
++     * @param pCallback the callback to invoke
++     * @param pData the user data, will be passed to the callback on invocation
++     */
++    void registerCallback(LibreOfficeKitCallback pCallback, void* pData)
++    {
++        mpThis->pClass->registerCallback(mpThis, pCallback, pData);
++    }
++
++    /**
++     * Returns details of filter types.
++     *
++     * Example returned string:
++     *
++     * {
++     *     "writer8": {
++     *         "MediaType": "application/vnd.oasis.opendocument.text"
++     *     },
++     *     "calc8": {
++     *         "MediaType": "application/vnd.oasis.opendocument.spreadsheet"
++     *     }
++     * }
++     *
++     * @since LibreOffice 6.0
++     */
++    char* getFilterTypes()
++    {
++        return mpThis->pClass->getFilterTypes(mpThis);
++    }
++
++    /**
++     * Set bitmask of optional features supported by the client.
++     *
++     * @since LibreOffice 6.0
++     * @see LibreOfficeKitOptionalFeatures
++     */
++    void setOptionalFeatures(unsigned long long features)
++    {
++        return mpThis->pClass->setOptionalFeatures(mpThis, features);
++    }
++
++    /**
++     * Set password required for loading or editing a document.
++     *
++     * Loading the document is blocked until the password is provided.
++     *
++     * @param pURL      the URL of the document, as sent to the callback
++     * @param pPassword the password, nullptr indicates no password
++     *
++     * In response to LOK_CALLBACK_DOCUMENT_PASSWORD, a valid password
++     * will continue loading the document, an invalid password will
++     * result in another LOK_CALLBACK_DOCUMENT_PASSWORD request,
++     * and a NULL password will abort loading the document.
++     *
++     * In response to LOK_CALLBACK_DOCUMENT_PASSWORD_TO_MODIFY, a valid
++     * password will continue loading the document, an invalid password will
++     * result in another LOK_CALLBACK_DOCUMENT_PASSWORD_TO_MODIFY request,
++     * and a NULL password will continue loading the document in read-only
++     * mode.
++     *
++     * @since LibreOffice 6.0
++     */
++    void setDocumentPassword(char const* pURL, char const* pPassword)
++    {
++        mpThis->pClass->setDocumentPassword(mpThis, pURL, pPassword);
++    }
++
++    /**
++     * Get version information of the LOKit process
++     *
++     * @since LibreOffice 6.0
++     * @returns JSON string containing version information in format:
++     * {ProductName: <>, ProductVersion: <>, ProductExtension: <>, BuildId: <>}
++     *
++     * Eg: {"ProductName": "LibreOffice",
++     * "ProductVersion": "5.3",
++     * "ProductExtension": ".0.0.alpha0",
++     * "BuildId": "<full 40 char git hash>"}
++     */
++    char* getVersionInfo()
++    {
++        return mpThis->pClass->getVersionInfo(mpThis);
++    }
++
++    /**
++     * Run a macro.
++     *
++     * Same syntax as on command line is permissible (ie. the macro:// URI forms)
++     *
++     * @since LibreOffice 6.0
++     * @param pURL macro url to run
++     */
++
++    bool runMacro( const char* pURL)
++    {
++        return mpThis->pClass->runMacro( mpThis, pURL );
++    }
++
++    /**
++     * Exports the document and signes its content.
++     */
++    bool signDocument(const char* pURL,
++                       const unsigned char* pCertificateBinary, const int nCertificateBinarySize,
++                       const unsigned char* pPrivateKeyBinary, const int nPrivateKeyBinarySize)
++    {
++        return mpThis->pClass->signDocument(mpThis, pURL,
++                                            pCertificateBinary, nCertificateBinarySize,
++                                            pPrivateKeyBinary, nPrivateKeyBinarySize);
++    }
++
++    /**
++     * Runs the main-loop in the current thread. To trigger this
++     * mode you need to putenv a SAL_LOK_OPTIONS containing 'unipoll'.
++     * The @pPollCallback is called to poll for events from the Kit client
++     * and the @pWakeCallback can be called by internal LibreOfficeKit threads
++     * to wake the caller of 'runLoop' ie. the main thread.
++     *
++     * it is expected that runLoop does not return until Kit exit.
++     *
++     * @pData is a context/closure passed to both methods.
++     */
++    void runLoop(LibreOfficeKitPollCallback pPollCallback,
++                 LibreOfficeKitWakeCallback pWakeCallback,
++                 void* pData)
++    {
++        mpThis->pClass->runLoop(mpThis, pPollCallback, pWakeCallback, pData);
++    }
++
++    /**
++     * Posts a dialog event for the window with given id
++     *
++     * @param nWindowId id of the window to notify
++     * @param pArguments arguments of the event.
++     */
++    void sendDialogEvent(unsigned long long int nWindowId, const char* pArguments = NULL)
++    {
++        mpThis->pClass->sendDialogEvent(mpThis, nWindowId, pArguments);
++    }
++
++    /**
++     * Generic function to toggle and tweak various things in the core LO
++     *
++     * The currently available option names and their allowed values are:
++     *
++     * "profilezonerecording": "start" or "stop"
++     * Start or stop recording profile zone trace data in the process.
++     *
++     * "sallogoverride": "<string>"
++     * Override the SAL_LOG environment variable
++     *
++     * For the syntax of the string see the documentation for "Basic
++     * logging functionality" in LibreOffice internal API
++     * documentation (include/sal/log.hxx). If the logging selector
++     * has been set by this function to a non-empty value, that is used
++     * instead of the environment variable SAL_LOG.
++     *
++     * The parameter is not copied so you should pass a value that
++     * points to memory that will stay valid until you call setOption
++     * with this option name the next time.
++     *
++     * If you pass nullptr or an empty string as value, the
++     * environment variable SAL_LOG is again used as by default. You
++     * can switch back and forth as you like.
++     *
++     * "addfont": "<string>"
++     *
++     * Adds the font at the URL given.
++     *
++     * @param pOption the option name
++     * @param pValue its value
++     */
++    void setOption(const char* pOption, const char* pValue)
++    {
++        mpThis->pClass->setOption(mpThis, pOption, pValue);
++    }
++
++    /**
++     * Debugging tool for triggering a dump of internal state.
++     *
++     * LibreOfficeKit can get into an unhelpful state at run-time when
++     * in heavy use. This provides a critical tool for inspecting
++     * relevant internal state.
++     *
++     * @param pOption future expansion - string options.
++     * @param pState - heap allocated, C string containing the state dump.
++     */
++    void dumpState(const char* pOption, char** pState)
++    {
++        mpThis->pClass->dumpState(mpThis, pOption, pState);
++    }
++
++    char* extractRequest(const char* pFilePath)
++    {
++        return mpThis->pClass->extractRequest(mpThis, pFilePath);
++    }
++
++    /**
++     * 添加stopURP函数，在online项目中使用，解决报错：
++     * kit/ChildSession.cpp:138:34: 错误：‘using element_type = class lok::Office’ {aka ‘class lok::Office’} has no member named ‘stopURP’
++  138 |         _docManager->getLOKit()->stopURP(_URPContext);
++      |
++     * 结束      
++     **/
++    void stopURP(void* sendURPContext) {
++        if (mpThis && mpThis->pClass && mpThis->pClass->stopURP) {
++            mpThis->pClass->stopURP(mpThis, sendURPContext);
++        }
++    }
++    char* extractDocumentStructureRequest(const char* filePath, const char* filter) {
++        if (mpThis && mpThis->pClass && mpThis->pClass->extractDocumentStructureRequest) {
++            return mpThis->pClass->extractDocumentStructureRequest(mpThis, filePath, filter);
++        }
++        return nullptr;
++    }
++};
++
++/// Factory method to create a lok::Office instance.
++inline Office* lok_cpp_init(const char* pInstallPath, const char* pUserProfileUrl = NULL)
++{
++    LibreOfficeKit* pThis = lok_init_2(pInstallPath, pUserProfileUrl);
++    if (pThis == NULL || pThis->pClass->nSize == 0)
++        return NULL;
++    return new ::lok::Office(pThis);
++}
++
++}
++
++/* vim:set shiftwidth=4 softtabstop=4 expandtab: */
+diff --git a/include/LibreOfficeKit/LibreOfficeKitTypes.h b/include/LibreOfficeKit/LibreOfficeKitTypes.h
+index 5f4e3d4d8..edfb5c533 100644
+--- a/include/LibreOfficeKit/LibreOfficeKitTypes.h
++++ b/include/LibreOfficeKit/LibreOfficeKitTypes.h
+@@ -27,6 +27,10 @@ typedef void (*LibreOfficeKitCallback)(int nType, const char* pPayload, void* pD
+ typedef int (*LibreOfficeKitPollCallback)(void* pData, int timeoutUs);
+ typedef void (*LibreOfficeKitWakeCallback)(void* pData);
+ 
++
++/// @see lok::Office::registerAnyInputCallback()
++typedef bool (*LibreOfficeKitAnyInputCallback)(void* pData, int nMostUrgentPriority);
++
+ #ifdef __cplusplus
+ }
+ #endif
+diff --git a/jvmfwk/inc/vendorbase.hxx b/jvmfwk/inc/vendorbase.hxx
+index 4a0190eb0..c0008c5ff 100644
+--- a/jvmfwk/inc/vendorbase.hxx
++++ b/jvmfwk/inc/vendorbase.hxx
+@@ -75,9 +75,11 @@ OpenJDK at least, but probably not true for Lemotes JDK */
+ #define JFW_PLUGIN_ARCH "alpha"
+ #elif defined AARCH64
+ #define JFW_PLUGIN_ARCH "aarch64"
+-#else // SPARC, INTEL, POWERPC, MIPS, MIPS64, ARM, IA64, M68K, HPPA, ALPHA
++#elif defined LOONGARCH64
++#define JFW_PLUGIN_ARCH "loongarch64"
++#else // SPARC, INTEL, POWERPC, MIPS, MIPS64, ARM, IA64, M68K, HPPA, ALPHA, LOONGARCH64
+ #error unknown platform
+-#endif // SPARC, INTEL, POWERPC, MIPS, MIPS64, ARM, IA64, M68K, HPPA, ALPHA
++#endif // SPARC, INTEL, POWERPC, MIPS, MIPS64, ARM, IA64, M68K, HPPA, ALPHA, LOONGARCH64
+ 
+ class MalformedVersionException final : public std::exception
+ {
+diff --git a/solenv/gbuild/platform/LINUX_LOONGARCH64_GCC.mk b/solenv/gbuild/platform/LINUX_LOONGARCH64_GCC.mk
+new file mode 100644
+index 000000000..15cb0bb6f
+--- /dev/null
++++ b/solenv/gbuild/platform/LINUX_LOONGARCH64_GCC.mk
+@@ -0,0 +1,12 @@
++# -*- Mode: makefile-gmake; tab-width: 4; indent-tabs-mode: t; fill-column: 100 -*-
++#
++# This file is part of the LibreOffice project.
++#
++# This Source Code Form is subject to the terms of the Mozilla Public
++# License, v. 2.0. If a copy of the MPL was not distributed with this
++# file, You can obtain one at http://mozilla.org/MPL/2.0/.
++#
++
++include $(GBUILDDIR)/platform/linux.mk
++
++# vim: set noet sw=4 ts=4:
+-- 
+2.41.3
+
diff --git a/docker/from-source/Debian-Loongarch64 b/docker/from-source/Debian-Loongarch64
new file mode 100644
index 0000000..5f84521
--- /dev/null
+++ b/docker/from-source/Debian-Loongarch64
@@ -0,0 +1,45 @@
+# This Source Code Form is subject to the terms of the Mozilla Public
+# License, v. 2.0. If a copy of the MPL was not distributed with this
+# file, You can obtain one at http://mozilla.org/MPL/2.0/.
+
+FROM lcr.loongnix.cn/library/debian:sid
+
+# get the latest fixes
+# install LibreOffice run-time dependencies
+# install adduser, findutils, openssl and cpio that we need later
+# install an editor
+# tdf#117557 - Add CJK Fonts to Collabora Online Docker Image
+RUN apt-get update && \
+    apt-get -y install libpng16-16 fontconfig adduser cpio \
+               findutils nano libcap2-bin openssl inotify-tools \
+               procps libubsan1 openssh-client fonts-wqy-zenhei \
+               fonts-wqy-microhei fonts-droid-fallback fonts-noto-cjk \
+               ca-certificates libnss3
+
+
+# copy freshly built LOKit and Collabora Online
+COPY /instdir /
+
+# copy the shell script which can start Collabora Online (coolwsd)
+COPY /start-collabora-online.sh /
+COPY /start-collabora-online.pl /
+
+# set up Collabora Online (normally done by postinstall script of package)
+# Fix permissions
+RUN setcap cap_fowner,cap_chown,cap_mknod,cap_sys_chroot=ep /usr/bin/coolforkit && \
+    setcap cap_sys_admin=ep /usr/bin/coolmount && \
+    adduser --quiet --system --group --home /opt/cool cool && \
+    rm -rf /opt/cool && \
+    mkdir -p /opt/cool/child-roots && \
+    coolwsd-systemplate-setup /opt/cool/systemplate /opt/lokit >/dev/null 2>&1 && \
+    touch /var/log/coolwsd.log && \
+    chown cool:cool /var/log/coolwsd.log && \
+    chown -R cool:cool /opt/ && \
+    chown -R cool:cool /etc/coolwsd
+
+EXPOSE 9980
+
+# switch to cool user (use numeric user id to be compatible with Kubernetes Pod Security Policies)
+USER 100
+
+CMD ["/start-collabora-online.sh"]
diff --git a/docker/from-source/build.sh b/docker/from-source/build.sh
index 2ff4fcd..0bea8cd 100755
--- a/docker/from-source/build.sh
+++ b/docker/from-source/build.sh
@@ -23,10 +23,10 @@ sudo echo "works"
 
 # Check env variables
 if [ -z "$DOCKER_HUB_REPO" ]; then
-  DOCKER_HUB_REPO="mydomain/collaboraonline"
+  DOCKER_HUB_REPO="lcr.loongnix.cn/library/collaboraonline"
 fi;
 if [ -z "$DOCKER_HUB_TAG" ]; then
-  DOCKER_HUB_TAG="latest"
+  DOCKER_HUB_TAG="22-05"
 fi;
 echo "Using Docker Hub Repository: '$DOCKER_HUB_REPO' with tag '$DOCKER_HUB_TAG'."
 
@@ -52,7 +52,10 @@ echo "LOKit (core) build target: '$CORE_BUILD_TARGET'"
 SRCDIR=$(realpath `dirname $0`)
 INSTDIR="$SRCDIR/instdir"
 
-if [ -z "$(lsb_release -si)" ]; then
+# 检测系统架构，如果是 loongarch64，则设置 HOST_OS 为 Debian
+if [ "$(uname -m)" = "loongarch64" ]; then
+  HOST_OS="Debian-Loongarch64"
+elif [ -z "$(lsb_release -si)" ]; then
   echo "WARNING: Unable to determine your distribution"
   echo "(Is lsb_release installed?)"
   echo "Using Ubuntu Dockerfile."
@@ -76,9 +79,10 @@ mkdir -p "$INSTDIR"
 ##### build static poco #####
 
 if test ! -f poco/lib/libPocoFoundation.a ; then
-    wget https://github.com/pocoproject/poco/archive/poco-1.11.1-release.tar.gz
-    tar -xzf poco-1.11.1-release.tar.gz
-    cd poco-poco-1.11.1-release/
+#    wget https://github.com/pocoproject/poco/archive/poco-1.11.1-release.tar.gz
+    wget https://github.com/Loongson-Cloud-Community/poco/archive/refs/tags/1.11.1.tar.gz
+    tar -xzf 1.11.1.tar.gz
+    mv poco-1.11.1 poco-poco-1.11.1-release && cd poco-poco-1.11.1-release/
     ./configure --static --no-tests --no-samples --no-sharedlibs --cflags="-fPIC" --omit=Zip,Data,Data/SQLite,Data/ODBC,Data/MySQL,MongoDB,PDF,CppParser,PageCompiler,Redis,Encodings,ActiveRecord --prefix=$BUILDDIR/poco
     make -j $(nproc)
     make install
@@ -90,28 +94,20 @@ fi
 
 # core repo
 if test ! -d core ; then
-  git clone https://git.libreoffice.org/core || exit 1
+  git clone --depth 1 -b $CORE_BRANCH https://git.libreoffice.org/core || exit 1
 fi
 
-( cd core && git fetch --all && git checkout $CORE_BRANCH && ./g pull -r ) || exit 1
-
+( cd core && git reset --hard && git clean -fdx && git apply ../../0001-add-loong64-support.patch ) || exit 1
+#git apply 0001-Add-loongarch64-support.patch
 
 # online repo
 if test ! -d online ; then
-  git clone "$COLLABORA_ONLINE_REPO" online || exit 1
+#  git clone --depth 1 -b $CORE_BRANCH "$COLLABORA_ONLINE_REPO" online || exit 1
+   git clone --depth 1 -b distro/collabora/co-22-05 https://github.com/CollaboraOnline/online || exit 1
 fi
 
-( cd online && git fetch --all && git checkout -f $COLLABORA_ONLINE_BRANCH && git clean -f -d && git pull -r ) || exit 1
-
-
-# brand repo
-if test ! -d online-branding ; then
-  git clone git@gitlab.collabora.com:productivity/online-branding.git online-branding || echo "Could not clone this proprietary repo"
-fi
+( cd online && git reset --hard && git clean -fdx && git apply ../../0001-add-loong64-support-online.patch) || exit 1
 
-if test -d online-branding ; then
-  ( cd online-branding && git pull -r ) || exit 1
-fi
 
 ##### LOKit (core) #####
 
@@ -131,19 +127,12 @@ cp -a core/instdir "$INSTDIR"/opt/lokit
 
 # build
 ( cd online && ./autogen.sh ) || exit 1
-( cd online && ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var --enable-silent-rules --with-lokit-path="$BUILDDIR"/core/include --with-lo-path=/opt/lokit --with-poco-includes=$BUILDDIR/poco/include --with-poco-libs=$BUILDDIR/poco/lib $ONLINE_EXTRA_BUILD_OPTIONS) || exit 1
+( cd online && ./configure --disable-werror --prefix=/usr --sysconfdir=/etc --localstatedir=/var --enable-silent-rules --with-lokit-path="$BUILDDIR"/core/include --with-lo-path=/opt/lokit --with-poco-includes=$BUILDDIR/poco/include --with-poco-libs=$BUILDDIR/poco/lib $ONLINE_EXTRA_BUILD_OPTIONS) || exit 1
 ( cd online && make -j $(nproc)) || exit 1
 
 # copy stuff
 ( cd online && DESTDIR="$INSTDIR" make install ) || exit 1
 
-##### online branding #####
-if test -d online-branding ; then
-  cd online-branding
-  ./brand.sh $INSTDIR/opt/lokit $INSTDIR/usr/share/coolwsd/browser/dist 6 # CODE
-  ./brand.sh $INSTDIR/opt/lokit $INSTDIR/usr/share/coolwsd/browser/dist 7 # Nextcloud Office
-  cd ..
-fi
 
 # Create new docker image
 if [ -z "$NO_DOCKER_IMAGE" ]; then
-- 
2.41.3

